<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>你别睡这么晚！</title>
  
  <subtitle>我有一只小兔兔🐇</subtitle>
  <link href="https://dont-sleep-so-late.github.io/atom.xml" rel="self"/>
  
  <link href="https://dont-sleep-so-late.github.io/"/>
  <updated>2024-01-28T15:57:57.826Z</updated>
  <id>https://dont-sleep-so-late.github.io/</id>
  
  <author>
    <name>你别睡这么晚</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue3学习</title>
    <link href="https://dont-sleep-so-late.github.io/2024/01/28/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/"/>
    <id>https://dont-sleep-so-late.github.io/2024/01/28/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/</id>
    <published>2024-01-28T15:31:36.000Z</published>
    <updated>2024-01-28T15:57:57.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-Vue3简介"><a href="#1-Vue3简介" class="headerlink" title="1. Vue3简介"></a>1. Vue3简介</h1><ul><li><p>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</p></li><li><p>经历了：<a href="https://github.com/vuejs/core/commits/main">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors">300+贡献者</a></p></li><li><p>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece · vuejs&#x2F;core</a></p></li><li><p>截止2023年10月，最新的公开版本为：<code>3.3.4</code></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /></li></ul><h2 id="1-1-【性能的提升】"><a href="#1-1-【性能的提升】" class="headerlink" title="1.1. 【性能的提升】"></a>1.1. 【性能的提升】</h2><ul><li><p>打包大小减少<code>41%</code>。</p></li><li><p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p></li><li><p>内存减少<code>54%</code>。</p></li></ul><h2 id="1-2-【-源码的升级】"><a href="#1-2-【-源码的升级】" class="headerlink" title="1.2.【 源码的升级】"></a>1.2.【 源码的升级】</h2><ul><li><p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p></li><li><p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p></li></ul><h2 id="1-3-【拥抱TypeScript】"><a href="#1-3-【拥抱TypeScript】" class="headerlink" title="1.3. 【拥抱TypeScript】"></a>1.3. 【拥抱TypeScript】</h2><ul><li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li></ul><h2 id="1-4-【新的特性】"><a href="#1-4-【新的特性】" class="headerlink" title="1.4. 【新的特性】"></a>1.4. 【新的特性】</h2><ol><li><p><code>Composition API</code>（组合<code>API</code>）：</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>与<code>reactive</code></p></li><li><p><code>computed</code>与<code>watch</code></p><p>……</p></li></ul></li><li><p>新的内置组件：</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>……</p></li></ul></li><li><p>其他改变：</p><ul><li><p>新的生命周期钩子</p></li><li><p><code>data</code> 选项应始终被声明为一个函数</p></li><li><p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p><p>……</p></li></ul></li></ol><h1 id="2-创建Vue3工程"><a href="#2-创建Vue3工程" class="headerlink" title="2. 创建Vue3工程"></a>2. 创建Vue3工程</h1><h2 id="2-1-【基于-vue-cli-创建】"><a href="#2-1-【基于-vue-cli-创建】" class="headerlink" title="2.1. 【基于 vue-cli 创建】"></a>2.1. 【基于 vue-cli 创建】</h2><p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">官方文档</a></p><blockquote><p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行创建命令</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  随后选择3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-【基于-vite-创建】-推荐"><a href="#2-2-【基于-vite-创建】-推荐" class="headerlink" title="2.2. 【基于 vite 创建】(推荐)"></a>2.2. 【基于 vite 创建】(推荐)</h2><p><code>vite</code> 是新一代前端构建工具，官网地址：<a href="https://vitejs.cn/">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p><ul><li>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</li><li>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</li><li>真正的按需编译，不再等待整个应用编译完成。</li><li><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：<br><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpack构建" title="webpack构建" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="vite构建" title="vite构建" style="zoom: 20%;box-shadow:0 0 10px black" /></li></ul><ul><li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">官方文档</a>）</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.创建命令</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.具体配置</span></span><br><span class="line"><span class="comment">## 配置项目名称</span></span><br><span class="line">√ Project name: vue3_test</span><br><span class="line"><span class="comment">## 是否添加TypeScript支持</span></span><br><span class="line">√ Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## 是否添加JSX支持</span></span><br><span class="line">√ Add JSX Support?  No</span><br><span class="line"><span class="comment">## 是否添加路由环境</span></span><br><span class="line">√ Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## 是否添加pinia环境</span></span><br><span class="line">√ Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## 是否添加单元测试</span></span><br><span class="line">√ Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## 是否添加端到端测试方案</span></span><br><span class="line">√ Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? » No</span><br><span class="line"><span class="comment">## 是否添加ESLint语法检查</span></span><br><span class="line">√ Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## 是否添加Prettiert代码格式化</span></span><br><span class="line">√ Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p>自己动手编写一个App组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //组件名</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>安装官方推荐的<code>vscode</code>插件：</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/volar.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231218085906380.png" alt="image-20231218085906380" style="zoom:42%;" /> <p>总结：</p><ul><li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li><li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的<code>JavaScript</code>。</li><li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li></ul><h2 id="2-3-【一个简单的效果】"><a href="#2-3-【一个简单的效果】" class="headerlink" title="2.3. 【一个简单的效果】"></a>2.3. 【一个简单的效果】</h2><p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;张三&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="3-Vue3核心语法"><a href="#3-Vue3核心语法" class="headerlink" title="3. Vue3核心语法"></a>3. Vue3核心语法</h1><h2 id="3-1-【OptionsAPI-与-CompositionAPI】"><a href="#3-1-【OptionsAPI-与-CompositionAPI】" class="headerlink" title="3.1.  【OptionsAPI 与 CompositionAPI】"></a>3.1.  【OptionsAPI 与 CompositionAPI】</h2><ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li><li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul><h3 id="Options-API-的弊端"><a href="#Options-API-的弊端" class="headerlink" title="Options API 的弊端"></a>Options API 的弊端</h3><p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><h3 id="Composition-API-的优势"><a href="#Composition-API-的优势" class="headerlink" title="Composition API 的优势"></a>Composition API 的优势</h3><p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>说明：以上四张动图原创作者：大帅老猿</p></blockquote><h2 id="3-2-【拉开序幕的-setup】"><a href="#3-2-【拉开序幕的-setup】" class="headerlink" title="3.2. 【拉开序幕的 setup】"></a>3.2. 【拉开序幕的 setup】</h2><h3 id="setup-概述"><a href="#setup-概述" class="headerlink" title="setup 概述"></a>setup 概述</h3><p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong>_<strong>”</strong>_，组件中所用到的：数据、方法、计算属性、监视……等等，均配置在<code>setup</code>中。</p><p>特点如下：</p><ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li><li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li><li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      // 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span><br><span class="line">      let name = &#x27;张三&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">      // 方法，原来写在methods中</span><br><span class="line">      function changeName()&#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //注意：此时这么修改name页面是不变化的</span><br><span class="line">        console.log(name)</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge()&#123;</span><br><span class="line">        age += 1 //注意：此时这么修改age页面是不变化的</span><br><span class="line">        console.log(age)</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel()&#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 返回一个对象，对象中的内容，模板中可以直接使用</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="setup-的返回值"><a href="#setup-的返回值" class="headerlink" title="setup 的返回值"></a>setup 的返回值</h3><ul><li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用<strong>（重点关注）。</strong></li><li>若返回一个<strong>函数</strong>：则可以自定义渲染内容，代码如下：</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;你好啊！&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setup-与-Options-API-的关系"><a href="#setup-与-Options-API-的关系" class="headerlink" title="setup 与 Options API 的关系"></a>setup 与 Options API 的关系</h3><ul><li><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>……）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</li><li>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>……）。</li><li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li></ul><h3 id="setup-语法糖"><a href="#setup-语法糖" class="headerlink" title="setup 语法糖"></a>setup 语法糖</h3><p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去，代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changAge&quot;&gt;年龄+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下面的写法是setup语法糖 --&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  console.log(this) //undefined</span><br><span class="line">  </span><br><span class="line">  // 数据（注意：此时的name、age、tel都不是响应式数据）</span><br><span class="line">  let name = &#x27;张三&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changName()&#123;</span><br><span class="line">    name = &#x27;李四&#x27;//注意：此时这么修改name页面是不变化的</span><br><span class="line">  &#125;</span><br><span class="line">  function changAge()&#123;</span><br><span class="line">    console.log(age)</span><br><span class="line">    age += 1 //注意：此时这么修改age页面是不变化的</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>扩展：上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p><ol><li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>第二步：<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>第三步：<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol><h2 id="3-3-【ref-创建：基本类型的响应式数据】"><a href="#3-3-【ref-创建：基本类型的响应式数据】" class="headerlink" title="3.3. 【ref 创建：基本类型的响应式数据】"></a>3.3. 【ref 创建：基本类型的响应式数据】</h2><ul><li><strong>作用：</strong>定义响应式变量。</li><li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li><li><strong>返回值：</strong>一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li><li><strong>注意点：</strong><ul><li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li><li>对于<code>let name = ref(&#39;张三&#39;)</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  // name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。</span><br><span class="line">  let name = ref(&#x27;张三&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  // tel就是一个普通的字符串，不是响应式的</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    // JS中操作ref对象时候需要.value</span><br><span class="line">    name.value = &#x27;李四&#x27;</span><br><span class="line">    console.log(name.value)</span><br><span class="line"></span><br><span class="line">    // 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。</span><br><span class="line">    // name = ref(&#x27;zhang-san&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    // JS中操作ref对象时候需要.value</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-4-【reactive-创建：对象类型的响应式数据】"><a href="#3-4-【reactive-创建：对象类型的响应式数据】" class="headerlink" title="3.4. 【reactive 创建：对象类型的响应式数据】"></a>3.4. 【reactive 创建：对象类型的响应式数据】</h2><ul><li><strong>作用：</strong>定义一个<strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li><li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li><li><strong>返回值：</strong>一个<code>Proxy</code>的实例对象，简称：响应式对象。</li><li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;游戏列表：&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;修改汽车价格&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一游戏&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let car = reactive(&#123; brand: &#x27;奔驰&#x27;, price: 100 &#125;)</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;英雄联盟&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;王者荣耀&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;原神&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games[0].name = &#x27;流星蝴蝶剑&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-5-【ref-创建：对象类型的响应式数据】"><a href="#3-5-【ref-创建：对象类型的响应式数据】" class="headerlink" title="3.5. 【ref 创建：对象类型的响应式数据】"></a>3.5. 【ref 创建：对象类型的响应式数据】</h2><ul><li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li><li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;游戏列表：&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;修改汽车价格&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一游戏&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let car = ref(&#123; brand: &#x27;奔驰&#x27;, price: 100 &#125;)</span><br><span class="line">let games = ref([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;英雄联盟&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;王者荣耀&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;原神&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = ref(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(car)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.value.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games.value[0].name = &#x27;流星蝴蝶剑&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.value.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-6-【ref-对比-reactive】"><a href="#3-6-【ref-对比-reactive】" class="headerlink" title="3.6. 【ref 对比 reactive】"></a>3.6. 【ref 对比 reactive】</h2><p>宏观角度看：</p><blockquote><ol><li><p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p></li><li><p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p></li></ol></blockquote><ul><li>区别：</li></ul><blockquote><ol><li><p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>volar</code>插件自动添加<code>.value</code>）。</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/自动补充value.png" alt="自动补充value" style="zoom:50%;border-radius:20px" /> </li><li><p><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</p></li></ol></blockquote><ul><li>使用原则：</li></ul><blockquote><ol><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li><li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li><li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol></blockquote><h2 id="3-7-【toRefs-与-toRef】"><a href="#3-7-【toRefs-与-toRef】" class="headerlink" title="3.7. 【toRefs 与 toRef】"></a>3.7. 【toRefs 与 toRef】</h2><ul><li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li><li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li><li>语法如下：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;性别：&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;修改性别&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;name:&#x27;张三&#x27;, age:18, gender:&#x27;男&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">  // 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span><br><span class="line">  let &#123;name,gender&#125; =  toRefs(person)</span><br><span class="line"></span><br><span class="line">  // 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力</span><br><span class="line">  let age = toRef(person,&#x27;age&#x27;)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeGender()&#123;</span><br><span class="line">    gender.value = &#x27;女&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-8-【computed】"><a href="#3-8-【computed】" class="headerlink" title="3.8. 【computed】"></a>3.8. 【computed】</h2><p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/computed.gif" style="zoom:20%;" />  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;全名改为：li-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // 计算属性——只读取，不修改</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // 计算属性——既读取又修改</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // 读取</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // 修改</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      console.log(&#x27;有人修改了fullName&#x27;,val)</span><br><span class="line">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br><span class="line">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-9-【watch】"><a href="#3-9-【watch】" class="headerlink" title="3.9.【watch】"></a>3.9.【watch】</h2><ul><li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li><li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li></ul><blockquote><ol><li><code>ref</code>定义的数据。</li><li><code>reactive</code>定义的数据。</li><li>函数返回一个值（<code>getter</code>函数）。</li><li>一个包含上述内容的数组。</li></ol></blockquote><p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p><h3 id="情况一"><a href="#情况一" class="headerlink" title="* 情况一"></a>* 情况一</h3><p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // 监视，情况一：监视【ref】定义的【基本类型】数据</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sum变化了&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="情况二"><a href="#情况二" class="headerlink" title="* 情况二"></a>* 情况二</h3><p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p><blockquote><p>注意：</p><ul><li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p></li><li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;李四&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视</span><br><span class="line">    watch的第一个参数是：被监视的数据</span><br><span class="line">    watch的第二个参数是：监视的回调</span><br><span class="line">    watch的第三个参数是：配置对象（deep、immediate等等.....） </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="情况三"><a href="#情况三" class="headerlink" title="*  情况三"></a>*  情况三</h3><p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;修改obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;李四&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Obj变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="情况四"><a href="#情况四" class="headerlink" title="* 情况四"></a>* 情况四</h3><p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p><ol><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li><li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li></ol><p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;奔驰&#x27;,</span><br><span class="line">      c2:&#x27;宝马&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;奥迪&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;大众&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.name变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="情况五"><a href="#情况五" class="headerlink" title="* 情况五"></a>* 情况五</h3><p>监视上述的多个数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况五：监视上述的多个数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;奔驰&#x27;,</span><br><span class="line">      c2:&#x27;宝马&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;奥迪&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;大众&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况五：监视上述的多个数据</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-10-【watchEffect】"><a href="#3-10-【watchEffect】" class="headerlink" title="3.10. 【watchEffect】"></a>3.10. 【watchEffect】</h2><ul><li><p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p></li><li><p><code>watch</code>对比<code>watchEffect</code></p><blockquote><ol><li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p></li><li><p><code>watch</code>：要明确指出监视的数据</p></li><li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p></li></ol></blockquote></li><li><p>示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;需求：水温达到50℃，或水位达到20cm，则联系服务器&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;水温：&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;水位：&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;水温+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;水位+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let temp = ref(0)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    height.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 用watch实现，需要明确的指出要监视：temp、height</span><br><span class="line">  watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // 从value中获取最新的temp值、height值</span><br><span class="line">    const [newTemp,newHeight] = value</span><br><span class="line">    // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br><span class="line">    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;</span><br><span class="line">      console.log(&#x27;联系服务器&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 用watchEffect实现，不用</span><br><span class="line">  const stopWtach = watchEffect(()=&gt;&#123;</span><br><span class="line">    // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br><span class="line">    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;</span><br><span class="line">      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br><span class="line">      console.log(&#x27;联系服务器&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 水温达到100，或水位达到50，取消监视</span><br><span class="line">    if(temp.value === 100 || height.value === 50)&#123;</span><br><span class="line">      console.log(&#x27;清理了&#x27;)</span><br><span class="line">      stopWtach()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-11-【标签的-ref-属性】"><a href="#3-11-【标签的-ref-属性】" class="headerlink" title="3.11. 【标签的 ref 属性】"></a>3.11. 【标签的 ref 属性】</h2><p>作用：用于注册模板引用。</p><blockquote><ul><li><p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p></li><li><p>用在组件标签上，获取的是组件实例对象。</p></li></ul></blockquote><p>用在普通<code>DOM</code>标签上：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;尚硅谷&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;前端&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;点我打印内容&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let title1 = ref()</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let title3 = ref()</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    // 通过id获取元素</span><br><span class="line">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br><span class="line">    // 打印内容</span><br><span class="line">    console.log((t1 as HTMLElement).innerText)</span><br><span class="line">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br><span class="line">    console.log(t1?.innerText)</span><br><span class="line">    </span><br><span class="line">/************************************/</span><br><span class="line"></span><br><span class="line">    // 通过ref获取元素</span><br><span class="line">    console.log(title1.value)</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">    console.log(title3.value)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>用在组件标签上：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let ren = ref()</span><br><span class="line"></span><br><span class="line">  function test()&#123;</span><br><span class="line">    console.log(ren.value.name)</span><br><span class="line">    console.log(ren.value.age)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">// 数据</span><br><span class="line">  let name = ref(&#x27;张三&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  /****************************/</span><br><span class="line">  /****************************/</span><br><span class="line">  // 使用defineExpose将组件中的数据交给外部</span><br><span class="line">  defineExpose(&#123;name,age&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-12-【props】"><a href="#3-12-【props】" class="headerlink" title="3.12. 【props】"></a>3.12. 【props】</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接口，限制每个Person对象的格式</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:string,</span><br><span class="line"><span class="attr">name</span>:string,</span><br><span class="line"> <span class="attr">age</span>:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个自定义类型Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>中代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Person :list=&quot;persons&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"> import &#123;type Persons&#125; from &#x27;./types&#x27;</span><br><span class="line"></span><br><span class="line"> let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123;id:&#x27;e98219e12&#x27;,name:&#x27;张三&#x27;,age:18&#125;,</span><br><span class="line">   &#123;id:&#x27;e98219e13&#x27;,name:&#x27;李四&#x27;,age:19&#125;,</span><br><span class="line">    &#123;id:&#x27;e98219e14&#x27;,name:&#x27;王五&#x27;,age:20&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>中代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">// 第一种写法：仅接收</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// 第二种写法：接收+限制类型</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// 第三种写法：接收+限制类型+指定默认值+限制必要性</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;小猪佩奇&#x27;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="3-13-【生命周期】"><a href="#3-13-【生命周期】" class="headerlink" title="3.13. 【生命周期】"></a>3.13. 【生命周期】</h2><ul><li><p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p></li><li><p>规律：</p><blockquote><p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p></blockquote></li><li><p><code>Vue2</code>的生命周期</p><blockquote><p>创建阶段：<code>beforeCreate</code>、<code>created</code></p><p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p><p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p><p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>的生命周期</p><blockquote><p>创建阶段：<code>setup</code></p><p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p><p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p><p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p></blockquote></li><li><p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p></li><li><p>示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3写法 --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; </span><br><span class="line">    ref, </span><br><span class="line">    onBeforeMount, </span><br><span class="line">    onMounted, </span><br><span class="line">    onBeforeUpdate, </span><br><span class="line">    onUpdated, </span><br><span class="line">    onBeforeUnmount, </span><br><span class="line">    onUnmounted </span><br><span class="line">  &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#x27;setup&#x27;)</span><br><span class="line">  // 生命周期钩子</span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;挂载之前&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;挂载完毕&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;更新之前&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;更新完毕&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;卸载之前&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;卸载完毕&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-14-【自定义hook】"><a href="#3-14-【自定义hook】" class="headerlink" title="3.14. 【自定义hook】"></a>3.14. 【自定义hook】</h2><ul><li><p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p></li><li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p></li></ul><p>示例代码：</p><ul><li><p><code>useSum.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方法</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 发请求</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// 维护数据</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// 处理错误</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 挂载钩子</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>组件中具体使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;点我+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;点我-1&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;加载中......&lt;/span&gt;&lt;br&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;再来一只狗&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineComponent&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import useSum from &#x27;./hooks/useSum&#x27;</span><br><span class="line">  import useDog from &#x27;./hooks/useDog&#x27;</span><br><span class="line"></span><br><span class="line">  let &#123;sum,increment,decrement&#125; = useSum()</span><br><span class="line">  let &#123;dogList,getDog&#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="4-路由"><a href="#4-路由" class="headerlink" title="4. 路由"></a>4. 路由</h1><h2 id="4-1-【对路由的理解】"><a href="#4-1-【对路由的理解】" class="headerlink" title="4.1. 【对路由的理解】"></a>4.1. 【对路由的理解】</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <h2 id="4-2-【基本切换效果】"><a href="#4-2-【基本切换效果】" class="headerlink" title="4.2. 【基本切换效果】"></a>4.2. 【基本切换效果】</h2><ul><li><p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p></li><li><p>路由配置文件代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>代码如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vue路由测试&lt;/h2&gt;</span><br><span class="line">    &lt;!-- 导航区 --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;新闻&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;关于&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 展示区 --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-【两个注意点】"><a href="#4-3-【两个注意点】" class="headerlink" title="4.3. 【两个注意点】"></a>4.3. 【两个注意点】</h2><blockquote><ol><li><p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p></li><li><p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p></li></ol></blockquote><h2 id="4-4-【路由器工作模式】"><a href="#4-4-【路由器工作模式】" class="headerlink" title="4.4.【路由器工作模式】"></a>4.4.【路由器工作模式】</h2><ol><li><p><code>history</code>模式</p><blockquote><p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p><p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//history模式</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>模式</p><blockquote><p>优点：兼容性更好，因为不需要服务器端处理路径。</p><p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hash模式</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-【to的两种写法】"><a href="#4-5-【to的两种写法】" class="headerlink" title="4.5. 【to的两种写法】"></a>4.5. 【to的两种写法】</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 第一种：to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;主页&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 第二种：to的对象写法 --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-6-【命名路由】"><a href="#4-6-【命名路由】" class="headerlink" title="4.6. 【命名路由】"></a>4.6. 【命名路由】</h2><p>作用：可以简化路由跳转及传参（后面就讲）。</p><p>给路由规则命名：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>跳转路由：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-7-【嵌套路由】"><a href="#4-7-【嵌套路由】" class="headerlink" title="4.7. 【嵌套路由】"></a>4.7. 【嵌套路由】</h2><ol><li><p>编写<code>News</code>的子路由：<code>Detail.vue</code></p></li><li><p>配置路由规则，使用<code>children</code>配置项：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>跳转路由（记得要加完整路径）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- 或 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;news.name&#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-8-【路由传参】"><a href="#4-8-【路由传参】" class="headerlink" title="4.8. 【路由传参】"></a>4.8. 【路由传参】</h2><h3 id="query参数"><a href="#query参数" class="headerlink" title="query参数"></a>query参数</h3><ol><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带query参数（to的字符串写法） --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=欢迎你&quot;&gt;</span><br><span class="line">跳转</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带query参数（to的对象写法） --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //用name也可以跳转</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>接收参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// 打印query参数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="params参数"><a href="#params参数" class="headerlink" title="params参数"></a>params参数</h3><ol><li><p>传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;</span><br><span class="line">&lt;RouterLink :to=&quot;`/news/detail/001/新闻001/内容001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name:&#x27;xiang&#x27;, //用name跳转</span><br><span class="line">    params:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>接收参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// 打印params参数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">params</span>)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p><p>备注2：传递<code>params</code>参数时，需要提前在规则中占位。</p></blockquote><h2 id="4-9-【路由的props配置】"><a href="#4-9-【路由的props配置】" class="headerlink" title="4.9. 【路由的props配置】"></a>4.9. 【路由的props配置】</h2><p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;, </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-10-【-replace属性】"><a href="#4-10-【-replace属性】" class="headerlink" title="4.10. 【 replace属性】"></a>4.10. 【 replace属性】</h2><ol><li><p>作用：控制路由跳转时操作浏览器历史记录的模式。</p></li><li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p><ul><li><code>push</code>是追加历史记录（默认值）。</li><li><code>replace</code>是替换当前记录。</li></ul></li><li><p>开启<code>replace</code>模式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-11-【编程式导航】"><a href="#4-11-【编程式导航】" class="headerlink" title="4.11. 【编程式导航】"></a>4.11. 【编程式导航】</h2><p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><h2 id="4-12-【重定向】"><a href="#4-12-【重定向】" class="headerlink" title="4.12. 【重定向】"></a>4.12. 【重定向】</h2><ol><li><p>作用：将特定的路径，重新定向到已有路由。</p></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h1><h2 id="5-1【准备一个效果】"><a href="#5-1【准备一个效果】" class="headerlink" title="5.1【准备一个效果】"></a>5.1【准备一个效果】</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h2 id="5-2【搭建-pinia-环境】"><a href="#5-2【搭建-pinia-环境】" class="headerlink" title="5.2【搭建 pinia 环境】"></a>5.2【搭建 pinia 环境】</h2><p>第一步：<code>npm install pinia</code></p><p>第二步：操作<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引入createPinia，用于创建pinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建pinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用插件 */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>此时开发者工具中已经有了<code>pinia</code>选项</p><img src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><h2 id="5-3【存储-读取数据】"><a href="#5-3【存储-读取数据】" class="headerlink" title="5.3【存储+读取数据】"></a>5.3【存储+读取数据】</h2><ol><li><p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p></li><li><p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p></li><li><p>具体编码：<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>具体编码：<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;你今天有点怪，哪里怪？怪好看的！&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;草莓、蓝莓、蔓越莓，你想我了没？&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;心里给你留了一块地，我的死心塌地&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中使用<code>state</code>中的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;当前求和为：&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  // 引入对应的useXxxxxStore</span><br><span class="line">  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;</span><br><span class="line">  </span><br><span class="line">  // 调用useXxxxxStore得到对应的store</span><br><span class="line">  const sumStore = useSumStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import axios from &#x27;axios&#x27;</span><br><span class="line">  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;</span><br><span class="line"></span><br><span class="line">  const talkStore = useTalkStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-4-【修改数据】-三种方式"><a href="#5-4-【修改数据】-三种方式" class="headerlink" title="5.4.【修改数据】(三种方式)"></a>5.4.【修改数据】(三种方式)</h2><ol><li><p>第一种修改方式，直接修改</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p>第二种修改方式：批量修改</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//加</span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//操作countStore中的sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//减</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value:number</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中调用<code>action</code>即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对应action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-5-【storeToRefs】"><a href="#5-5-【storeToRefs】" class="headerlink" title="5.5.【storeToRefs】"></a>5.5.【storeToRefs】</h2><ul><li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li><li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中数据。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;count&quot;&gt;</span><br><span class="line">&lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">  /* 引入storeToRefs */</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">/* 得到countStore */</span><br><span class="line">  const countStore = useCountStore()</span><br><span class="line">  /* 使用storeToRefs转换countStore，随后解构 */</span><br><span class="line">  const &#123;sum&#125; = storeToRefs(countStore)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-6-【getters】"><a href="#5-6-【getters】" class="headerlink" title="5.6.【getters】"></a>5.6.【getters】</h2><ol><li><p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p></li><li><p>追加<code>getters</code>配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="attr">bigSum</span>:(state):<span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> *<span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>. school.<span class="title function_">toUpperCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = countStore</span><br><span class="line"><span class="keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="title function_">storeToRefs</span>(countStore)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-7-【-subscribe】"><a href="#5-7-【-subscribe】" class="headerlink" title="5.7.【$subscribe】"></a>5.7.【$subscribe】</h2><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate,state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LoveTalk&#x27;</span>,mutate,state)</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-8-【store组合式写法】"><a href="#5-8-【store组合式写法】" class="headerlink" title="5.8. 【store组合式写法】"></a>5.8. 【store组合式写法】</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// talkList就是state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalk函数相当于action</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span></span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">data</span>:&#123;<span class="attr">content</span>:title&#125;&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">    <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),title&#125;</span><br><span class="line">    <span class="comment">// 放到数组中</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;talkList,getATalk&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6-组件通信"><a href="#6-组件通信" class="headerlink" title="6. 组件通信"></a>6. 组件通信</h1><p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p><ul><li>移出事件总线，使用<code>mitt</code>代替。</li></ul><ul><li><code>vuex</code>换成了<code>pinia</code>。</li><li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li><li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li><li><code>$children</code>被砍掉了。</li></ul><p><strong>常见搭配形式：</strong></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> <h2 id="6-1-【props】"><a href="#6-1-【props】" class="headerlink" title="6.1. 【props】"></a>6.1. 【props】</h2><p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p><ul><li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li><li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li></ul><p>父组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件，&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;我的车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;儿子给的玩具：&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">const car = ref(&#x27;奔驰&#x27;)</span><br><span class="line">const toy = ref()</span><br><span class="line">// 方法</span><br><span class="line">function getToy(value:string)&#123;</span><br><span class="line">toy.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;子组件&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;我的玩具：&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;父给我的车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;getToy(toy)&quot;&gt;玩具给父亲&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&#x27;奥特曼&#x27;)</span><br><span class="line"></span><br><span class="line">defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2-【自定义事件】"><a href="#6-2-【自定义事件】" class="headerlink" title="6.2. 【自定义事件】"></a>6.2. 【自定义事件】</h2><ol><li>概述：自定义事件常用于：<strong>子 &#x3D;&gt; 父。</strong></li><li>注意区分好：原生事件、自定义事件。</li></ol><ul><li>原生事件：<ul><li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li><li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li></ul></li><li>自定义事件：<ul><li>事件名是任意名称</li><li><strong style="color:red">事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong ></li></ul></li></ul><ol start="3"><li><p>示例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--注意区分原生事件与自定义事件中的$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件中，触发事件：</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;send-toy&#x27;</span>, 具体数据)</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-3-【mitt】"><a href="#6-3-【mitt】" class="headerlink" title="6.3. 【mitt】"></a>6.3. 【mitt】</h2><p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p><p>安装<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure><p>新建文件：<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建emitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // 绑定事件</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abc事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyz事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 触发事件</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 清理事件</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并暴露mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure><p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toy事件被触发&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 解绑事件</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>【第三步】：提供数据的组件，在合适的时候触发事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 触发事件</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p><h2 id="6-4-【v-model】"><a href="#6-4-【v-model】" class="headerlink" title="6.4.【v-model】"></a>6.4.【v-model】</h2><ol><li><p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p></li><li><p>前序知识 —— <code>v-model</code>的本质</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用v-model指令 --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-model的本质是下面这行代码 --&gt;</span><br><span class="line">&lt;input </span><br><span class="line">  type=&quot;text&quot; </span><br><span class="line">  :value=&quot;userName&quot; </span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 组件标签上使用v-model指令 --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 组件标签上v-model的本质 --&gt;</span><br><span class="line">&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;</span><br><span class="line">&lt;!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件--&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;modelValue&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // 接收props</span><br><span class="line">  defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">  // 声明事件</span><br><span class="line">  const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>也可以更换<code>value</code>，例如改成<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 也可以更换value，例如改成abc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 上面代码的本质如下 --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;abc&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // 接收props</span><br><span class="line">  defineProps([&#x27;abc&#x27;])</span><br><span class="line">  // 声明事件</span><br><span class="line">  const emit = defineEmits([&#x27;update:abc&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-5-【-attrs-】"><a href="#6-5-【-attrs-】" class="headerlink" title="6.5.【$attrs 】"></a>6.5.【$attrs 】</h2><ol><li><p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p></li><li><p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p><blockquote><p> 注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p></blockquote></li></ol><p>父组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件&lt;/h3&gt;</span><br><span class="line">&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1)</span><br><span class="line">let b = ref(2)</span><br><span class="line">let c = ref(3)</span><br><span class="line">let d = ref(4)</span><br><span class="line"></span><br><span class="line">function updateA(value)&#123;</span><br><span class="line">a.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>子组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">&lt;h3&gt;子组件&lt;/h3&gt;</span><br><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>孙组件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">&lt;h3&gt;孙组件&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;a：&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;b：&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;c：&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;d：&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;x：&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;y：&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;updateA(666)&quot;&gt;点我更新A&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-6-【-refs、-parent】"><a href="#6-6-【-refs、-parent】" class="headerlink" title="6.6. 【$refs、$parent】"></a>6.6. 【$refs、$parent】</h2><ol><li><p>概述：</p><ul><li><code>$refs</code>用于 ：<strong>父→子。</strong></li><li><code>$parent</code>用于：<strong>子→父。</strong></li></ul></li><li><p>原理如下：</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td></tr><tr><td><code>$parent</code></td><td>值为对象，当前组件的父组件实例对象。</td></tr></tbody></table></li></ol><h2 id="6-7-【provide、inject】"><a href="#6-7-【provide、inject】" class="headerlink" title="6.7. 【provide、inject】"></a>6.7. 【provide、inject】</h2><ol><li><p>概述：实现<strong>祖孙组件</strong>直接通信</p></li><li><p>具体使用：</p><ul><li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li><li>在后代组件中通过<code>inject</code>配置来声明接收数据</li></ul></li><li><p>具体编码：</p><p>【第一步】父组件中，使用<code>provide</code>提供数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;资产+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;汽车价格+1&lt;/button&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;</span><br><span class="line">  // 数据</span><br><span class="line">  let money = ref(100)</span><br><span class="line">  let car = reactive(&#123;</span><br><span class="line">    brand:&#x27;奔驰&#x27;,</span><br><span class="line">    price:100</span><br><span class="line">  &#125;)</span><br><span class="line">  // 用于更新money的方法</span><br><span class="line">  function updateMoney(value:number)&#123;</span><br><span class="line">    money.value += value</span><br><span class="line">  &#125;</span><br><span class="line">  // 提供数据</span><br><span class="line">  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)</span><br><span class="line">  provide(&#x27;car&#x27;,car)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p></blockquote><p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;我是孙组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateMoney(6)&quot;&gt;点我&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">  import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line">  // 注入数据</span><br><span class="line"> let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)</span><br><span class="line">  let car = inject(&#x27;car&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-8-【pinia】"><a href="#6-8-【pinia】" class="headerlink" title="6.8. 【pinia】"></a>6.8. 【pinia】</h2><p>参考之前<code>pinia</code>部分的讲解</p><h2 id="6-9-【slot】"><a href="#6-9-【slot】" class="headerlink" title="6.9. 【slot】"></a>6.9. 【slot】</h2><h3 id="1-默认插槽"><a href="#1-默认插槽" class="headerlink" title="1. 默认插槽"></a>1. 默认插槽</h3><p><img src="http://49.232.112.44/images/default_slot.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">        &lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;!-- 默认插槽 --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-具名插槽"><a href="#2-具名插槽" class="headerlink" title="2. 具名插槽"></a>2. 具名插槽</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">        &lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;更多&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-作用域插槽"><a href="#3-作用域插槽" class="headerlink" title="3. 作用域插槽"></a>3. 作用域插槽</h3><ol><li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p></li><li><p>具体编码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">      &lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">          &lt;h2&gt;今日游戏榜单&lt;/h2&gt;</span><br><span class="line">          &lt;slot :games=&quot;games&quot; a=&quot;哈哈&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">        import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">        let games = reactive([</span><br><span class="line">          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;英雄联盟&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;王者荣耀&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;红色警戒&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;斗罗大陆&#x27;&#125;</span><br><span class="line">        ])</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="7-其它-API"><a href="#7-其它-API" class="headerlink" title="7. 其它 API"></a>7. 其它 API</h1><h2 id="7-1-【shallowRef-与-shallowReactive-】"><a href="#7-1-【shallowRef-与-shallowReactive-】" class="headerlink" title="7.1.【shallowRef 与 shallowReactive 】"></a>7.1.【shallowRef 与 shallowReactive 】</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol><li><p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>特点：只跟踪引用值的变化，不关心值内部的属性变化。</p></li></ol><h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol><li><p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</p></li></ol><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote><p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p></blockquote><h2 id="7-2-【readonly-与-shallowReadonly】"><a href="#7-2-【readonly-与-shallowReadonly】" class="headerlink" title="7.2.【readonly 与 shallowReadonly】"></a>7.2.【readonly 与 shallowReadonly】</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol><li><p>作用：用于创建一个对象的深只读副本。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li>对象的所有嵌套属性都将变为只读。</li><li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li></ul></li><li><p>应用场景：</p><ul><li>创建不可变的状态快照。</li><li>保护全局状态或配置不被修改。</li></ul></li></ol><h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol><li><p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li><p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p></li><li><p>适用于只需保护对象顶层属性的场景。</p></li></ul></li></ol><h2 id="7-3-【toRaw-与-markRaw】"><a href="#7-3-【toRaw-与-markRaw】" class="headerlink" title="7.3.【toRaw 与 markRaw】"></a>7.3.【toRaw 与 markRaw】</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol><li><p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p><blockquote><p>官网描述：这是一个可以用于临时读取而不引起代理访问&#x2F;跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p></blockquote><blockquote><p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p></blockquote></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// 响应式对象</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// 原始对象</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;天津&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;重庆&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2))</span><br></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol><li><p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p><blockquote><p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p></blockquote></li><li><p>编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;天津&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;重庆&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><h2 id="7-4-【customRef】"><a href="#7-4-【customRef】" class="headerlink" title="7.4.【customRef】"></a>7.4.【customRef】</h2><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p><p>实现防抖效果（<code>useSumRef.ts</code>）：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">initValue:<span class="built_in">string</span>,delay:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">track</span>() <span class="comment">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span></span><br><span class="line">        <span class="keyword">return</span> initValue</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value</span><br><span class="line">          <span class="title function_">trigger</span>() <span class="comment">//通知Vue数据msg变化了</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>组件中使用：</p><h1 id="8-Vue3新组件"><a href="#8-Vue3新组件" class="headerlink" title="8. Vue3新组件"></a>8. Vue3新组件</h1><h2 id="8-1-【Teleport】"><a href="#8-1-【Teleport】" class="headerlink" title="8.1. 【Teleport】"></a>8.1. 【Teleport】</h2><ul><li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是弹窗中的一些内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="8-2-【Suspense】"><a href="#8-2-【Suspense】" class="headerlink" title="8.2. 【Suspense】"></a>8.2. 【Suspense】</h2><ul><li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验 </li><li>使用步骤： <ul><li>异步引入组件</li><li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">          &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;Child/&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;h3&gt;加载中.......&lt;/h3&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="8-3-【全局API转移到应用对象】"><a href="#8-3-【全局API转移到应用对象】" class="headerlink" title="8.3.【全局API转移到应用对象】"></a>8.3.【全局API转移到应用对象】</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-【其他】"><a href="#8-4-【其他】" class="headerlink" title="8.4.【其他】"></a>8.4.【其他】</h2><ul><li><p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p></li><li><p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p></li><li><p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p></li><li><p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p></li><li><p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p></li><li><p>移除了过滤器 <code>filter</code>。</p></li><li><p>移除了<code>$children</code> 实例 <code>propert</code>。</p><p>……</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-Vue3简介&quot;&gt;&lt;a href=&quot;#1-Vue3简介&quot; class=&quot;headerlink&quot; title=&quot;1. Vue3简介&quot;&gt;&lt;/a&gt;1. Vue3简介&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;2020年9月18日，&lt;code&gt;Vue.js&lt;/code&gt;发布版&lt;c</summary>
      
    
    
    
    <category term="前端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>视频素材</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:31:36.000Z</published>
    <updated>2023-12-15T14:31:17.693Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、免费视频"><a href="#1、免费视频" class="headerlink" title="1、免费视频"></a>1、免费视频</h2><table><thead><tr><th align="left">▼ <strong>高清视频</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://pixabay.com/zh/videos/">Pixabay</a></td><td align="left">免登录、CC0版权、无下载限制、支持中文。</td></tr><tr><td align="left">🌐 <a href="https://www.pexels.com/zh-cn/videos/">Pexels</a></td><td align="left">免登录、CC0版权、无下载限制、支持中文。</td></tr><tr><td align="left">🌐 <a href="https://coverr.co/">Coverr</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://mixkit.co/free-stock-video/">Mixkit</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.vidsplay.com/">Vidsplay</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://isorepublic.com/videos/">ISO Republic</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.videezy.com/">Videezy</a></td><td align="left">免登录、CC0版权、无下载限制、免费使用需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.videvo.net/">Videvo</a></td><td align="left">免登录、CC0版权、无下载限制、免费使用需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.freepik.com/videos">Freepik</a></td><td align="left">免登录、CC0版权、无下载限制、免费使用需要署名。</td></tr><tr><td align="left">▼ <strong>小众视频</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.motionplaces.com/">Motion Places</a></td><td align="left">免登录、CC0 版权、无下载限制、小众视频、多为延时摄影。</td></tr><tr><td align="left">🌐 <a href="https://mazwai.com/">Mazwai</a></td><td align="left">免登录、CC0 版权、无下载限制、小众视频、多为电影风格。</td></tr><tr><td align="left">🌐 <a href="https://dareful.com/">Dareful</a></td><td align="left">免登录、CC0 版权、无下载限制、小众视频、多为自然景色。</td></tr><tr><td align="left">🌐 <a href="https://focastock.com/videos/">FOCA</a></td><td align="left">免登录、CC0 版权、无下载限制、小众视频、多为自然景色。</td></tr><tr><td align="left">🌐 <a href="https://freenaturestock.com/videos/">Nature Stock</a></td><td align="left">免登录、CC0 版权、无下载限制、小众视频、多为自然景色。</td></tr><tr><td align="left">▼ <strong>聚合搜索</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.6huo.com/footages">预告片世界</a></td><td align="left">免登录、CC0版权、无下载限制、聚合搜索引擎。</td></tr><tr><td align="left">🌐 <a href="https://video.librestock.com/">Librestock</a></td><td align="left">免登录、CC0版权、无下载限制、聚合搜索引擎。</td></tr><tr><td align="left">🌐 <a href="https://www.free-video-footage.com/">FVF</a></td><td align="left">免登录、CC0版权、无下载限制、聚合搜索引擎。</td></tr></tbody></table><h2 id="2、视频素材"><a href="#2、视频素材" class="headerlink" title="2、视频素材"></a>2、视频素材</h2><table><thead><tr><th align="left">▼ <strong>视频素材</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.aigei.com/">爱给网</a></td><td align="left">国内知名的视频素材网站，下载要铜币，每日免费送 20 铜币。</td></tr><tr><td align="left">🌐 <a href="https://www.heycan.com/home">黑罐头</a></td><td align="left">抖音旗下素材平台，UGC 平台，免费下载。</td></tr><tr><td align="left">🌐 <a href="https://cool.bilibili.com/square/video">素材酷平台</a></td><td align="left">B 站旗下素材平台，UGC 平台，免费下载。</td></tr><tr><td align="left">🌐 <a href="https://sucai.zhiyu.art/">知鱼素材</a></td><td align="left">国内视频素材库，<strong>“共享协议”</strong>的素材可免费商用、免费用户每天 1 次下载。</td></tr><tr><td align="left">🌐 <a href="https://shipin520.com/">潮点视频</a></td><td align="left">国内视频素材库，免费用户每天 1 次下载。</td></tr><tr><td align="left">🌐 <a href="https://al.jybest.ltd/%E8%BD%AF%E4%BB%B6/Windows/4000%E4%B8%AA%E7%BB%BF%E5%B9%95%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%9027G">绿幕视频27G</a></td><td align="left">网上找到的 4000个绿幕视频素材 27G，支持预览和下载。</td></tr><tr><td align="left">🌐 <a href="https://cutestockfootage.com/">Cute Footage</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.productioncrate.com/">ProductionCrate</a></td><td align="left">要登录、付费网站的免费内容，每日 4 次免费下载。</td></tr><tr><td align="left">🌐 <a href="https://www.monzoom.com/">Monzoom</a></td><td align="left">要登录、CC0版权、免费使用需要署名。</td></tr></tbody></table><h2 id="3、视频后期"><a href="#3、视频后期" class="headerlink" title="3、视频后期"></a>3、视频后期</h2><table><thead><tr><th align="left">▼ <strong>特效模版</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://mixkit.co/free-video-templates/">Mixkit</a></td><td align="left">免登录、CC0版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.lookae.com/">LookAE</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.newcger.com/">NewCGer</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://c4dsky.com/">书生影视</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.mfcpx.com/">FCPX资源站</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="http://www.cgdream.com.cn/">CG模型网</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.cgown.com/">CG资源网</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="http://www.cgahz.com/">CG爱好者网</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.cgufo.com/">CGUFO</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.aepond.com/">AEPON</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://prmuban.com/">PR模板网</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://www.gfxcamp.com/">GFXCamp</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="http://www.lovelifemrle.com/">爱生活的乐先生</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr><tr><td align="left">🌐 <a href="https://videocopilot.net.cn/">Video-Copilot</a></td><td align="left">免登录、提供网盘下载，商用需谨慎。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1、免费视频&quot;&gt;&lt;a href=&quot;#1、免费视频&quot; class=&quot;headerlink&quot; title=&quot;1、免费视频&quot;&gt;&lt;/a&gt;1、免费视频&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;▼ &lt;strong&gt;高清视频&lt;/str</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="视频" scheme="https://dont-sleep-so-late.github.io/tags/%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>字体导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:30:36.000Z</published>
    <updated>2023-12-15T14:29:13.489Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、中文字体"><a href="#1、中文字体" class="headerlink" title="1、中文字体"></a>1、中文字体</h2><table><thead><tr><th align="left">▼ <strong>免费商用</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://wordshub.github.io/free-font/">字集</a></td><td align="left">免费商用字体库，大概是 2020 年最全的免费可商用字体库。👍</td></tr><tr><td align="left">🌐 <a href="https://www.maoken.com/all-fonts-imgs">猫啃网</a></td><td align="left">免费商用字体库，有 <a href="https://www.maoken.com/all-fonts-imgs">图文版</a>、<a href="https://www.maoken.com/preview">预览版</a>、<a href="https://www.maoken.com/all-fonts">表格版</a> 等多种方法，并提供下载。</td></tr><tr><td align="left">🌐 <a href="https://ziyouziti.com/">自由字体</a></td><td align="left">免费商用字体库，附有字体使用样版，确保是商用免费字体，不会有版权纠纷。</td></tr><tr><td align="left"><a href="https://www.potatofield.cn/fontlibrary">🌐 洋芋田</a></td><td align="left">免费商用字体库，收录了 140+ 字体，确保是商用免费字体，不会有版权纠纷。</td></tr><tr><td align="left">🌐 <a href="https://www.freechinesefont.com/">CN Fonts</a></td><td align="left">免费商用字体库，收录了 180+ 字体，确保是商用免费字体，不会有版权纠纷。</td></tr><tr><td align="left">🌐 <a href="https://www.100font.com/">100font</a></td><td align="left">免费商用字体库，专门收录免费商用字体，通过网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://www.shejidt.com/fonts">SHEJIDT</a></td><td align="left">免费商用字体库，专门收录免费商用字体，通过网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://51font.17font.com/">51Font</a></td><td align="left">免费商用字体库，专门收录免费商用字体，通过网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://pan.baidu.com/share/init?surl=ALdMdP2fX_WEQjTDutZkAw">900免费字体</a></td><td align="left">免费商用字体库，网友整理的免费商用字体集合，通过网盘下载，提取码：52pj</td></tr><tr><td align="left">▼ <strong>字体资讯</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.thetype.com/">The Type</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="https://www.zhaozi.cn/">找字网</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="https://www.fontke.com/">字客网</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="https://izihun.com/">字魂网</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="http://www.ziticq.com/">字体传奇</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="https://www.fonts.net.cn/">字体天下</a></td><td align="left">字体资讯网站。</td></tr><tr><td align="left">▼ <strong>英文字体</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">在线英文字体库，提供各种各样风格的字体，字体下载旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">在线英文字体库，提供各种各样风格的字体，字体下载旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.fontshare.com/">Fontshare</a></td><td align="left">在线英文字体库，提供各种各样风格的字体，字体下载旁边会有版权标注。</td></tr><tr><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="2、英文字体"><a href="#2、英文字体" class="headerlink" title="2、英文字体"></a>2、英文字体</h2><table><thead><tr><th align="left">▼ <strong>免费商用</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://wordmark.it/">Wordmark</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.dafont.com/themes.php">Dafont</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left"><a href="https://www.azfonts.net/">🌐 AZfonts</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left"><a href="https://fontesk.com/">🌐 Fontesk</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.fontshare.com/">FontShare</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.1001freefonts.com/">1001FreeFonts</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">🌐 <a href="https://www.actionfonts.com/">Action Fonts</a></td><td align="left">在线英文字体库，下载按钮旁边会有版权标注。</td></tr><tr><td align="left">▼ <strong>字体资讯</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left"><a href="https://www.typewolf.com/">🌐 TypeWolf</a></td><td align="left">英文字体资讯网站。</td></tr><tr><td align="left">🌐 <a href="https://www.fonts.com/">Fonts.com</a></td><td align="left">英文字体资讯网站，大多数为付费字体。</td></tr><tr><td align="left">🌐 <a href="https://fontdiner.com/">FontDiner</a></td><td align="left">英文字体资讯网站，大多数为复古字体。</td></tr><tr><td align="left"><a href="https://blambot.com/">🌐 Blambot</a></td><td align="left">英文字体资讯网站，大多数为漫画字体。</td></tr></tbody></table><h2 id="3、字体工具"><a href="#3、字体工具" class="headerlink" title="3、字体工具"></a>3、字体工具</h2><table><thead><tr><th align="left">▼ <strong>字体查询</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://fonts.safe.360.cn/">360查字体</a></td><td align="left">字体版权查询，由 360 公司推出。</td></tr><tr><td align="left">🌐 <a href="https://www.likefont.com/">识字体网</a></td><td align="left">中文字体识别，支持中、英、日韩、等文字。</td></tr><tr><td align="left">🌐 <a href="https://fonts.adobe.com/">Adobe Fonts</a></td><td align="left">中文字体识别，Adobe 公司出品。</td></tr><tr><td align="left">🌐 <a href="https://www.myfonts.com/pages/whatthefont">WhatTheFont!</a></td><td align="left">英文字体识别，上付图片识别。</td></tr><tr><td align="left">🌐 <a href="https://www.whatfontis.com/">WhatFontIs</a></td><td align="left">英文字体识别，上付图片识别。</td></tr><tr><td align="left">🌐 <a href="https://www.fontsquirrel.com/matcherator">Identify Fonts</a></td><td align="left">英文字体识别，上付图片识别。</td></tr><tr><td align="left">🌐 <a href="http://www.identifont.com/index.html">IdentiFont</a></td><td align="left">英文字体识别，通过字体描述来识别字体。</td></tr><tr><td align="left">▼ <strong>手写字体</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://shouxie.laoxiezi.com/">老鞋子</a></td><td align="left">手写字体生成器，手写字体在线生成器。</td></tr><tr><td align="left">📥 <a href="https://www.beautifulcarrot.com/">萝卜工坊</a></td><td align="left">手写字体生成器，模拟手写字体软件，一键生成手写文稿。</td></tr><tr><td align="left">📥 <a href="https://www.iamzlt.com/?p=602">手写模拟器</a></td><td align="left">手写字体生成器，模拟手写字体软件，一键生成手写文稿。</td></tr><tr><td align="left">🌐 <a href="https://www.calligrapher.ai/">Calligrapher</a></td><td align="left">手写字体生成器，可以将英文变成手写体，并有动画效果，并提供 SVG 下载。</td></tr><tr><td align="left">🌐 <a href="https://www.an2.net/">田字格字帖</a></td><td align="left">田字格帖生成器，免费的在线田字格字帖生成器，支持笔顺，小学生练字神器。</td></tr><tr><td align="left">▼ <strong>书法字体</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left"><a href="http://www.shufami.com/">🌐 书法迷</a></td><td align="left">书法字体生成器，在线生成器。</td></tr><tr><td align="left">🌐 <a href="https://www.diyiziti.com/">第一字体</a></td><td align="left">书法字体生成器，在线生成器。</td></tr><tr><td align="left"><a href="http://g.shufaziti.com/">🌐 光明书法</a></td><td align="left">书法字体生成器，横幅集字工具。</td></tr><tr><td align="left"><a href="http://shufa.4a40.com/">🌐 书法集字</a></td><td align="left">书法字体生成器，书法字典在线查询。</td></tr><tr><td align="left"><a href="http://www.395.net.cn/">🌐 395工具</a></td><td align="left">书法字体生成器，有各式各样的在线工具。</td></tr><tr><td align="left">🌐 <a href="https://www.moage.cn/shufa">古风家书</a></td><td align="left">书法字体生成器，古风家书生成器。</td></tr><tr><td align="left">▼ <strong>印章字体</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.gaitubao.com/yinzhang">改图宝</a></td><td align="left">电子印章生成器，免费且专业。</td></tr><tr><td align="left">🌐 <a href="https://www.mofans.net/yinzhang/">墨芳印章</a></td><td align="left">电子印章生成器，免费且专业。</td></tr><tr><td align="left">🌐 <a href="http://redmi.work/">395印章</a></td><td align="left">电子印章生成器，免费且专业。</td></tr><tr><td align="left">▼ <strong>系统字体</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">📥 <a href="https://fontforge.org/en-US/">FontForge</a></td><td align="left">字体编辑器，用来创建新的字体，支持中文，且免费开源。</td></tr><tr><td align="left">📥 <a href="https://www.mactype.net/">MacType</a></td><td align="left">字体渲染工具，可以使系统文字显示更加清晰、更有立体感。</td></tr></tbody></table><h2 id="4、字体特效"><a href="#4、字体特效" class="headerlink" title="4、字体特效"></a>4、字体特效</h2><table><thead><tr><th align="left">▼ <strong>在线工具</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.logosc.cn/text/">标小智</a></td><td align="left">生成特效字体，一键生成各种特效的字体，并提供下载。</td></tr><tr><td align="left">🌐 <a href="https://vaufonts.com/">VAU Fonts</a></td><td align="left">生成特效字体，一键生成各种特效的字体，在“<strong>Preset</strong>”里可以切换效果。</td></tr><tr><td align="left">🌐 <a href="https://andyh0913.github.io/FrenchFries-Font-Converter/">麦当劳字体</a></td><td align="left">生成特效字体，生成麦当劳薯条字体，并提供下载。</td></tr><tr><td align="left">🌐 <a href="https://textanim.com/">TEXTANIM</a></td><td align="left">生成动效字体，生成 GIF 动效字体，效果相对比较复古。</td></tr><tr><td align="left">🌐 <a href="https://llamafont.com/">Llama Font</a></td><td align="left">生成特效字体，生成草泥马（羊驼）字体。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>本地工具</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">📥 <a href="https://aaa-logo.com/">AAA Logo</a></td><td align="left">免费，1000+ 现成 Logo 模版一键生成，只支持 Windows。<a href="https://www.aaa-logo.com/download.php">🪟</a></td></tr><tr><td align="left">📥 <a href="https://apps.apple.com/cn/app/art-text-4-text-effects-app/id1499327230?mt=12">Art Text 4</a></td><td align="left">专业图形设计工具，可以一键生成惊艳的文本和图形，只支持 Mac。<a href="https://two.onefileserver.top/macxz/10293/art_text_4_4.3.0.dmg">🍎</a></td></tr></tbody></table><h2 id="5、字体版权"><a href="#5、字体版权" class="headerlink" title="5、字体版权"></a>5、字体版权</h2><p>无论你是做什么工作的，字体版权，你一定要搞清楚。因为，<strong>他们是真的告！</strong></p><p>那我们要如何避免字体侵权呢？</p><p>我们可以用排除法。</p><p><strong>1、系统自带的“微软雅黑”和“苹方黑体”不可商用。</strong></p><p>理论上 Windows 和 Mac 自带的字体，也不是可商用的，只是他们是出自“大公司”，没时间告你罢了。</p><p><strong>2、如果你不打算花钱买字体，凡是国内大公司的字体品牌，都不要用。</strong></p><p>因为国内公怀寄律师函的方法可太简单了，甚至可以在公众号评论区留言，国外公司至少还找个法人代表。</p><p><strong>3、如果你不打算花钱买字体，那些传统字体品牌，一律不要用。</strong></p><p>几乎你能叫得出名字的字体品牌，比如 方正、华康、汉仪、华文、华光、蒙纳、文悦、汉鼎、文鼎 等等。</p><p>这些字体就像高压电线一样的，千万别碰。（也少量字体可免费商用，但不好看）</p><p>如果你安装过这此字体，赶紧从你的电脑上删除，不要给自己埋雷。</p><p>他们是真的告！</p><p><strong>4、只用你确定是可免费商用的字体。</strong></p><p>可免费商用的字体很多，我们没必要下载所有的字体。</p><p>新建一个文件夹，把那些经过确定是可以“<strong>免费商用的字体</strong>”，才放到这个文件夹。</p><p>记得还要保存一张“<strong>字体截图</strong>”，方便识别。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1、中文字体&quot;&gt;&lt;a href=&quot;#1、中文字体&quot; class=&quot;headerlink&quot; title=&quot;1、中文字体&quot;&gt;&lt;/a&gt;1、中文字体&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;▼ &lt;strong&gt;免费商用&lt;/str</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="字体" scheme="https://dont-sleep-so-late.github.io/tags/%E5%AD%97%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>音乐素材</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:27:36.000Z</published>
    <updated>2023-12-15T14:30:29.334Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、音效素材"><a href="#1、音效素材" class="headerlink" title="1、音效素材"></a>1、音效素材</h2><table><thead><tr><th align="left">▼ <strong>国内网站</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.aigei.com/sound">爱给网</a></td><td align="left"><strong>要登陆</strong>、CC0 版权、支持中文、<strong>下载需付费</strong>。</td></tr><tr><td align="left">🌐 <a href="https://www.tosound.com/">淘声网</a></td><td align="left">免登陆、CC0 版权、支持中文、聚合搜索引擎。</td></tr><tr><td align="left">🌐 <a href="https://www.ear0.com/">耳聆网</a></td><td align="left"><strong>要登陆</strong>、CC0 版权、支持中文。</td></tr><tr><td align="left">🌐 <a href="https://sc.chinaz.com/yinxiao/">站长素材</a></td><td align="left">免登陆、<strong>版权不明，商用需谨慎</strong>。</td></tr><tr><td align="left">▼ <strong>国外网站</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://pixabay.com/sound-effects/">Pixabay</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://mixkit.co/free-sound-effects/">Mixkit</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.findsounds.com/typesChinese.html">FindSounds</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.soundeffectsplus.com/">SoundEffects+</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.soundgator.com/">SoundGator</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://taira-komori.jpn.org/freesoundcn.html">小森平</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.videvo.net/royalty-free-sound-effects/">Videvo</a></td><td align="left">免登陆、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>要登陆</strong>、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://soundbible.com/">SoundBible</a></td><td align="left">免登陆、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://orangefreesounds.com/">OrangeSounds</a></td><td align="left">免登陆、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://www.soundjay.com/">SoundJay</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://www.pacdv.com/sounds/">PacDV</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://www.partnersinrhyme.com/pir/PIRsfx.shtml">PartnersInRhyme</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://www.mediacollege.com/downloads/sound-effects/">Media College</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr></tbody></table><h2 id="2、音效合集"><a href="#2、音效合集" class="headerlink" title="2、音效合集"></a>2、音效合集</h2><table><thead><tr><th align="left">▼ <strong>音效合集</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://99sounds.org/">99Sounds</a></td><td align="left">免登陆、CC0 版权、提供合集下载，欧洲的音效工作室。</td></tr><tr><td align="left">🌐 <a href="https://gamesounds.xyz/">GameSounds</a></td><td align="left">免登陆、CC0 版权、提供合集下载，可直接下载多个免版权音效资源。</td></tr><tr><td align="left">🌐 <a href="https://www.adobe.com/products/audition/offers/AdobeAuditionDLCSFX.html">Adobe Sound</a></td><td align="left">免登陆、CC0 版权、提供合集下载，Adobe 公司出品。[打包下载]</td></tr><tr><td align="left">🌐 <a href="https://www.blackmagicdesign.com/cn/support/">DaVinci Sound</a></td><td align="left">免登陆、CC0 版权、提供合集下载，DaVinci 公司出品。[打包下载]</td></tr><tr><td align="left">🌐 <a href="https://sound-effects.bbcrewind.co.uk/">BBC Sound</a></td><td align="left">免登陆、<strong>商用需授权</strong>、提供合集下载，BBC 公司出品。[打包下载]</td></tr></tbody></table><h2 id="3、音乐素材"><a href="#3、音乐素材" class="headerlink" title="3、音乐素材"></a>3、音乐素材</h2><table><thead><tr><th align="left">▼ <strong>免费音乐</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://pixabay.com/zh/music/">Pixabay</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://coverr.co/free-stock-music">Coverr</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://mixkit.co/free-stock-music/">Mixkit</a></td><td align="left">免登陆、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://sampld.app/">Sampld</a></td><td align="left"><strong>要登录</strong>、CC0 版权、无下载限制。</td></tr><tr><td align="left">🌐 <a href="https://www.videvo.net/royalty-free-music/">Videvo</a></td><td align="left">免登陆、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>要登录</strong>、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://ncs.io/music">NCS</a></td><td align="left">免登陆、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://freemusicarchive.org/home">FMA</a></td><td align="left"><strong>要登录</strong>、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://www.bensound.com/free-music-for-videos">BenSound</a></td><td align="left">免登录、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://www.purple-planet.com/">Purple Planet</a></td><td align="left">免登录、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://incompetech.com/music/royalty-free/music.html">incompetech</a></td><td align="left">免登录、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="http://dig.ccmixter.org/">dig.ccMixter</a></td><td align="left"><strong>要登录</strong>、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://www.fiftysounds.com/">FiftySounds</a></td><td align="left">免登录、CC0 版权、无下载限制、免费使用需署名。</td></tr><tr><td align="left">🌐 <a href="https://cctrax.com/">CCTrax</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://freepd.com/">FreePD</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://whatfunk.com/">WhatFunk</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://audionautix.com/">AudionautiX</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://www.partnersinrhyme.com/midi/Classical/index.shtml">PartnersInRhyme</a></td><td align="left"><strong>要登录</strong>、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="https://www.fesliyanstudios.com/">Fesliyan Studios</a></td><td align="left">免登陆、CC0 版权、无下载限制、但无搜索框。</td></tr><tr><td align="left">🌐 <a href="http://dust-sounds.com/">Dust-Sounds</a></td><td align="left">免登陆、CC0 版权、无下载限制、日本网站。</td></tr><tr><td align="left">🌐 <a href="https://amachamusic.chagasi.com/">甘茶の音楽工房</a></td><td align="left">免登陆、CC0 版权、无下载限制、日本网站。</td></tr></tbody></table><h2 id="4、专用音乐"><a href="#4、专用音乐" class="headerlink" title="4、专用音乐"></a>4、专用音乐</h2><table><thead><tr><th align="left">▼ <strong>U2B 音乐</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.youtube.com/user/NoCopyrightSounds">NCS</a></td><td align="left">U2B 平台使用免费、需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.youtube.com/c/FreeMusicAudioLibraryNow/videos">FMAL</a></td><td align="left">U2B 平台使用免费、需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.youtube.com/@AlrotaMusic/videos">Alrota Music</a></td><td align="left">U2B 平台使用免费、需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.youtube.com/@MusicCityOfficial2017/videos">Music City</a></td><td align="left">U2B 平台使用免费、需要署名。</td></tr><tr><td align="left">🌐 <a href="https://www.youtube.com/c/audiolibrary-channel/videos">Audio Library</a></td><td align="left">U2B 平台使用免费、需要署名。</td></tr><tr><td align="left">▼ <strong>专用音乐</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://musopen.org/music/">Musopen</a></td><td align="left">古典音乐、要登录、CC0 版权。</td></tr><tr><td align="left">🌐 <a href="https://sonniss.com/gameaudiogdc">GameAudioGDC</a></td><td align="left">游戏音乐、免登陆、CC0 版权。</td></tr><tr><td align="left">🌐 <a href="https://opengameart.org/">OpenGameArt</a></td><td align="left">游戏音乐、要登录、CC0 版权。</td></tr><tr><td align="left">🌐 <a href="https://downloads.khinsider.com/">VGM</a></td><td align="left">游戏音乐、要登录、CC0 版权。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1、音效素材&quot;&gt;&lt;a href=&quot;#1、音效素材&quot; class=&quot;headerlink&quot; title=&quot;1、音效素材&quot;&gt;&lt;/a&gt;1、音效素材&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;▼ &lt;strong&gt;国内网站&lt;/str</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="音乐" scheme="https://dont-sleep-so-late.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>游戏导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:25:36.000Z</published>
    <updated>2023-12-15T14:26:50.628Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、小游戏"><a href="#1、小游戏" class="headerlink" title="1、小游戏"></a>1、小游戏</h2><table><thead><tr><th align="left">▼ <strong>打发时间</strong></th><th align="left">—</th><th align="left">—</th><th align="left">—</th></tr></thead><tbody><tr><td align="left"><a href="http://magickeyboard.io/">魔术键盘</a></td><td align="left"><a href="https://eelslap.com/">海带鱼拍脸</a></td><td align="left"><a href="https://tikolu.net/spot-the-difference/menu">指出不一样</a></td><td align="left"><a href="https://vole.wtf/happy-birthday/">各式各样生日歌</a></td></tr><tr><td align="left"><a href="https://humanclock.com/">人类时钟</a></td><td align="left"><a href="https://www.slapkirk.com/play#spockmode">在线扇耳光</a></td><td align="left"><a href="https://qake.se/fw/index.html">在线放烟花</a></td><td align="left"><a href="https://theuselessweb.com/">无聊网站传送门</a></td></tr><tr><td align="left"><a href="https://seoi.net/penint/">画线为雕</a></td><td align="left"><a href="https://webapp.magicposer.com/">魔法人型师</a></td><td align="left"><a href="https://yesno.wtf/">Yes Or No?</a></td><td align="left"><a href="https://weirdorconfusing.com/">亚马逊雷人商品</a></td></tr><tr><td align="left"><a href="https://thisissand.com/">堆沙子游戏</a></td><td align="left"><a href="http://www.koalastothemax.com/">无限二分法</a></td><td align="left"><a href="https://pointerpointer.com/">鼠标指针在哪？</a></td><td align="left"><a href="https://www.twinsornot.com/">真不是双胞胎？</a></td></tr><tr><td align="left">▼ <strong>休闲解压</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://ac.yunyoujun.cn/#/">便携小空调</a></td><td align="left"><a href="https://tv.hzfe.org/">童年小电视</a></td><td align="left"><a href="https://driveandlisten.herokuapp.com/">全球自驾游体验</a></td><td align="left"><a href="https://www.pixelthoughts.co/">深呼吸放松 60 秒</a></td></tr><tr><td align="left"><a href="https://fan.elpsy.cn/">清凉小风扇</a></td><td align="left"><a href="http://www.megamonalisa.com/">蒙娜丽莎展馆</a></td><td align="left"><a href="https://9-eyes.com/">有趣谷歌街景图</a></td><td align="left"><a href="https://works.yangerxiao.com/breathe-relaxer/">静心呼吸 感受平静</a></td></tr><tr><td align="left"><a href="https://goldfishies.com/">在线养金鱼</a></td><td align="left"><a href="https://www.petside.com/infinite-cat/">猫的无限循环</a></td><td align="left"><a href="https://homeless-toys.netlify.app/#/">无家可归的玩偶</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://alexanderperrin.com.au/paper/shorttrip/">短暂的旅行</a></td><td align="left"><a href="https://www.window-swap.com/Window">全球窗户共享</a></td><td align="left"><a href="http://www.donothingfor2minutes.com/">2 分钟什么也不干</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>学会思考</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://dccxi.com/trust/">信任的进化</a></td><td align="left"><a href="https://www.arealme.com/cn">各种各样的自我测试</a></td><td align="left"><a href="https://thechoiceisyours.whatisthematrix.com/cn/">选择你相信的现实</a></td><td align="left"><a href="https://neal.fun/life-checklist/">人生清单检查表</a></td></tr><tr><td align="left"><a href="https://ncase.me/crowds/zh-CN.html">群体的智慧与愚蠢</a></td><td align="left"><a href="http://www.20q.net/">20个问题猜你想什么</a></td><td align="left"><a href="https://www.getbadnews.com/#intro">假新闻是怎样炼成的</a></td><td align="left"><a href="https://www.futureme.org/">写给未来的自己 1</a></td></tr><tr><td align="left"><a href="https://cn.puzzle-nonograms.com/">经典逻辑推理游戏</a></td><td align="left"><a href="https://stylishsite.github.io/">贾斯纳的猫</a></td><td align="left"><a href="https://ncase.me/remember/zh.html">如何记忆任何东西</a></td><td align="left"><a href="https://www.hi2future.com/">写给未来的自己 2</a></td></tr><tr><td align="left"><a href="http://www.iqsuperman.net/">IQ 测试题</a></td><td align="left"><a href="https://types.yuzeli.com/survey">心理健康测试</a></td><td align="left"><a href="https://neal.fun/paper/">一张纸折N次的厚度</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.piixemto.com/zh/">心理学测试</a></td><td align="left"><a href="https://z-lyen.github.io/anxiety/">和焦虑一起冒险！</a></td><td align="left"><a href="https://www.did-you-knows.com/">DidYouKnow 冷知识</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>身体测试</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="http://www.ultrasonic-ringtones.com/">听觉测试</a></td><td align="left"><a href="https://michaelbach.de/ot/index.html">眼睛的幻觉</a></td><td align="left"><a href="https://enchroma.com/pages/color-blindness-test">色盲色弱测试</a></td><td align="left"><a href="http://illusionoftheyear.com/">全球视觉错觉收集</a></td></tr><tr><td align="left"><a href="https://checkboxrace.com/">点击选择框</a></td><td align="left"><a href="http://mp3ornot.com/">音质区别测试</a></td><td align="left"><a href="https://www.qijishow.com/Brand/cool/index.html">带你体验扭曲幻觉</a></td><td align="left"><a href="https://humanbenchmark.com/">记忆力反应力测试</a></td></tr><tr><td align="left">▼ <strong>生活技能</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://yong.dgod.net/webim/index.html">在线输入法</a></td><td align="left"><a href="https://api.ihint.me/shuang/">双拼指法练习</a></td><td align="left"><a href="https://qwerty.kaiyi.cool/">英语指法练习 1</a></td><td align="left"><a href="https://vultr.youmu.moe/quiz/">中国行政区划测试</a></td></tr><tr><td align="left"><a href="https://www.type.fun/">轻松学打字</a></td><td align="left"><a href="http://www.chaiwubi.com/bmcx/">五笔编码查询</a></td><td align="left"><a href="https://www.typelit.io/">英语指法练习 2</a></td><td align="left"><a href="https://www.foldnfly.com/#/1-1-1-1-1-1-1-1-2">教你如何拆纸飞机</a></td></tr><tr><td align="left"><a href="https://www.typingclub.com/da-zi">键盘指法练习</a></td><td align="left"><a href="https://werneror.github.io/FingerMemory/">五笔指法练习</a></td><td align="left"><a href="https://www.keybr.com/">英语指法练习 3</a></td><td align="left"><a href="https://www.animatedknots.com/">教你如何绳子打结</a></td></tr></tbody></table><h2 id="2、在线游戏"><a href="#2、在线游戏" class="headerlink" title="2、在线游戏"></a>2、在线游戏</h2><table><thead><tr><th align="left">▼ <strong>游戏网站</strong></th><th align="left">—</th><th align="left">—</th><th align="left">—</th></tr></thead><tbody><tr><td align="left"><a href="https://www.4399.com/">4399</a></td><td align="left"><a href="https://poki.cn/">Poki</a></td><td align="left"><a href="https://neal.fun/">Neal.Fun</a></td><td align="left"><a href="https://www.bestgames.com/">Best Games</a></td></tr><tr><td align="left"><a href="https://www.17173.com/">17173</a></td><td align="left"><a href="https://frvr.com/">FRVR</a></td><td align="left"><a href="https://zh.y8.com/">Y8 Games</a></td><td align="left"><a href="https://www.crazygames.com/">Crazy Games</a></td></tr><tr><td align="left">▼ <strong>在线游戏</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://game.hullqin.cn/">线下聚会游戏</a></td><td align="left"><a href="https://flash.zczc.cz/">Flash 保存计划</a></td><td align="left"><a href="https://nes.heheda.top/">红白机游戏盒</a></td><td align="left"><a href="https://likexia.gitee.io/game/index.html#/">Git 游戏</a></td></tr><tr><td align="left"><a href="https://dos.lol/">在线 DOS 游戏</a></td><td align="left"><a href="https://game.haiyong.site/">100个摸鱼小游戏</a></td><td align="left"><a href="https://zaixianwan.app/">老游戏在线玩</a></td><td align="left"><a href="https://g8hh.com.cn/#/">锅巴汉化</a></td></tr><tr><td align="left"><a href="https://www.yikm.net/">小霸王，其乐无穷</a></td><td align="left"><a href="https://famicn.com/index.html">中文家用游戏博物馆</a></td><td align="left"><a href="http://www.gbarom.cn/">掌机迷</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>动作游戏</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.4399.com/flash/145201_2.htm">拳皇97</a></td><td align="left"><a href="https://pvz.heheda.top/">植物大战僵尸</a></td><td align="left"><a href="http://oos.moxiecode.com/js_webgl/ping_pong/">3D 乒乓球</a></td><td align="left"><a href="http://www.sinuousgame.com/">鼠标躲避球游戏</a></td></tr><tr><td align="left"><a href="https://krunker.io/?game=SV:umt2g">在线 CS</a></td><td align="left"><a href="https://classic.minecraft.net/?join=XeFyaTfaMDn-1-Px">我的世界</a></td><td align="left"><a href="https://www.linerider.com/">轨道滑行者</a></td><td align="left"><a href="https://www.foddy.net/Athletics.html">QWOP 跑步游戏</a></td></tr><tr><td align="left"><a href="https://bruno-simon.com/">在线开车</a></td><td align="left"><a href="https://fn.heheda.top/">水果忍者</a></td><td align="left"><a href="http://canvasrider.com/">轨道滑行者 2</a></td><td align="left"><a href="https://img.youquhome.com/wp-ziyuan/nanren20.htm">是男人坚持20秒</a></td></tr><tr><td align="left"><a href="https://game.chronodivide.com/">红色警戒 2</a></td><td align="left"><a href="https://squid-game.io/">鱿鱼游戏</a></td><td align="left"><a href="https://tusenpo.github.io/FlappyFrog/">Excited 的小鸟 ▲</a></td><td align="left"><a href="https://edition.cnn.com/interactive/2021/03/cnnix-steership/">苏伊士运河模拟器</a></td></tr><tr><td align="left"><a href="https://playcsol.com/">反恐精英 1.6</a></td><td align="left"><a href="http://www.heyzxz.me/pcol/">斯诺克</a></td><td align="left"><a href="https://www.geo-fs.com/">在线飞行模拟器</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>棋牌游戏</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://playtictactoe.org/">井字棋</a></td><td align="left"><a href="https://huazhechen.gitee.io/cuber/">三阶魔方 1</a></td><td align="left"><a href="https://knots.netlify.app/">环形结拼图</a></td><td align="left"><a href="https://yorg.io/">塔防生存游戏</a></td></tr><tr><td align="left"><a href="https://lichess.org/">国际象棋</a></td><td align="left"><a href="https://iamthecu.be/">三阶魔方 2</a></td><td align="left"><a href="https://kirilllive.github.io/Fifteen_puzzle_maker/">滑动拼图</a></td><td align="left"><a href="https://printablecreative.com/">益智游戏图生成器</a></td></tr><tr><td align="left"><a href="https://lines.frvr.com/">连线游戏</a></td><td align="left"><a href="https://blocks.ovh/">七巧板</a></td><td align="left"><a href="https://slices.ovh/">益智切图</a></td><td align="left"></td></tr><tr><td align="left"><a href="http://farter.cn/tetr.js/">俄罗斯方块 1</a></td><td align="left"><a href="https://ruyihe.com/sxx">疯狂数星星</a></td><td align="left"><a href="https://maze.toys/mazes/mini/">迷宫游戏</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://chvin.github.io/react-tetris/">俄罗斯方块 2</a></td><td align="left"><a href="http://www.jigzone.com/">拼图游戏</a></td><td align="left"><a href="https://www.webhek.com/post/draw-a-stickman/">请画一个小人</a></td><td align="left"></td></tr></tbody></table><h2 id="3、PC-游戏"><a href="#3、PC-游戏" class="headerlink" title="3、PC 游戏"></a>3、PC 游戏</h2><table><thead><tr><th align="left">▼ <strong>门户网站</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.3dmgame.com/">3DM游戏网</a></td><td align="left">游戏门户网站，曾经是国内游戏资源最多的网站。</td></tr><tr><td align="left">🌐 <a href="https://www.gamersky.com/">游民星空</a></td><td align="left">游戏门户网站，大型单机游戏门户网站，提供特色资讯和下载。</td></tr><tr><td align="left">🌐 <a href="https://down.ali213.net/">游侠网</a></td><td align="left">游戏门户网站，单机游戏下载基地。</td></tr><tr><td align="left">🌐 <a href="https://www.vgter.com/">上游世界</a></td><td align="left">游戏门户网站，提供精品 PC、Switch、PS4 等游戏。</td></tr><tr><td align="left">🌐 <a href="https://www.mhhf.com/">灵动游戏</a></td><td align="left">游戏门户网站，提供精品 PC、Switch、PS4 等游戏。</td></tr><tr><td align="left">🌐 <a href="https://www.taptap.cn/">TapTap</a></td><td align="left">游戏门户网站，多为手机游戏。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>博客网站</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.zzzzz688.com/">游戏天堂</a></td><td align="left">游戏博客网站，全球游戏下载基地，</td></tr><tr><td align="left">🌐 <a href="https://steamzg.com/">小叽资源</a></td><td align="left">游戏博客网站，可免费下载。</td></tr><tr><td align="left">🌐 <a href="https://www.jiligamefun.com/">叽哩叽哩游戏</a></td><td align="left">游戏博客网站，多为 ACG 游戏.<a href="https://mp.weixin.qq.com/s/vKpSKCMICy0cBp7OACnMPw">验证码</a>。</td></tr><tr><td align="left">🌐 <a href="https://www.xyg688.com/">小妖怪分享</a></td><td align="left">游戏博客网站，兴趣使然的资源搬运博客。</td></tr><tr><td align="left">🌐 <a href="https://kims3.xyz/">kims资源站</a></td><td align="left">游戏博客网站，免费电脑游戏下载站，提供高速下载。</td></tr><tr><td align="left">🌐 <a href="https://www.switch618.com/">Switch618</a></td><td align="left">游戏博客网站，免费，但要登陆。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>Stream 游戏</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://store.steampowered.com/">Steam</a></td><td align="left">游戏门户网站，目前最大 PC 游戏平台。</td></tr><tr><td align="left">🌐 <a href="https://steamunlocked.net/">SteamUnlocked</a></td><td align="left">Steam 资源游戏网站，有很多大作破解。</td></tr><tr><td align="left">🌐 <a href="https://www.s-sgames.com/">SGAMES</a></td><td align="left">专注于精品游戏，各类可联机精品资源。</td></tr><tr><td align="left">🌐 <a href="https://gamestarfield.com/">GameStarfield</a></td><td align="left">Steam 资源游戏网站，有很多大作破解。</td></tr><tr><td align="left">🌐 <a href="https://www.curseforge.com/">CurseForge</a></td><td align="left">全球最大的游戏 MOD 模组资源下载站。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>游戏网盘</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="http://gbtgame.ysepan.com/">GBT乐赏游戏空间</a></td><td align="left">游戏资源网盘。PC 游戏为主，收藏多为精品游戏。</td></tr><tr><td align="left">🌐 <a href="http://flysheep.ysepan.com/">flysheep 避难所</a></td><td align="left">游戏资源网盘。Steam、epic、VR、单机、Switch 游戏等。<a href="https://www.flysheep6.com/">独立网站</a></td></tr><tr><td align="left">🌐 <a href="http://821730880.ysepan.com/">萌新单机之家</a></td><td align="left">游戏资源网盘。</td></tr><tr><td align="left">🌐 <a href="https://docs.qq.com/document/DT2xBeVJvaHNQUHht">50TB游戏合集</a></td><td align="left">游戏资源网盘。<a href="https://www.lanzouw.com/iYp4j067mbtg">Excel 下载</a>。</td></tr><tr><td align="left">🌐 <a href="https://github.com/michelpereira/awesome-open-source-games">开源游戏合集</a></td><td align="left">开源游戏合集。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>游戏磁力</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.1377x.to/">1377x</a></td><td align="left">游戏种子搜索引擎，综合资源站。</td></tr><tr><td align="left">🌐 <a href="https://bt4gprx.com/">BT4G ▲</a></td><td align="left">游戏种子搜索引擎，综合资源站。</td></tr><tr><td align="left">🌐 <a href="https://torrentgalaxy.to/">TorrentGalaxy</a></td><td align="left">游戏种子搜索引擎，综合资源站。</td></tr><tr><td align="left">🌐 <a href="https://www.limetorrents.lol/">LimeTorrents</a></td><td align="left">游戏种子搜索引擎，综合资源站。</td></tr><tr><td align="left">🌐 <a href="https://rutracker.org/forum/index.php">RuTracker.org</a></td><td align="left">游戏种子搜索引擎，综合资源站。</td></tr><tr><td align="left">🌐 <a href="https://pcgamestorrents.com/">PCGamesTorrent</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://www.gamestorrents.fm/home/">GamesTorrents</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://cpygames.com/">CPY GAMES</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://crotorrents.com/">CroTorrents</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://igg-games.com/">IGGGAMES</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://fitgirl-repacks.site/">FitGirl Repacks</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://repack-games.com/">Repack-Games</a></td><td align="left">游戏种子磁力网站。</td></tr><tr><td align="left">🌐 <a href="https://rutracker.org/forum/index.php">RuTracker</a></td><td align="left">游戏种子磁力网站，俄语。</td></tr><tr><td align="left">🌐 <a href="https://thebyrut.org/">Byrut</a></td><td align="left">游戏种子磁力网站，俄语。</td></tr></tbody></table><h2 id="4、Mac-游戏"><a href="#4、Mac-游戏" class="headerlink" title="4、Mac 游戏"></a>4、Mac 游戏</h2><table><thead><tr><th align="left">▼ <strong>Mac 游戏</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">📥 <a href="https://www.lanzouw.com/i726k0z4j4pi">Mac 游戏集合</a></td><td align="left">某游戏网站流出 300+ 款 Mac 平台热门游戏，提供网盘下载。</td></tr><tr><td align="left">📥 <a href="https://playcover.io/">PlayCover</a></td><td align="left">在 Mac（Arm芯片） 上运行 iOS 应用，比如“<strong>原神</strong>”等游戏。</td></tr><tr><td align="left">📥 <a href="https://getwhisky.app/zh-Hans/">Whisky</a></td><td align="left">在 Mac（Arm芯片） 上运行 Windows 应用，比如“<strong>原神</strong>”等游戏。</td></tr><tr><td align="left">🌐 <a href="https://decrypt.day/">Decrypt Day</a></td><td align="left">IPA 脱壳应用下载，海外网站，速度可能较慢。</td></tr><tr><td align="left">🌐 <a href="https://ipa.store/">iPA Store</a></td><td align="left">IPA 脱壳应用下载，需要注册载，每天 2 个免费下载次数。</td></tr></tbody></table><h2 id="5、游戏工具"><a href="#5、游戏工具" class="headerlink" title="5、游戏工具"></a>5、游戏工具</h2><table><thead><tr><th align="left">▼ <strong>游戏工具</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">📜 <a href="https://greasyfork.org/zh-CN/scripts/437233">防沉迷终结者</a></td><td align="left">去除国内 17173、4399 等游戏网站的登录需求。</td></tr><tr><td align="left">📥 <a href="https://browser.360.cn/eex/index.html">360 极速浏览器X</a></td><td align="left">目前还支持 Flash 的浏览器，推荐<a href="https://www.123pan.com/s/7bzA-pQpOd">奶酪版本</a>，而且还有 <a href="https://browser.360.cn/ee/mac/index.html">Mac 版本</a>。</td></tr><tr><td align="left">📥 <a href="https://pcstory.net/">蘑菇游戏下载器</a></td><td align="left">下载器，网吧 36T 游戏全部到你口袋里，点击下载完成后直接开玩。</td></tr><tr><td align="left">📥 <a href="https://steampp.net/">Watt Toolkit</a></td><td align="left">加速器，支持 Win、Mac、Linux 多平台。</td></tr><tr><td align="left">📥 <a href="https://uu.163.com/">UU加速器</a></td><td align="left">加速器，网易出品，免费，不止快，还很稳。</td></tr><tr><td align="left">📥 <a href="https://www.wemod.com/zh">WeMod</a></td><td align="left">修改器，PC 游戏作弊、修改器和 Mod 尽在一款应用中。</td></tr><tr><td align="left">📥 <a href="https://blog.csdn.net/vbcom/article/details/7245186">DirectX Repair</a></td><td align="left">检测并修复系统的 DirectX 状态，玩大型游戏必备。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1、小游戏&quot;&gt;&lt;a href=&quot;#1、小游戏&quot; class=&quot;headerlink&quot; title=&quot;1、小游戏&quot;&gt;&lt;/a&gt;1、小游戏&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;▼ &lt;strong&gt;打发时间&lt;/strong&gt;</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="游戏" scheme="https://dont-sleep-so-late.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis笔记</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/mybatis/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/mybatis/</id>
    <published>2023-11-13T15:08:34.000Z</published>
    <updated>2023-11-13T15:17:57.074Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、MyBatis"><a href="#一、MyBatis" class="headerlink" title="一、MyBatis"></a>一、MyBatis</h2><h3 id="1-MyBatis："><a href="#1-MyBatis：" class="headerlink" title="1.MyBatis："></a>1.MyBatis：</h3><p>MyBatis：是一个半自动映射的框架。这里所谓的“半自动”是相对于Hibernate全表映射而言的，MyBatis需要手动匹配提供POJO、SQL和映射关系，而Hibernate只需提供POJO和映射关系即可。<br>与Hibernate相比，虽然使用MyBatis手动编写SQL要比使用Hibernate的工作量大，但MyBatis可以配置动态SQL并优化SQL，可以通过配置决定SQL的映射规则，它还支持存储过程等。对于一些复杂的和需要优化性能的项目来说，显然使用MyBatis更加合适。</p><p>MyBatis框架是当前主流的Java持久层（数据访问层DAO）框架之一，它与Hibernate一样，也是一种ORM（Object&#x2F;Relation Mapping，即对象关系映射）框架。所谓的ORM就是一种为了解决面向对象与关系型数据库中数据类型不匹配的技术，它通过描述Java对象与数据库表之间的映射关系，自动将Java应用程序中的对象持久化到关系型数据库的表中。</p><h3 id="2-MyBatis核心组件："><a href="#2-MyBatis核心组件：" class="headerlink" title="2.MyBatis核心组件："></a>2.MyBatis核心组件：</h3><p>SqlSessionFactoryBuilder（构造器）: 根据XML配置（推荐方式）或者代码来生成SqlSessionFactory（工厂接口）对象, 创建完成后该对象就不需要了，所以只需要使用一次，后面无需保存。</p><p>SqlSessionFactory：依靠工厂来创建SqlSession（会话）对象；该对象是线程安全的，所以整个应用只需要保存一个。</p><p>SqlSession：类似于一个JDBC的Connection对象。是一个既可以发送SQL去执行并返回结果，也可以获取Mapper的接口。</p><p>SQL Mapper：是MyBatis新设计的组件，是由一个Java接口和XML文件（或注解）构成的，需要给出对应的SQL和映射规则。负责发送SQL去执行，并返回结果。通过namespace.id调用Mapper中定义的SQL。</p><h3 id="3-MyBatis框架的工作执行流程如下："><a href="#3-MyBatis框架的工作执行流程如下：" class="headerlink" title="3. MyBatis框架的工作执行流程如下："></a>3. MyBatis框架的工作执行流程如下：</h3><p>（1）读取MyBatis配置文件mybatis-config.xml。<br>（2）加载映射文件Mapper.xml。<br>（3）构建会话工厂。<br>（4）创建SqlSession对象。<br>（5）使用Executor接口来操作数据库。<br>（6）使用MappedStatement类型的参数对映射信息进行封装。<br>（7）输入参数映射。<br>（8）输出结果映射。</p><h3 id="4-元素"><a href="#4-元素" class="headerlink" title="4. &lt;sql&gt;元素"></a>4. <code>&lt;sql&gt;</code>元素</h3><p><code>&lt;sql&gt;</code>元素的作用就是定义可重用的SQL代码片段。使用时，先通过<code>&lt;sql&gt;</code>元素定义重用的代码片段，然后在需要使用的地方使用<code>&lt;include&gt;</code>元素的refid属性引用了自定义的代码片段。</p><h3 id="5-MyBatis核心对象SqlSessionFactory的获取方式："><a href="#5-MyBatis核心对象SqlSessionFactory的获取方式：" class="headerlink" title="5.MyBatis核心对象SqlSessionFactory的获取方式："></a>5.MyBatis核心对象SqlSessionFactory的获取方式：</h3><p>SqlSessionFactory对象的实例可以通过SqlSessionFactoryBuilder对象来构建，而SqlSessionFactoryBuilder则可以通过XML配置文件或一个预先定义好的Configuration实例构建出SqlSessionFactory的实例，通过XML配置文件构建出的SqlSessionFactory实例，其实现代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;配置文件位置&quot;</span>);</span><br><span class="line"><span class="comment">// 根据配置文件构建SqlSessionFactory</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br></pre></td></tr></table></figure><p><strong>MyBatis使用过程：</strong><br>使用SqlSessionFactoryBuilder创建SqlSessionFactory对象;</p><p>然后通过SqlSessionFactory创建SqlSession对象;</p><p>通过SqlSession对象完成基本操作（执行SQL）。</p><p>关闭SqlSession。</p><h3 id="6-元素"><a href="#6-元素" class="headerlink" title="6. &lt;mapper&gt;元素"></a>6. <code>&lt;mapper&gt;</code>元素</h3><p>在映射文件中，<code>&lt;mapper&gt;</code>元素是映射文件的根元素，其他元素都是它的子元素。这些子元素及其作用如下所示：<br><code>&lt;select&gt;</code>：用于映射查询语句，可自定义参数，返回结果集等。<br><code>&lt;insert&gt;</code>：用于映射插入语句，执行后返回一个整数，代表插入的条数。<br><code>&lt;update&gt;</code>：用于映射更新语句，执行后返回一个整数，代表更新的条数。<br><code>&lt;delete&gt;</code>：用于映射删除语句，执行后返回一个整数，代表删除的条数。<br><code>&lt;sql&gt;</code>：用于定义一部分SQL，然后可被其他语句引用此SQL。<br><code>&lt;cache&gt;</code>：用于给定命名空间的缓存配置。<br><code>&lt;cache-ref&gt;</code>：用于其他命名空间缓存配置的引用。<br><code>&lt;resultMap&gt;</code>：用于描述如何从数据库结果集中来加载对象。</p><p>当数据表中的列和需要返回的对象的属性不完全一致， MyBatis是不会自动赋值的。此时，就可以使用<code>&lt;resultMap&gt;</code>元素进行处理。<code>&lt;resultMap&gt;</code>元素的子元素<code>&lt;id&gt;</code>用于表示哪个列是主键，而<code>&lt;result&gt;</code>元素用于表示POJO和数据表中普通列的映射关系。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;custResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;custId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cust_id&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-mybatis中映射文件include标签应用"><a href="#7-mybatis中映射文件include标签应用" class="headerlink" title="7. mybatis中映射文件include标签应用"></a>7. mybatis中映射文件include标签应用</h3><p>MyBaits映射文件中使用<code>&lt;include&gt;</code>元素的 refid 属性可以引用自定义的代码片段，其属性值为自定义代码片段的id。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;custColumns&quot;</span>&gt;</span> </span><br><span class="line">cust_id custId,name,age </span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;sqlCustList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">select</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;custColumns&quot;</span>/&gt;</span>   </span><br><span class="line">from customer c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="8-MyBatis映射文件中元素"><a href="#8-MyBatis映射文件中元素" class="headerlink" title="8. MyBatis映射文件中&lt;mapper&gt;元素"></a>8. MyBatis映射文件中<code>&lt;mapper&gt;</code>元素</h3><p>MyBatis映射文件中<code>&lt;mapper&gt;</code>元素是配置文件的根元素，它包含一个namespace属性，该属性为这个<code>&lt;mapper&gt;</code>指定了唯一的命名空间。在Mybatis映射文件中，每个操作都有一个id属性表示操作的唯一标识。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;customer&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;customerList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">         select * from customer</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9-MyBatis映射文件中元素"><a href="#9-MyBatis映射文件中元素" class="headerlink" title="9. MyBatis映射文件中&lt;insert&gt;元素"></a>9. MyBatis映射文件中<code>&lt;insert&gt;</code>元素</h3><p>MyBatis映射文件中<code>&lt;insert&gt;</code>元素用于映射插入语句，在执行完元素中定义的SQL语句后，与<code>&lt;update&gt;</code>和<code>&lt;delete&gt;</code>元素在执行完之后一样，也会返回一个表示影响记录条数的整数。<code>&lt;insert&gt;</code>元素的属性与<code>&lt;select&gt;</code>元素的属性不同，可以使用keyProperty属性指定哪个是主键字段，使用useGeneratedKeys属性定义主键是否使用数据库内置策略生成，从而实现对于表中自增编号主键列的主键回填和自定义功能。</p><h3 id="10-根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下："><a href="#10-根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下：" class="headerlink" title="10.根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下："></a>10.根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下：</h3><p>通常一个映射文件对应一个Mapper接口，映射文件中的namespace与接口的全限定名一致。</p><p>映射文件中每个操作id对应Mapper接口的一个方法，方法名与映射文件中操作的id相同，参数类型和返回值类型与操作中的parameterType和resultType相同</p><p>SQL调用的时候通过接口调用，而不用再指出操作的id</p><h3 id="11-MyBatis配置XML文件结构如下"><a href="#11-MyBatis配置XML文件结构如下" class="headerlink" title="11.MyBatis配置XML文件结构如下"></a>11.MyBatis配置XML文件结构如下</h3><p>mybatis-config.xml作为MyBatis的全局配置文件，配置了MyBatis的运行环境等信息。<br>MyBatis配置XML文件结构如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="comment">&lt;!-- 配置--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">properties</span>/&gt;</span><span class="comment">&lt;!-- 属性--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">settings</span>/&gt;</span><span class="comment">&lt;!--设置--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>/&gt;</span><span class="comment">&lt;!-- 类型命名--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeHandlers</span>/&gt;</span> <span class="comment">&lt;!--类型处理器--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">objectFactory</span>/&gt;</span>  &lt;!– 对象工厂 --&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">plugings</span>/&gt;</span>  <span class="comment">&lt;!--插件 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span>&gt;</span> <span class="comment">&lt;!--配置环境--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span>&gt;</span> <span class="comment">&lt;!--环境变量--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span>/&gt;</span><span class="comment">&lt;!--事务管理器--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span>/&gt;</span> <span class="comment">&lt;!--数据源--&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">databaseIdProvider</span>/&gt;</span><span class="comment">&lt;!--数据库厂商标识--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>/&gt;</span> <span class="comment">&lt;!--映射器--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这些层次是不能够颠倒顺序的，如果颠倒顺序，MyBatis在解析XML文件的时候就会出现异常。例如：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Customer&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Customer&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Course&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Course&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.QuickManual&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;QuickManual&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!-- ?useUnicode=true&amp;amp;characterEncoding=utf8为了支持中文数据的写入 --&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CustomerMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CourseMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/QuickManualMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、MyBatis&quot;&gt;&lt;a href=&quot;#一、MyBatis&quot; class=&quot;headerlink&quot; title=&quot;一、MyBatis&quot;&gt;&lt;/a&gt;一、MyBatis&lt;/h2&gt;&lt;h3 id=&quot;1-MyBatis：&quot;&gt;&lt;a href=&quot;#1-MyBatis：&quot; cla</summary>
      
    
    
    
    <category term="后端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Mybatis" scheme="https://dont-sleep-so-late.github.io/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVC笔记</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/SpringMVC/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/SpringMVC/</id>
    <published>2023-11-13T15:00:34.000Z</published>
    <updated>2023-11-14T13:04:01.848Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Spring框架"><a href="#一、Spring框架" class="headerlink" title="一、Spring框架"></a>一、Spring框架</h2><h3 id="1-典型的Web层框架包括："><a href="#1-典型的Web层框架包括：" class="headerlink" title="1.典型的Web层框架包括："></a>1.典型的Web层框架包括：</h3><p>Struts1<br>Web work<br>Struts2<br>Spring MVC</p><p>Spring MVC是Spring提供的一个实现了Web MVC设计模式的轻量级Web框架。采用工厂模式。它与Struts2框架一样，都属于MVC框架，但其使用和性能等方面比Struts2更加优异。SpringMVC项目中必须添加的JAR包包括：4个核心JAR包、commons-logging的JAR以及两个web相关的JAR（spring-web和spring-webmvc的JAR包）。</p><h3 id="2-Spring-MVC的特点。"><a href="#2-Spring-MVC的特点。" class="headerlink" title="2.Spring MVC的特点。"></a>2.Spring MVC的特点。</h3><p>（1） 是Spring框架的一部分，可以方便的利用Spring所提供的其他功能。<br>（2） 灵活性强，易于与其他框架集成。<br>（3） 提供了一个前端控制器DispatcherServlet，使开发人员无需额外开发控制器对象。<br>（4） 可自动绑定用户输入，并能正确的转换数据类型。<br>（5） 内置了常见的校验器，可以校验用户输入。如果校验不能通过，那么就会重定向到输入表单。<br>（6） 支持国际化。可以根据用户区域显示多国语言。</p><h3 id="3-Spring-MVC主要有如下优点："><a href="#3-Spring-MVC主要有如下优点：" class="headerlink" title="3.Spring MVC主要有如下优点："></a>3.Spring MVC主要有如下优点：</h3><p>（1）是Spring框架的一部分，可以方便的利用Spring所提供的其他功能。<br>（2）灵活性强，易于与其他框架集成。<br>（3）提供了一个前端控制器DispatcherServlet，使开发人员无需额外开发控制器对象。<br>（4）可自动绑定用户输入，并能正确的转换数据类型。<br>（5）内置了常见的校验器，可以校验用户输入。如果校验不能通过，那么就会重定向到输入表单。<br>（6）支持国际化。可以根据用户区域显示多国语言。<br>（7）支持多种视图技术。它支持JSP、Velocity和FreeMarker等视图技术。<br>（8）使用基于XML的配置文件，在编辑后，不需要重新编译应用程序。</p><h3 id="4-Spring-MVC框架的工作流程如下："><a href="#4-Spring-MVC框架的工作流程如下：" class="headerlink" title="4.Spring MVC框架的工作流程如下："></a>4.Spring MVC框架的工作流程如下：</h3><p>（1）用户通过浏览器向服务器发送请求，请求会被Spring MVC的前端控制器DispatcherServlet所拦截。<br>（2）DispatcherServlet拦截到请求后，会调用HandlerMapping处理器映射器。<br>（3）处理器映射器根据请求URL找到具体的处理器，生成处理器对象及处理器拦截器（如果有则生成）一并返回给DispatcherServlet 。<br>（4）DispatcherServlet会通过返回信息选择合适的HandlerAdapter（处理器适配器）。<br>（5）HandlerAdapter会调用并执行Handler（处理器），这里的处理器指的就是程序中编写的Controller类，也被称之为后端控制器。<br>（6）Controller执行完成后，会返回一个ModelAndView对象，该对象中会包含视图名或包含模型和视图名。<br>（7）HandlerAdapter将ModelAndView对象返回给DispatcherServlet 。<br>（8）DispatcherServlet会根据ModelAndView对象选择一个合适的ViewReslover（视图解析器）。<br>（9）ViewReslover解析后，会向DispatcherServlet中返回具体的View（视图）。<br>（10）DispatcherServlet对View进行渲染（即将模型数据填充至视图中）。<br>（11）视图渲染结果会返回给客户端浏览器显示。</p><h3 id="5-在web-xml中，配置Spring-MVC的前端控制器DispatcherServlet"><a href="#5-在web-xml中，配置Spring-MVC的前端控制器DispatcherServlet" class="headerlink" title="5.在web.xml中，配置Spring MVC的前端控制器DispatcherServlet"></a>5.在web.xml中，配置Spring MVC的前端控制器DispatcherServlet</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231113230308.png"></p><p>如果没有通过<init-param>元素配置，应用程序会默认到WEB-INF目录下寻找如下方式命名的配置文件：servletName-servlet.xml。servletName指的是部署在web.xml文件中的DispatcherServlet的名称，而-servlet.xml是配置文件名的固定写法，如在WEB-INF下查找springmvc-servlet.xml文件。</p><h3 id="6-控制器方法的返回值类型"><a href="#6-控制器方法的返回值类型" class="headerlink" title="6.控制器方法的返回值类型"></a>6.控制器方法的返回值类型</h3><p>ModelAndView类型中可以添加Model数据，并指定视图；String类型的返回值可以跳转视图，但不能携带数据；而void类型主要在异步请求时使用，它只返回数据，而不会跳转视图。</p><h3 id="7-Controller注解在使用时可分为如下两步："><a href="#7-Controller注解在使用时可分为如下两步：" class="headerlink" title="7.@Controller注解在使用时可分为如下两步："></a>7.@Controller注解在使用时可分为如下两步：</h3><p>（1）在相应的类上标注@Controller注解。<br>（2）在Spring MVC的配置文件中添加相应的扫描配置信息。首先需要在配置文件中引入context名称空间的配置，然后使用<code>&lt;context:component-scan&gt;</code>元素指定需要扫描的类包。</p><h3 id="8-SpringMVC框架下请求处理方法的参数类型："><a href="#8-SpringMVC框架下请求处理方法的参数类型：" class="headerlink" title="8.SpringMVC框架下请求处理方法的参数类型："></a>8.SpringMVC框架下请求处理方法的参数类型：</h3><p>基于SpringMVC框架下请求处理方法的参数类型主要有：HttpServletRequest、HttpServletResponse、HttpSession、Model、HttpMethod等；<br>基于SpringMVC框架下请求处理方法的返回类型主要有：ModelAndView、Map、String、void、HttpEntity&lt;?&gt;、View等。</p><h3 id="9-SpringMVC中获取输入值的方式主要有："><a href="#9-SpringMVC中获取输入值的方式主要有：" class="headerlink" title="9.SpringMVC中获取输入值的方式主要有："></a>9.SpringMVC中获取输入值的方式主要有：</h3><p>在action的方法中写与请求参数同名的变量</p><p>在action的方法的参数中使用HttpServletRequest、HttpServletResponse、HttpSession、Model、HttpMethod等对象</p><p>在方法的参数中使用@RequestParam注解</p><p>界面上的输入信息是某个自定义对象的信息，在接收的时候直接封装为该自定义对象</p><p>把请求参数放到请求路径中，即采用RESTful风格。</p><h3 id="10-SpringMVC中对用户的响应方式主要有："><a href="#10-SpringMVC中对用户的响应方式主要有：" class="headerlink" title="10.SpringMVC中对用户的响应方式主要有："></a>10.SpringMVC中对用户的响应方式主要有：</h3><p>返回ModelAndView对象，如new ModelAndView(“studentList”,model)，第一个参数表示视图，第二参数表示视图中需要的数据。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentUpdateView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">updateView</span><span class="params">(String id)</span>&#123;</span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.findById(id);</span><br><span class="line">Map&lt;String,Object&gt; model = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">model.put(<span class="string">&quot;student&quot;</span>,student);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;studentUpdate&quot;</span>,model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制层的方法返回值类型为String，在方法中返回表示输出界面的字符串，与ModelAndView中的第一个参数相同</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;studentAddView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addView</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentAdd&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​使用String表示要返回的视图，使用Model表示要返回的数据。在请求方法的参数中定义Model对象，在请求方法体中把数据存储到Model对象中响应给前端页面。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentList.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">studentList</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">List&lt;Student&gt; students = studentService.getStudents();</span><br><span class="line">model.addAttribute(<span class="string">&quot;students&quot;</span>,students);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentList&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​返回JSON数据。</p><h3 id="11-RequestParam注解"><a href="#11-RequestParam注解" class="headerlink" title="11.@RequestParam注解"></a>11.@RequestParam注解</h3><p>@RequestParam注解主要用于对请求中的参数进行定义，多用于在请求参数名与方法形参名不一致时的参数间接绑定。在使用时可以指定他的4个属性，具体如下：<br>（1）value：name属性的别名，这里指参数的名字，即入参的请求参数名字，如果只使用vaule属性，则可以省略value属性名。<br>（2）name：用于指定请求头绑定的名称。<br>（3）required ：用于指定参数是否必须，默认是true，表示请求中一定要有相应的参数。<br>（4）defaultValue：默认值，表示如果请求中没有同名参数时的默认值。</p><h3 id="12-在使用包装POJO类型数据绑定时"><a href="#12-在使用包装POJO类型数据绑定时" class="headerlink" title="12.在使用包装POJO类型数据绑定时"></a>12.在使用包装POJO类型数据绑定时</h3><p>在使用包装POJO类型数据绑定时，前端请求的参数名编写必须符合以下两种情况：<br>（1）如果查询条件参数是包装类的直接基本属性，则参数名直接用对应的属性名；<br>（2）如果查询条件参数是包装类中POJO的子属性，则参数名必须为“对象.属性”，其中“对象”要和包装POJO中的对象属性名称一致，“属性”要和包装POJO中的对象子属性一致。</p><h3 id="13-JSON数据交互时，主要使用的两个注解-RequestBody和-ResponseBody"><a href="#13-JSON数据交互时，主要使用的两个注解-RequestBody和-ResponseBody" class="headerlink" title="13.JSON数据交互时，主要使用的两个注解@RequestBody和@ResponseBody"></a>13.JSON数据交互时，主要使用的两个注解@RequestBody和@ResponseBody</h3><p>JSON数据交互时，主要使用了两个注解@RequestBody和@ResponseBody。其中@RequestBody用于将请求体中的数据绑定到方法的形参中，在使用时标准在在方法的形参上。@ResponseBody用于直接返回return对象。Jackson用到的开源包的有 jackson-annoations-2.8.8.jar、 jackson-core-2.8.8.jar、jackson-databind-2.8.8.jar。</p><h3 id="14-JSON对象的数组结构"><a href="#14-JSON对象的数组结构" class="headerlink" title="14.JSON对象的数组结构"></a>14.JSON对象的数组结构</h3><p>JSON对象的数组结构以 “[” 开始，以 “]” 结束，对象结构以 “{” 开始，以 “}”结束，JSON对象数据结构的中间部分由键值对（key：value）以英文 “,” 分隔的值的列表组成。关键字（key）必须为String类型，值（value）可以是String、Number、Object、Array等数据类型。</p><h3 id="15-RESTful"><a href="#15-RESTful" class="headerlink" title="15.RESTful"></a>15.RESTful</h3><p>RESTful也称之为REST，是英文“Representational State Transfer”的简称。RESTful风格在HTTP请求中，使用put、delete、post和get方式分别对应添加、删除、修改和查询的操作。</p><h3 id="16-PathVariable-“id”-注解"><a href="#16-PathVariable-“id”-注解" class="headerlink" title="16.@PathVariable(“id”)注解"></a>16.@PathVariable(“id”)注解</h3><p>@PathVariable(“id”)注解用于接收并绑定请求参数，它可以将URL请求中的变量映射到请求方法的形参上。<br>如果请求路径中的参数名方法形参名称一样，则@PathVariable后面的 “ (“id”) ” 可以省略。</p><h3 id="17-Spring-MVC的文件上传"><a href="#17-Spring-MVC的文件上传" class="headerlink" title="17.Spring MVC的文件上传"></a>17.Spring MVC的文件上传</h3><p>Spring MVC的文件上传是通过MultipartResolver对象实现的。</p><p>文件上传表单需要满足的3个条件如下：<br>（1） form表单的method属性设置为post；<br>（2） form表单的enctype属性设置为multipart&#x2F;form-data；<br>（3） 提供的文件上传输入框。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、Spring框架&quot;&gt;&lt;a href=&quot;#一、Spring框架&quot; class=&quot;headerlink&quot; title=&quot;一、Spring框架&quot;&gt;&lt;/a&gt;一、Spring框架&lt;/h2&gt;&lt;h3 id=&quot;1-典型的Web层框架包括：&quot;&gt;&lt;a href=&quot;#1-典型的We</summary>
      
    
    
    
    <category term="后端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring笔记</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/Spring%E7%AC%94%E8%AE%B0/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/Spring%E7%AC%94%E8%AE%B0/</id>
    <published>2023-11-13T14:20:34.000Z</published>
    <updated>2023-11-18T12:29:25.031Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Spring框架"><a href="#一、Spring框架" class="headerlink" title="一、Spring框架"></a>一、Spring框架</h2><h3 id="1-三层体系架构"><a href="#1-三层体系架构" class="headerlink" title="1.三层体系架构"></a>1.三层体系架构</h3><p>在实际开发中，通常服务器端在采用分层方式进行架构。<br>三层体系架构，分别为：<br>表示层(Web层，包括控制层，使用SpringMVC框架)、<br>业务逻辑层(Service，使用Spring框架)、<br>持久层(数据访问层，Dao，使用Mybatis框架)。<br>Spring对每一层都提供了技术支持。</p><h3 id="2-Spring的核心"><a href="#2-Spring的核心" class="headerlink" title="2.Spring的核心"></a>2.Spring的核心</h3><p>Spring的核心是控制反转（IoC： Inverse of Control ）和面向切面编程（AOP： Aspect Oriented Programming ）。<br>在使用Spring框架之后，对象的实例不再由调用者来创建，而是由Spring容器来创建，Spring容器会负责控制程序之间的关系，而不是由调用者的程序代码直接控制。</p><p>IoC的全称是Inversion of Control，中文名称为控制反转。控制反转就是指在使用Spring框架之后，对象的实例不再由调用者来创建，而是由Spring容器来创建，Spring容器会负责控制程序之间的关系，而不是由调用者的程序代码直接控制。这样，控制权由应用代码转移到了Spring容器，控制权发生了反转。</p><p>DI的全称是Dependency Injection，中文称之为依赖注入。它与控制反转（IoC）的含义相同，只不过这两个称呼是从两个角度描述的同一个概念。从Spring容器的角度来看，Spring容器负责将被依赖对象赋值给调用者的成员变量，这相当于为调用者注入了它依赖的实例，这就是Spring的依赖注入。</p><h3 id="3-Spring-的Bean中主要的装配方式"><a href="#3-Spring-的Bean中主要的装配方式" class="headerlink" title="3.Spring 的Bean中主要的装配方式"></a>3.Spring 的Bean中主要的装配方式</h3><p>Spring 的Bean中主要包含三种装配方式，分别为基于XML的装配，基于Annotation的装配和自动装配，这三种装配方式的用法如下：</p><h4 id="（1）基于XML的装配："><a href="#（1）基于XML的装配：" class="headerlink" title="（1）基于XML的装配："></a>（1）基于XML的装配：</h4><p>Spring提供了2种基于XML的装配方式：设值注入（Setter Injection）和构造注入（Constructor Injection）。<br>一种是属性setter方法注入（或设值注入），另一种是构造方法注入。属性setter方法注入是指IoC容器使用setter方法来注入被依赖的实例。通过调用无参构造器或无参静态工厂方法实例化Bean后，调用该Bean的setter方法，即可实现基于setter方法的依赖注入。属性setter方法注入的必备条件如下：</p><p>Bean类必须有一个无参构造方法</p><p>Bean类必须为属性提供setter方法</p><p>在配置文件中，使用<code>&lt;property&gt;</code>元素来为每个属性注入值</p><p>设置注入中的Bean类必须提供一个默认的无参构造方法，同时必须为需要注入的属性提供对应的setter方法。使用设值注入时，在Spring配置文件中，需要使用<code>&lt;bean&gt;</code>元素的子元素<code>&lt;property&gt;</code>来为每个属性注入值。使用构造注入时，在配置文件里，需要使用<code>&lt;bean&gt;</code>元素的子元素<code>&lt;constructor-arg&gt;</code>来定义构造方法的参数，可以使用其value属性（或子元素）来设置该参数的值。<br>构造方法注入是指IoC容器使用构造方法来注入被依赖的实例。基于构造方法的依赖注入通过调用带参数的构造方法来实现，每个参数代表着一个依赖。要求必须满足如下条件：</p><p>Bean类必须提供有参构造方法</p><p>配置文件中，使用<code>&lt;constructor-arg&gt;</code>元素来为参数注入值</p><h4 id="（2）基于Annotation的装配："><a href="#（2）基于Annotation的装配：" class="headerlink" title="（2）基于Annotation的装配："></a>（2）基于Annotation的装配：</h4><p>使用基于Annotation的装配时，首先需要使用@Repository、@Service与@Controller分别对实现类进行标注，然后用@Autowired或@Resource注解对注入的Bean的属性进行标注，最后在Spring的配置文件中，通过<code>&lt;context:annotation-config /&gt;</code>来开启注解处理器，或使用<code>&lt;context:component-scan base-package=&quot;Bean所在的包路径&quot;/&gt;</code>的配置方式即可实现Annotation的装配。</p><p>@Controller通常作用在控制层，用于将控制层的类标识为Spring中的Bean。</p><p>@Service通常作用在业务层，用于将业务层的类标识为Spring中的Bean。</p><p>@Repository通常作用在数据持久层（或数据访问层，DAO层），用于将数据持久层的类标识为Spring中的Bean。</p><p>@Autowired或@Resource注解对注入的Bean的属性进行标注，用于将实例化后对象注入到Bean的属性中，实现依赖注入。</p><h4 id="（3）自动装配："><a href="#（3）自动装配：" class="headerlink" title="（3）自动装配："></a>（3）自动装配：</h4><p>在<code>&lt;bean&gt;</code>元素中使用 autowire属性，并将其属性值设置为 byName或者 byType即可实现自动装配。</p><h3 id="4-Spring框架的优点如下："><a href="#4-Spring框架的优点如下：" class="headerlink" title="4.Spring框架的优点如下："></a>4.Spring框架的优点如下：</h3><p>（1）非侵入式设计：Spring是一种非侵入式（non-invasive）框架，它可以使应用程序代码对框架的依赖最小化。<br>（2）方便解耦、简化开发：Spring就是一个大工厂，可以将所有对象的创建和依赖关系的维护工作都交给Spring容器管理，大大的降低了组件之间的耦合性。<br>（3）支持AOP：Spring提供了对AOP的支持，它允许将一些通用任务，如安全、事务、日志等进行集中式处理，从而提高了程序的复用性。<br>（4）支持声明式事务处理：只需要通过配置就可以完成对事务的管理，而无需手动编程。<br>（5）方便程序的测试：Spring提供了对Junit4的支持，可以通过注解方便的测试Spring程序。<br>（6）方便集成各种优秀框架：Spring不排斥各种优秀的开源框架，其内部提供了对各种优秀框架（如：Struts、Hibernate、MyBatis、Quartz等）的直接支持。<br>（7）降低了Java EE API的使用难度：Spring对Java EE开发中非常难用的一些API（如：JDBC、JavaMail等），都提供了封装，使这些API应用难度大大降低。</p><h3 id="5-Spring框架包："><a href="#5-Spring框架包：" class="headerlink" title="5.Spring框架包："></a>5.Spring框架包：</h3><p>Spring开发所需的jar包分为两个部分： Spring框架4个核心基础包和一个第三方依赖包。</p><p>spring-core-4.3.6.RELEASE.jar<br>包含Spring框架的核心工具类，Spring其它组件都要用到这个包里的类。</p><p>spring-beans-4.3.6.RELEASE.jar<br>所有应用都要用到的JAR包，它包含访问配置文件、创建和管理Bean以及进行控制反转或者依赖注入操作相关的所有类。</p><p>spring-context-4.3.6.RELEASE.jar<br>提供了在基础IoC功能上的扩展服务，还提供了许多企业级服务的支持</p><p>spring-expression-4.3.6.RELEASE.jar<br>定义了Spring的表达式语言。</p><p>在使用Spring开发时，除了要使用自带的JAR包外，Spring的核心容器还需要依赖一个第三方包commons.logging的JAR包。</p><h3 id="6-ApplicationContext容器"><a href="#6-ApplicationContext容器" class="headerlink" title="6.ApplicationContext容器"></a>6.ApplicationContext容器</h3><p>通常在Java项目中，通常会通过ClassPathXmlApplicationContext类来实例化ApplicationContext容器的方式，而在Web项目中，ApplicationContext容器的实例化工作会交由Web服务器来完成。</p><h3 id="7-SpringIOC应用示例核心代码："><a href="#7-SpringIOC应用示例核心代码：" class="headerlink" title="7.SpringIOC应用示例核心代码："></a>7.SpringIOC应用示例核心代码：</h3><p>main方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setId(<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">user.setName(<span class="string">&quot;zhangsan22222&quot;</span>);</span><br><span class="line">userService.addUser(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置bean,配置后该类由spring管理--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.ioc.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--依赖注入,配置当前类中相应的属性--&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- &lt;property&gt;标签中的name就是UserService类中的userDao属性名，ref指下面&lt;bean name=&quot;userDao&quot;...&gt;，这样其实是spring将UserDaoImp对象实例化并且调用UserService的setUserDao方法将UserDao注入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">&lt;!—配置bean ，,配置后该类由spring管理--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.ioc.dao.imp.UserDaoImp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"><span class="keyword">public</span> UserDao userDao;</span><br><span class="line"><span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">userDao.addUser(user);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDaoImp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImp</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;添加了一个用户，姓名是&quot;</span></span><br><span class="line">        +user.getName()+user.getId());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二、SpringJDBCTemplate"><a href="#二、SpringJDBCTemplate" class="headerlink" title="二、SpringJDBCTemplate"></a>二、SpringJDBCTemplate</h2><h3 id="1-在Spring的配置文件中配置JDBC"><a href="#1-在Spring的配置文件中配置JDBC" class="headerlink" title="1.在Spring的配置文件中配置JDBC"></a>1.在Spring的配置文件中配置JDBC</h3><p>在Spring的配置文件中配置JDBC时，需要定义了三个Bean，分别是dataSource、jdbcTemplate和需要注入类的Bean。在定义jdbcTemplate时，需要将dataSource注入到jdbcTemplate中，而其他需要使用jdbcTemplate的Bean，也需要将jdbcTemplate注入到该Bean中，这样配置完成后，Spring JDBC就可以使用了。</p><h3 id="2-JdbcTemplate类"><a href="#2-JdbcTemplate类" class="headerlink" title="2.JdbcTemplate类"></a>2.JdbcTemplate类</h3><p>Spring框架提供了JdbcTemplate类，该类是Spring框架数据抽象层的基础。JdbcTemplate类是Spring JDBC的核心类。JdbcTemplate的直接父类是抽象类JdbcAccessor，实现了接口JdbcOperations。<br>在JdbcTemplate类中，提供了大量的更新和查询数据库的方法，使用这些方法来操作数据库，其常用的方法包括execute()、update()和query()。<br>其中execute()方法能够完成执行SQL语句的功能，update()方法可以完成插入、更新和删除数据的操作，query()方法可以用来处理各种对数据库表的查询操作。</p><h3 id="3-dataSource配置"><a href="#3-dataSource配置" class="headerlink" title="3.dataSource配置"></a>3.dataSource配置</h3><p>dataSource配置，即JDBC连接数据库时需要4个基本属性，包括有driverClassName、url、username和password。</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231113223834.png"></p><h3 id="4-Spring-为JDBC提供了三个模板类供选择："><a href="#4-Spring-为JDBC提供了三个模板类供选择：" class="headerlink" title="4.Spring 为JDBC提供了三个模板类供选择："></a>4.Spring 为JDBC提供了三个模板类供选择：</h3><p>JdbcTemplate：最基本的Spring JDBC模板，支持简单的JDBC数据访问功能及基于索引参数的查询。使用占位符（？）绑定参数。</p><p>NamedParameterJdbcTemplate：该模板查询时可以将值以命名参数（：参数名）的形式绑定到SQL中，而不是使用简单的索引参数。</p><p>SimpleJdbcTemplate：该模板利用Java5的一些特性如自动装箱、泛型以及可变参数列表来简化JDBC模板的使用。</p><h3 id="5-SpringJDBCTemplate应用示例核心代码："><a href="#5-SpringJDBCTemplate应用示例核心代码：" class="headerlink" title="5.SpringJDBCTemplate应用示例核心代码："></a>5.SpringJDBCTemplate应用示例核心代码：</h3><p>Main方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span>&#123;</span><br><span class="line">    <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">    <span class="type">UserAction</span> <span class="variable">userAction</span> <span class="operator">=</span> test.getController();</span><br><span class="line">    test.testAdd(userAction);</span><br><span class="line"><span class="comment">//    test.testFindNumbers(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindNameById(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindUser(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindAll(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindMapUser(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindMapAll(userAction);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> UserAction <span class="title function_">getController</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;config/applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserAction</span> <span class="variable">userAction</span> <span class="operator">=</span> (UserAction) context.getBean(<span class="string">&quot;userAction&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> userAction;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span>  <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">7</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">20</span>);</span><br><span class="line">    userAction.add(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindNumbers</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">numbers</span> <span class="operator">=</span> userAction.findNumbers();</span><br><span class="line">    System.out.println(<span class="string">&quot;findNumbers方法的查询结果：&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;共有&quot;</span>+numbers+<span class="string">&quot;个用户！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindNameById</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> userAction.findNameById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;findNameById方法的查询结果：&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;学号为1的学生的姓名为：&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindUser</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findUser方法的查询结果：&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span>  <span class="operator">=</span> userAction.findById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;id：&quot;</span>+user.getId()</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.getName()</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    List&lt;User&gt; users  = userAction.findAll();</span><br><span class="line">    System.out.println(<span class="string">&quot;findAll方法的查询结果：&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(User user:users)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;id：&quot;</span>+user.getId()</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.getName()</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindMapUser</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findMapUser方法的查询结果：&quot;</span>);</span><br><span class="line">    Map&lt;String,Object&gt; user  = userAction.findMapById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;id：&quot;</span>+user.get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.get(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindMapAll</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findMapAll方法的查询结果：&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String,Object&gt;&gt; users  = userAction.findAllMap();</span><br><span class="line">    <span class="keyword">for</span>(Map&lt;String,Object&gt; user:users)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id：&quot;</span>+user.get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">        +<span class="string">&quot;,name:&quot;</span>+user.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        +<span class="string">&quot;,age:&quot;</span>+user.get(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">class</span>=<span class="string">&quot;action.UserAction&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.UserService&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource1&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;npjt&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;namedParameterJdbcTemplate&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource1&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- NamedParameterJdbcTemplate配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;namedParameterJdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>UserAction.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAction</span> &#123;</span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> UserService <span class="title function_">getUserService</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserService userService)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userService = userService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">userService.add(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findNameById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findNumbers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findMapById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findAllMap();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">userDao.add(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findNameById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findNumbers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findMapById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findAllMap();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> NamedParameterJdbcTemplate npjt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> NamedParameterJdbcTemplate <span class="title function_">getNpjt</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> npjt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNpjt</span><span class="params">(NamedParameterJdbcTemplate npjt)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.npjt = npjt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into CUSTOMERS values(?,?,?)&quot;</span>;</span><br><span class="line">jdbcTemplate.update(sql,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;user.getId(),user.getName(),user.getAge()&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*NamedParameterJdbcTemplate使用：Map传参*/</span></span><br><span class="line">String sql1=<span class="string">&quot;insert into CUSTOMERS (id,name,age) values (:id,:name,:age)&quot;</span>;</span><br><span class="line">Map&lt;String,Object&gt; paramMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">paramMap.put(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;npjt&quot;</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;女&quot;</span>);</span><br><span class="line">npjt.update(sql1, paramMap);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*NamedParameterJdbcTemplate使用：实体类（User）传参*/</span></span><br><span class="line">SqlParameterSource paramSource=<span class="keyword">new</span> <span class="title class_">BeanPropertySqlParameterSource</span>(user);</span><br><span class="line">npjt.update(sql1, paramSource);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT NAME FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; id &#125;, String.class);</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT COUNT(*) FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line"><span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="comment">//List&lt;Customer&gt; customers = jdbcTemplate.query(sql, new BeanPropertyRowMapper(Customer.class));</span></span><br><span class="line">List&lt;User&gt; customers = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">CustomerRowMapper</span>());</span><br><span class="line"><span class="keyword">return</span> customers;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">User</span> <span class="variable">customer</span> <span class="operator">=</span> (User) jdbcTemplate.queryForObject(sql,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; id &#125;,<span class="keyword">new</span> <span class="title class_">CustomerRowMapper</span>());</span><br><span class="line"><span class="keyword">return</span> customer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate.queryForMap(sql,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;id&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate.queryForList(sql);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三、SpringAOP和事务控制"><a href="#三、SpringAOP和事务控制" class="headerlink" title="三、SpringAOP和事务控制"></a>三、SpringAOP和事务控制</h2><h3 id="1-AOP-Aspect-Oriented-Programming-面向切面编程-："><a href="#1-AOP-Aspect-Oriented-Programming-面向切面编程-：" class="headerlink" title="1.AOP(Aspect-Oriented Programming,面向切面编程)："></a>1.AOP(Aspect-Oriented Programming,面向切面编程)：</h3><p>是Spring用到的核心技术之一，是对传统 OOP(Object-Oriented Programming,面向对象编程)的补充。</p><p>AOP在程序开发中主要用来解决一些系统层面上的问题，比如日志，事务，权限等。</p><p>AOP的主要编程对象是切面(aspect)，采用AOP，可以对分散在各处且与对象核心功能无关的一些功能行为代码（横切代码）进行封装，使其成为一个可重用的模块，这个模块被命名为“切面”（Aspect），切面将那些与业务无关，却被业务模块共同调用的逻辑提取并封装起来，减少了系统中的重复代码，降低了模块间的耦合度，同时提高了系统的可维护性。</p><h3 id="2-AOP框架：Spring-AOP和AspectJ。"><a href="#2-AOP框架：Spring-AOP和AspectJ。" class="headerlink" title="2.AOP框架：Spring AOP和AspectJ。"></a>2.AOP框架：Spring AOP和AspectJ。</h3><p>目前流行的AOP框架有两个：Spring AOP和AspectJ</p><p>Spring AOP代理可以是JDK动态代理，也可是CGLIB代理。Spring默认使用JDK动态代理，在需要代理类而不是代理接口的时候，Spring会自动切换为使用CGLIB代理，不过现在的项目都是面向接口编程，所以JDK动态代理相对来说用的还是多一些。</p><p>新版本的Spring框架，建议使用AspectJ来开发AOP。 使用AspectJ实现AOP有两种方式：一种是基于XML的声明式AspectJ，另一种是基于注解的声明式AspectJ。</p><h3 id="3-AspectJ框架中注解"><a href="#3-AspectJ框架中注解" class="headerlink" title="3.AspectJ框架中注解"></a>3.AspectJ框架中注解</h3><p>AspectJ框架中注解@Pointcut用于定义切入点表达式，在使用时还需定义一个包含名字和任意参数的方法签名来表示切入点名称。</p><h3 id="4-Spring的配置文件中的元素"><a href="#4-Spring的配置文件中的元素" class="headerlink" title="4.Spring的配置文件中的&lt;beans&gt;元素"></a>4.Spring的配置文件中的<code>&lt;beans&gt;</code>元素</h3><p>在Spring的配置文件中的<code>&lt;beans&gt;</code>元素下可以包含多个<code>&lt;aop:config&gt;</code>元素，一个<code>&lt;aop:config&gt;</code>元素中又可以包含属性和子元素，其子元素包括<code>&lt;aop:pointcut&gt;</code>、<code>&lt;aop:advisor&gt;</code>和<code>&lt;aop:aspect&gt;</code>。</p><p>配置切面使用的是<code>&lt;aop:aspect&gt;</code>元素，<code>&lt;aop:aspect&gt;</code>子元素的pointcut-ref属性用于指定一个已经存在的切入点名称。</p><h3 id="5-AOP术语中Advice"><a href="#5-AOP术语中Advice" class="headerlink" title="5.AOP术语中Advice"></a>5.AOP术语中Advice</h3><p>AOP术语中Advice表示AOP框架在特定的切入点执行的通知&#x2F;增强处理，即在定义好的切入点处所要执行的程序代码。</p><h3 id="6-Spring的声明式事务管理的两种实现方式"><a href="#6-Spring的声明式事务管理的两种实现方式" class="headerlink" title="6.Spring的声明式事务管理的两种实现方式"></a>6.Spring的声明式事务管理的两种实现方式</h3><p>Spring的声明式事务管理可以通过两种方式来实现，一种是基于XML的方式，另一种是基于注解（Annotation）的方式。</p><p>Spring2.0以后，在基于XML文件的方式中，提供了tx命名空间来配置事务，tx命名空间下提供了<a href="tx:advice">tx:advice</a>元素来配置事务的通知（增强处理）。</p><h2 id="四、Spring整合Mybatis"><a href="#四、Spring整合Mybatis" class="headerlink" title="四、Spring整合Mybatis"></a>四、Spring整合Mybatis</h2><h3 id="6-1-Spring整合Mybatis思路分析"><a href="#6-1-Spring整合Mybatis思路分析" class="headerlink" title="6.1 Spring整合Mybatis思路分析"></a>6.1 Spring整合Mybatis思路分析</h3><h4 id="6-1-1-环境准备"><a href="#6-1-1-环境准备" class="headerlink" title="6.1.1 环境准备"></a>6.1.1 环境准备</h4><p>在准备环境的过程中，我们也来回顾下Mybatis开发的相关内容:</p><h5 id="步骤1-准备数据库表"><a href="#步骤1-准备数据库表" class="headerlink" title="步骤1:准备数据库表"></a>步骤1:准备数据库表</h5><p>Mybatis是来操作数据库表，所以先创建一个数据库及表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database spring_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use spring_db;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">35</span>),</span><br><span class="line">    money <span class="keyword">double</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="步骤2-创建项目导入jar包"><a href="#步骤2-创建项目导入jar包" class="headerlink" title="步骤2:创建项目导入jar包"></a>步骤2:创建项目导入jar包</h5><p>项目的pom.xml添加相关依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="步骤3-根据表创建模型类"><a href="#步骤3-根据表创建模型类" class="headerlink" title="步骤3:根据表创建模型类"></a>步骤3:根据表创建模型类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"><span class="comment">//setter...getter...toString...方法略    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="步骤4-创建Dao接口"><a href="#步骤4-创建Dao接口" class="headerlink" title="步骤4:创建Dao接口"></a>步骤4:创建Dao接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_account(name,money)values(#&#123;name&#125;,#&#123;money&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set name = #&#123;name&#125; , money = #&#123;money&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account&quot;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="步骤5-创建Service接口和实现类"><a href="#步骤5-创建Service接口和实现类" class="headerlink" title="步骤5:创建Service接口和实现类"></a>步骤5:创建Service接口和实现类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>&#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="步骤6-添加jdbc-properties文件"><a href="#步骤6-添加jdbc-properties文件" class="headerlink" title="步骤6:添加jdbc.properties文件"></a>步骤6:添加jdbc.properties文件</h5><p>resources目录下添加，用于配置数据库连接四要素</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>useSSL:关闭MySQL的SSL连接</p><h5 id="步骤7-添加Mybatis核心配置文件"><a href="#步骤7-添加Mybatis核心配置文件" class="headerlink" title="步骤7:添加Mybatis核心配置文件"></a>步骤7:添加Mybatis核心配置文件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--读取外部properties配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--别名扫描的包路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--映射文件扫描包路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="步骤8-编写应用程序"><a href="#步骤8-编写应用程序" class="headerlink" title="步骤8:编写应用程序"></a>步骤8:编写应用程序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 创建SqlSessionFactoryBuilder对象</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2. 加载SqlMapConfig.xml配置文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml.bak&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 创建SqlSessionFactory对象</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(inputStream);</span><br><span class="line">        <span class="comment">// 4. 获取SqlSession</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 5. 执行SqlSession对象执行查询，获取结果User</span></span><br><span class="line">        <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> sqlSession.getMapper(AccountDao.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountDao.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="步骤9-运行程序"><a href="#步骤9-运行程序" class="headerlink" title="步骤9:运行程序"></a>步骤9:运行程序</h5><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630136904087.png" alt="1630136904087"></p><h4 id="6-1-2-整合思路分析"><a href="#6-1-2-整合思路分析" class="headerlink" title="6.1.2 整合思路分析"></a>6.1.2 整合思路分析</h4><p>Mybatis的基础环境我们已经准备好了，接下来就得分析下在上述的内容中，哪些对象可以交给Spring来管理?</p><ul><li><p>Mybatis程序核心对象分析</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630137189480.png" alt="1630137189480"></p><p>从图中可以获取到，真正需要交给Spring管理的是&#x3D;&#x3D;SqlSessionFactory&#x3D;&#x3D;</p></li><li><p>整合Mybatis，就是将Mybatis用到的内容交给Spring管理，分析下配置文件</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630137388717.png" alt="1630137388717"></p><p><strong>说明:</strong></p><ul><li>第一行读取外部properties配置文件，Spring有提供具体的解决方案<code>@PropertySource</code>,需要交给Spring</li><li>第二行起别名包扫描，为SqlSessionFactory服务的，需要交给Spring</li><li>第三行主要用于做连接池，Spring之前我们已经整合了Druid连接池，这块也需要交给Spring</li><li>前面三行一起都是为了创建SqlSession对象用的，那么用Spring管理SqlSession对象吗?回忆下SqlSession是由SqlSessionFactory创建出来的，所以只需要将SqlSessionFactory交给Spring管理即可。</li><li>第四行是Mapper接口和映射文件[如果使用注解就没有该映射文件]，这个是在获取到SqlSession以后执行具体操作的时候用，所以它和SqlSessionFactory创建的时机都不在同一个时间，可能需要单独管理。</li></ul></li></ul><h3 id="6-2-Spring整合Mybatis"><a href="#6-2-Spring整合Mybatis" class="headerlink" title="6.2 Spring整合Mybatis"></a>6.2 Spring整合Mybatis</h3><p>前面我们已经分析了Spring与Mybatis的整合，大体需要做两件事，</p><p>第一件事是:Spring要管理MyBatis中的SqlSessionFactory</p><p>第二件事是:Spring要管理Mapper接口的扫描</p><p>具体该如何实现，具体的步骤为:</p><h4 id="步骤1-项目中导入整合需要的jar包"><a href="#步骤1-项目中导入整合需要的jar包" class="headerlink" title="步骤1:项目中导入整合需要的jar包"></a>步骤1:项目中导入整合需要的jar包</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Spring操作数据库需要该jar包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Spring与Mybatis整合的jar包</span></span><br><span class="line"><span class="comment">这个jar包mybatis在前面，是Mybatis提供的</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="步骤2-创建Spring的主配置类"><a href="#步骤2-创建Spring的主配置类" class="headerlink" title="步骤2:创建Spring的主配置类"></a>步骤2:创建Spring的主配置类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类注解</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//包扫描，主要扫描的是项目中的AccountServiceImpl类</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤3-创建数据源的配置类"><a href="#步骤3-创建数据源的配置类" class="headerlink" title="步骤3:创建数据源的配置类"></a>步骤3:创建数据源的配置类</h4><p>在配置类中完成数据源的创建</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="步骤4-主配置类中读properties并引入数据源配置类"><a href="#步骤4-主配置类中读properties并引入数据源配置类" class="headerlink" title="步骤4:主配置类中读properties并引入数据源配置类"></a>步骤4:主配置类中读properties并引入数据源配置类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(JdbcConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤5-创建Mybatis配置类并配置SqlSessionFactory"><a href="#步骤5-创建Mybatis配置类并配置SqlSessionFactory" class="headerlink" title="步骤5:创建Mybatis配置类并配置SqlSessionFactory"></a>步骤5:创建Mybatis配置类并配置SqlSessionFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line">    <span class="comment">//定义bean，SqlSessionFactoryBean，用于产生SqlSessionFactory对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">//设置模型类的别名扫描</span></span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        <span class="comment">//设置数据源</span></span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//定义bean，返回MapperScannerConfigurer对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>说明:</strong></p><ul><li><p>使用SqlSessionFactoryBean封装SqlSessionFactory需要的环境信息</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630138835057.png" alt="1630138835057"></p><ul><li>SqlSessionFactoryBean是前面我们讲解FactoryBean的一个子类，在该类中将SqlSessionFactory的创建进行了封装，简化对象的创建，我们只需要将其需要的内容设置即可。</li><li>方法中有一个参数为dataSource,当前Spring容器中已经创建了Druid数据源，类型刚好是DataSource类型，此时在初始化SqlSessionFactoryBean这个对象的时候，发现需要使用DataSource对象，而容器中刚好有这么一个对象，就自动加载了DruidDataSource对象。</li></ul></li><li><p>使用MapperScannerConfigurer加载Dao接口，创建代理对象保存到IOC容器中</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630138916939.png" alt="1630138916939"></p><ul><li>这个MapperScannerConfigurer对象也是MyBatis提供的专用于整合的jar包中的类，用来处理原始配置文件中的mappers相关配置，加载数据层的Mapper接口类</li><li>MapperScannerConfigurer有一个核心属性basePackage，就是用来设置所扫描的包路径</li></ul></li></ul><h4 id="步骤6-主配置类中引入Mybatis配置类"><a href="#步骤6-主配置类中引入Mybatis配置类" class="headerlink" title="步骤6:主配置类中引入Mybatis配置类"></a>步骤6:主配置类中引入Mybatis配置类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="步骤7-编写运行类"><a href="#步骤7-编写运行类" class="headerlink" title="步骤7:编写运行类"></a>步骤7:编写运行类</h4><p>在运行类中，从IOC容器中获取Service对象，调用方法获取结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">AccountService</span> <span class="variable">accountService</span> <span class="operator">=</span> ctx.getBean(AccountService.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountService.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤8-运行程序"><a href="#步骤8-运行程序" class="headerlink" title="步骤8:运行程序"></a>步骤8:运行程序</h4><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630139036627.png" alt="1630139036627"></p><p>支持Spring与Mybatis的整合就已经完成了，其中主要用到的两个类分别是:</p><ul><li>&#x3D;&#x3D;SqlSessionFactoryBean&#x3D;&#x3D;</li><li>&#x3D;&#x3D;MapperScannerConfigurer&#x3D;&#x3D;</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、Spring框架&quot;&gt;&lt;a href=&quot;#一、Spring框架&quot; class=&quot;headerlink&quot; title=&quot;一、Spring框架&quot;&gt;&lt;/a&gt;一、Spring框架&lt;/h2&gt;&lt;h3 id=&quot;1-三层体系架构&quot;&gt;&lt;a href=&quot;#1-三层体系架构&quot; cla</summary>
      
    
    
    
    <category term="后端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>后端开发常用代码</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/05/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%9D%97/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/05/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%9D%97/</id>
    <published>2023-11-04T18:30:34.000Z</published>
    <updated>2023-11-19T12:44:26.067Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java实现跨域方式"><a href="#Java实现跨域方式" class="headerlink" title="Java实现跨域方式"></a>Java实现跨域方式</h2><p>一、什么是跨域？为什么会出现跨域</p><ul><li><p>定义</p><ul><li>跨域（CORS）是指不同域名之间相互访问。跨域，指的是浏览器不能执行其他网站的脚本，它是由浏览器的同源策略所造成的，是浏览器对于JavaScript所定义的安全限制策略。<br>当一个请求url的协议、域名、端口三者之间任意一个与当前页面url不同即为跨域。</li></ul></li><li><p>原因</p><ul><li>在前后端分离的模式下，前后端的域名是不一致的，此时就会发生跨域访问问题。在请求的过程中我们要想回去数据一般都是post&#x2F;get请求，所以…<a href="https://so.csdn.net/so/search?q=%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98&spm=1001.2101.3001.7020">跨域问题</a>出现。</li><li>跨域问题来源于JavaScript的同源策略，即只有 协议+主机名+端口号(如存在)相同，则允许相互访问。也就是说JavaScript只能访问和操作自己域下的资源，不能访问和操作其他域下的资源。跨域问题是针对JS和ajax的，html本身没有跨域问题，比如a标签、script标签、甚至form标签（可以直接跨域发送数据并接收数据）等</li></ul></li><li><p>什么情况会跨域</p><ul><li>同一协议， 如http或https</li><li>同一IP地址, 如127.0.0.1</li><li>同一端口, 如8080<br>以上三个条件中有一个条件不同就会产生跨域问题。</li></ul></li></ul><h3 id="跨域之CorsFilter"><a href="#跨域之CorsFilter" class="headerlink" title="跨域之CorsFilter"></a>跨域之CorsFilter</h3><p><code>CorsFilter</code> 是 Spring 框架提供的一个用于处理<a href="https://so.csdn.net/so/search?q=%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82&spm=1001.2101.3001.7020">跨域请求</a>的过滤器。在开发中，我们常常需要处理前端发来的跨域请求，<code>CorsFilter</code> 就可以帮助我们实现这一功能。</p><p><code>CorsFilter</code> 主要用于设置跨域请求的响应头，以允许跨域请求能够被成功处理。具体来说，<code>CorsFilter</code> 可以设置以下响应头：</p><ul><li>Access-Control-Allow-Origin：允许访问的源地址；</li><li>Access-Control-Allow-Methods：允许访问的请求方法；</li><li>Access-Control-Allow-Headers：允许访问的请求头；</li><li>Access-Control-Allow-Credentials：是否允许发送 Cookie 等身份凭证；</li><li>Access-Control-Max-Age：缓存预检请求的时间。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>); <span class="comment">// 1 设置访问源地址</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>); <span class="comment">// 2 设置访问源请求头</span></span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>); <span class="comment">// 3 设置访问源请求方法</span></span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration); <span class="comment">// 4 对接口配置跨域设置</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Java实现Result"><a href="#Java实现Result" class="headerlink" title="Java实现Result"></a>Java实现Result</h2><p>Result: Result类的编写方式，最主要的功能就是为了向前端发送数据的时候能够更高效快捷：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.commen.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span> <span class="comment">//无参构造</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span> <span class="comment">//全参构造</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;success&quot;</span>,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data,String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,message,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">201</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(Integer code)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(Integer code,String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">201</span>,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="实现自动填装创建时间和更新时间-工具类"><a href="#实现自动填装创建时间和更新时间-工具类" class="headerlink" title="实现自动填装创建时间和更新时间(工具类)"></a>实现自动填装创建时间和更新时间(工具类)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span> <span class="comment">//日志</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//以组件的形式把这个处理器注册到IOC容器中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//插入时启动  第三个参数 LocalDateTime 一定要和 createTime成员变量的值的类型一致，不然是null 如果是date就都设置date</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// 起始版本 3.3.0(推荐使用)</span></span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// 起始版本 3.3.0(推荐)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新时候启动</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// 起始版本 3.3.0(推荐)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在实体类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> owc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-11-03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;o_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value = &quot;userId&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT ,value = &quot;create_time&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE ,value = &quot;update_time&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 应用服务 WEB 访问端口</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8888</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">123qwe</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test1?characterEncoding=UTF-8&amp;useSSL=false&amp;useUnicode=true</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.ouwen:</span> <span class="string">info</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">o_</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h2 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--setttings:控制mybatis全局配置行为--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置mybatis输出日志--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 开启驼峰命名转换 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--环境配置：数据库的连接信息--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--default：中配置的值需要和某个environment配置的id相同，</span></span><br><span class="line"><span class="comment">        通知mybatis使用具体哪一个数据库的连接信息，即具体访问对应的数据库--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--environment:一个数据库信息的配置，环境--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--id属性：一个唯一值，自定义，表示环境的名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--transactionManager属性：mybatis的事务类型--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--dataSoure属性：代表数据源，连接数据库--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--type属性:JDBC 表示使用的是使用连接池的数据源--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置驱动--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置连接数据库的url字符串--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置连接数据库的用户名--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置连接数据库的密码--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123qwe&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--sql映射文件标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--reource：从类路径开始的路径信息：target/clasess(类路径)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/**.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="CodeGenerator"><a href="#CodeGenerator" class="headerlink" title="CodeGenerator"></a>CodeGenerator</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.OutputFile;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DbColumnType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Types;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///test1&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123qwe&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">moduleName</span> <span class="operator">=</span> <span class="string">&quot;demo&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mapperLocation</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\DIO\\Desktop\\大学\\大三上\\面向对象\\Spring MVC\\demo\\src\\main\\resources\\mapper\\&quot;</span> + moduleName;</span><br><span class="line">        <span class="type">String</span> <span class="variable">tables</span> <span class="operator">=</span> <span class="string">&quot;o_user&quot;</span>;</span><br><span class="line">        FastAutoGenerator.create(url, username, password)</span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.author(<span class="string">&quot;owc&quot;</span>) <span class="comment">// 设置作者</span></span><br><span class="line">                            <span class="comment">//.enableSwagger() // 开启 swagger 模式</span></span><br><span class="line">                            <span class="comment">//.fileOverride() // 覆盖已生成文件</span></span><br><span class="line">                            .outputDir(<span class="string">&quot;C:\\Users\\DIO\\Desktop\\大学\\大三上\\面向对象\\Spring MVC\\demo\\src\\main\\java&quot;</span>); <span class="comment">// 指定输出目录</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .dataSourceConfig(builder -&gt; builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">typeCode</span> <span class="operator">=</span> metaInfo.getJdbcType().TYPE_CODE;</span><br><span class="line">                    <span class="keyword">if</span> (typeCode == Types.SMALLINT) &#123;</span><br><span class="line">                        <span class="comment">// 自定义类型转换</span></span><br><span class="line">                        <span class="keyword">return</span> DbColumnType.INTEGER;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> typeRegistry.getColumnType(metaInfo);</span><br><span class="line"></span><br><span class="line">                &#125;))</span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.springmvc&quot;</span>) <span class="comment">// 设置父包名</span></span><br><span class="line">                            .moduleName(moduleName) <span class="comment">// 设置父包模块名</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.xml, mapperLocation)); <span class="comment">// 设置mapperXml生成路径</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.addInclude(tables) <span class="comment">// 设置需要生成的表名</span></span><br><span class="line">                            .addTablePrefix(<span class="string">&quot;o_&quot;</span>); <span class="comment">// 设置过滤表前缀</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .templateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>()) <span class="comment">// 使用Freemarker引擎模板，默认的是Velocity引擎模板</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 德鲁伊 连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatisplus--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加 模板引擎 依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.microsoft.sqlserver<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mssql-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- springboot测试类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Java实现跨域方式&quot;&gt;&lt;a href=&quot;#Java实现跨域方式&quot; class=&quot;headerlink&quot; title=&quot;Java实现跨域方式&quot;&gt;&lt;/a&gt;Java实现跨域方式&lt;/h2&gt;&lt;p&gt;一、什么是跨域？为什么会出现跨域&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;定义&lt;/p</summary>
      
    
    
    
    <category term="后端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Mybatis" scheme="https://dont-sleep-so-late.github.io/tags/Mybatis/"/>
    
    <category term="SpringBoot" scheme="https://dont-sleep-so-late.github.io/tags/SpringBoot/"/>
    
    <category term="SpringMVC" scheme="https://dont-sleep-so-late.github.io/tags/SpringMVC/"/>
    
    <category term="MybatisPlus" scheme="https://dont-sleep-so-late.github.io/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot笔记</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/05/SpringBoot%E7%AC%94%E8%AE%B0/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/05/SpringBoot%E7%AC%94%E8%AE%B0/</id>
    <published>2023-11-04T18:00:34.000Z</published>
    <updated>2023-11-13T15:09:27.281Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Spring-Boot使用slf4j进行日志记录"><a href="#Spring-Boot使用slf4j进行日志记录" class="headerlink" title="Spring Boot使用slf4j进行日志记录"></a>Spring Boot使用slf4j进行日志记录</h2><p>在开发中，我们经常使用 System.out.println() 来打印一些信息，但是这样不好，因为大量的使用 System.out 会增加资源的消耗。我们实际项目中使用的是 slf4j 的 logback 来输出日志，效率挺高的，Spring Boot 提供了一套日志系统，logback 是最优的选择。</p><p><strong>1.简介</strong><br>官网：<a href="https://www.slf4j.org/manual.html">https://www.slf4j.org/manual.html</a><br>(1)简单日记门面(simple logging Facade for Java)SLF4J是为各种loging APIs提供一个简单统一的接口。</p><p>(2)slf4j并不是一种具体的日志系统，而是一个用户日志系统的facade。</p><p>(3)在部署时，选择不同的日志系统包，即可自动转换到不同的日志系统上。<br>如：选择JDK自带的日志系统，则只需要将slf4j-api-XXX.jar和slf4j-jdkXXX.jar放置到classpath中即可，若想换成log4j的日志系统，仅需要用slf4j-log4jXXx.jar替换slf4j-jdkXXX.jar即可</p><p>(4)slf4j和log4j比较:<br>①log4j看成是一个完整的日志库；而slf4j是一个日志库的规范接口,可以根据不同的日志包使用不同的日志库。<br>②日志中需要传入参数时，log4j一般是使用字符串进行拼接的方式;<br>slf4j使用占位符，比字符串拼接更加高效。如logger.error(“sql为 {} “,sql)。</p><p>(5)slf4j日志级别<br>Slf4j日志级别,级别由低到高，设置的级别约低，打印的日志越多<br>①trace: 一般不会使用，在日志里边也不会打印出来，最低的一个日志级别。<br>②debug: 一般放于程序的某个关键点的地方，用于打印一个变量值或者一个方法返回的信息之类的信息<br>③info 一般处理业务逻辑的时候使用，就跟 system.err打印一样，用于说明此处是干什么的。<br>④warn：警告，不会影响程序的运行，但是值得注意。<br>⑤error： 用户程序报错，必须解决的时候使用此级别打印日志。</p><h3 id="2-使用教程"><a href="#2-使用教程" class="headerlink" title="2.使用教程"></a>2.使用教程</h3><p>官网上最新稳定版是1.7.32，前阵子log4j出重大漏洞了，这里我们配合logback（log4j的改良版，性能更好）使用。<br><strong>(1)在pom.xml引入依赖</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--slf4j依赖--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- logback 依赖 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>(2)在springBoot项目中添加一段controller代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springtest.controller;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VisualController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(VisualController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/test&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;fucking good&quot;</span>;</span><br><span class="line">        logger.info(<span class="string">&quot;slf4j print info msg:&#123;&#125;&quot;</span>,msg);</span><br><span class="line">        logger.debug(<span class="string">&quot;slf4j print debug msg:&#123;&#125;&quot;</span>,msg);</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里通过<a href="http://localhost:8080/test%E8%AE%BF%E9%97%AE%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E5%A6%82%E4%B8%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0info%E7%9A%84%E8%BE%93%E5%87%BA%E4%BA%86%EF%BC%8Cdebug%E6%B2%A1%E6%9C%89%EF%BC%8C%E5%9B%A0%E4%B8%BAspringboot%E5%86%85%E9%83%A8%E9%9B%86%E6%88%90%E4%BA%86slf4j%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AFinfo%E7%BA%A7%E5%88%AB%EF%BC%9A">http://localhost:8080/test访问可以看到控制台输出如下，可以看到info的输出了，debug没有，因为springboot内部集成了slf4j，默认是info级别：</a></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105020845.png"></p><p><strong>(3)只在控制台打印，application.yml文件配置如下：</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># slf4j日志配置</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="comment"># 配置级别</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">info</span></span><br><span class="line">    <span class="comment">#分包配置级别，即不同的目录下可以使用不同的级别</span></span><br><span class="line">    <span class="attr">com.example.springtest.controller:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>改完之后发现输出如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021025.png"></p><p>在resource下新建logback.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--info日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO_FILE&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志文件相对路径和名称--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">file</span>&gt;</span>./apilogs/info/xxxx_-$&#123;HOSTNAME&#125;.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--根据日志文件的大小来滚动（即创建新的）日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>./apilogs/info/archive/xxxx_-$&#123;HOSTNAME&#125;-%d.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--只保留最近30天的日志--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--超过10MB便会滚动日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置日志的输出格式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--异步处理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC_INFO_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--debug日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG_FILE&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志文件相对路径和名称--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">file</span>&gt;</span>./apilogs/debug/xxxx_-$&#123;HOSTNAME&#125;.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--根据日志文件的大小来滚动（即创建新的）日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>./apilogs/debug/archive/xxxx_-$&#123;HOSTNAME&#125;-%d.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--只保留最近30天的日志--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--超过10MB便会滚动日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置日志的输出格式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--异步处理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC_DEBUG_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--控制台输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--输出格式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; [%file:%line] %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--异步处理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--在info级别下，将包名所在org.springframework的日志全部打印到控制台--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--additivity被设置为&#x27;false&#x27;，这意味着日志事件不会传递给父级记录器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--在debug级别下，会打印记录sql的相关日志，将包名为org.apache.ibatis下的日志输出到debug日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC_DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--所有业务相关的info日志，打印到控制台，并输出到info日志文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC_INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到控制台和日志文件都成功输出了：</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021058.png"></p><h3 id="3-常见报错解决（持续更新）"><a href="#3-常见报错解决（持续更新）" class="headerlink" title="3.常见报错解决（持续更新）"></a>3.常见报错解决（持续更新）</h3><p>(1)yml配置报错如：<br>“Failed to bind properties under ‘logging.level’”<br>可能跟版本有关，参考yml配置上面的使用教程的第(3)步</p><p>(2)启动时报错：<br>“class path contains multiple slf4j bindings<br>found binding in …”<br>不要忽视这种警告，若有多个jar包类冲突，需要把加载jar包顺序调整，正确的那个，比如slf4j-log4j12jar包放在最上面。</p><hr><h2 id="Spring-Boot中的MVC支持"><a href="#Spring-Boot中的MVC支持" class="headerlink" title="Spring Boot中的MVC支持"></a>Spring Boot中的MVC支持</h2><p>Spring Boot 的 MVC 支持主要来介绍实际项目中最常用的几个注解，包括 <code>@RestController</code>、 <code>@RequestMapping</code>、<code>@PathVariable</code>、<code>@RequestParam</code> 以及 <code>@RequestBody</code>。</p><h3 id="1-RestController"><a href="#1-RestController" class="headerlink" title="1. @RestController"></a>1. @RestController</h3><p><code>@RestController</code> 是 Spring Boot 新增的一个注解，我们看一下该注解都包含了哪些东西。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RestController &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看出， <code>@RestController</code> 注解包含了原来的 <code>@Controller</code> 和 <code>@ResponseBody</code> 注解，使用过 Spring 的朋友对 <code>@Controller</code> 注解已经非常了解了，这里不再赘述， <code>@ResponseBody</code> 注解是将返回的数据结构转换为 Json 格式。所以 <code>@RestController</code> 可以看作是 <code>@Controller</code> 和 <code>@ResponseBody</code> 的结合体，相当于偷个懒，我们使用 <code>@RestController</code> 之后就不用再使用 <code>@Controller</code> 了。但是需要注意一个问题：如果是前后端分离，不用模板渲染的话，比如 Thymeleaf，这种情况下是可以直接使用<code>@RestController</code> 将数据以 json 格式传给前端，前端拿到之后解析；但如果不是前后端分离，需要使用模板来渲染的话，一般 Controller 中都会返回到具体的页面，那么此时就不能使用<code>@RestController</code>了，比如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;user&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其实是需要返回到 user.html 页面的，如果使用 <code>@RestController</code> 的话，会将 user 作为字符串返回的，所以这时候我们需要使用 <code>@Controller</code> 注解。这在下一节 Spring Boot 集成 Thymeleaf 模板引擎中会再说明。</p><h3 id="2-RequestMapping"><a href="#2-RequestMapping" class="headerlink" title="2. @RequestMapping"></a>2. @RequestMapping</h3><p><code>@RequestMapping</code> 是一个用来处理请求地址映射的注解，它可以用于类上，也可以用于方法上。在类的级别上的注解会将一个特定请求或者请求模式映射到一个控制器之上，表示类中的所有响应请求的方法都是以该地址作为父路径；在方法的级别表示进一步指定到处理方法的映射关系。</p><p>该注解有6个属性，一般在项目中比较常用的有三个属性：value、method 和 produces。</p><ul><li><p>value 属性：指定请求的实际地址，value 可以省略不写</p></li><li><p>method 属性：指定请求的类型，主要有 GET、PUT、POST、DELETE，默认为 GET</p></li><li><p>produces属性：指定返回内容类型，如 produces &#x3D; “application&#x2F;json; charset&#x3D;UTF-8”</p></li></ul><p><code>@RequestMapping</code> 注解比较简单，举个例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/test&quot;, produces = &quot;application/json; charset=UTF-8&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/get&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个很简单，启动项目在浏览器中输入 <code>localhost:8080/test/get</code> 测试一下即可。</p><p>针对四种不同的请求方式，是有相应注解的，不用每次在 <code>@RequestMapping</code> 注解中加 method 属性来指定，上面的 GET 方式请求可以直接使用 <code>@GetMapping(&quot;/get&quot;)</code> 注解，效果一样。相应地，PUT 方式、POST 方式和 DELETE 方式对应的注解分别为 <code>@PutMapping</code>、<code>@PostMapping</code> 和 <code>DeleteMapping</code>。</p><h3 id="3-PathVariable"><a href="#3-PathVariable" class="headerlink" title="3. @PathVariable"></a>3. @PathVariable</h3><p><code>@PathVariable</code> 注解主要是用来获取 url 参数，Spring Boot 支持 restfull 风格的 url，比如一个 GET 请求携带一个参数 id 过来，我们将 id 作为参数接收，可以使用 <code>@PathVariable</code> 注解。如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的id为：&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里需要注意一个问题，如果想要 url 中占位符中的 id 值直接赋值到参数 id 中，需要保证 url 中的参数和方法接收参数一致，否则就无法接收。如果不一致的话，其实也可以解决，需要用 <code>@PathVariable</code> 中的 value 属性来指定对应关系。如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user/&#123;idd&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(value = &quot;idd&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的id为：&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于访问的 url，占位符的位置可以在任何位置，不一定非要在最后，比如这样也行：<code>/xxx/&#123;id&#125;/user</code>。另外，url 也支持多个占位符，方法参数使用同样数量的参数来接收，原理和一个参数是一样的，例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user/&#123;idd&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(value = &quot;idd&quot;)</span> Integer id, <span class="meta">@PathVariable</span> String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的id为：&quot;</span> + id);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的name为：&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>运行项目，在浏览器中请求 <code>localhost:8080/test/user/2/zhangsan</code> 可以看到控制台输出如下信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取到的id为：2</span><br><span class="line">获取到的name为：zhangsan</span><br></pre></td></tr></table></figure><p>所以支持多个参数的接收。同样地，如果 url 中的参数和方法中的参数名称不同的话，也需要使用 value 属性来绑定两个参数。</p><h3 id="4-RequestParam"><a href="#4-RequestParam" class="headerlink" title="4. @RequestParam"></a>4. @RequestParam</h3><p><code>@RequestParam</code> 注解顾名思义，也是获取请求参数的，上面我们介绍了 <code>@PathValiable</code> 注解也是获取请求参数的，那么 <code>@RequestParam</code> 和 <code>@PathVariable</code> 有什么不同呢？主要区别在于： <code>@PathValiable</code> 是从 url 模板中获取参数值， 即这种风格的 url：<code>http://localhost:8080/user/&#123;id&#125;</code> ；而 <code>@RequestParam</code> 是从 request 里面获取参数值，即这种风格的 url：<code>http://localhost:8080/user?id=1</code> 。我们使用该 url 带上参数 id 来测试一下如下代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的id为：&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以正常从控制台打印出 id 信息。同样地，url 上面的参数和方法的参数需要一致，如果不一致，也需要使用 value 属性来说明，比如 url 为：<code>http://localhost:8080/user?idd=1</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;idd&quot;, required = false)</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的id为：&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>除了 value 属性外，还有个两个属性比较常用：</p><ul><li><p>required 属性：true 表示该参数必须要传，否则就会报 404 错误，false 表示可有可无。</p></li><li><p>defaultValue 属性：默认值，表示如果请求中没有同名参数时的默认值。</p></li></ul><p>从 url 中可以看出，<code>@RequestParam</code> 注解用于 GET 请求上时，接收拼接在 url 中的参数。除此之外，该注解还可以用于 POST 请求，接收前端表单提交的参数，假如前端通过表单提交 username 和 password 两个参数，那我们可以使用 <code>@RequestParam</code> 来接收，用法和上面一样。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/form1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForm</span><span class="params">(<span class="meta">@RequestParam</span> String username, <span class="meta">@RequestParam</span> String password)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的username为：&quot;</span> + username);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的password为：&quot;</span> + password);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>我们使用 postman 来模拟一下表单提交，测试一下接口：</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021854.png"></p><p>那么问题来了，如果表单数据很多，我们不可能在后台方法中写上很多参数，每个参数还要 <code>@RequestParam</code> 注解。针对这种情况，我们需要封装一个实体类来接收这些参数，实体中的属性名和表单中的参数名一致即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用实体接收的话，我们不能在前面加 <code>@RequestParam</code> 注解了，直接使用即可。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/form2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForm</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的username为：&quot;</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">&quot;获取到的password为：&quot;</span> + user.getPassword());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>使用 postman 再次测试一下表单提交，观察一下返回值和控制台打印出的日志即可。在实际项目中，一般都是封装一个实体类来接收表单数据，因为实际项目中表单数据一般都很多。</p><h3 id="5-RequestBody"><a href="#5-RequestBody" class="headerlink" title="5. @RequestBody"></a>5. @RequestBody</h3><p><code>@RequestBody</code> 注解用于接收前端传来的实体，接收参数也是对应的实体，比如前端通过 json 提交传来两个参数 username 和 password，此时我们需要在后端封装一个实体来接收。在传递的参数比较多的情况下，使用 <code>@RequestBody</code> 接收会非常方便。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的username为：&quot;</span> + user.getUsername());</span><br><span class="line">System.out.println(<span class="string">&quot;获取到的password为：&quot;</span> + user.getPassword());</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们使用 postman 工具来测试一下效果，打开 postman，然后输入请求地址和参数，参数我们用 json 来模拟，如下图所有，调用之后返回 success。</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021959.png"></p><p>同时看一下后台控制台输出的日志：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取到的username为：倪升武</span><br><span class="line">获取到的password为：123456</span><br></pre></td></tr></table></figure><p>可以看出，<code>@RequestBody</code> 注解用于 POST 请求上，接收 json 实体参数。它和上面我们介绍的表单提交有点类似，只不过参数的格式不同，一个是 json 实体，一个是表单提交。在实际项目中根据具体场景和需要使用对应的注解即可。</p><h3 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h3><p>本节课主要讲解了 Spring Boot 中对 MVC 的支持，分析了 <code>@RestController</code>、 <code>@RequestMapping</code>、<code>@PathVariable</code>、 <code>@RequestParam</code> 和 <code>@RequestBody</code> 四个注解的使用方式，由于 <code>@RestController</code> 中集成了 <code>@ResponseBody</code> 所以对返回 json 的注解不再赘述。以上四个注解是使用频率很高的注解，在所有的实际项目中基本都会遇到，要熟练掌握。</p><hr><p>Spring Boot 中集成Redis</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Spring-Boot使用slf4j进行日志记录&quot;&gt;&lt;a href=&quot;#Spring-Boot使用slf4j进行日志记录&quot; class=&quot;headerlink&quot; title=&quot;Spring Boot使用slf4j进行日志记录&quot;&gt;&lt;/a&gt;Spring Boot使用s</summary>
      
    
    
    
    <category term="后端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>富文本组件(mavon-editor)</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/22/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/22/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6/</id>
    <published>2023-10-22T14:08:42.000Z</published>
    <updated>2023-11-04T18:51:49.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>mavon-editor是一款基于vue的markdown编辑器，可以用来做文本的编辑，比如是某种业务需要发送公告、个人博客等，都可以用到，操作也十分简单。</p><p>官方地址：<a href="http://www.mavoneditor.com/?spm=a2c6h.12873639.article-detail.9.aaad62afIvVZGC">http://www.mavoneditor.com/</a></p><p>github：<a href="https://github.com/hinesboy/mavonEditor">https://github.com/hinesboy/mavonEditor</a></p><h2 id="安装-mavon-editor"><a href="#安装-mavon-editor" class="headerlink" title="安装 mavon-editor"></a>安装 mavon-editor</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mavon-editor --save</span><br></pre></td></tr></table></figure><p>安装好了之后就需要进行注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 组件注册</span></span><br><span class="line"><span class="keyword">import</span> mavonEditor <span class="keyword">from</span> <span class="string">&quot;mavon-editor&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;mavon-editor/dist/css/index.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// eslint-disable-next-line vue/multi-word-component-names</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;EditorComponent&quot;</span>,</span><br><span class="line"><span class="attr">components</span>: &#123; mavonEditor &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>安装、注册后就要来使用富文本编辑器这个组件，以下我将使用我之前在学习做后台管理系统来作为案例。</p><h2 id="使用-mavon-editor"><a href="#使用-mavon-editor" class="headerlink" title="使用 mavon-editor"></a>使用 mavon-editor</h2><p>首先，注册好了就能够直接使用标签进行引用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">save</span>=<span class="string">&quot;saveDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">change</span>=<span class="string">&quot;updateDoc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;doc&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>整体的形成就如下图</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222049.png"></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222121.png"></p><p>这是带有预览模式，在上面的工具栏部分是组件已经完成的功能，其中有些需要自己的实现，比如是图片的上传，这个组件也能够支持扩展，可以去扩展更多的便捷式功能，具体详情在官网上都有。</p><h2 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h2><p>接下来介绍图片上传功能，图片上传包括两种，一种是直接添加就到服务器上(这里采用阿里云OSS存储)，还有一种是每次添加图片都保存起来，然后一同上传到服务器，这样的作法是能够确保在不想要发布的时候，图片不会被上传到服务器中，但是最常见的还是直接上传的那种。</p><h3 id="单图上传"><a href="#单图上传" class="headerlink" title="单图上传"></a>单图上传</h3><p>就是放置图片的同时直接将图片上传到阿里云OSS</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">save</span>=<span class="string">&quot;saveDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">change</span>=<span class="string">&quot;updateDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">imgAdd</span>=<span class="string">&quot;$imgAdd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;doc&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在组件标签中引入@imagAdd事件，这是组件的时间绑定。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$imgAdd(pos, file)&#123; <span class="comment">//只要放上去就上传到oss</span></span><br><span class="line">  <span class="comment">//单图上传</span></span><br><span class="line">  <span class="comment">// 第一步.将图片上传到服务器.</span></span><br><span class="line">  <span class="keyword">let</span> imgData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">  imgData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>,file);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$axios</span>.<span class="title function_">post</span>(<span class="string">&quot;/files/image/upload&quot;</span>, imgData).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 第二步.将返回的url替换到文本原位置![...](0) -&gt; ![...](url)</span></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * $vm 指为mavonEditor实例，可以通过如下两种方式获取</span></span><br><span class="line"><span class="comment">     * 1. 通过引入对象获取: `import &#123;mavonEditor&#125; from ...` 等方式引入后，`$vm`为`mavonEditor`</span></span><br><span class="line"><span class="comment">     * 2. 通过$refs获取: html声明ref : `&lt;mavon-editor ref=md &gt;&lt;/mavon-editor&gt;，`$vm`为 `this.$refs.md`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">mdedit</span>.$img2Url(pos, res.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整体的逻辑就是将文件保存到服务器中，在将返回的url替换到文档的原位置，<code>this.$refs.mdedit.$img2Url(pos, res.data.data)</code>进行回显保存路径。默认大小样式为 min-height: 300px , min-width: 300px，并且是可自行覆盖。</p><p>结果如下</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222559.png"></p><h3 id="多图上传"><a href="#多图上传" class="headerlink" title="多图上传"></a>多图上传</h3><p>多图上传简单理解就是循环所有文件，一一上传保存，适合可以将不要的图片经行去除，就不会全部都上传。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span> <span class="attr">ref</span>=<span class="string">&quot;mdedit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.content&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 80vh&quot;</span> @<span class="attr">imgAdd</span>=<span class="string">&quot;$imgAdd&quot;</span> @<span class="attr">imgDel</span>=<span class="string">&quot;$imgDel&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过定义一个变量来存储文件，也需要删事件，图片删除之后就需要去除。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$imgAdd(pos, $file)&#123;</span><br><span class="line">  <span class="comment">// 缓存图片信息</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">img_file</span>[pos] = $file;</span><br><span class="line">&#125;,</span><br><span class="line">$imgDel(pos)&#123;</span><br><span class="line">  <span class="keyword">delete</span> <span class="variable language_">this</span>.<span class="property">img_file</span>[pos];</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>上传，也就是循环将保存好的图片一一上传保存，在回显替换到原来的位置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">uploadimg</span>(<span class="params">$e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> _img <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">img_file</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> imgData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">        <span class="comment">// 第一步.将图片上传到服务器.</span></span><br><span class="line">        imgData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, <span class="variable language_">this</span>.<span class="property">img_file</span>[_img]);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$axios</span>.<span class="title function_">post</span>(<span class="string">&quot;/files/image/upload&quot;</span>, imgData).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 例如：返回数据为 res = [[pos, url], [pos, url]...]</span></span><br><span class="line"><span class="comment">             * pos 为原图片标志（0）</span></span><br><span class="line"><span class="comment">             * url 为上传后图片的url地址</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">             <span class="comment">// 第二步.将返回的url替换到文本原位置![...](0) -&gt; ![...](url)</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">mdedit</span>.$img2Url(i, res.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>这里粘贴一个后端代码，本次是使用阿里云OSS存储，需要做一些配置，详情可以去看一下阿里云官网关于OSS这一块的内容。后端方法的各种逻辑也都加了注释，这里就不在赘述。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/image/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">uploadImage</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">    <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> FileUtil.extName(originalFilename); <span class="comment">//文件类型</span></span><br><span class="line">    <span class="type">double</span> <span class="variable">size</span> <span class="operator">=</span> file.getSize(); <span class="comment">//文件大小</span></span><br><span class="line">    <span class="comment">//定义一个唯一文件识别码 ---</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> IdUtil.fastSimpleUUID();</span><br><span class="line">    <span class="type">String</span> <span class="variable">uploadFile</span> <span class="operator">=</span>  uuid + StrUtil.DOT + type;</span><br><span class="line">    <span class="comment">//获取文件的url</span></span><br><span class="line">    String url;</span><br><span class="line">    <span class="comment">//创建文件的MD5</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> SecureUtil.md5(file.getInputStream());</span><br><span class="line">    <span class="comment">//从数据库里查询是否存在相同的记录...通过文件的md5查询文件</span></span><br><span class="line">    <span class="type">Files</span> <span class="variable">dbFile</span> <span class="operator">=</span> filesService.getFileByMd5(md5);</span><br><span class="line">    <span class="keyword">if</span> (dbFile != <span class="literal">null</span>) &#123; <span class="comment">//存在</span></span><br><span class="line">        url = dbFile.getUrl();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//不存在，就存到oss中，并获取路径</span></span><br><span class="line">        <span class="comment">//OSS上传</span></span><br><span class="line">        ossUtil.upload(file.getInputStream(), <span class="string">&quot;images/&quot;</span> + uploadFile); <span class="comment">//路径肯定有，故不需要判定，oss只能存一个名字相同的</span></span><br><span class="line">        url = ossUtil.getURL(<span class="string">&quot;images/&quot;</span> + uploadFile); <span class="comment">//返回url</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//存储到数据库 -- 还需设置是谁上传的，要传来参数，后面搞</span></span><br><span class="line">    <span class="type">Files</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Files</span>();</span><br><span class="line">    saveFile.setName(originalFilename);</span><br><span class="line">    saveFile.setType(type);</span><br><span class="line">    saveFile.setSize(size/<span class="number">1024</span>);<span class="comment">//这是b要装成k就除以1024</span></span><br><span class="line">    saveFile.setUrl(url);</span><br><span class="line">    saveFile.setMd5(md5);</span><br><span class="line">    saveFile.setCreateTime(LocalDateTime.now());</span><br><span class="line">    filesService.save(saveFile);</span><br><span class="line">    <span class="keyword">return</span> Result.succ(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OSSUtil: 参照阿里云官网</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OSSUtil</span> &#123;</span><br><span class="line">    <span class="comment">/*上传*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">upload</span><span class="params">(InputStream inputStream, String target)</span>&#123;</span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(Const.ENDPOINT, Const.ACCESS_KEYID, Const.ACCESSKEY_SECRET);</span><br><span class="line">        ossClient.putObject(Const.BUCKET_NAME, target, inputStream);</span><br><span class="line">        <span class="comment">// 关闭OSSClient。</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*获取url*/</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getURL</span><span class="params">(String objectName)</span>&#123;</span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(Const.ENDPOINT, Const.ACCESS_KEYID, Const.ACCESSKEY_SECRET);</span><br><span class="line">        <span class="comment">// 设置URL过期时间为100天。</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalDateTime.now().plusDays(<span class="number">100</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">expiration</span> <span class="operator">=</span> Date.from(time.atZone( ZoneId.systemDefault()).toInstant());</span><br><span class="line">        <span class="comment">// 生成以GET方法访问的签名URL，访客可以直接通过浏览器访问相关内容。</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> ossClient.generatePresignedUrl(Const.BUCKET_NAME, objectName, expiration);</span><br><span class="line">        <span class="comment">// 关闭OSSClient。</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更多上传相关可以查看:<a href="https://github.com/hinesboy/mavonEditor/blob/master/doc/cn/upload-images.md">https://github.com/hinesboy/mavonEditor/blob/master/doc/cn/upload-images.md</a></p><h2 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h2><p>mavon-editor提供了许多的API，就包括语言选择、工具栏、工具栏背景等等。</p><h4 id="toolbars"><a href="#toolbars" class="headerlink" title="toolbars"></a>toolbars</h4><p>默认工具栏按钮全部开启, 传入自定义对象，可以选择启用部分按钮，功能如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  例如: &#123;</span></span><br><span class="line"><span class="comment">      bold: true, // 粗体</span></span><br><span class="line"><span class="comment">      italic: true,// 斜体</span></span><br><span class="line"><span class="comment">      header: true,// 标题</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  此时, 仅仅显示此三个功能键</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="attr">toolbars</span>: &#123;</span><br><span class="line">    <span class="attr">bold</span>: <span class="literal">true</span>, <span class="comment">// 粗体</span></span><br><span class="line">    <span class="attr">italic</span>: <span class="literal">true</span>, <span class="comment">// 斜体</span></span><br><span class="line">    <span class="attr">header</span>: <span class="literal">true</span>, <span class="comment">// 标题</span></span><br><span class="line">    <span class="attr">underline</span>: <span class="literal">true</span>, <span class="comment">// 下划线</span></span><br><span class="line">    <span class="attr">strikethrough</span>: <span class="literal">true</span>, <span class="comment">// 中划线</span></span><br><span class="line">    <span class="attr">mark</span>: <span class="literal">true</span>, <span class="comment">// 标记</span></span><br><span class="line">    <span class="attr">superscript</span>: <span class="literal">true</span>, <span class="comment">// 上角标</span></span><br><span class="line">    <span class="attr">subscript</span>: <span class="literal">true</span>, <span class="comment">// 下角标</span></span><br><span class="line">    <span class="attr">quote</span>: <span class="literal">true</span>, <span class="comment">// 引用</span></span><br><span class="line">    <span class="attr">ol</span>: <span class="literal">true</span>, <span class="comment">// 有序列表</span></span><br><span class="line">    <span class="attr">ul</span>: <span class="literal">true</span>, <span class="comment">// 无序列表</span></span><br><span class="line">    <span class="attr">link</span>: <span class="literal">true</span>, <span class="comment">// 链接</span></span><br><span class="line">    <span class="attr">imagelink</span>: <span class="literal">true</span>, <span class="comment">// 图片链接</span></span><br><span class="line">    <span class="attr">code</span>: <span class="literal">true</span>, <span class="comment">// code</span></span><br><span class="line">    <span class="attr">table</span>: <span class="literal">true</span>, <span class="comment">// 表格</span></span><br><span class="line">    <span class="attr">fullscreen</span>: <span class="literal">true</span>, <span class="comment">// 全屏编辑</span></span><br><span class="line">    <span class="attr">readmodel</span>: <span class="literal">true</span>, <span class="comment">// 沉浸式阅读</span></span><br><span class="line">    <span class="attr">htmlcode</span>: <span class="literal">true</span>, <span class="comment">// 展示html源码</span></span><br><span class="line">    <span class="attr">help</span>: <span class="literal">true</span>, <span class="comment">// 帮助</span></span><br><span class="line">    <span class="comment">/* 1.3.5 */</span></span><br><span class="line">    <span class="attr">undo</span>: <span class="literal">true</span>, <span class="comment">// 上一步</span></span><br><span class="line">    <span class="attr">redo</span>: <span class="literal">true</span>, <span class="comment">// 下一步</span></span><br><span class="line">    <span class="attr">trash</span>: <span class="literal">true</span>, <span class="comment">// 清空</span></span><br><span class="line">    <span class="attr">save</span>: <span class="literal">true</span>, <span class="comment">// 保存（触发events中的save事件）</span></span><br><span class="line">    <span class="comment">/* 1.4.2 */</span></span><br><span class="line">    <span class="attr">navigation</span>: <span class="literal">true</span>, <span class="comment">// 导航目录</span></span><br><span class="line">    <span class="comment">/* 2.1.8 */</span></span><br><span class="line">    <span class="attr">alignleft</span>: <span class="literal">true</span>, <span class="comment">// 左对齐</span></span><br><span class="line">    <span class="attr">aligncenter</span>: <span class="literal">true</span>, <span class="comment">// 居中</span></span><br><span class="line">    <span class="attr">alignright</span>: <span class="literal">true</span>, <span class="comment">// 右对齐</span></span><br><span class="line">    <span class="comment">/* 2.2.1 */</span></span><br><span class="line">    <span class="attr">subfield</span>: <span class="literal">true</span>, <span class="comment">// 单双栏模式</span></span><br><span class="line">    <span class="attr">preview</span>: <span class="literal">true</span>, <span class="comment">// 预览</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>并且还能通过自定义工具</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 左工具栏前加入自定义按钮 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;left-toolbar-before&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;自定义&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 左工具栏后加入自定义按钮  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;left-toolbar-after&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;自定义&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 右工具栏前加入自定义按钮  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;right-toolbar-before&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;自定义&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 右工具栏后加入自定义按钮  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;right-toolbar-after&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;自定义&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><p>组件也提供了许多的事件绑定，这里不加以赘述，官网都有。可以看一下下图</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/325740871671512526552-3b249f95-1437-4a15-8e72-2bc169574667.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;mavon-editor是一款基于vue的markdown编辑器，可以用来做文本的编辑，比如是某种业务需要发送公告、个人博客等，都可以用到，</summary>
      
    
    
    
    <category term="前端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue插件" scheme="https://dont-sleep-so-late.github.io/tags/Vue%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Sass详解</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/18/Sass%E8%AF%A6%E8%A7%A3/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/18/Sass%E8%AF%A6%E8%A7%A3/</id>
    <published>2023-10-17T16:22:19.000Z</published>
    <updated>2023-10-17T16:30:01.270Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-什么是Sass"><a href="#1-什么是Sass" class="headerlink" title="1. 什么是Sass?"></a>1. 什么是Sass?</h3><p>Sass(Syntactically Awesome Stylesheets)是一个 <a href="https://so.csdn.net/so/search?q=CSS&spm=1001.2101.3001.7020">CSS</a> 预处理器，是 CSS 扩展语言，可以帮助我们减少 CSS 重复的代码，节省开发时间。</p><h3 id="2-为什么使用Sass？"><a href="#2-为什么使用Sass？" class="headerlink" title="2. 为什么使用Sass？"></a>2. 为什么使用Sass？</h3><ol><li>它能够帮我们更快更高效的编写更好维护的 css；</li><li>Sass 引入合理的样式复用机制，可以节约很多时间来重复。</li></ol><p>Sass的好处当然不仅于此，当你使用之后便会发现其中的妙处。</p><h3 id="3-Sass语法"><a href="#3-Sass语法" class="headerlink" title="3. Sass语法"></a>3. Sass语法</h3><h5 id="3-1-变量"><a href="#3-1-变量" class="headerlink" title="3.1 变量"></a>3.1 变量</h5><blockquote><p>变量可以存储样式信息，以便后面使用。<br>比如一个样式在页面的多个地方使用，就可以先将该样式的值赋给一个变量，后面直接使用变量即可。</p></blockquote><p><strong>语法：</strong> $变量名：样式值；<br><strong>使用：</strong> $变量名；<br><strong>注意点</strong>：</p><ol><li>以$符号开头，后跟变量名</li><li>多个单词，变量名以-分割，如：$theme-color</li><li>变量写在#{}中以镶嵌入字符串</li></ol><p><strong>示例如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件  Sass后缀名为scss</span><br><span class="line">$dark: <span class="number">#000</span>;</span><br><span class="line">$side: left;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: $dark;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: $dark;</span><br><span class="line"><span class="attribute">border</span>-#&#123;$side&#125;-radius: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">border-left</span>-radius: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-2-嵌套"><a href="#3-2-嵌套" class="headerlink" title="3.2 嵌套"></a>3.2 嵌套</h5><h6 id="1-选择器嵌套"><a href="#1-选择器嵌套" class="headerlink" title="1. 选择器嵌套"></a>1. 选择器嵌套</h6><blockquote><p>子元素在父元素样式的一对大括号{}内 如：ul { li { } }</p></blockquote><p><strong>语法：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">爷爷 &#123;</span><br><span class="line">爸爸 &#123;</span><br><span class="line">儿子 &#123;</span><br><span class="line">孙子 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例如下:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-tag">html</span>结构</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;grandpa&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;father&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;son&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="selector-class">.grandpa</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.father</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.son</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.grandpa</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grandpa</span> <span class="selector-class">.father</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grandpa</span> <span class="selector-class">.father</span> <span class="selector-class">.son</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="2-伪类嵌套"><a href="#2-伪类嵌套" class="headerlink" title="2. 伪类嵌套"></a>2. 伪类嵌套</h6><blockquote><p>从上面我们可以看出，选择器嵌套得出的css样式相当于后代选择器一样，中间都有一个空格分隔，那如果想给一个元素添加:hover要怎么做呢?</p></blockquote><p>&amp;符就是来解决这个问题的。<br><strong>语法:</strong> &amp;:hover { }<br><strong>示例如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-tag">html</span>结构</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">a</span> href=&quot;javascript:;&quot;&gt;hello&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line">// 这里我们希望鼠标悬停<span class="selector-tag">a</span>的文本颜色改变</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里&amp;就表示直接调用父选择器，拿上边的例子你可以把&amp;理解为它是&amp;外面的所有父选择器，&amp; &#x3D;&gt; .box a。</p><h5 id="3-3-混合-mixin"><a href="#3-3-混合-mixin" class="headerlink" title="3.3 混合 mixin"></a>3.3 混合 mixin</h5><blockquote><p>mixin相当于已经定义好了一类样式，可以在任何地方重复的使用它，就跟js中的函数一样。</p></blockquote><p><strong>语法1-不含参数：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> name &#123;</span><br><span class="line">css样式</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用:</strong> @include name；<br><strong>示例如下:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line">// 定义一个mixin</span><br><span class="line"><span class="keyword">@mixin</span> box-style &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 使用</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="keyword">@include</span> box-style;</span><br><span class="line">// 当然也可以继续在这里添加样式</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>语法2-含参数:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> name ($param1，$param2， ...) &#123;</span><br><span class="line">css样式</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>使用:</strong> @include name(样式1，样式2，…)；<br><strong>注意：</strong><br>定义的时候参数要以$符开头，和变量命名是一样的<br><strong>示例如下:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line">$box-<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">$box-<span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"></span><br><span class="line">// 定义一个mixin</span><br><span class="line"><span class="keyword">@mixin</span> box ($<span class="attribute">width</span>, $<span class="attribute">height</span>) &#123;</span><br><span class="line"><span class="attribute">width</span>: $width;</span><br><span class="line"><span class="attribute">height</span>: $height;</span><br><span class="line">&#125;</span><br><span class="line">// 使用</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">// <span class="number">1</span>. 第一种用法, 直接将css样式写入</span><br><span class="line"><span class="keyword">@include</span> box(<span class="number">200px</span>, <span class="number">200px</span>);</span><br><span class="line"></span><br><span class="line">// <span class="number">2</span>. 第二种, 将定义好的变量写入</span><br><span class="line"><span class="keyword">@include</span> box($box-width, $box-height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-4-继承-extend"><a href="#3-4-继承-extend" class="headerlink" title="3.4 继承 extend"></a>3.4 继承 extend</h5><blockquote><p>如果一个元素的样式和另一个元素的样式完全一样，这个元素无需再写一遍重复的样式，只需要使用@extend 就可以把另一个元素的所有样式全部继承过来。</p></blockquote><p><strong>语法:</strong> @extend 元素选择器；<br><strong>示例如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// box2 继承 box1的样式</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="keyword">@extend</span> .box1;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box1</span>, <span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>不过继承要慎用，被继承相关的元素的样式也会继承过去，您看下面的例子：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box1</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// box2 继承 box1的样式</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="keyword">@extend</span> .box1;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box1</span>, <span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> <span class="selector-tag">div</span>, <span class="selector-class">.box2</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果不想与被继承元素的相关元素牵扯，还是注意选择器的书写。</p><h5 id="3-5-导入-import"><a href="#3-5-导入-import" class="headerlink" title="3.5 导入 import"></a>3.5 导入 import</h5><blockquote><p>如果一个页面需要使用其他页面的样式，sass可以导入其他的scss文件，scss会把他们编译成一个css文件。<br>这样在开发中可以把一个页面的样式分割成多个scss文件，然后在页面的scss文件中导入其他scss，可以实现css的模块化开发。</p></blockquote><p><strong>语法：</strong> @import “文件名”<br><strong>示例如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 这里假设同级目录下有一个box1<span class="selector-class">.scss</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 在box2<span class="selector-class">.scss</span>文件里引入box1<span class="selector-class">.scss</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;box1&quot;</span></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line">div &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-6-注释"><a href="#3-6-注释" class="headerlink" title="3.6 注释"></a>3.6 注释</h5><ol><li>单行注释： &#x2F; &#x2F; css文件里不会显示 压缩方式的css不会显示</li><li>多行注释： &#x2F;**&#x2F; css文件里会显示 压缩方式的css不会显示</li><li>强制注释：&#x2F;* ! *&#x2F; css文件里会显示 压缩方式的css会显示</li></ol><h5 id="3-7-数学运算"><a href="#3-7-数学运算" class="headerlink" title="3.7 数学运算"></a>3.7 数学运算</h5><blockquote><p>包含+、-、*、&#x2F;(加减乘除)</p></blockquote><p><strong>示例如下:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> + <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span> - <span class="number">50px</span>;</span><br><span class="line">// 这里不能两个都带单位，否则是<span class="number">100px</span>*px这种不合法的值</span><br><span class="line"><span class="attribute">margin-top</span>: <span class="number">10px</span> * <span class="number">10</span>; </span><br><span class="line">// css会将/认为是合法的，所以需要加括号</span><br><span class="line"><span class="attribute">padding-top</span>: (<span class="number">100px</span> / <span class="number">2</span>) ;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-8-if条件语句"><a href="#3-8-if条件语句" class="headerlink" title="3.8 if条件语句"></a>3.8 if条件语句</h5><blockquote><p>Sass可以根据条件判断给出特定的样式</p></blockquote><p><strong>语法:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@if</span> 条件语句 &#123;</span><br><span class="line">&#125; @ else if 条件语句 &#123;</span><br><span class="line">&#125; <span class="keyword">@else</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="keyword">@if</span> <span class="number">1</span>+<span class="number">1</span> == <span class="number">2</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: red;</span><br><span class="line">&#125; <span class="keyword">@else</span> if <span class="number">1</span>+<span class="number">1</span> == <span class="number">3</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: blud;</span><br><span class="line">&#125; <span class="keyword">@else</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-9-for循环"><a href="#3-9-for循环" class="headerlink" title="3.9 for循环"></a>3.9 for循环</h5><blockquote><p>Sass也支持for循环，有两种语法。</p></blockquote><p><strong>语法1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@for $index from 开始值 through 结束值 &#123;</span><br><span class="line">&#125;</span><br><span class="line">从开始值开始，到结束值结束，包含结束值  index表示 1， 2，...结束值</span><br></pre></td></tr></table></figure><p><strong>示例如下:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>文件</span><br><span class="line"><span class="keyword">@for</span> $i from <span class="number">1</span> through <span class="number">5</span> &#123;</span><br><span class="line"><span class="selector-class">.col-</span>#&#123;$<span class="selector-tag">i</span>&#125; &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> * $i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// 生成的css代码</span><br><span class="line"><span class="selector-class">.col-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-5</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-10-each循环"><a href="#3-10-each循环" class="headerlink" title="3.10 each循环"></a>3.10 each循环</h5><blockquote><p>遍历一个列表，然后从列表中取出对应值。<br>像border: 1px solied red； 1px solid red 这种用空格隔开的复合属性便是列表。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@each</span> $index in $list &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>示例如下：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scss文件</span></span><br><span class="line"><span class="variable">$icons</span>: success fail warning;</span><br><span class="line"><span class="keyword">@each</span> <span class="variable">$i</span> in <span class="variable">$icons</span> &#123;</span><br><span class="line"><span class="selector-class">.icon-</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/#&#123;<span class="variable">$i</span>&#125;<span class="selector-class">.png</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成的css代码</span></span><br><span class="line"><span class="selector-class">.icon-success</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/success.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-error</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/error.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-warning</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/warning.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-11-while循环"><a href="#3-11-while循环" class="headerlink" title="3.11 while循环"></a>3.11 while循环</h5><blockquote><p>只要条件为真，就执行语句体。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@while</span> 条件 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>示例如下：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scss文件</span></span><br><span class="line"><span class="variable">$index</span>: <span class="number">6</span>;</span><br><span class="line"><span class="keyword">@while</span> <span class="variable">$index</span>&gt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="selector-class">.box-</span>#&#123;<span class="variable">$index</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">5px</span> * <span class="variable">$index</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$index</span>: <span class="variable">$index</span> - <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成的css代码</span></span><br><span class="line"><span class="selector-class">.box-6</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-12-用户自定义函数"><a href="#3-12-用户自定义函数" class="headerlink" title="3.12 用户自定义函数"></a>3.12 用户自定义函数</h5><p><strong>语法：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> name(<span class="variable">$param1</span>，<span class="variable">$param2</span>，...) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>示例如下：</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scss文件</span></span><br><span class="line"><span class="variable">$index</span>: <span class="number">6</span>;</span><br><span class="line"><span class="keyword">@function</span> get-color(<span class="variable">$key</span>) &#123;</span><br><span class="line"><span class="keyword">@if</span> <span class="variable">$key</span> &gt; <span class="number">5</span> &#123;</span><br><span class="line"><span class="keyword">@return</span> <span class="number">#000</span>;</span><br><span class="line">&#125; <span class="keyword">@else</span> &#123;</span><br><span class="line"><span class="keyword">@return</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">get-color</span>(<span class="variable">$index</span>);</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成的css代码</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-什么是Sass&quot;&gt;&lt;a href=&quot;#1-什么是Sass&quot; class=&quot;headerlink&quot; title=&quot;1. 什么是Sass?&quot;&gt;&lt;/a&gt;1. 什么是Sass?&lt;/h3&gt;&lt;p&gt;Sass(Syntactically Awesome Stylesheets</summary>
      
    
    
    
    <category term="前端开发" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="css" scheme="https://dont-sleep-so-late.github.io/tags/css/"/>
    
    <category term="sass" scheme="https://dont-sleep-so-late.github.io/tags/sass/"/>
    
  </entry>
  
  <entry>
    <title>mock使用方法</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/13/mock%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/13/mock%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</id>
    <published>2023-10-13T03:40:32.000Z</published>
    <updated>2023-10-13T06:59:29.596Z</updated>
    
    <content type="html"><![CDATA[<h1 id="如何在Vue项目中使用Mock模拟数据？"><a href="#如何在Vue项目中使用Mock模拟数据？" class="headerlink" title="如何在Vue项目中使用Mock模拟数据？"></a>如何在Vue项目中使用Mock模拟数据？</h1><blockquote><p>前言：</p><p>在项目开发流程中，在开发工作开始之前，一般会有一个接口文档产出的过程：也就是依据设计文档给出响应的接口细节，方便前端mock数据；那如何更好的使用Mock来模拟数据，是一个优秀的前端必须要掌握的技能（PS：避免成为背锅侠）！</p></blockquote><h2 id="1-什么是联调？"><a href="#1-什么是联调？" class="headerlink" title="1.什么是联调？"></a>1.什么是联调？</h2><blockquote><p><strong>首先，你要了解什么是联调？在开发中起什么作用？</strong></p></blockquote><p>现在的开发基本都是前后端分离的，当后端还没有提供接口的时候，前端需要的数据从哪里来呢，就只能自己造假数据写死了。当后端接口做好后，前端所需要的数据就需要替换成后端提供的数据了。这个时候就需要进行一个前后端的调试，我们会把<strong>这个过程叫做前后端接口联调</strong>。</p><blockquote><p><strong>场景：</strong></p></blockquote><p>在一般的开发场景中，后端负责写接口，前端负责调用接口。然而通常情况下，前端开发页面时，后端还未写好接口，前端可以先自己”模拟“接口，等到后端写好接口时，前端才能真正的去调用后端的接口。这时候需要验证调试内容，例如:接口中URL是否正确，以及前端传的参数和后端返回的数据是否正确等，这个验证数据和功能有没有误的过程就是联调。</p><blockquote><p><strong>作用：</strong></p></blockquote><p>前端界面的展示，需要服务端从数据库查找数据并通过接口返回给前端，联调的<strong>目的是测试前后端的数据格式 &#x2F; 数据流 &#x2F;参数值是否正确</strong>，保证接口能正常获取和返回正确的数据，支持对应产品功能的实现。</p><ul><li>联调是前后端一起见证靠谱的测试结果</li><li>给需求方提供一个正确的需求验证环境</li><li>尽早暴露前后端实现的问题</li></ul><h2 id="2-什么是Mock"><a href="#2-什么是Mock" class="headerlink" title="2.什么是Mock?"></a>2.什么是Mock?</h2><p>通常意义的mock指的就是mock server，模拟服务端返回的接口数据，用于前端开发，第三方接口联调。</p><p>简单来说就是使用mockjs用来模拟产生一些虚拟的数据，可以让前端在后端接口还没有开发出来时独立开发。我们可以使用真实的url，mockjs可以拦截ajax请求，返回设定好的数据。</p><p><img src="https://upload-images.jianshu.io/upload_images/28377699-080aa3ec7ee0b609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>在这里插入图片描述</p><p><strong>场景：</strong></p><ul><li>前后端开发进度不一致，前端开发速度快于后端，需要一个假的接口用于模拟后端返回。</li><li>项目需要用到第三方接口，如果第三方接口未开发好，或者第三方接口没有测试环境，为了保证进度，所以需要模拟接口用于调试。</li></ul><h2 id="4-怎么使用Mock"><a href="#4-怎么使用Mock" class="headerlink" title="4.怎么使用Mock?"></a>4.怎么使用Mock?</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">官网地址：http:<span class="comment">//mockjs.com/</span></span><br></pre></td></tr></table></figure><h3 id="3-1-使用方式"><a href="#3-1-使用方式" class="headerlink" title="3.1 使用方式"></a>3.1 使用方式</h3><p>1）在vue-cli&#x2F;vite项目搭建后，安装axios和mockjs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -S axios</span><br><span class="line">npm install -D mockjs</span><br></pre></td></tr></table></figure><ol><li>在util文件(通常情况下)配置axios和mock</li></ol><ul><li>axios配置，并在main.js中引入</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http.js文件内容</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="property">data</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></table></figure><ul><li>mock配置，并在main.js中执行</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以在mock.js文件中模拟数据</span></span><br><span class="line"><span class="comment">//如果引入出现... 执行npm i --save-dev @types/mockjs </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入mockjs</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Mock</span> <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mock方法--三个参数</span></span><br><span class="line">  <span class="comment">// 1. 拦截请求地址</span></span><br><span class="line">  <span class="comment">// 2. 请求方式</span></span><br><span class="line">  <span class="comment">// 3. 返回数据</span></span><br><span class="line">    <span class="comment">// 形式：1直接返回数据  2函数返回数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义全局数据</span></span><br><span class="line"><span class="keyword">let</span> arr =[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义函数-生成数据</span></span><br><span class="line"><span class="comment">// 函数返回数据--方便进行增删改查</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createNews</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  <span class="keyword">let</span> newlist = []</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">    newlist.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="comment">// 生成的数据</span></span><br><span class="line">      <span class="attr">cname</span>:<span class="title class_">Mock</span>.<span class="property">Random</span>.<span class="title function_">cname</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newlist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr = <span class="title function_">createNews</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义函数-处理新增数据</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleAddName</span> = (<span class="params">opt</span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// post传递过来的参数</span></span><br><span class="line">  <span class="comment">// console.log(opt.body) //json字符串 需要转成对象</span></span><br><span class="line">  <span class="keyword">let</span> &#123;keyWords&#125; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(opt.<span class="property">body</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(keyWords)</span><br><span class="line">  arr.<span class="title function_">push</span>(&#123;<span class="attr">cname</span>:keyWords&#125;)</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义函数-删除数据</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleDeleteName</span> =(<span class="params">opt</span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// 通过opt.url截取字符串传递过来的参数</span></span><br><span class="line">  <span class="comment">// console.log(opt.url)</span></span><br><span class="line">  <span class="keyword">let</span> index = opt.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="comment">// console.log(index)</span></span><br><span class="line">  arr.<span class="title function_">splice</span>(index,<span class="number">1</span>)</span><br><span class="line">  <span class="comment">// console.log(arr)</span></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询接口--get</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="string">&#x27;/mock/news&#x27;</span>,<span class="string">&#x27;get&#x27;</span>,arr)</span><br><span class="line"><span class="comment">// 新增接口--post</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="string">&#x27;/mock/addNews&#x27;</span>,<span class="string">&#x27;post&#x27;</span>,handleAddName)</span><br><span class="line"><span class="comment">// 删除接口--delete(请求的查询参数拼接在请求路径中的，需要对路径进行处理，使用正则，只要是符合校验的进来进行操作)</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="regexp">/^\/mock\/deleteNews/</span>,<span class="string">&#x27;delete&#x27;</span>,handleDeleteName)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接返回数据</span></span><br><span class="line"><span class="comment">// Mock.mock(&#x27;/mock/news&#x27;,&#x27;put&#x27;,&#123;</span></span><br><span class="line"><span class="comment">// 属性 list 的值是一个数组，其中含有 1 到 10 个元素</span></span><br><span class="line"><span class="comment">//   &quot;list|10&quot;:[</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//       &quot;fname&quot;:&quot;@cfirst()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;lname&quot;:&quot;@clast()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;avatar&quot;:&quot;@image(&#x27;100x100&#x27;,&#x27;pink&#x27;,&#x27;#fff&#x27;,&#x27;png&#x27;,&#x27;Hello&#x27;)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;info&quot;:&quot;@cparagraph()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;age&quot;:&quot;@integer(0,100)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;address&quot;:&quot;@county(true)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;yzm&quot;:&quot;@string(&#x27;number&#x27;,6)&quot;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   ]</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure><ul><li>main.js文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js文件内容</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span></span><br><span class="line"><span class="comment">//引入axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;./util/http.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行mockjs文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./util/mock.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局提供</span></span><br><span class="line">app.<span class="title function_">provide</span>(<span class="string">&#x27;$axios&#x27;</span>,axios)</span><br><span class="line"></span><br><span class="line">app</span><br><span class="line">.<span class="title function_">use</span>(router)</span><br><span class="line">.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>模拟获取到的数据如下图(具体可根据官网提供的示例，按需使用)：</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/28377699-720630119b0e5c54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1138/format/webp" alt="img"></p><p>在这里插入图片描述</p><ol><li>调用接口请求数据，渲染数据</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Mock模拟数据<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item,index in list&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">      &lt;h4&gt;&#123;&#123;item.fname&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;h4&gt;&#123;&#123;item.cname&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;删除Name&quot; @click=&quot;deleteName(index)&quot;&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;addNameInp&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;新增Name&quot; @click=&quot;addNameBtn&quot;&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 引入</span><br><span class="line">import &#123;ref,reactive,toRefs,inject,onMounted&#125; from &#x27;vue&#x27;</span><br><span class="line">// 使用axios</span><br><span class="line">const $axios = inject(&#x27;$axios&#x27;)</span><br><span class="line">// 数据</span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">  list:[]</span><br><span class="line">&#125;)</span><br><span class="line">// 解构list --使用toRefs变成响应式</span><br><span class="line">const &#123;list&#125; = toRefs(data)</span><br><span class="line">// 新增的名字的value</span><br><span class="line">const addNameInp = ref(&#x27;&#x27;)</span><br><span class="line">// 新增按钮</span><br><span class="line">const addNameBtn = async()=&gt;&#123;</span><br><span class="line">  // 请求数据</span><br><span class="line">  let res = await $axios.post(&#x27;/mock/addNews&#x27;,&#123;</span><br><span class="line">    keyWords:addNameInp.value</span><br><span class="line">  &#125;)</span><br><span class="line">  // 清空输入框</span><br><span class="line">  addNameInp.value=&#x27;&#x27;</span><br><span class="line">  data.list = res</span><br><span class="line">&#125;</span><br><span class="line">// 删除按钮</span><br><span class="line">const deleteName =async(index)=&gt;&#123;</span><br><span class="line">  let res = await $axios.delete(&#x27;/mock/deleteNews&#x27;,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">      index:index</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  data.list=res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(async()=&gt;&#123;</span><br><span class="line">  // 请求数据</span><br><span class="line">  let res = await  $axios.get(&#x27;/mock/news&#x27;)</span><br><span class="line">  console.log(res)</span><br><span class="line">  // data.list  = res.list</span><br><span class="line">  data.list= res</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/28377699-749479bf0ce9c5bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;如何在Vue项目中使用Mock模拟数据？&quot;&gt;&lt;a href=&quot;#如何在Vue项目中使用Mock模拟数据？&quot; class=&quot;headerlink&quot; title=&quot;如何在Vue项目中使用Mock模拟数据？&quot;&gt;&lt;/a&gt;如何在Vue项目中使用Mock模拟数据？&lt;/h1&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>2分钟规则</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/13/2%E5%88%86%E9%92%9F%E8%A7%84%E5%88%99/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/13/2%E5%88%86%E9%92%9F%E8%A7%84%E5%88%99/</id>
    <published>2023-10-12T17:44:25.000Z</published>
    <updated>2023-10-12T17:45:23.359Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2分钟规则"><a href="#2分钟规则" class="headerlink" title="2分钟规则"></a><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==" alt="img">2分钟规则</h1><p>实用技巧文摘</p><p>每当你发现很难开始执行某项任务时，可以试试将其缩减成2分钟的版本。</p><ul><li>看一本书 → 看一页书</li><li>写一篇文章 → 写一句话</li><li>跑10公里 → 穿上跑鞋</li><li>做100次俯卧撑 → 做1次俯卧撑</li><li>多吃蔬菜水果 → 吃一个水果</li><li>编写一个程序 → 编写一个函数 → 编写一行代码</li></ul><p>这样做的目的是使上手变得超级容易，让你先上手再说。一旦开始做了（这可能是最艰难的一步），你就会开始有动力，可能会继续做下去。</p><ul><li>阅读一页 → 阅读10页 → 读完第一章</li><li>写一个句子 → 写文章的开头 → 写出正文</li><li>穿上跑鞋 → 步行5分钟 → 跑步5分钟</li></ul><p>一旦开始，继续做下去就会容易得多。有时，你甚至会发现，自己在不知不觉间已经完成了任务。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2分钟规则&quot;&gt;&lt;a href=&quot;#2分钟规则&quot; class=&quot;headerlink&quot; title=&quot;2分钟规则&quot;&gt;&lt;/a&gt;&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA</summary>
      
    
    
    
    
    <category term="实用技巧" scheme="https://dont-sleep-so-late.github.io/tags/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>OpenAPI/Swagger</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/11/OpenAPI%20Swagger/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/11/OpenAPI%20Swagger/</id>
    <published>2023-10-10T16:14:39.000Z</published>
    <updated>2023-10-10T16:37:58.807Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OpenAPI-Swagger"><a href="#OpenAPI-Swagger" class="headerlink" title="OpenAPI&#x2F;Swagger"></a>OpenAPI&#x2F;Swagger</h1><blockquote><p>OpenAPI &#x2F; Swagger 相较于其他规范完善程度更高，生态更加完整，是目前 CODING 推荐的 API 设计语言。</p></blockquote><h3 id="什么是-OpenAPI-Swagger"><a href="#什么是-OpenAPI-Swagger" class="headerlink" title="什么是 OpenAPI &#x2F; Swagger"></a>什么是 OpenAPI &#x2F; Swagger</h3><p><a href="https://swagger.io/resources/open-api">OpenAPI</a> 规范（OAS）是一种通用的、和编程语言无关的 API 描述规范，使人类和计算机都可以发现和理解服务的功能，而无需访问源代码、文档或针对接口进行嗅探。正确定义后，使用者可以使用最少的实现逻辑来理解远程服务并与之交互。</p><p>OpenAPI 始于 Swagger 规范，Swagger 规范已于 <a href="https://smartbear.com/blog/develop/what-is-the-difference-between-swagger-and-openapi/">2015 年捐赠给 Linux 基金会后改名为 OpenAPI</a>，并定义最新的规范为 OpenAPI 3.0。</p><p>CODING 目前支持以下版本导入：</p><ul><li>OpenAPI v3（OAS 3）</li><li>Swagger v2</li></ul><h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><p>通常，设计 API 规范有两个方向，Design-First（设计优先） 或 Code-First（编码优先）</p><ol><li><p>Design-First（设计优先）：</p><p>即优先设计 API 规范，设计完成后再着手进行代码开发工作。</p><p>采用 Design-First 就意味着，将设计 API 路由、参数等工作提前，后续整个软件开发的流程都需要围绕着 API 规范为核心，当然这需要有一定的设计经验的开发人员才能胜任。</p><p>Design-First 有很多好处：</p><p>-提高开发效率。开发团队将根据 API 规范进行并行开发和对接工作，而无需等待接口逻辑开发完毕。<br>-降低接口开发的成本，无需修改代码逻辑即可轻松地修改 API 规范，因为 API 描述语言（如：OpenAPI）与编码语言无关<br>-开发人员更加专注于设计 API 规范，对比 Code-First 可以描写更多 API 的细节，如：校验规则、范例数据等，同时开发人员对 API 的全局一致性、扩展性、规范性也有更好的把控。<br>-在联调开发的过程中可以提前发现和解决问题，避免问题在开发完毕后修改的成本过高。<br>-由于 API 描述更加标准化，可以方便做更多的 API 生态延伸，比如基于 API 规范生成 Mock API Server，开发 API 自动化测试代码，接入 API 网关等。</p><p>点击查看<a href="https://swagger.io/blog/api-design/design-first-or-code-first-api-development">更多参考</a></p></li><li><p>Code-First（编码优先）：</p><p>即通过代码中关于 API 描述特性、注解或注释自动生成 API 描述文件的设计方式，如：JAVA 生态的 SpringFox。</p><p>适合倾向于在代码上编写 API 规范，通过自动化设施自动生成文档的团队。</p><p>Code-First 的优点：</p><p>-节省时间。对于 API 开发者，编码的同时可以获得一份满足基本要求的 API 文档。<br>-方便接入自动化 CI&#x2F;CD 流程中。</p><p>虽然 Code-First 省去了开发者设计 API 描述文件的阶段，提高了 API 开发者的效率，但是从整个团队的角度来看，效率并不一定提升了，反而有可能降低了效率。</p><p>不同 API 开发者的经验和习惯的不同，极有可能在编码的过程中对 API 的限制条件考虑不全，又或者框架生成 API 文档的程序完善度不够，种种因素导致最终生成的 API 的描述无法达到理想标准。</p><p>而很多 API 开发者习惯开发完成后才推送代码，并生成 API 文档，也导致了团队的进程阻塞于此，拖后了整个团队的开发进程。另一方面，API 在开发完成如果没有测试，很有可能导致 API 对接者在对接的过程中遇到重重阻碍。</p><p>CODING 也希望各位开发者重视 API 设计的重要性，如果您喜欢 Code-First 设计方向，我们的建议是：</p><p>-选用完善程度比较高的生成组件<br>-对 API 的描述尽可能的细致、完整<br>-优先设计路由、请求、响应等规则，详细的逻辑代码在 API 设计完成后再着手开发。</p></li></ol><p>Design-First 和 Code-First 针对不同的场景有着各自的优势，不同团队对两者考虑的方向也不同，但是对 API 描述的完善不管是哪个方向都是最重要的。</p><p>下面我们将针对 Design-First 和 Code-First 两个方向的最佳实践作展开。</p><h4 id="Design-First"><a href="#Design-First" class="headerlink" title="Design-First"></a>Design-First</h4><p>OpenAPI 进化到 v3 版本后，虽然规范非常完善，但对于首次上手的同学来说还是非常复杂，那么带有界面的编辑工具会成为最佳选择。</p><p>这里我们推荐使用 <a href="https://mermade.github.io/openapi-gui">OpenAPI-GUI v3</a> 来设计 API 描述文件，如下图所示。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223145811.png"><img src="https://help-assets.codehub.cn/enterprise/20191223145811.png" alt="img"></a></p><h5 id="OpenAPI-GUI-v3-基本使用"><a href="#OpenAPI-GUI-v3-基本使用" class="headerlink" title="OpenAPI-GUI v3 基本使用"></a>OpenAPI-GUI v3 基本使用</h5><p>OpenAPI-GUI v3 支持设计大多数常见情况的 API 规则，并且支持本地部署，非常适合新手，下面我们简单介绍一下 OpenAPI-GUI v3 的基本使用方式。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223145901.png"><img src="https://help-assets.codehub.cn/enterprise/20191223145901.png" alt="img"></a></p><p>OpenAPI-GUI v3 的导航结构如上图所示。</p><p>首先，我们切换到 <code>Header</code>，给 API 文档定义标题、描述、作者等基础信息。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223150930.png"><img src="https://help-assets.codehub.cn/enterprise/20191223150930.png" alt="img"></a></p><p>接着，我们切换至 <code>Servers</code> 配置 API 各环境基础路径地址。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223150958.png"><img src="https://help-assets.codehub.cn/enterprise/20191223150958.png" alt="img"></a></p><p>如果您的 API 需要经过鉴权（OAuth、APIKey 等），您可以切换到 <code>Security</code> 配置响应的鉴权信息，如下图所示。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151344.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151344.png" alt="img"></a></p><p>下面将开始设计 API 分组，点击切换到 <code>Tags</code>，对应的之后设计的接口可与分组相关联，并在文档中展示时，合并到对应分组栏目中。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151421.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151421.png" alt="img"></a></p><p><code>Main</code> 为最主要的 API 设计界面，需要了解的是，CODING API 文档以 tag 分组，而该界面以路由+请求方法（Method）分组。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151435.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151435.png" alt="img"></a></p><p>Description TAB 用于填写接口的标题、描述和关联 tag 信息，建议全部填写，若未填 Summary，API 文档将显示 API ID（OperationID），未关联 tag 将归属于默认分组。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151448.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151448.png" alt="img"></a></p><p>Parameter 用于定义请求 Query、Header、Cookie 和路由参数规则，Location 可指定参数位置。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151518.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151518.png" alt="img"></a></p><p>而在非 GET 请求方式（Method）方式下，如 POST &#x2F; PATCH &#x2F; PUT 等，Request Body 则用于定义请求 Body 的规则，如 Form 表单参数、纯 JSON 方式提交参数定义等。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151530.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151530.png" alt="img"></a></p><p>对应的 Request Body 必须定义 Media-Type，可定义多个 Media-Type，API 服务器将根据该参数识别 Body 内容结构，如上图所示 <code>application/json</code> 即为纯 JSON 方式提交表单参数。</p><p>您可以复用实体，下面会讲到，或者直接编辑请求结构，点击后弹出如下图所示，可直接编辑。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151608.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151608.png" alt="img"></a></p><p>需要注意的是，该弹窗弹出位置可能会在显示页面下方，需要滚动到下方才可看到。</p><p>切换到 Response TAB，我们可以定义接口响应返回的结构。</p><p>在这个界面可以增加多条响应结构，如 200、400、401 多个状态码有多重不同响应返回结构，或者同状态码下不同 Media-Type 不同返回结构。</p><p>点击编辑结构和 Request Body 类似，可定义响应数据结构规则。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151646.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151646.png" alt="img"></a></p><p>切换到 Security TAB，可以配置接口的鉴权配置，由于编辑器未完善，您可在设计完成后通过导出 OpenAPI 描述文件，以源文件的形式修改 scope 范围（可参考下方进阶教程）。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151703.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151703.png" alt="img"></a></p><blockquote><p>由于 Docs &#x2F; Links &#x2F; Callbacks 在日常使用时不常用到，CODING API 文档暂不作展示。</p></blockquote><p>在设计完毕后，您可点击右上角 Save 按钮保存修改，并点击 <code>Export JSON</code> 或者 <code>Export YAML</code> 复制或者下载 OpenAPI 描述文件。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223151714.png"><img src="https://help-assets.codehub.cn/enterprise/20191223151714.png" alt="img"></a></p><p>接着，在 CODING API 文档导入并发布。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152051.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152051.png" alt="img"></a></p><p>等待发布完毕后，点击详情页的文档地址，查看最终效果。</p><h5 id="已有-OpenAPI-描述文件"><a href="#已有-OpenAPI-描述文件" class="headerlink" title="已有 OpenAPI 描述文件"></a>已有 OpenAPI 描述文件</h5><p>如果您已有 OpenAPI 描述文件，或者您想先看一下效果，那么您可以切换到 <code>Upload</code> TAB，将描述文件填入编辑框，或者点击 <code>Demo</code> 加载范例文件，并点击 <code>Load Definition</code> 加载描述文件。</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152111.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152111.png" alt="img"></a></p><h5 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h5><p>虽然使用 OpenAPI-GUI v3 设计非常方便，但是对 OpenAPI 支持的并不完整，比如 Request &amp; Response Example 无法在线编辑，这种场景下，我们就需要针对 OpenAPI 描述源文件进行编辑。</p><p>这里我们推荐使用 <a href="https://editor.swagger.io/">Swagger Editor</a> 进行编辑，如下图所示：</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152739.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152739.png" alt="img"></a></p><p>Swagger Editor 是所见即所得的，并且如果写的语法有问题，会在对应段落显示错误提示，并说明错误原因，如下图所示：</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152823.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152823.png" alt="img"></a></p><p>相对于纯手写 OpenAPI 描述文件，Swagger Editor 有个贴心的功能，您可以很方便的通过可视化界面插入描述（如：path、operation 等）至编辑框中，如下图所示，</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152830.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152830.png" alt="img"></a></p><p><a href="https://help-assets.codehub.cn/enterprise/20191223152838.png"><img src="https://help-assets.codehub.cn/enterprise/20191223152838.png" alt="img"></a></p><p>为了方便理解 OpenAPI v3 规范，我们在下方给出了 OpenAPI v3 的一般结构范例，对应的右边给出了字段的备注信息，方便对照：</p><blockquote><p>该范例 CODING API 文档均支持展示</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">openapi: 3.0.0                                                        # 代表使用 OpenAPI v3 规范</span><br><span class="line">info:                                                                            # 这里写 API 文档基础信息</span><br><span class="line">  title: 宠物商店 API 文档                                        # API 文档标题</span><br><span class="line">  version: &#x27;1.0.0&#x27;                                                    # API 文档版本</span><br><span class="line">  description: 这是一篇关于宠物商店的 DEMO API 文档，仅做参考。        # API 文档描述</span><br><span class="line">  contact:                                                                    # 联系信息</span><br><span class="line">    name: CODING</span><br><span class="line">    url: &#x27;https://coding.net&#x27;</span><br><span class="line">    email: coding_support@tencent.com</span><br><span class="line">servers:                                                                    # 这里写 API 服务器地址，多条可代表不同环境</span><br><span class="line">  - url: &#x27;https://petstore.com/api/v1&#x27;</span><br><span class="line">    description: 生产环境</span><br><span class="line">  - url: &#x27;http://test.petstore.com/api/v1&#x27;</span><br><span class="line">    description: 测试环境</span><br><span class="line">tags:                                                                            # 标签，CODING 中可作为分组依据，name 作为分组名称</span><br><span class="line">  - name: 宠物</span><br><span class="line">    description: 所有关于宠物的内容</span><br><span class="line">  - name: 会话</span><br><span class="line">    description: 关于用户的注册、登录和登出</span><br><span class="line">paths:                                    # 这里写具体的 API 的相关信息（API 名称、请求类型、摘要、请求参数、响应等）</span><br><span class="line">  /pets/&#123;petId&#125;:                                                        # 第一层，API 路由</span><br><span class="line">    get:                                                                            # 第二层，请求方法（Method）,如: get, post, delete 等</span><br><span class="line">      tags:                                                                            # 标签，与上方全局的标签对应，将该接口归于对应 tag 的组中</span><br><span class="line">        - 宠物</span><br><span class="line">      summary: 宠物详情                                                        # 接口摘要，CODING 中可作为接口标题</span><br><span class="line">      operationId: get-pet                                            # 接口 ID（必填），接口的唯一识别方式 </span><br><span class="line">      description: 获取宠物信息                                          # 接口描述信息</span><br><span class="line">      parameters:                                                                # 接口参数，可多条，支持路由、Query、Header 参数</span><br><span class="line">          - schema:                                                                    # 参数结构</span><br><span class="line">          type: string                                                            # 参数类型，integer / string / array 等</span><br><span class="line">          name: petId                                                                # 参数 key</span><br><span class="line">          in: path                                                                    # 路由（path）类型的参数</span><br><span class="line">          required: true                                                        # 是否必填</span><br><span class="line">          description: 宠物 ID                                             # 参数描述</span><br><span class="line">        - schema:</span><br><span class="line">            type: string</span><br><span class="line">            enum:                                                                        # 参数枚举</span><br><span class="line">              - application/json</span><br><span class="line">              - application/xml</span><br><span class="line">            default: application/json</span><br><span class="line">          in: header                                                            # header 类型的参数</span><br><span class="line">          name: Accept</span><br><span class="line">          description: 返回数据媒体类型</span><br><span class="line">        - schema:</span><br><span class="line">            type: integer</span><br><span class="line">            default: 1                                                            # 参数默认值</span><br><span class="line">          in: query                                                                # Query 类型的参数</span><br><span class="line">          name: page</span><br><span class="line">          description: 页码</span><br><span class="line">      security:                                                                    # 接口授权信息，此处与全局 components/securitySchemes 对应</span><br><span class="line">        - petstore_auth:                                                    # 此处与 components/securitySchemes/petstore_auth 对应</span><br><span class="line">            - &#x27;read:pets&#x27;                                                        # 此处代表接口 OAuth Scope 信息</span><br><span class="line">      responses:                                                                # 接口响应信息</span><br><span class="line">        &#x27;200&#x27;:                                                                        # 响应状态码</span><br><span class="line">          description: 以数组形式返回宠物信息                     # 响应描述信息</span><br><span class="line">          headers:</span><br><span class="line">            X-PAGE:</span><br><span class="line">              schema:</span><br><span class="line">                type: integer</span><br><span class="line">              description: 当前页码</span><br><span class="line">          content:                                                                # 响应内容规范描述</span><br><span class="line">            application/json:                                                # 响应内容 Media Type</span><br><span class="line">              schema:                                                                    # 响应内容结构</span><br><span class="line">                type: array</span><br><span class="line">                description: 宠物信息</span><br><span class="line">                items:</span><br><span class="line">                  $ref: &#x27;#/components/schemas/Pet&#x27;    # $ref 可用来引用 components/schemas 中的各种实体声明，减少相同数据结构冗余，增加复用性</span><br><span class="line">              examples:                                                            # 响应范例，建议填写，可用于 CODING API 文档范例显示以及 Mock API 模拟数据</span><br><span class="line">                请求成功范例:                                                        # 范例名称</span><br><span class="line">                  value:                                                                # 范例，展示时将转换成 JSON 形式</span><br><span class="line">                    - id: 1</span><br><span class="line">                      name: doggie</span><br><span class="line">        &#x27;400&#x27;:</span><br><span class="line">          description: 请求失败</span><br><span class="line">        patch:                                                                    # patch 请求方法</span><br><span class="line">            tags:</span><br><span class="line">        - 宠物</span><br><span class="line">      summary: 单独更新宠物属性</span><br><span class="line">      operationId: patch-pet</span><br><span class="line">      description: 单独更新宠物属性</span><br><span class="line">      deprecated: true                                         # 接口是否已废弃</span><br><span class="line">      requestBody:                                                 # post / put / patch 等请求需要传输 body 时，请指定 requestBody，Path / Query / Header 请写在 parameters 中</span><br><span class="line">        content:</span><br><span class="line">          application/x-www-form-urlencoded:    # 媒体类型 Media Type</span><br><span class="line">            schema:                                                            # 参数结构与上述 parameters 中相同</span><br><span class="line">              type: object</span><br><span class="line">              properties:</span><br><span class="line">                categoryId:</span><br><span class="line">                  type: integer</span><br><span class="line">                  description: 分类 ID</span><br><span class="line">                status:</span><br><span class="line">                  type: string</span><br><span class="line">                  description: 状态</span><br><span class="line">                  enum:</span><br><span class="line">                    - available</span><br><span class="line">                    - pending</span><br><span class="line">                    - sold</span><br><span class="line">                photoUrls:</span><br><span class="line">                  type: array</span><br><span class="line">                  description: 照片地址列表</span><br><span class="line">                  items:</span><br><span class="line">                    type: string</span><br><span class="line">                    description: 照片地址</span><br><span class="line">                name:</span><br><span class="line">                  type: string</span><br><span class="line">                  description: 宠物名称</span><br><span class="line">                isHealthy:</span><br><span class="line">                  type: boolean</span><br><span class="line">                  description: 是否健康</span><br><span class="line">                tagIds:</span><br><span class="line">                  type: string</span><br><span class="line">                  description: 标签 ID 数组</span><br><span class="line">            examples:                                                            # 请求 Body 范例，将在 CODING API 文档右侧范例区展示</span><br><span class="line">              更新范例:                                                                # 范例名称</span><br><span class="line">                value:                                                                # 范例内容，以下将以 JSON 形式展示</span><br><span class="line">                  status: sold</span><br><span class="line">      responses:</span><br><span class="line">        &#x27;200&#x27;:</span><br><span class="line">          description: 更新成功</span><br><span class="line">          content:</span><br><span class="line">            application/json:</span><br><span class="line">              schema:</span><br><span class="line">                $ref: &#x27;#/components/schemas/Pet&#x27;</span><br><span class="line">components:                                                            # 通用组件，可定义复用的实体、响应、请求以及授权信息等</span><br><span class="line">  schemas:                                                                # 实体信息</span><br><span class="line">    Pet:                                                                        # 实体 key</span><br><span class="line">      title: Pet                                                            # 名称</span><br><span class="line">      type: object                                                        # 实体数据结构类型</span><br><span class="line">      description: 宠物实体信息                                    # 描述信息</span><br><span class="line">      properties:                                                            # 实体参数，可多条</span><br><span class="line">        id:</span><br><span class="line">          type: integer</span><br><span class="line">          format: int64</span><br><span class="line">          description: ID</span><br><span class="line">        name:</span><br><span class="line">          type: string</span><br><span class="line">          example: doggie</span><br><span class="line">          description: 名称</span><br><span class="line">  securitySchemes:                                                # API 所使用的授权方式，可多条，CODING 会展示所有授权方式</span><br><span class="line">    petstore_auth:                                                    # 授权方式 Key</span><br><span class="line">      type: oauth2                                                        # 授权类型，可为：apiKey、http、oauth2、openIdConnect</span><br><span class="line">      flows:                                                                    # OAuth2 所需要的流程信息</span><br><span class="line">        authorizationCode:                                            # OAuth2 授权类型，可为：implicit、password、clientCredentials、authorizationCode</span><br><span class="line">          authorizationUrl: &#x27;https://petstore.com/oauth/authorize&#x27;    # 跳转授权地址</span><br><span class="line">          tokenUrl: &#x27;https://petstore.com/oauth/token?grant_type=authorization_code&#x27;    # 获取 token 地址</span><br><span class="line">          scopes:                                                # 所有 scope 列表</span><br><span class="line">            &#x27;write:pets&#x27;: 修改宠物信息权限</span><br><span class="line">            &#x27;read:pets&#x27;: 查看宠物信息权限</span><br><span class="line">          refreshUrl: &#x27;https://petstore.com/oauth/token?grant_type=refresh_token&#x27;        # 刷新 token 地址</span><br><span class="line">      description: OAuth2 授权模式                    # 描述信息</span><br></pre></td></tr></table></figure><p>更详细的规范可参考：</p><ul><li><a href="https://openapi-map.apihandyman.io/">OpenAPI Map</a></li><li><a href="https://swagger.io/docs/specification/about/">OpenAPI Specification</a></li></ul><h4 id="Code-First"><a href="#Code-First" class="headerlink" title="Code-First"></a>Code-First</h4><p>通过自动生成 OpenAPI 描述文件，我们可以很简单的接入 CODING API 文档的自动化流程，方便开发同学提交代码自动发布 API 文档。</p><blockquote><p>此处我们以 Java 语言的 <a href="https://github.com/springfox/springfox">Springfox</a> 为例<br>其他语言可参考以下方案：</p><ul><li>PHP：<a href="https://github.com/zircote/swagger-php">Swagger PHP</a></li><li>Go：<a href="https://github.com/go-swagger/go-swagger/">Go Swagger</a></li><li>Python Flask：<a href="https://github.com/noirbizarre/flask-restplus">Flask RestPlus</a></li><li>NodeJS Express：<a href="https://www.npmjs.com/package/swagger-node-express">Swagger Node Express</a></li><li><a href="https://swagger.io/tools/open-source/open-source-integrations">点击查看</a></li></ul></blockquote><p>首先我们新建一个 SpringBoot 项目，添加 springfox 依赖：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile (&#x27;io.springfox:springfox-swagger2:2.9.2&#x27;) &#123;</span><br><span class="line">        exclude(module: &#x27;io.swagger:swagger-annotations&#x27;)</span><br><span class="line">        exclude(module: &#x27;io.swagger:swagger-models&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    compile(&quot;io.swagger:swagger-annotations:1.6.0&quot;)</span><br><span class="line">    compile(&quot;io.swagger:swagger-models:1.6.0&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>上面 swagger-annotations 指定新版本操作，由于在非 String 的请求参数（如 Integer） @RequestParam 中指定 defaultValue 时，springfox 2.9.2 依赖的 swagger 包较旧，导致编译时报类型转换错误的问题，在新版已解决。</p></blockquote><p>然后我们在 Application 中针对 Springfox 进行初始化配置操作，并定义 Swagger API 文档的全局描述信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@Bean</span><br><span class="line">public Docket docket(ServletContext servletContext) &#123;</span><br><span class="line">    ApiSelectorBuilder builder = new Docket(DocumentationType.SWAGGER_2)    // 定义 Swagger 2.0 规范</span><br><span class="line">            .apiInfo(apiInfo())                                                    // 定义全局描述信息</span><br><span class="line">            .tags(new Tag(&quot;宠物&quot;, &quot;所有关于宠物的内容&quot;),        // 定义 tag，对应 CODING API 文档的菜单 API 分组</span><br><span class="line">                    new Tag(&quot;会话&quot;, &quot;关于用户的注册、登录和登出&quot;))</span><br><span class="line">            .host(&quot;petstore.com&quot;)                                                // 定义 API 基础域名</span><br><span class="line">            .pathProvider(new RelativePathProvider(servletContext) &#123;    // 定义 API 基础路径前缀，与 host 配合组成 petstore.com/api/v1</span><br><span class="line">                @Override</span><br><span class="line">                public String getApplicationBasePath() &#123;</span><br><span class="line">                    return &quot;/api/v1&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .select();</span><br><span class="line"> </span><br><span class="line">    builder.apis(RequestHandlerSelectors.withClassAnnotation(RestController.class));    // 指定只扫描 @RestController 注解的 Controller 的 API</span><br><span class="line"> </span><br><span class="line">    return builder.build()</span><br><span class="line">            .ignoredParameterTypes(RequestAttribute.class)    // 排除扫描 @RequestAttribute 注解</span><br><span class="line">            .ignoredParameterTypes(Errors.class);                        // 排除扫描 @Errors 注解</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">private ApiInfo apiInfo() &#123;</span><br><span class="line">    return new ApiInfoBuilder()</span><br><span class="line">            .title(&quot;宠物商店 API 文档&quot;)                        // 定义文档标题</span><br><span class="line">            .description(&quot;这是一篇关于宠物商店的 DEMO API 文档，仅做参考。&quot;)    // 定义文档描述</span><br><span class="line">            .termsOfServiceUrl(&quot;http://swagger.io/terms/&quot;)                        // 定义服务条款</span><br><span class="line">            .contact(new Contact(&quot;CODING&quot;, &quot;https://coding.net&quot;, &quot;coding_support@tencent.com&quot;))    // 定义联系信息</span><br><span class="line">            .license(&quot;Apache 2.0&quot;)        // 定义 License</span><br><span class="line">            .licenseUrl(&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;)        // 定义 License URL</span><br><span class="line">            .version(&quot;1.0.0&quot;)                    // 定义 API 版本</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来，我们可以开始设计 API 规则，以 PetController 为例，即 <code>/pets</code> 路由：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Api(tags = &#123;&quot;宠物&quot;&#125;)</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/pets&quot;)</span><br><span class="line">public class PetController &#123;</span><br><span class="line"> </span><br><span class="line">    @ApiOperation(value = &quot;宠物列表&quot;, notes = &quot;列出所有宠物信息&quot;)</span><br><span class="line">    @GetMapping(&quot;&quot;)</span><br><span class="line">    public ResponseEntity&gt; all(@ApiParam(value=&quot;限制每页返回数量（最大限制：100）&quot;) @RequestParam(required = false, defaultValue = &quot;20&quot;) Integer pagesize,</span><br><span class="line">                                         @ApiParam(value=&quot;页码&quot;) @RequestParam(required = false, defaultValue = &quot;1&quot;) Integer page) &#123;</span><br><span class="line">        return ResponseEntity.ok(new ArrayList&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @ApiOperation(value = &quot;宠物详情&quot;, notes = &quot;获取指定 ID 的宠物详情&quot;)</span><br><span class="line">    @GetMapping(&quot;&#123;petId&#125;&quot;)</span><br><span class="line">    public ResponseEntity detail(@ApiParam(value=&quot;宠物 ID&quot;, required = true) @PathVariable Integer petId,</span><br><span class="line">                                      @ApiParam(value = &quot;媒体类型&quot;, required = true, allowableValues = &quot;application/json,application/xml&quot;, defaultValue = &quot;application/json&quot;) @RequestHeader String Accept) &#123;</span><br><span class="line">        return ResponseEntity.ok(null);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里我们定义了两个路由，分别为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /pets 宠物列表</span><br></pre></td></tr></table></figure><ul><li><p>Query 请求参数</p><p>-<strong>pagesize</strong> int 选填</p><p>限制每页返回数量（最大限制：100）</p><p>默认值 20</p><p>-<strong>page</strong> int 选填</p><p>页码</p><p>默认值 1</p></li><li><p>响应结构</p><p>-Pet 实体数组 array</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /pets/&#123;petId&#125; 宠物详情</span><br></pre></td></tr></table></figure><ul><li><p>Header 参数</p><p>-<strong>Accept</strong> string</p><p>可选值 <code>application/json</code> <code>application/xml</code>，默认值 <code>application/json</code>。</p><p>媒体类型</p></li><li><p>路由参数</p><p>-<strong>petId</strong> int</p><p>宠物 ID</p></li><li><p>响应结构</p><p>-Pet 实体 object</p></li></ul><p>至此，我们完成了上述两个 API 的设计，无需提前实现代码逻辑，我们即可获得 Swagger 2.0 的描述文件，步骤如下：</p><blockquote><p>该范例使用 Jetty 作为 Server</p></blockquote><ol><li><p>启动应用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew bootRun</span><br></pre></td></tr></table></figure></li><li><p>打开浏览器访问</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">   </span><br></pre></td></tr></table></figure><p>其中 {port} 为配置的服务 WEB 端口</p><p>返回的内容即为 Swagger 2.0 描述文件，如下图所示：</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223153216.png"><img src="https://help-assets.codehub.cn/enterprise/20191223153216.png" alt="img"></a></p></li></ol><p>右键选择「存储为」保存至本地，可命名为 <code>xxx.json</code>，将该 Swagger 2.0 描述文件导入至 CODING 即可生成 API 文档，如下图所示：</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223153228.png"><img src="https://help-assets.codehub.cn/enterprise/20191223153228.png" alt="img"></a></p><p>生成的 API 文档效果如下图所示：</p><p><a href="https://help-assets.codehub.cn/enterprise/20191223153241.png"><img src="https://help-assets.codehub.cn/enterprise/20191223153241.png" alt="img"></a></p><p><a href="https://demo-api.coding.net/public/springfox-demo/springfox-demo/git/files">点击查看</a>该范例的源代码。</p><p>更多 Springfox 的用法可参考<a href="http://springfox.github.io/springfox">官方文档</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;OpenAPI-Swagger&quot;&gt;&lt;a href=&quot;#OpenAPI-Swagger&quot; class=&quot;headerlink&quot; title=&quot;OpenAPI&amp;#x2F;Swagger&quot;&gt;&lt;/a&gt;OpenAPI&amp;#x2F;Swagger&lt;/h1&gt;&lt;blockquote</summary>
      
    
    
    
    <category term="API文档管理" scheme="https://dont-sleep-so-late.github.io/categories/API%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="OpenAPI/Swagger" scheme="https://dont-sleep-so-late.github.io/tags/OpenAPI-Swagger/"/>
    
    <category term="API文档管理" scheme="https://dont-sleep-so-late.github.io/tags/API%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>电子书导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/08/Z-library/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/08/Z-library/</id>
    <published>2023-10-08T13:22:15.000Z</published>
    <updated>2023-10-09T00:45:32.876Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><table><thead><tr><th align="left">S16-BT 导航</th><th align="left"><a href="https://www.runningcheese.cn/s17">S17-音乐导航</a></th><th align="left"><a href="https://www.runningcheese.cn/s18">S18-影视导航</a></th><th align="left"><a href="https://www.runningcheese.cn/s19">S19-网盘导航</a></th><th align="left"><a href="https://www.runningcheese.cn/s20">S20-软件导航</a></th></tr></thead><tbody><tr><td align="left"><a href="https://www.runningcheese.cn/s21">S21-Zlibrary</a></td><td align="left"><a href="https://www.runningcheese.cn/s22">S22-电子书导航</a></td><td align="left">S23-学术导航</td><td align="left">S24-考研导航</td><td align="left">S25-学习导航</td></tr><tr><td align="left">S26-生活导航</td><td align="left">S27-游戏导航</td><td align="left">S28-工具导航</td><td align="left">S29-网站导航</td><td align="left">S30-资源导航</td></tr></tbody></table><p>2009 年初，Z-library 成立。</p><p>2022 年底，Z-library 被封，2023 年初，Z-library 宣布回归。</p><p>关于 <strong>Z-library</strong> 的历史，大多就发生在<strong>这前后的两个月里</strong>，而本文，正是要带你<strong>厘清</strong>这两个月里发生的事情。</p><p>看懂了，你将拥有一座容量 <strong>31T</strong>，且<strong>永远不会下线</strong>的电子图书馆。</p><h2 id="一、Z-lib-官方项目"><a href="#一、Z-lib-官方项目" class="headerlink" title="一、Z-lib 官方项目"></a><strong>一、Z-lib 官方项目</strong></h2><p>我们先讲讲 Z-library 的官方渠道，毕竟它已经正式回归了。</p><h3 id="1-1、Z-lib-主页"><a href="#1-1、Z-lib-主页" class="headerlink" title="1.1、Z-lib 主页"></a>1.1、Z-lib 主页</h3><p>2023 年初，Z-library 宣布回归，但换了一种方式。</p><p>新版 Z-library 不再有统一的“<strong>主页</strong>”，取而代之的是“<strong>登陆页</strong>”，打开即可注册，但需要“<strong>魔法</strong>”访问。</p><p>地址 1：<a href="https://singlelogin.re/">https://singlelogin.re</a> 地址 2：<a href="https://singlelogin.site/">https://singlelogin.site</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax2.sinaimg.cn/large/7a6a15d5gy1hb6dzayzs9j228c1ecb2c.jpg" alt="S21_Zlib"></p><p>注册后，系统会自动分配两个“<strong>专属域名</strong>”给你，将它们保存起来，然后就可以用<strong>注册时的帐号密码</strong>来登陆了。</p><p>注册默认是初级用户，<strong>1 天可下载 10 次</strong>，通过捐赠则可以成为高级用户。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax2.sinaimg.cn/large/7a6a15d5gy1hb6dzbwvlqj228c1ecket.jpg" alt="S21_Zlib"></p><h3 id="1-2、Z-lib-扩展"><a href="#1-2、Z-lib-扩展" class="headerlink" title="1.2、Z-lib 扩展"></a>1.2、Z-lib 扩展</h3><p>Z-library 最近又整了个新活。</p><p>Z-library 推出了<strong>浏览器扩展</strong>，支持 Firefox 和 Chrome，而这个扩展的作用，居然是用来“<strong>防止失联</strong>”的，</p><p>只需要点击扩展图标，它就会分配一个你当前网络可以访问的链接，而且无需魔法就可以直接访问。</p><p>比如我的是 zlibrary-china.se，也就是说，你再也不怕打不开 Z-lib 了。</p><p>我只能说，Z-library 花活挺多的。</p><p><strong>扩展下载：</strong></p><p>Firefox：<a href="https://zh.go-to-zlibrary.se/soft/mozilla-addon-latest.xpi">https://zh.go-to-zlibrary.se/soft/mozilla-addon-latest.xpi</a></p><p>Chrome：<a href="https://t.cn/A60EmvZL">https://t.cn/A60EmvZL</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hgqrz7qw47j228c1ec1au.jpg" alt="7a6a15d5gy1hgqrz7qw47j228c1ec1au"></p><h3 id="1-3、Z-lib-客户端"><a href="#1-3、Z-lib-客户端" class="headerlink" title="1.3、Z-lib 客户端"></a>1.3、Z-lib 客户端</h3><p>Z-library 官方还推出了 <strong>Windows、macOS、Linux</strong> 的客户端，并且<strong>无需魔法</strong>即可直接访问。</p><p>这可以说是一个重大利好，以后再也不怕网址会失效了。</p><p>地址：<a href="https://zh.go-to-zlibrary.se/">https://zh.go-to-zlibrary.se</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hfewqrxb2pj228c1ecnhe.jpg" alt="S21_桌面客户端"></p><h3 id="1-4、Z-lib-手机端"><a href="#1-4、Z-lib-手机端" class="headerlink" title="1.4、Z-lib 手机端"></a>1.4、Z-lib 手机端</h3><p>Z-library 官方的安卓 APP 一直可用，目前最新版本为 <strong>1.10.1</strong>，需要魔法。（仅支持安卓）</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hfexj7ximvj22to23cqv6.jpg" alt="S21_Android"></p><h3 id="1-5、Z-lib-电报机器人"><a href="#1-5、Z-lib-电报机器人" class="headerlink" title="1.5、Z-lib 电报机器人"></a>1.5、Z-lib 电报机器人</h3><p>Z-library 的官方电报机器人分两种：一种是 <strong>Premium bot</strong>，一种是 <strong>Basic bot</strong>。（需要魔法）</p><p><strong>Premium bot：</strong></p><p>Premium bot 捐助过的用户才会拥有，绑定即可使用，地址： <a href="https://t.me/zlibrary2bot">https://t.me/zlibrary2bot</a></p><p>在窗口里输入<strong>书名、作者名、ISBN、ASIN</strong> 即可返回下载地址。</p><p>每天最多可以下载 <strong>60</strong> 次。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzcoo1dj22661boqv5.jpg" alt="S21_Zlibbot"></p><p><strong>Basic bot：</strong></p><p>Basic bot 则是由于 Z-library 频繁被封，所以推出了<strong>个人专属 bot</strong>，和网站主页一样，现在也可以人手一个。</p><p>1、点击 Z-library 页面右下角的「Telegram bot」。</p><p>2、点击 <a href="https://t.me/BotFather">https://t.me/BotFather</a> 进入 TG。</p><p>3、在窗口输入 &#x2F;newbot。</p><p>4、在窗口输入 bot 名称。（可任意输入）</p><p>5、在窗口输入 bot 用户名。（不可重复，且必须以 bot 结尾）</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzdjk29j22661bou0x.jpg" alt="S21_Zlibbot_New"></p><p>6、保存生成的 <strong>Token</strong>，并粘贴到之前的网页里即可完成绑定。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax2.sinaimg.cn/large/7a6a15d5gy1hb6dzefwcij228c1ece81.jpg" alt="S21_Zlibbot_New2"></p><p><strong>桌面端 TG ：</strong></p><p>桌面版 Telegram 如果因收不到验证码而无法登录，可以使用 <strong>Telegram Lite</strong> 版本。</p><p><strong>安卓端 TG：</strong></p><p>安卓版 TG 还可以使用第三方应用 <a href="https://github.com/NekoX-Dev/NekoX">NekoX</a>，自带代理，国内网络也可以直接访问。</p><h3 id="1-6、Z-lib-TOR-浏览器"><a href="#1-6、Z-lib-TOR-浏览器" class="headerlink" title="1.6、Z-lib TOR 浏览器"></a>1.6、<strong>Z-lib TOR 浏览器</strong></h3><p>Tor 浏览器，对于普通用户来说比较难理解。</p><p>大概的意思，就是先下载 <a href="https://www.torproject.org/zh-CN/download">TOR 浏览器</a>（需魔法），然后打开下面的任意一个网页地址，即可访问。</p><p>地址1：<a href="http://zh.loginzlib2vrak5zzpcocc3ouizykn6k5qecgj2tzlnab5wcbqhembyd.onion/">http://loginzlib2vrak5zzpcocc3ouizykn6k5qecgj2tzlnab5wcbqhembyd.onion</a></p><p>地址2：<a href="http://zlibrary24tuxziyiyfr7zd46ytefdqbqd2axkmxm4o5374ptpc52fad.onion/">http://zlibrary24tuxziyiyfr7zd46ytefdqbqd2axkmxm4o5374ptpc52fad.onion</a></p><p>得益于 Z-library 的回归，如果实在搞不懂，可直接略过。</p><h2 id="二、Z-lib-民间项目"><a href="#二、Z-lib-民间项目" class="headerlink" title="二、Z-lib 民间项目"></a>二、Z-lib 民间项目</h2><p>下面我们来重点讲一下，在 Z-library 被封的这段时间，互联网上都发生了什么。</p><h3 id="2-1、Anna’s-Archive"><a href="#2-1、Anna’s-Archive" class="headerlink" title="2.1、Anna’s Archive"></a>2.1、Anna’s Archive</h3><p>在 Z-library 关站之前，有一个叫 <strong>Anna</strong> 的网友爬取了 Z-library 上的所有资源。</p><p>原因是 Z-library 起源于 <strong>Libgen</strong>，而她认为 Z-library <strong>后续新增内容却不回流</strong> Libgen 的做法，不利于知识传播。</p><p>于是，在 <a href="http://pilimi.org/">Pirate Library Mirror</a> 上，她放出了采集的 <strong>31T</strong> 电子书资源。</p><p>之后， 她又把资源放到了去中心化的 <strong>IPFS</strong> 网络上，还做了个查询网站，这就网站就是“<strong>安娜的档案</strong>”。</p><p>地址：<a href="https://zh.annas-archive.org/">https://zh.annas-archive.org</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzgklgtj228c1ec7nd.jpg" alt="S21_Anna"></p><p>网站不但支持中文搜索，而且提供了三种下载方式，包括：<strong>Libgen</strong> 下载、 <strong>IPFS</strong> 下载、<strong>TOR</strong> 浏览器下载。</p><p>选项里的“<strong>Libgen</strong>”和“<strong>TOR 浏览器</strong>”下载的方法可以忽略。</p><p>用“<strong>IPFS 网关</strong>”的下载方法就可以。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzh6qasj228c1ec7up.jpg" alt="S21_Anna2"></p><h3 id="2-2、Book-Searcher"><a href="#2-2、Book-Searcher" class="headerlink" title="2.2、Book Searcher"></a>2.2、Book Searcher</h3><p>在此这后，国内也开始有网站效仿 <strong>Anna’s Archive</strong>，其中有两个网站比较知名。</p><p>地址 1：<a href="https://bk.hallowlib.org/">https://bk.hallowlib.org</a></p><p>地址 2：<a href="https://clibrary.cn/">https://clibrary.cn</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hfewqui25yj228c1ech8y.jpg" alt="S21_BookSearcher"></p><p>但这两个网站，常常会因为访问人数过多而超载。</p><p>于是，又有网友将 <strong>Anna’s Archive</strong> 数据库做成索引，然后搜索获得 <strong>IPFS CID</strong>，最后通过 <strong>IPFS 网关</strong>下载。</p><p>这个项目一开始叫做 <strong>zLib Searcher</strong>，后来又改名为了 <strong>Book Searcher</strong>。</p><p>地址：<a href="https://github.com/book-searcher-org/book-searcher">https://github.com/book-searcher-org/book-searcher</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzjdwfbj228c1ec1h2.jpg" alt="S21_BookSearcher3"></p><p>而且，由于是<strong>开源项目</strong>，又有多人在此基础上搭建了各种<strong>搜索网站</strong>，不用登录就可以使用，也还没下载限制。</p><p><strong>搜索网站：</strong></p><p><a href="https://zbook.lol/">https://zbook.lol</a></p><p><a href="https://zlib.awesc.com/">https://zlib.awesc.com</a></p><p><a href="https://zlibsearch.1kbtool.com/">https://zlibsearch.1kbtool.com</a></p><p><a href="https://zlib.knat.network/">https://zlib.knat.network</a>（无网关）</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzjvueej228c1eckbi.jpg" alt="S21_BookSearcher2"></p><p>不仅如此，<strong>Book Searcher</strong> 还被做成了各种项目。</p><p>比如由吾爱用户开发的安卓应用 <strong>XLibrary</strong>，APP 在<strong>国内网络</strong>里就能正常使用，而且内置了<strong>多条线路</strong>。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzl7lqwj22to23c4qq.jpg" alt="S21_BookSearcher4"></p><p>换句话说，几乎所有标记 <strong>Zlib Searcher、Book Searcher</strong> 的应用，还有使用 <strong>IPFS</strong> 下载的应用。</p><p>都是来自 <strong>Anna’s Archive</strong> 和 <strong>Book Searcher</strong> 的开源。</p><h3 id="2-3、Ylibrary"><a href="#2-3、Ylibrary" class="headerlink" title="2.3、Ylibrary"></a>2.3、Ylibrary</h3><p>此外，国内的 Zhelper 团队还整了一个大项目。</p><p>就是 Z-library 毕竟是国外项目，对于中文书籍的收集，并没有做到很好的覆盖。</p><p>于是，Zhelper 在 <strong>Book Searcher</strong> 项目的基础上，又增加了 <strong>Superlib</strong> 超星书库的资源，中文书籍数量大为增加。</p><p>然后还把书库命名为了 <strong>Ylibrary</strong>。</p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzlxsu3j228c1eck4o.jpg" alt="S21_ZhelperSearch"></p><p><strong>Ylibrary</strong> 采用了 <strong>API</strong> 接口的模式，并集成在了网站“<strong>易书书籍检索</strong>”上，算得上是目前<strong>最好的中文电子书搜索引擎</strong>。</p><p>地址：<a href="https://search.yibook.org/">https://search.yibook.org</a></p><h2 id="三、Z-lib-下载方式"><a href="#三、Z-lib-下载方式" class="headerlink" title="三、Z-lib 下载方式"></a>三、Z-lib 下载方式</h2><p>说完下载网站，这里还有必要说一下下载方式，包括 <strong>IPFS 下载</strong>和<strong>秒传链接下载</strong>。</p><h3 id="3-1、IPFS-下载"><a href="#3-1、IPFS-下载" class="headerlink" title="3.1、IPFS 下载"></a>3.1、IPFS 下载</h3><p>简单的说，<strong>IPFS</strong> 是一个去中心化的网络文件存储系统，也就是 <strong>P2P 系统</strong>。</p><p>有了它，Z-library 就不再需要有<strong>中心服务器</strong>，因此可以避免<strong>再次被封站</strong>，文件可以永久地保存在网络上。</p><p>只要好配置 <strong>IPFS 网关</strong>就可以下载，当然，网站一般都会直接配置好的。</p><p><strong>常见 IPFS 网关：</strong></p><p><a href="https://dweb.link/">https://dweb.link</a></p><p><a href="https://gateway.pinata.cloud/">https://gateway.pinata.cloud</a></p><p><a href="https://ipfs.best-practice.se/">https://ipfs.best-practice.se</a></p><p>而如果那天用不了，那你还可以用下面的 <strong>IPFS 网关检查工具</strong>来替代，延迟越低的就是越好的那个。</p><p><strong>网关检查工具：</strong></p><p><a href="https://ipfs.github.io/public-gateway-checker">https://ipfs.github.io/public-gateway-checker</a></p><p><a href="https://ipfs-checker.1kbtool.com/">https://ipfs-checker.1kbtool.com</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hb6dzhtakpj228c1echcb.jpg" alt="S21_Anna3"></p><h3 id="3-2、秒传链接"><a href="#3-2、秒传链接" class="headerlink" title="3.2、秒传链接"></a>3.2、秒传链接</h3><p>什么是秒传链接？</p><p>当你用网盘上传文件时，有时候文件一秒都不用，然后就上传成功了。</p><p>这是因为你上传的文件，在服务器里已经有了，网盘只是“<strong>复制</strong>”了一份，所以文件就“<strong>秒传</strong>”上去了。</p><p>也正是因为这个特性，网友发明了“<strong>秒传链接</strong>”，它可以说是“<strong>网络冲浪老司机</strong>”必备的一个技能。</p><p><img src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGgy1h85saovoilj31al0u0wh3.jpg" alt="i74_秒传链接"></p><p>目前，秒传链接有两种下载方法，一种是用<strong>油猴脚本</strong>，一种是用<strong>帐号 Token</strong> 转存的方法。</p><p>使用方法也很简单，几乎一看就会。</p><p><strong>油猴脚本：</strong></p><p>地址1：<a href="https://greasyfork.org/zh-CN/scripts/468633">https://greasyfork.org/zh-CN/scripts/468633</a> （推荐）</p><p>地址2：<a href="https://greasyfork.org/zh-CN/scripts/427628">https://greasyfork.org/zh-CN/scripts/427628</a></p><p><strong>帐号 Token：</strong></p><p>地址 1：<a href="https://rapidupload.1kbtool.com/">https://rapidupload.1kbtool.com</a></p><p>地址 2：<a href="https://rulite.1kbtool.com/">https://rulite.1kbtool.com</a></p><p>PS：如果遇到下载的电子书格式为 PDG，又或者加密码了，公众号后台回复 <strong>S21</strong> 即可获取对应的转换工具。</p><h2 id="四、Z-lib-项目选择"><a href="#四、Z-lib-项目选择" class="headerlink" title="四、Z-lib 项目选择"></a>四、Z-lib 项目选择</h2><p>介绍了这么多 Zlibrary 的项目，有官方的，有民间的，要如何选择呢？</p><h3 id="4-1、首选-Z-library"><a href="#4-1、首选-Z-library" class="headerlink" title="4.1、首选 Z-library"></a>4.1、首选 Z-library</h3><p>Z-library 的优势在于书库集全，各种语言的都有，是目<strong>前最大的数字图书馆</strong>，而且还在<strong>持续增长中</strong>。</p><p>并且，Z-library 官方网站还有<strong>收藏夹，评论、书单推荐</strong>等诸多人性化功能。</p><p>我们没有理由不优先选择 <strong>Z-library</strong> 官方网站。</p><h3 id="4-2、次选-Book-Searcher"><a href="#4-2、次选-Book-Searcher" class="headerlink" title="4.2、次选 Book Searcher"></a>4.2、次选 <strong>Book Searcher</strong></h3><p>由于 <strong>Anna’s Archive</strong> 项目的诞生。</p><p>Z-library 2022 年 12 月之前的书库就此开源，再加上 <strong>Book Searcher</strong> 的索引，没有下载限制。</p><p>现在，你已经拥有了一座容量 <strong>31T</strong>，而且永远不会下线的电子图书馆。</p><p>应该说，你再也不会为找电子书发愁了。</p><h3 id="4-3、冷门-Ylibrary"><a href="#4-3、冷门-Ylibrary" class="headerlink" title="4.3、冷门 Ylibrary"></a>4.3、冷门 Ylibrary</h3><p>如果你需要查找的是一些<strong>冷门中文书籍</strong>，使用 <strong>Ylibrary（</strong>Z-library 书库 + Superlib 超星书库）搜索。</p><p>成功的概率将大大增加，它算得上是目前<strong>最好的中文电子书搜索引擎</strong>。</p><h3 id="4-4、末选-Zhelper"><a href="#4-4、末选-Zhelper" class="headerlink" title="4.4、末选 Zhelper"></a>4.4、末选 Zhelper</h3><p>如果后续出现失效的情况，可以查看“<strong>zhelper search 配置小工具</strong>”，这是国内团队 Zhelper 维护的网址。</p><p>应该说，现在能这么方便的下载电子书，他们的功能很大。</p><p>地址：<a href="https://tool.yibook.org/">https://tool.yibook.org</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;S16-BT 导航&lt;/th&gt;
&lt;th align=&quot;left&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="电子书导航" scheme="https://dont-sleep-so-late.github.io/tags/%E7%94%B5%E5%AD%90%E4%B9%A6%E5%AF%BC%E8%88%AA/"/>
    
  </entry>
  
  <entry>
    <title>git 笔记</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/02/git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/02/git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</id>
    <published>2023-10-02T01:22:15.000Z</published>
    <updated>2023-11-21T00:28:15.970Z</updated>
    
    <content type="html"><![CDATA[<h2 id="账户配置"><a href="#账户配置" class="headerlink" title="账户配置"></a>账户配置</h2><ol><li>配置全局账户，对所有 Git 仓库有效</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&#x27;Your Name&#x27;</span></span><br><span class="line">git config --global user.email <span class="string">&#x27;Your Email&#x27;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>配置局部账户，只对当前 Git 仓库有效</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">local</span> user.name <span class="string">&#x27;Your Name&#x27;</span></span><br><span class="line">git config --<span class="built_in">local</span> user.email <span class="string">&#x27;Your Email&#x27;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>查看全局配置</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --list</span><br></pre></td></tr></table></figure><ol start="4"><li>查看局部配置</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">local</span> --list</span><br></pre></td></tr></table></figure><h2 id="生成ssh-密钥"><a href="#生成ssh-密钥" class="headerlink" title="生成ssh 密钥"></a>生成ssh 密钥</h2><p>连接到github仓库，公钥文件存放在C:&#x2F;用户文件夹&#x2F;.ssh&#x2F;id_rsa.pub</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的邮箱&quot;</span></span><br><span class="line">ssh -T git@github.com   //测试连接命令</span><br></pre></td></tr></table></figure><hr><h2 id="上传操作"><a href="#上传操作" class="headerlink" title="上传操作"></a>上传操作</h2><p>1.找到想要上传的文件夹，进入并点击 git sh here</p><p>然后输入 <code>git init</code></p><p>然后输入 <code>git remote add origin https://gitee.com/[码云的用户名]/[仓库路径].git</code><br>这里建议直接复制</p><p>然后 <code>git add ./</code> .&#x2F;表示当前文件夹内所有文件</p><p>然后 <code>git commit -m &quot;上传的信息&quot;</code></p><p>然后 <code>git push origin master</code> 查看gitee上发现文件上传成功</p><p>上面是第一次创建远程仓库的情况</p><p>如果有新的文件，从<code>git add [文件名]</code> 处开始即可。</p><hr><h2 id="git-push-error-failed-to-push-some-refs-to-异常处理"><a href="#git-push-error-failed-to-push-some-refs-to-异常处理" class="headerlink" title="git push error: failed to push some refs to 异常处理"></a>git push error: failed to push some refs to 异常处理</h2><h3 id="一、异常错误"><a href="#一、异常错误" class="headerlink" title="一、异常错误"></a>一、异常错误</h3><ul><li>使用Github时，<code>git push</code>命令出现 <code>error: failed to push some refs to &#39;git@github.com:xxxxx&#39;</code>错误</li></ul><h3 id="二、原因"><a href="#二、原因" class="headerlink" title="二、原因"></a>二、原因</h3><ul><li>远端仓库更新数据未同步到本地</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231002092020.png"></p><h3 id="三、解决方法"><a href="#三、解决方法" class="headerlink" title="三、解决方法"></a>三、解决方法</h3><ul><li><p>先将远程代码库中文件pull到本地，进行代码合并，使用<code>git pull --rebase origin master</code></p></li><li><p>再push新的代码到Github代码库中，进行上传<code>git push -u origin master</code></p></li></ul><hr><h2 id="rejected-master-＞-master-non-fast-forward-异常处理"><a href="#rejected-master-＞-master-non-fast-forward-异常处理" class="headerlink" title="! [rejected] master -＞ master (non-fast-forward) 异常处理"></a>! [rejected] master -＞ master (non-fast-forward) 异常处理</h2><p>non-fast-forward：译为‘不能快速前进’，远程仓库更新了，你没有及时同步到本地，提交的时候添加了新的内容，提交的时候，然后检测到远程和本地不一样。为了安全起见，报了这个错误。</p><p>可以先合并之前的历史，在进行提交</p><ol><li>先把git的东西fetch到本地，需要合并就就合并，然后再push</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin master</span><br><span class="line"> </span><br><span class="line">git merge origin FETCH_HEAD </span><br></pre></td></tr></table></figure><p>2.<code>git pull --rebase origin master</code></p><hr><h2 id="Incorrect-username-or-password-access-token-异常处理"><a href="#Incorrect-username-or-password-access-token-异常处理" class="headerlink" title="Incorrect username or password (access token)  异常处理"></a>Incorrect username or password (access token)  异常处理</h2><p>由于我更改了 git 账号密码，导致我在push的时候出现<code>Incorrect username or password (access token)</code>。</p><p>然后网上查解决方式，有通过<a href="https://blog.csdn.net/qq_40428678/article/details/84074488">修改本地的 Windows 凭据</a> 所在的密码，但我发现了我的本地Windows凭据没有gitee。。。。</p><p>然后我发现了另一种解决方式，通过<a href="https://so.csdn.net/so/search?q=git%E5%91%BD%E4%BB%A4&spm=1001.2101.3001.7020">git命令</a>的方式解决 。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --system --<span class="built_in">unset</span> credential.helper</span><br></pre></td></tr></table></figure><p>先执行以上命令后，再重新执行push命令就会提示重新输入账号和密码，然后正确输入即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;账户配置&quot;&gt;&lt;a href=&quot;#账户配置&quot; class=&quot;headerlink&quot; title=&quot;账户配置&quot;&gt;&lt;/a&gt;账户配置&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;配置全局账户，对所有 Git 仓库有效&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight </summary>
      
    
    
    
    <category term="Git仓库" scheme="https://dont-sleep-so-late.github.io/categories/Git%E4%BB%93%E5%BA%93/"/>
    
    
    <category term="Git" scheme="https://dont-sleep-so-late.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>软件导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/09/27/%E8%BD%AF%E4%BB%B6%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/09/27/%E8%BD%AF%E4%BB%B6%E5%AF%BC%E8%88%AA/</id>
    <published>2023-09-27T15:01:36.000Z</published>
    <updated>2023-09-27T15:06:41.021Z</updated>
    
    <content type="html"><![CDATA[<h1 id="软件导航"><a href="#软件导航" class="headerlink" title="软件导航"></a>软件导航</h1><hr><h2 id="一、软件资讯"><a href="#一、软件资讯" class="headerlink" title="一、软件资讯"></a>一、软件资讯</h2><table><thead><tr><th align="left">▼ <strong>国内网站</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://github.com/">GitHub</a></td><td align="left">全球最大开源托管平台，开发者们“<strong>殿堂般</strong>”。</td></tr><tr><td align="left">🌐 <a href="https://www.52pojie.cn/">52Pojie</a></td><td align="left">GitHub 和 52Pojie 合称“<strong>北乔峰南慕容</strong>”，国内活跃度最高的软件交流社区。</td></tr><tr><td align="left">🌐 <a href="https://www.appinn.com/">小众软件</a></td><td align="left">老牌软件分享网站，介绍各种新鲜软件，还新开了一个“<a href="https://meta.appinn.net/c/faxian/10">发现分享</a>”频道。</td></tr><tr><td align="left">🌐 <a href="https://www.iplaysoft.com/">异次元软件</a></td><td align="left">与“<strong>小众软件</strong>”类似，但更新强度大不如以前。</td></tr><tr><td align="left">🌐 <a href="https://topbook.cc/overview">Topbook</a></td><td align="left">可以说是“<strong>视频版小众软件</strong>”，信噪音比不高，同样的内容需要的时间更多。</td></tr><tr><td align="left">🌐 <a href="https://sspai.com/">少数派</a></td><td align="left">软件界的“<strong>小红书</strong>”，文章更多的是“<strong>经验分享</strong>”，但苹果用户占比太高。</td></tr><tr><td align="left">🌐 <a href="https://soft.ithome.com/">IT 之家</a></td><td align="left">专业的 IT 新闻网站，有一个“<strong>软件</strong>”频道，软件界的大新闻，这里都有。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>国外网站</strong></td><td align="left">简介</td></tr><tr><td align="left">🌐 <a href="https://www.producthunt.com/">Product Hunt</a></td><td align="left">国外最火的软件应用资讯网站，能发掘很多前沿新产品。</td></tr><tr><td align="left">🌐 <a href="https://betalist.com/">BetaList</a></td><td align="left">与 Product Hunt 类似，但提供的都是新鲜前沿的应用。</td></tr><tr><td align="left">🌐 <a href="https://www.slant.co/">Slant</a></td><td align="left">提供各种应用的排名测评，有正反观点，比如“<a href="https://www.slant.co/topics/1507/~best-desktop-web-browsers">最好的浏览器是什么</a>”？</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>相似软件</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.producthunt.com/">Product Hunt</a></td><td align="left">网外最火的软件资讯网站，右下角的”View all alternatives”就是相似软件。</td></tr><tr><td align="left">🌐 <a href="https://alternativeto.net/">AlternativeTo</a></td><td align="left">老牌网站，支持 Windows、macOS、linux、网页、iOS、安卓。</td></tr><tr><td align="left">🌐 <a href="https://zh.altapps.net/">Altapps.net</a></td><td align="left">支持多语言，支持多平台，资源也比较丰富。</td></tr><tr><td align="left">🌐 <a href="https://progsoft.net/">ProgSoft</a></td><td align="left">支持桌面软件，热度也很高。</td></tr><tr><td align="left">🌐 <a href="https://alternative.me/">Alternative.me</a></td><td align="left">支持桌面软件，资讯相对较老。</td></tr><tr><td align="left">🌐 <a href="https://alternatives.app/">Alternatives.app</a></td><td align="left">支持桌面软件，资讯相对较老。</td></tr><tr><td align="left">🌐 <a href="https://www.similarsites.com/">Similarsites</a></td><td align="left">发明相似网站。</td></tr><tr><td align="left">🌐 <a href="https://www.similarweb.com/zh/">Similarweb</a></td><td align="left">发明相似网站和手机应用。</td></tr><tr><td align="left">🌐 <a href="https://www.btw.so/zh/open-source-alternatives">开源替代方案</a></td><td align="left">200 多个开源替代品，可替代企业日常运营所需的工具。</td></tr><tr><td align="left">🌐 <a href="https://mrfreetools.com/">MrFreeTools</a></td><td align="left">查找收费应用的免费方案。</td></tr></tbody></table><h2 id="二、软件论坛"><a href="#二、软件论坛" class="headerlink" title="二、软件论坛"></a>二、软件论坛</h2><table><thead><tr><th align="left">▼ <strong>国内论坛</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.52pojie.cn/forum-2-1.html">吾爱破解</a></td><td align="left">国内活跃度最高的软件交流社区。</td></tr><tr><td align="left">🌐 <a href="https://www.v2ex.com/">V2EX</a></td><td align="left">前知名开发者交流社区，现在需要“<strong>魔法</strong>”才能访问了。</td></tr><tr><td align="left">🌐 <a href="https://bbs.pcbeta.com/">远景论坛</a></td><td align="left">国内知名的 Windows 软件交流社区。</td></tr><tr><td align="left">🌐 <a href="https://bbs.kafan.cn/">卡饭论坛</a></td><td align="left">一个以“<strong>卡巴斯基</strong>”为起点的软件交流社区，需要登录才能访问。</td></tr><tr><td align="left">🌐 <a href="https://www.chongbuluo.com/">虫部落</a></td><td align="left">一个以搜索主题的资源交流社区。</td></tr><tr><td align="left">🌐 <a href="https://www.chinapyg.com/forum-83-1.html">飘云阁</a></td><td align="left">类似 52Pojie 的论坛。</td></tr><tr><td align="left">🌐 <a href="http://bbs.wuyou.net/forum.php">无忧启动</a></td><td align="left">类似 52Pojie 的论坛。</td></tr><tr><td align="left">🌐 <a href="https://www.52hb.com/forum-86-1.html">吾爱汇编</a></td><td align="left">类似 52Pojie 的论坛。</td></tr><tr><td align="left">🌐 <a href="http://www.bathome.net/">批处理之家</a></td><td align="left">一个专注于 <strong>.bat</strong> 批处理文件的软件论坛。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>国外论坛</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://rutracker.org/forum/index.php">RuTracker.org</a></td><td align="left">提供 BT 下载，综合性资源下载网站，各种内容都有，俄罗斯知名网站。</td></tr><tr><td align="left">🌐 <a href="https://forum.mobilism.org/index.php">Mobilism</a></td><td align="left">提供 BT 下载，综合性资源下载网站，各种内容都有。</td></tr><tr><td align="left">🌐 <a href="https://nsaneforums.com/forum/48-software-updates/">Nsane Forums</a></td><td align="left">提供 BT 下载，综合性资源下载网站，各种内容都有。</td></tr></tbody></table><h2 id="三、Win-软件"><a href="#三、Win-软件" class="headerlink" title="三、Win 软件"></a>三、Win 软件</h2><table><thead><tr><th align="left">▼ <strong>国内网站</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.423down.com/">423Down</a></td><td align="left">提供 蓝奏云、123 网盘、百度网盘。👍</td></tr><tr><td align="left">🌐 <a href="https://www.itrmb.com/">数字人民币</a></td><td align="left">423Down 需要会员才能下载的软件，这里有。👍</td></tr><tr><td align="left">🌐 <a href="https://www.ghxi.com/">果核剥壳</a></td><td align="left">提供 123 网盘、夸克网盘、阿里网盘。</td></tr><tr><td align="left">🌐 <a href="https://www.6yit.com/">六音软件</a></td><td align="left">提供 蓝奏云、123 网盘、天翼云。</td></tr><tr><td align="left">🌐 <a href="https://foxirj.com/">佛系软件</a></td><td align="left">提供 百度网盘、会员 123 网盘。</td></tr><tr><td align="left">🌐 <a href="https://www.luochenzhimu.com/">落尘之木</a></td><td align="left">提供 123 网盘、夸克网盘、百度网盘。</td></tr><tr><td align="left">🌐 <a href="http://www.qiuquan.cc/">QiuQuan</a></td><td align="left">提供 官方链接、蓝奏云、123 网盘。</td></tr><tr><td align="left">🌐 <a href="https://www.mefcl.com/">mefcl</a></td><td align="left">提供 123 网盘、天翼云、夸克网盘</td></tr><tr><td align="left">🌐 <a href="http://www.th-sjy.com/">th_sjy</a></td><td align="left">提供 城通网盘。</td></tr><tr><td align="left">🌐 <a href="http://www.apprcn.com/">反斗软件</a></td><td align="left">提供 官方链接、蓝奏云、123 网盘、内容较老。</td></tr><tr><td align="left">🌐 <a href="http://www.dayanzai.me/">大眼仔旭</a></td><td align="left">提供 百度网盘、城通网盘。</td></tr><tr><td align="left">🌐 <a href="https://www.sunweihu.com/">墨涩网</a></td><td align="left">提供 官方链接、蓝奏云、123 网盘、内容较老。</td></tr><tr><td align="left">🌐 <a href="https://www.ypojie.com/">易破解</a></td><td align="left">提供 百度网盘、夸克网盘。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>国外网站</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://en.softonic.com/">Softonic</a></td><td align="left">提供软件的介绍和下载，类似于国内的“<strong>华军下载</strong>”，无破解内容。</td></tr><tr><td align="left">🌐 <a href="https://en.taiwebs.com/?lang=SG">TaiWebs</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://filezner.com/">Filezner</a></td><td align="left">资源较老。</td></tr><tr><td align="left">🌐 <a href="https://filecr.com/en">FileCR</a></td><td align="left">号称世界最大</td></tr><tr><td align="left">🌐 <a href="https://haxnode.net/">haxNode</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://www.sadeempc.com/">SadeemPC</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://igetintopc.com/">iGet Into PC</a></td><td align="left">大型软件，专业软件。</td></tr><tr><td align="left"><a href="https://www.crackingcity.com/">🌐 CrackingCity</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://crackedfine.com/category/softwares/">CrackedFine</a></td><td align="left">博客网站，提供国外网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://kickasscracks.com/">KickASSCracks</a></td><td align="left">博客网站，提供国外网盘下载，开头的“<strong>Direct Download</strong>”不要点。</td></tr><tr><td align="left">🌐 <a href="https://free4pc.org/">Free4PC</a></td><td align="left">博客网站，提供国外网盘下载，资源较老。</td></tr><tr><td align="left">🌐 <a href="https://repack.me/">REPACK.ME</a></td><td align="left">俄罗斯网站、</td></tr><tr><td align="left">🌐 <a href="https://lrepacks.net/">LRepacks</a></td><td align="left">俄罗斯网站、</td></tr><tr><td align="left">🌐 <a href="https://positiverecords.ru/">positiverecords.ru</a></td><td align="left">俄罗斯网站、提供 BT 下载，以 Windows 主为。</td></tr><tr><td align="left">🌐 <a href="https://w14.monkrus.ws/">monkrus.ws</a></td><td align="left">俄罗斯网站、一个专门破解 Adobe 软件网站。</td></tr><tr><td align="left">🌐 <a href="https://diakov.net/">DIAKOV.NET</a></td><td align="left">俄罗斯网站、但游客身份只提供慢速网盘下载。</td></tr></tbody></table><table><thead><tr><th align="left">▼ <strong>特色软件</strong></th><th align="left"></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://sourceforge.net/">SourceForge</a></td><td align="left">GitHub 兴起前的一个软件托管平台。</td></tr><tr><td align="left">🌐 <a href="https://portableapps.com/apps">PortableApps</a></td><td align="left">一个专门提供各软件“<strong>便携版本</strong>”的网站。</td></tr><tr><td align="left">🌐 <a href="http://www.oldversion.com/">Old versions</a></td><td align="left">一个专门提供各软件“<strong>历史版本</strong>”的网站。</td></tr><tr><td align="left">🌐 <a href="https://filehippo.com/">FileHippo.com</a></td><td align="left">一个专门提供各软件“<strong>最新版本</strong>”的网站。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>专业软件</strong></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://www.qijishow.com/down/index.html">奇迹秀工具箱</a></td><td align="left">一个专门提供“<strong>设计类软件</strong>”的网站，Win Mac 都有。</td></tr><tr><td align="left">🌐 <a href="https://ruancang.net/#/sim">软仓</a></td><td align="left">收录了 <strong>391</strong> 个专业软件，需关注公众号，可订阅”<a href="https://gcore.jsdelivr.net/gh/runningcheese/RunningCheese-Firefox/Restore/Adblock_Popup.txt">去弹窗广告</a>“过滤规则。</td></tr><tr><td align="left">🌐 <a href="https://www.0daydown.com/">0DayDown</a></td><td align="left">收录稀缺的 0day 软件，提供国外网盘下载，速度较慢，百度网盘要会员。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>反馬软件</strong></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://pan.luochenzhimu.com/disk/software/">落尘之木</a></td><td align="left">很多软件被”<strong>苏州思杰马克丁</strong>“公司代理而无法找到，这里是资源汇总。</td></tr><tr><td align="left">🌐 <a href="https://www.naodai.org/">脑袋瓜子</a></td><td align="left">自建网盘下载，地址：<a href="https://go.naodai.org/">瓜子云盘镜像</a></td></tr><tr><td align="left">🌐 <a href="https://ldqk.xyz/special/6">懒得勤快</a></td><td align="left">自建网盘下载，地址：<a href="https://ldqk.xyz/drive#/onedrive/softs">懒勤网盘</a></td></tr><tr><td align="left">🌐 <a href="https://software.storage.yuntu.eu.org/">云图小镇</a></td><td align="left">自建网盘下载，地址：<a href="https://software.storage.yuntu.eu.org/">云图小镇</a></td></tr></tbody></table><h2 id="四、Mac-软件"><a href="#四、Mac-软件" class="headerlink" title="四、Mac 软件"></a>四、Mac 软件</h2><table><thead><tr><th align="left">▼ <strong>国内网站</strong></th><th align="left">简介</th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://macapp.org.cn/">MacApp分享频道</a></td><td align="left">免注册、高速下载、无广告、资源首发。</td></tr><tr><td align="left">🌐 <a href="https://www.macyy.cn/">MacYY</a></td><td align="left">免注册、高速下载、无广告、资源丰富。</td></tr><tr><td align="left">🌐 <a href="https://xclient.info/">xClient</a></td><td align="left">免注册、高速下载、有广告、资源丰富。</td></tr><tr><td align="left">🌐 <a href="https://xmac.app/">XMac.App</a></td><td align="left">提供 国外网盘和 IPFS 下载，应用来自 TNT、HCiSO 等知名团队。</td></tr><tr><td align="left">🌐 <a href="https://www.digit77.com/">Digit77</a></td><td align="left">开启广告屏蔽工具会隐藏下载链接。</td></tr><tr><td align="left">🌐 <a href="https://www.mac8k.com/">Mac8k</a></td><td align="left">提供 百度网盘下载</td></tr><tr><td align="left">🌐 <a href="http://www.sdifen.com/">史蒂芬周</a></td><td align="left">需要登陆</td></tr><tr><td align="left">🌐 <a href="https://www.macxin.com/">Mac萌新</a></td><td align="left">需要等待 6 秒</td></tr><tr><td align="left">🌐 <a href="https://macbang.net/">Mac帮</a></td><td align="left">提供 百度网盘下载，需要注册，回复评论才能下载。</td></tr><tr><td align="left">🌐 <a href="https://www.zhiniw.com/">知您网</a></td><td align="left">提供 城通网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://uleshi.com/">优乐事</a></td><td align="left">提供 城通网盘下载。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>国外网站</strong></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://www.torrentmac.net/">MacTorrents</a></td><td align="left">提供 BT 下载，TNT 和 HCISO 团队软件的源头。</td></tr><tr><td align="left">🌐 <a href="https://appstorrent.ru/">AppStorrent</a></td><td align="left">提供 国外网盘下载，俄罗斯知名 Mac 软件下载网站，这里也是源头。</td></tr><tr><td align="left">🌐 <a href="https://haxmac.cc/">Haxmac</a></td><td align="left">提供 国外网盘下载。</td></tr><tr><td align="left">🌐 <a href="https://cmacked.com/">Cmacked</a></td><td align="left">提供 国外网盘下载，资源较老。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>正版应用</strong></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://www.macupdate.com/">MacUpdate</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://setapp.com/">SetApp</a></td><td align="left">MacPaw 推出的订阅制付费 App 平台服务。</td></tr><tr><td align="left">🌐 <a href="https://www.lizhi.io/">荔枝数码</a></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://store.steampowered.com/">Steam</a></td><td align="left">很多 Mac 端游戏上不了 App Store，只能在 Steam 发布。</td></tr><tr><td align="left">🌐 <a href="https://www.taobao.com/">淘宝</a></td><td align="left">在淘宝购买的价格，往往要比官方价格低很多，拼多多同理。</td></tr></tbody></table><h2 id="六、软件搜索"><a href="#六、软件搜索" class="headerlink" title="六、软件搜索"></a>六、软件搜索</h2><p>聚合式软件搜索下载网站。</p><table><thead><tr><th align="left">▼ <strong>软件搜索</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://www.tansuotu.com/">探索兔</a></td><td align="left">Windows 软件搜索引擎，可能是目前最好的软件搜索网站。👍</td></tr><tr><td align="left">🌐 <a href="https://rjss.pages.dev/">软件搜搜</a></td><td align="left">Windows 软件搜索引擎，不支持 52Pojie、423Down 等网站。</td></tr><tr><td align="left">🌐 <a href="https://www.runningcheese.cn/rjss">奶酪搜搜</a></td><td align="left">Windows 软件搜索引擎，软件搜搜的奶酪 <strong>Fork</strong> 版本，源网站更多。</td></tr><tr><td align="left">🌐 <a href="https://www.xibuluo.com/">西部落</a></td><td align="left">Windows 软件搜索引擎，源网站较少。</td></tr><tr><td align="left">🌐 <a href="https://www.huaitui.com/">淮推软件</a></td><td align="left">Windows 软件搜索引擎，源网站较少。</td></tr><tr><td align="left">🌐 <a href="https://ourmacs.com/">Ourmacs</a></td><td align="left">Mac 软件搜索引擎。</td></tr></tbody></table><h2 id="七、系统安装"><a href="#七、系统安装" class="headerlink" title="七、系统安装"></a>七、系统安装</h2><table><thead><tr><th align="left">▼ <strong>镜像下载</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://msdn.itellyou.cn/">MSDN, ITellYou</a></td><td align="left">纯净的系统下载网站，还有 Office，但没有 Win11。</td></tr><tr><td align="left">🌐 <a href="https://next.itellyou.cn/Original/Index?id=7ab5f0cb-7607-4bbe-9e88-50716dc43de6#">NEXT, ITellYou</a></td><td align="left">MSDN 新网站，提供多平台系统下载，但需要登陆才能访问。</td></tr><tr><td align="left">🌐 <a href="https://hellowindows.cn/">HelloWindows</a></td><td align="left">极致的 Windows 系统下载网站。</td></tr><tr><td align="left">🌐 <a href="https://tb.rg-adguard.net/public.php">TechBench</a></td><td align="left">俄罗斯网站，提供菜单选择式的 Windows 镜像下载。</td></tr><tr><td align="left">🌐 <a href="https://www.xitongku.com/">MSDN 系统库</a></td><td align="left">提供菜单选择式的 Windows 镜像下载。</td></tr><tr><td align="left">🌐 <a href="https://iwin10.net/">专注 Win10 镜像</a></td><td align="left">专注 Win10 的精简优化版。</td></tr><tr><td align="left">🌐 <a href="https://www.newxitong.com/">专注 Win7 镜像</a></td><td align="left">专注 Win7 的精简优化版。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>系统激活</strong></td><td align="left"></td></tr><tr><td align="left">🌐 <a href="https://github.com/zbezj/HEU_KMS_Activator">KMSActivator</a></td><td align="left">国内大佬 @知彼而知己制作的 Windows 和 Office 激活工具。</td></tr><tr><td align="left">🌐 <a href="https://kms-auto.site/zh-CN/">KMSAuto Net</a></td><td align="left">知名系统激活工具 KMSAuto，支持 Windows 和 Office。</td></tr><tr><td align="left">🌐 <a href="https://github.com/OdysseusYuan/LKY_OfficeTools">LKY_OfficeTools</a></td><td align="left">一键自动化下载、安装、激活 Office 的利器，单独针对 Office。</td></tr><tr><td align="left">🌐 <a href="https://github.com/TGSAN/CMWTAT_Digital_Edition">云萌激活工具</a></td><td align="left">开源的 Win10、Win 11 激活工具。</td></tr><tr><td align="left">🌐 <a href="https://v0v.bid/">微零微</a></td><td align="left">一条命令激活 Windows 系统。</td></tr><tr><td align="left">🌐 <a href="https://pkeytool.com/ShareKeys">PKeyToolWeb</a></td><td align="left">微软激活密钥分享网站。</td></tr><tr><td align="left">🌐 <a href="https://blog.03k.org/post/kms.html">KMS 激活指南</a></td><td align="left">Windows 激活科普。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;软件导航&quot;&gt;&lt;a href=&quot;#软件导航&quot; class=&quot;headerlink&quot; title=&quot;软件导航&quot;&gt;&lt;/a&gt;软件导航&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;一、软件资讯&quot;&gt;&lt;a href=&quot;#一、软件资讯&quot; class=&quot;headerlink&quot; title=&quot;</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="软件" scheme="https://dont-sleep-so-late.github.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>影视导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/09/27/%E5%BD%B1%E8%A7%86%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/09/27/%E5%BD%B1%E8%A7%86%E5%AF%BC%E8%88%AA/</id>
    <published>2023-09-27T14:58:36.000Z</published>
    <updated>2023-12-15T14:22:34.279Z</updated>
    
    <content type="html"><![CDATA[<h1 id="影视导航"><a href="#影视导航" class="headerlink" title="影视导航"></a>影视导航</h1><hr><h2 id="1、电影搜索"><a href="#1、电影搜索" class="headerlink" title="1、电影搜索"></a>1、电影搜索</h2><table><thead><tr><th align="left">▼ <strong>电影搜索</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.ikanbot.com/">爱看机器人</a></td><td align="left"><a href="https://cupfox.app/">茶杯狐</a></td><td align="left"><a href="https://soupian.app/">搜片.com</a></td><td align="left"><a href="https://www.wandou.la/">豌豆PRO</a></td></tr><tr><td align="left"><a href="https://www.dianyinggou.com/">电影狗</a></td><td align="left"><a href="https://www.dianyingtaotao.com/">电影淘淘</a></td><td align="left"><a href="https://yingshiso.com/">影搜</a></td><td align="left"><a href="https://www.qmtv.pro/">青麦</a></td></tr><tr><td align="left"><a href="https://www.ressou.com/">酷搜</a></td><td align="left"><a href="https://search.ymck.me/">影猫の仓库</a></td><td align="left"><a href="https://dogechan.com/">Doge分享</a></td><td align="left"><a href="https://zhuiyingmao2.com/">追影猫</a></td></tr><tr><td align="left"><a href="https://www.725998.com/">茶杯虎</a></td><td align="left"><a href="https://tbsdy.com/">土拨鼠电影</a></td><td align="left"><a href="https://wukongshipin.com/">悟空视频</a></td><td align="left"><a href="https://www.xmxone.cn/">MXONE</a></td></tr><tr><td align="left"><a href="https://7080.wang/index.html">7080影视搜</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="2、国内影视"><a href="#2、国内影视" class="headerlink" title="2、国内影视"></a>2、国内影视</h2><table><thead><tr><th align="left">▼ 影视综艺</th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.yijia5.com/">全集网</a></td><td align="left"><a href="https://zhuiyingmao2.com/">追影猫</a></td><td align="left"><a href="https://rebozj.pro/">热播之家</a></td><td align="left"><a href="https://dsxys.pro/">大师兄影视</a></td></tr><tr><td align="left"><a href="https://new.olevod.com/">欧乐影院 NEW</a></td><td align="left"><a href="https://olevod.com/">欧乐影院</a></td><td align="left"><a href="https://cokemv.me/">COKEMV</a></td><td align="left"><a href="https://www.fuju1.tv/">腐剧TV</a></td></tr><tr><td align="left"><a href="https://www.tuhao.tv/">土豪影视</a></td><td align="left"><a href="https://www.newfii.com/">奈落影视</a></td><td align="left"><a href="https://www.dbgys.top/">大表哥影视</a></td><td align="left"><a href="https://www.panghuys.com/">胖虎影视</a></td></tr><tr><td align="left"><a href="https://www.gptys.com/">GPT 影视</a></td><td align="left"><a href="https://www.57movie.cn/">无心影视</a></td><td align="left"><a href="https://www.keke1.app/">可可影视</a></td><td align="left"><a href="https://nbys.top/">泥巴影视</a></td></tr><tr><td align="left"><a href="https://www.pbpbs.com/">片吧</a></td><td align="left"><a href="https://www.bkyb.net/">真不卡影院</a></td><td align="left"><a href="https://wzyshi.com/">WZ影视</a></td><td align="left"><a href="https://www.netfly.tv/">奈飞中文影视</a></td></tr><tr><td align="left"><a href="https://www.appmovie.cc/">APP影院</a></td><td align="left"><a href="https://ttsp.tv/">天天视频</a></td><td align="left"><a href="https://www.iole.tv/">爱欧乐影院</a></td><td align="left"><a href="https://www.yunbtv.net/">云播TV</a></td></tr><tr><td align="left"><a href="https://www.honglingjin.tv/">红领巾影院</a></td><td align="left"><a href="https://duboku.su/">独播库</a></td><td align="left"><a href="https://www.nunuyy5.org/">努努影院</a></td><td align="left"><a href="https://www.tangrenjie.tv/">唐人街影院</a></td></tr><tr><td align="left"><a href="https://dami5.vip/">大米星球</a></td><td align="left"><a href="https://www.fantuanhd.com/">饭团影视</a></td><td align="left"><a href="https://hua355.com/">HuaHua影院</a></td><td align="left"><a href="https://xmvod520.com/">熊猫影院</a></td></tr><tr><td align="left"><a href="https://www.iyf1.tv/">爱壹帆</a></td><td align="left"><a href="https://55dy9.vip/">555电影</a></td><td align="left"><a href="https://www.pkmkv.com/">七味网</a></td><td align="left"><a href="https://kanb.tv/">看B站</a></td></tr><tr><td align="left"><a href="https://dianyi.ng/">电影先生</a></td><td align="left"><a href="https://www.3ayy.com/">爱看影院</a></td><td align="left"><a href="https://www.cctv365.co/">华联社影院</a></td><td align="left"><a href="https://www.mkvdo.com/">MK影视</a></td></tr><tr><td align="left"><a href="http://www.qnkk8.com/">全能影视</a></td><td align="left"><a href="https://adys.tv/">爱迪影视</a></td><td align="left"><a href="https://www.xy1080.net/">星影视频</a></td><td align="left"><a href="https://cddys.vip/">臭蛋蛋影视</a></td></tr><tr><td align="left"><a href="https://www.flixflop.com/">飞流视频</a></td><td align="left"><a href="https://www.maolvys.com/">毛驴影视</a></td><td align="left"><a href="https://www.1080p.club/">1080迷</a></td><td align="left"><a href="https://zpsps.com/">宝片视频</a></td></tr><tr><td align="left"><a href="https://www.pyys.top/">朴樱影视</a></td><td align="left"><a href="https://www.3ayy.com/">爱看影院</a></td><td align="left"><a href="https://www.huanyuxing.com/">麻衣呀呼</a></td><td align="left"><a href="https://www.xmxone.cn/">Xmxone</a></td></tr><tr><td align="left"><a href="https://www.fantuan1.com/">饭团影视</a></td><td align="left"><a href="https://www.qiuxia678.com/">秋霞影视</a></td><td align="left"><a href="https://www.chok8.cc/">Chok 吧</a></td><td align="left"><a href="https://www.ysgc.fun/">影视工场</a></td></tr><tr><td align="left"><a href="https://www.06ys.com/">你牛影视</a></td><td align="left"><a href="https://www.histar.tv/">星视界</a></td><td align="left"><a href="https://xiaoyakankan.com/">小鸭看看</a></td><td align="left"><a href="https://www.iyf1.tv/">爱壹帆清爽版</a></td></tr><tr><td align="left"><a href="https://www.kkdy.live/">看看电影</a></td><td align="left"><a href="https://www.okdyy.com/">OK电影院</a></td><td align="left"><a href="https://dadagui.me/">达达龟</a></td><td align="left"><a href="https://www.kuaizi.tv/">筷子视频</a></td></tr><tr><td align="left"><a href="https://www.fuxiafood.com/">蓝光影院</a></td><td align="left"><a href="https://xiaobaotv.net/index.php">小宝影院</a></td><td align="left"><a href="https://www.wangfei.de/">网飞TV</a></td><td align="left"><a href="https://www.hoho.tv/">HOHO TV</a></td></tr><tr><td align="left"><a href="https://www.shenma4480.com/">神马电影</a></td><td align="left"><a href="https://www.xifanys.com/">稀饭影视</a></td><td align="left"><a href="https://www.histar.tv/">星视界</a></td><td align="left"><a href="https://www.tv-8.com/">电视吧</a></td></tr><tr><td align="left"><a href="https://loveqtv.com/">爱情影院</a></td><td align="left"><a href="https://1090p.tk/">毛茂影视</a></td><td align="left"><a href="https://www.kcys.top/">酷茶影视</a></td><td align="left"><a href="https://aa4.cc/">AA影视</a></td></tr><tr><td align="left"><a href="https://vod.funsline.cn/">多多影视</a></td><td align="left"><a href="https://www.90s.one/">90s电影网</a></td><td align="left"><a href="https://laowang.lol/">老王电影</a></td><td align="left"><a href="https://maoo.tv/">猫影视</a></td></tr><tr><td align="left"><a href="https://www.wrnm.cc/">WRNM</a></td><td align="left"><a href="https://duboku.su/">独播库</a></td><td align="left"><a href="https://www.zhuiju.la/">天天追剧</a></td><td align="left"><a href="https://www.ysfxla.com/">影视分享</a></td></tr><tr><td align="left"><a href="https://www.6080yy1.com/">新视觉影院</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="3、海外影视"><a href="#3、海外影视" class="headerlink" title="3、海外影视"></a>3、海外影视</h2><table><thead><tr><th align="left">▼ <strong>综合</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.subaibaiys.com/">素白白影视</a></td><td align="left"><a href="https://www.bdys10.com/">哔嘀影视</a></td><td align="left"><a href="https://www.libvio.fun/">LIBVIO</a></td><td align="left"><a href="https://jojo.bdys.top/">JOJO</a></td></tr><tr><td align="left"><a href="https://www.taolix.com/">TAOLIX</a></td><td align="left"><a href="https://gaze.run/">注视影视</a></td><td align="left"><a href="https://cz01.cc/">厂长资源</a></td><td align="left"><a href="https://www.zxzjhd.com/">在线之家</a></td></tr><tr><td align="left"><a href="https://www.novipnoad.net/">NO视频</a></td><td align="left"><a href="https://ddys.pro/">低端影视</a></td><td align="left"><a href="https://hdmoli.com/">HDmoli</a></td><td align="left"><a href="https://ikanys.tv/">爱看影视</a></td></tr><tr><td align="left"><a href="https://waipian5.com/">歪片星球</a></td><td align="left"><a href="https://xmmi.xyz/">小猫咪影视</a></td><td align="left"><a href="https://suyingtv.xyz/">速影TV</a></td><td align="left"><a href="https://www.kpkuang.de/">看片狂人</a></td></tr><tr><td align="left"><a href="https://www.btnull.org/">无名小站</a></td><td align="left"><a href="https://dmxq.fun/">大米星球</a></td><td align="left"><a href="https://www.citydy.com/">城市电影</a></td><td align="left"><a href="https://www.4kvm.net/">4k影视</a></td></tr><tr><td align="left">▼ <strong>英文</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://myflixer.is/home">Myflixer</a></td><td align="left"><a href="https://watchseries.id/home">Watchseries</a></td><td align="left"><a href="https://g8b01.com/">CouchTuner</a></td><td align="left"><a href="https://fmovies.pub/home">FMovies</a></td></tr><tr><td align="left"><a href="https://yesmovies.ag/yes.html">YesMovies</a></td><td align="left"><a href="https://www1.solarmovie.cr/movie/">SolarMovie</a></td><td align="left"><a href="https://ww2.123moviesfree.net/home/">123Movies</a></td><td align="left"><a href="https://fmovies.to/">FMovies 2</a></td></tr><tr><td align="left">▼ <strong>美剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.meijutt.tv/">美剧天堂</a></td><td align="left"><a href="https://www.meijumi.net/">美剧迷</a></td><td align="left"><a href="https://agmov.com/">阿哥美剧</a></td><td align="left"><a href="https://ddys.one/">低端影视</a></td></tr><tr><td align="left"><a href="https://www.nfyingshi.com/">奈菲影视</a></td><td align="left"><a href="https://www.mjwo.net/">美剧窝</a></td><td align="left"><a href="https://mjw21.com/">美剧网</a></td><td align="left"><a href="https://www.meijucang.com/">美剧仓</a></td></tr><tr><td align="left"><a href="https://www.nfyingshi.com/">美剧行星</a></td><td align="left"><a href="https://www.91mjtt.cc/">91美剧网</a></td><td align="left"><a href="https://www.aimeijutv.com/">爱美剧TV</a></td><td align="left"><a href="https://www.meiju5.net/">美剧吧</a></td></tr><tr><td align="left"><a href="https://www.meijuttk.cc/">天天美剧</a></td><td align="left"><a href="https://www.2meiju.cc/">爱美剧</a></td><td align="left"><a href="https://www.xxhezi.com/">美剧的天堂</a></td><td align="left"><a href="https://kanmeiju.net/">看美剧</a></td></tr><tr><td align="left"><a href="https://www.fmeiju.com/">放美剧</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>英剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.icezmz.com/">冰冰字幕组</a></td><td align="left"><a href="https://www.meijumi.net/en/">英剧大全</a></td><td align="left"><a href="https://www.ivazimova.com/">英剧吧</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>韩剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.hanmi.org/">韩迷网</a></td><td align="left"><a href="https://www.tvn.cc/">韩剧网</a></td><td align="left"><a href="https://www.hanfan.cc/">韩饭网</a></td><td align="left"><a href="https://321tw.com/">韓劇網</a></td></tr><tr><td align="left"><a href="https://www.kan.cc/">看韩剧tv</a></td><td align="left"><a href="https://www.hanjukankan.com/">韩剧看看</a></td><td align="left"><a href="https://01hanju.com/">韩剧网</a></td><td align="left"><a href="https://www.hanju7.com/">韩剧播</a></td></tr><tr><td align="left"><a href="https://www.tvn.cc/">韩剧桃</a></td><td align="left"><a href="https://idoltv.tv/">IDOLTV線上看</a></td><td align="left"><a href="https://www.hanritai.com/">韩剧DVD</a></td><td align="left"><a href="https://www.hanjuwang.net/">韩剧网</a></td></tr><tr><td align="left">▼ <strong>日剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://rijuvip.com/">日剧TV网</a></td><td align="left"><a href="https://www.tnhzmz.com/">TNH Subtitle</a></td><td align="left"><a href="https://www.rijupao.com/">日剧跑</a></td><td align="left"><a href="https://www.fanxinzhui.com/">追新番</a></td></tr><tr><td align="left"><a href="https://www.dn51.net/">DN51</a></td><td align="left"><a href="https://rijuvip.com/">日剧网</a></td><td align="left"><a href="https://www.rijutt.com/">日剧天堂</a></td><td align="left"><a href="http://www.rjtv6.com/">日剧TV</a></td></tr><tr><td align="left">▼ <strong>泰剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.taijuz.com/">泰剧网</a></td><td align="left"><a href="http://www.tjtt.cc/">泰剧网</a></td><td align="left"><a href="https://www.taiju5.com/">泰剧大全</a></td><td align="left"><a href="https://www.taijumi.net/">泰剧迷</a></td></tr><tr><td align="left">▼ <strong>港剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.tvhk.cc/">粤语e族</a></td><td align="left"><a href="http://www.ii166.com/">港剧下载</a></td><td align="left"><a href="https://www.hktvz.com/">粤语屋</a></td><td align="left"><a href="https://www.gjtt5.cc/">港剧天堂</a></td></tr><tr><td align="left"><a href="https://www.gjyak.com/">粤爱看</a></td><td align="left"><a href="https://www.gjw3.com/">粤港网</a></td><td align="left"><a href="https://www.gj5.tv/">港剧屋</a></td><td align="left"><a href="https://www.gjw4.com/">港剧发烧友</a></td></tr><tr><td align="left"><a href="https://www.hnyrs.com/">粤语影院</a></td><td align="left"><a href="https://www.iyueyuw.xyz/">爱粤语网</a></td><td align="left"><a href="https://yueyuds.com/">粤语电视网</a></td><td align="left"><a href="https://www.aliyundrive.com/s/hf4a7foCdkb">500 多部港剧合集</a></td></tr></tbody></table><h2 id="4、动漫番剧"><a href="#4、动漫番剧" class="headerlink" title="4、动漫番剧"></a>4、动漫番剧</h2><table><thead><tr><th align="left">▼ 动漫频道</th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.soman.com/">搜漫</a></td><td align="left"><a href="https://www.jiligamefun.com/">叽哩叽哩</a></td><td align="left"><a href="https://bangumi.tv/">Bangumi 番组计划</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>漫画网站</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.mangabz.com/">Mangabz</a></td><td align="left"><a href="https://copymanga.site/">拷貝漫畫</a></td><td align="left"><a href="https://www.colamanhua.com/">COLA漫画</a></td><td align="left"><a href="https://cn.baozimh.com/">包子漫画</a></td></tr><tr><td align="left"><a href="https://www.cartoonmad.com/">動漫狂</a></td><td align="left"><a href="https://www.dmzj.com/">动漫之家</a></td><td align="left"><a href="https://www.dongman.la/">动漫啦</a></td><td align="left"><a href="http://www.kumw9.com/">酷漫屋</a></td></tr><tr><td align="left"><a href="https://www.xmanhua.com/">Xmanhua</a></td><td align="left"><a href="https://mhx12.com/">漫自由</a></td><td align="left"><a href="https://www.manhuagui.com/">漫画柜</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>动漫番剧</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.yhmgo.com/">樱花动漫</a></td><td align="left"><a href="https://www.dmla1.com/">风车动漫</a></td><td align="left"><a href="https://ysjdm.net/">異世界動漫</a></td><td align="left"><a href="https://www.agemys.org/">AGE动漫</a></td></tr><tr><td align="left"><a href="https://gqdm.net/">異世界動漫</a></td><td align="left"><a href="https://bangumi.online/">アニメ新番組</a></td><td align="left"><a href="http://www.dmd77.com/">动漫岛</a></td><td align="left"><a href="https://anime.girigirilove.com/">girigiri爱动漫</a></td></tr><tr><td align="left"><a href="http://www.nicotv.fun/">妮可动漫</a></td><td align="left"><a href="https://www.dm2022.com/">Z动漫</a></td><td align="left"><a href="https://07vods.fun/">柒之社</a></td><td align="left"><a href="https://pangciacg.com/">PangCI</a></td></tr><tr><td align="left"><a href="http://www.pilipili.ink/">P站</a></td><td align="left"><a href="https://www.mandaowang.com/">漫岛动漫</a></td><td align="left"><a href="http://halihali15.com/">哈哩哈哩</a></td><td align="left"><a href="https://www.heitaifun.com/">heitai动漫</a></td></tr><tr><td align="left"><a href="http://www.mxdm9.com/">MX动漫</a></td><td align="left"><a href="https://www.mengfan.tv/">萌番</a></td><td align="left"><a href="https://www.sbdm.net/">異世界動漫2</a></td><td align="left"><a href="http://www.yinghuavideo.com/">樱花动漫 2</a></td></tr><tr><td align="left"><a href="https://catw.moe/">喵物次元</a></td><td align="left"><a href="https://www.nyafun.net/">NyaFun</a></td><td align="left"><a href="https://www.kelatv.com/">克拉TV</a></td><td align="left"><a href="https://www.dmla1.com/">风车动漫</a></td></tr><tr><td align="left"><a href="https://www.lmm66.com/">路漫漫</a></td><td align="left"><a href="http://lmfun.vip/">蓝猫动漫</a></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>动漫磁力</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://share.dmhy.org/">動漫花園資</a></td><td align="left"><a href="https://nyaa.si/">Nyaa</a></td><td align="left"><a href="https://bangumi.moe/">萌番组</a></td><td align="left"><a href="https://acg.rip/">ACG.RIP</a></td></tr><tr><td align="left"><a href="https://mikanani.me/">蜜柑计划</a></td><td align="left"><a href="http://www.hysub.net/">幻樱字幕组</a></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="5、纪录片"><a href="#5、纪录片" class="headerlink" title="5、纪录片"></a>5、纪录片</h2><table><thead><tr><th align="left">▼ <strong>在线纪录片</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://jishi.cctv.com/">央视纪录片</a></td><td align="left"><a href="https://www.bilibili.com/documentary/">B 站纪录片</a></td><td align="left"><a href="https://v.qq.com/channel/doco">腾讯纪录片</a></td><td align="left"><a href="https://www.iqiyi.com/jilupian/">爱奇艺纪录</a></td></tr><tr><td align="left"><a href="https://space.bilibili.com/7584632/video">哔哩哔哩纪录片</a></td><td align="left"><a href="https://space.bilibili.com/22121599/video">纪录片之家字幕组</a></td><td align="left"><a href="https://space.bilibili.com/13374324/video">猛犸君侯</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>纪录片频道</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="http://xz.tqiantu.com/jilupian/">行者物语网</a></td><td align="left"><a href="http://www.opclass.com/">公开课纪录片下载网</a></td><td align="left"><a href="https://dao-fire.com/">盗火纪录片</a></td><td align="left"><a href="https://www.jiluhome.cn/">纪录家园</a></td></tr><tr><td align="left"><a href="https://www.05jl.com/">纪录片之家</a></td><td align="left"><a href="https://www.onehourlife.com/">每天一小时纪录片</a></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="6、电视直播"><a href="#6、电视直播" class="headerlink" title="6、电视直播"></a>6、电视直播</h2><p>直播源：通常来说是<strong>一个链接</strong>，以 <strong>m3u</strong> 或 <strong>m3u8</strong> 等结尾，可以在线播放，也可以需要借助相关软件来打开。</p><table><thead><tr><th align="left">▼ <strong>在线直播</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="http://www.yangshizhibo.com/">央视直播</a></td><td align="left"><a href="https://www.tvniu.com/">电视牛</a></td><td align="left"><a href="http://www.haoqiu365.com/">365直播</a></td><td align="left"><a href="http://www.126zhibo.net/">126直播</a></td></tr><tr><td align="left"><a href="http://www.lshitv.com/">乐视直播</a></td><td align="left"><a href="http://www.360live.cc/">爱看直播</a></td><td align="left"><a href="http://tv.haoqu99.com/">好趣网</a></td><td align="left"><a href="http://www.tvyan.com/">电视眼</a></td></tr><tr><td align="left"><a href="http://zqjy.info/t/">M3U8 IPTV Player</a></td><td align="left"><a href="https://eja.tv/">eja.tv</a></td><td align="left"><a href="http://nettv.live/">Nettv.live</a></td><td align="left"><a href="http://www.tvquanqiu.com/">看全球</a></td></tr><tr><td align="left">▼ <strong>直播源</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://github.com/iptv-org/iptv">IPTV.org</a></td><td align="left"><a href="https://live.fanmingming.com/">Fanmingming Live</a></td><td align="left"><a href="https://github.com/imDazui/Tvlist-awesome-m3u-m3u8">Tvlist</a></td><td align="left"><a href="https://epg.pw/test_channel_page.html?lang=zh-hans">EPG 电视节目表</a></td></tr><tr><td align="left"><a href="https://owen2000wy.github.io/">OwenTV</a></td><td align="left"><a href="http://tonkiang.us/">IPTV Link Search</a></td><td align="left"><a href="https://www.foodieguide.com/iptvsearch/">IPTV Link Search 2</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>直播源软件</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><strong>Windows</strong>：</td><td align="left">首选：<a href="https://www.videolan.org/index.zh.html">VLC</a></td><td align="left">可选：<a href="https://potplayer.daum.net/">Potplayer</a></td><td align="left"></td></tr><tr><td align="left"><strong>Mac</strong>：</td><td align="left">首选：<a href="https://www.videolan.org/index.zh.html">VLC</a></td><td align="left">可选：<a href="https://iina.io/">IINA</a></td><td align="left">可选：<a href="https://apps.apple.com/cn/app/id1630403500">‎APTV</a></td></tr><tr><td align="left"><strong>iOS</strong>：</td><td align="left">首选：<a href="https://www.videolan.org/index.zh.html">VLC</a></td><td align="left">可选：<a href="https://apps.apple.com/cn/app/ntplayer/id1613758141">ntPlayer</a></td><td align="left">可选：<a href="https://apps.apple.com/cn/app/id1630403500">‎APTV</a></td></tr><tr><td align="left"><strong>Android</strong>：</td><td align="left">首选：<a href="https://www.videolan.org/index.zh.html">VLC</a></td><td align="left">可选：<a href="https://www.lanzoub.com/izIp40ve9ing">DIYP 影音</a></td><td align="left"></td></tr><tr><td align="left"><strong>工具：</strong></td><td align="left"><a href="https://guihet.com/tvlistconvert.html">直播源列表格式转换</a></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="7、体育直播"><a href="#7、体育直播" class="headerlink" title="7、体育直播"></a>7、体育直播</h2><table><thead><tr><th align="left">▼ <strong>体育直播</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.zhibo8.com/">直播8</a></td><td align="left"><a href="https://www.qiumihui.tv/">球迷汇</a></td><td align="left"><a href="https://www.ningmengzhibo.cc/">柠檬直播</a></td><td align="left"><a href="https://www.yoozhibo.net/">优直播</a></td></tr><tr><td align="left"><a href="https://www.zhiboz.com/">直播吧</a></td><td align="left"><a href="https://dongqiudi.com/">懂球帝</a></td><td align="left"><a href="https://www.lanqiudi.com/">篮球帝</a></td><td align="left"><a href="https://www.zhibo1.cc/index.html">一直播</a></td></tr><tr><td align="left"><a href="http://www.jrkan2023.com/">JRKAN直播</a></td><td align="left"><a href="http://www.515.tv/">515直播</a></td><td align="left"><a href="http://www.lanqiuzhibo.com/">篮球直播吧</a></td><td align="left"><a href="https://www.98zhibo.com/">98直播吧</a></td></tr><tr><td align="left"><a href="https://www.kankanzhibo.com/">看看直播</a></td><td align="left"><a href="https://www.zb06.com/">体育6</a></td><td align="left"><a href="http://www.zhiboche5.com/">直播车</a></td><td align="left"><a href="https://www.tiantianzhibo.net/">天天直播</a></td></tr><tr><td align="left">▼ <strong>体育下载</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.sport-video.org.ua/">Sport Video</a></td><td align="left"><a href="http://www.miejw.com/html/mdown">米尔体育网</a></td><td align="left"><a href="http://www.qklnews.com/matchdown">巧克力直播网</a></td><td align="left"><a href="https://www.txzqw.me/">天下足球网</a></td></tr><tr><td align="left"><a href="http://www.qm5.cc/">球迷网</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="8、VIP-解析"><a href="#8、VIP-解析" class="headerlink" title="8、VIP 解析"></a>8、VIP 解析</h2><p>各大网站的 VIP 视频解析，输入<strong>视频地址</strong>即可。</p><table><thead><tr><th align="left">▼ <strong>VIP 解析</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.btnull.org/vipplay/">片库解析</a></td><td align="left"><a href="https://vip.bljiex.com/?wd=">BL 解析</a></td><td align="left"><a href="https://bd.jx.cn/?url=">冰豆解析</a></td><td align="left"><a href="https://okjx.cc/?url=">OK解析</a></td></tr><tr><td align="left"><a href="https://www.bavei.com/vip/?url=">全民解析</a></td><td align="left"><a href="https://www.pangujiexi.com/pangu/?url=">盘古解析</a></td><td align="left"><a href="https://jx.xmflv.com/?url=">虾米解析</a></td><td align="left"><a href="https://jx.jsonplayer.com/player/?url=">JsonPlayer 解析</a></td></tr><tr><td align="left"><a href="http://so.fulishe.live/">刚刚解析</a></td><td align="left"><a href="https://jx.kingtail.xyz/?url=">KingTail</a></td><td align="left"><a href="https://www.ckplayer.vip/jiexi/?url=">CKPlayer</a></td><td align="left"><a href="https://www.playm3u8.cn/jiexi.php?url=">Playm3u8</a></td></tr><tr><td align="left"><a href="https://jx.m3u8.tv/jiexi/?url=">M3u8.tv</a></td><td align="left"><a href="https://jx.xmflv.com/?url=">XmFlv</a></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>脚本辅助</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://greasyfork.org/zh-CN/scripts/438657">全网 VIP 视频解析</a></td><td align="left"><a href="https://greasyfork.org/zh-CN/scripts/467776">懒人 VIP 视频解析</a></td><td align="left"><a href="https://greasyfork.org/zh-CN/scripts/449203">非常简洁视频解析</a></td><td align="left"><a href="https://greasyfork.org/zh-CN/scripts/472455">落雪视频解析</a></td></tr></tbody></table><h2 id="9、电脑软件"><a href="#9、电脑软件" class="headerlink" title="9、电脑软件"></a>9、电脑软件</h2><p>如果你不想记那么多的网站。</p><p>想直接有一款软件能囊括所有网站的话，推荐 <strong>ZY Player</strong>。</p><p><strong>ZY Player</strong> 是一款开源的、跨平台的电脑端视频播放器，支持 Windows、macOS、Linux 多个平台。</p><p>项目：<a href="https://github.com/Hiram-Wong/ZyPlayer">https://github.com/Hiram-Wong/ZyPlayer</a></p><p>下载：<a href="https://ghproxy.com/https://github.com/Hiram-Wong/ZyPlayer/releases/download/v3.2.7/zyplayer-win-3.2.7-x64.exe">Windows 版</a>、<a href="https://ghproxy.com/https://github.com/Hiram-Wong/ZyPlayer/releases/download/v3.2.7/zyplayer-mac-3.2.7-x64.dmg">Mac Intel 版</a>、<a href="https://ghproxy.com/https://github.com/Hiram-Wong/ZyPlayer/releases/download/v3.2.7/zyplayer-mac-3.2.7-arm64.dmg">Mac ARM 版</a></p><p><strong>使用方法：</strong></p><p><strong>ZY Player</strong> 使用的是接口解析的方式，因此需要订阅 m3u8 链接。推荐链接：来自 <a href="https://github.com/ls125781003/dmtg">@ls125781003</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://gcore.jsdelivr.net/gh/ls125781003/dmtg/zy.json</span><br><span class="line">https://gcore.jsdelivr.net/gh/ls125781003/dmtg/zy_yuan.json</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231215222125.png"></p><p>订阅链接后，ZY Player 就会展示所有可用源，主要包括<strong>影视、电视、解析</strong>三个部分。</p><p><strong>在线影视：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231215222145.png"></p><p><strong>电视直播：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231215222205.png"></p><p><strong>视频解析：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231215222223.png"></p><h2 id="10、手机APP"><a href="#10、手机APP" class="headerlink" title="10、手机APP"></a>10、手机APP</h2><p>安卓上安装 APP 很简单，但 iOS 就比较麻烦了。</p><p>一种方法是通过安装“<strong>描述文件</strong>” 来安装，另一种是“<strong>伪装上架</strong>”应用到 App Store。</p><p>也就是 App 看上去是一个普通应用，但只要点某个按钮，又或者输入某个关键字，应用就会<strong>变身为影视 App</strong>。</p><p>如果打开的伪装应用 App Store 链接，提示地区不支持，那么说明 App 已经下架。</p><table><thead><tr><th align="left">▼ <strong>安卓</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://cupfox.app/app">茶杯狐</a></td><td align="left"><a href="https://www.looo.top/">龙门影视</a></td><td align="left"><a href="https://cokemv.me/index.php/label/down.html">COKEMV</a></td><td align="left"><a href="https://tbsdy.com/download.html">土拨鼠电影</a></td></tr><tr><td align="left"><a href="http://www.zhuijuapp.com/">追剧影院</a></td><td align="left"><a href="https://www.dmmd.tv/">萌妹视频</a></td><td align="left"><a href="https://ikaola.tv/app/">考拉TV</a></td><td align="left"><a href="https://555dy.shop/">555 电影</a></td></tr><tr><td align="left"><a href="https://dsxys.pro/app/">大师兄影视</a></td><td align="left"><a href="https://danboxingqiu.github.io/">蛋播星球</a></td><td align="left"><a href="https://lekan.app/">乐看视频</a></td><td align="left"><a href="https://www.akuaizi.vip/">筷子视频</a></td></tr><tr><td align="left"><a href="https://www.yzys.app/">柚子影视</a></td><td align="left"><a href="https://yrzj.tv/">伊人追剧</a></td><td align="left"><a href="https://www.dmys.tv/">大米星球</a></td><td align="left"><a href="https://jinju1.app/">加菲猫影视</a></td></tr><tr><td align="left"><a href="https://qcjlpro.com/">青橙影视</a></td><td align="left"><a href="https://heib.cc/">黑豹影视</a></td><td align="left"><a href="https://mj2.app/">AG美剧</a></td><td align="left"></td></tr><tr><td align="left">▼ <strong>iOS</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://apps.apple.com/cn/app/id1594160763">电视直播</a></td><td align="left"><a href="https://apps.apple.com/cn/app/id1322243737">今日影视</a></td><td align="left"><a href="https://apps.apple.com/cn/app/id1135798414">影视大全</a></td><td align="left"><a href="https://apps.apple.com/cn/app/id1525688578">月亮播放器</a></td></tr><tr><td align="left"><a href="https://apps.apple.com/cn/app/id1630151775?platform=ipad">美剧TV</a></td><td align="left"><a href="https://apps.apple.com/cn/app/%E6%B8%AF%E5%89%A7tv-%E6%B8%AF%E5%89%A7%E7%BD%91/id1510213105">港剧TV</a></td><td align="left"></td><td align="left"></td></tr></tbody></table><table><thead><tr><th align="left">▼ <strong>伪装上架</strong></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.dmmd.tv/iosdownload.html">萌妹影视</a></td><td align="left">点击“意见反馈”，在最上面输入框中输入：萌妹，点击提交后，重新打开即可。</td></tr><tr><td align="left"><a href="https://apps.apple.com/cn/app/id1465366080">蚂蚁书签</a></td><td align="left">点击右上角“齿轮”，选择“联系作者–&gt;点我恢复备份”，就会导入影视网站。</td></tr></tbody></table><h2 id="11、电视盒子"><a href="#11、电视盒子" class="headerlink" title="11、电视盒子"></a>11、电视盒子</h2><table><thead><tr><th align="left">▼ <strong>电视盒子</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.lanzoui.com/b0f1944aj">423Down TV</a> 👍</td><td align="left"><a href="https://docs.qq.com/doc/DRXhVYWF0cEpwV2FF">电视 TV 玩法大全</a></td><td align="left"><a href="http://www.miaokantv.cn/">秒看电视</a></td><td align="left"><a href="https://ikaola.tv/app/">考拉TV</a></td></tr><tr><td align="left"><a href="https://www.idianshijia.com/">电视家</a></td><td align="left"><a href="http://m.ismartv.cn/tv/introductionTV">电视猫视频</a></td><td align="left"><a href="http://mingri.tv/">明日影视</a></td><td align="left"><a href="http://tvhuoxing.com/">火星直播</a></td></tr><tr><td align="left"><a href="http://www.yunhitv.com/">云海电视</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="12、电影下载"><a href="#12、电影下载" class="headerlink" title="12、电影下载"></a>12、电影下载</h2><p>如果想看高清、超高清、无广告、无删减的电影，则需要单独下载，一般有<strong>磁力</strong>和<strong>网盘</strong>两种下载形式。</p><table><thead><tr><th align="left">▼ <strong>磁力下载</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://www.cilixiong.com/">磁力熊</a></td><td align="left"><a href="https://www.yinfans.me/">音范丝</a></td><td align="left"><a href="https://www.btsj6.com/">BT世界网</a></td><td align="left"><a href="https://www.mini4k.com/">MINI4K</a></td></tr><tr><td align="left"><a href="https://seedhub.info/">SeedHub</a></td><td align="left"><a href="https://www.2bt0.com/">不太灵影视</a></td><td align="left"><a href="https://4kysxz.top/">4K影视小站</a></td><td align="left"><a href="https://www.bugutv.org/">布谷TV</a></td></tr><tr><td align="left"><a href="https://www.hao6v.tv/">6v电影</a></td><td align="left"><a href="https://www.dygang.cc/">电影港</a></td><td align="left"><a href="https://yyets.click/search">人人影视</a></td><td align="left"><a href="https://www.mp4us.com/">Mp4电影</a></td></tr><tr><td align="left"><a href="https://www.yikedy.cc/">一刻电影</a></td><td align="left"><a href="https://www.xl720.com/">迅雷电影天堂</a></td><td align="left"><a href="https://www.gaoqingw.com/">高清网</a></td><td align="left"><a href="https://gaoqing.la/">中国高清网</a></td></tr><tr><td align="left"><a href="https://btbtt18.com/">BT之家</a></td><td align="left"><a href="https://www.dygod.net/">电影天堂</a></td><td align="left"><a href="https://yts.mx/">YTS</a></td><td align="left"><a href="https://www.btbuluo.net/">BT部落天堂</a></td></tr><tr><td align="left"><a href="https://torrentgalaxy.to/">Torrent Galaxy</a></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>网盘下载</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://nmme.xyz/">橘子盘搜</a></td><td align="left"><a href="https://xunso.fun/">迅搜搜</a></td><td align="left"><a href="https://res.yunpan.win/">云盘资源</a></td><td align="left"><a href="http://m.kkkob.com/apps/index.html?id=211229kl">数据搜索</a></td></tr><tr><td align="left"><a href="https://nzmz.xyz/index.html">NEW字幕组</a></td><td align="left"><a href="https://www.xinjuc.com/">新剧场</a></td><td align="left"><a href="https://ppxzy.net/">皮皮虾资源</a></td><td align="left"><a href="https://susuifa.com/">SuSu Share</a></td></tr><tr><td align="left"><a href="https://xzys.fun/">校长影视</a></td><td align="left"><a href="https://www.rrdynb.com/index.html">人人电影网</a></td><td align="left"><a href="http://www.xyxz001.com/">夕阳小站</a></td><td align="left"><a href="https://wanwansub.com/">弯弯字幕组</a></td></tr></tbody></table><h2 id="13、字幕台词"><a href="#13、字幕台词" class="headerlink" title="13、字幕台词"></a>13、字幕台词</h2><p>大多数原语种资源（无删减、无广告）都没有字幕，为此，你需要单独下载字幕。</p><table><thead><tr><th align="left">▼ <strong>电影字幕</strong></th><th align="left"></th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><a href="https://zimuku.org/">字幕库</a></td><td align="left"><a href="https://subhd.tv/">SubHD</a></td><td align="left"><a href="https://assrt.net/">射手网(伪)</a></td><td align="left"><a href="https://www.ddzimu.com/">点点字幕</a></td></tr><tr><td align="left"><a href="https://cn.zimuzimu.net/">中文字幕网</a></td><td align="left"><a href="https://a4k.net/">A4K字幕</a></td><td align="left"><a href="https://www.rikua.com/">日夸字幕</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://subbers.org/subtitles/">Subbers</a> (动漫)</td><td align="left"><a href="https://r3sub.com/">R3字幕網</a>（繁体）</td><td align="left"><a href="https://www.subtitlecat.com/">Subtitle Cat</a> (番号)</td><td align="left"></td></tr><tr><td align="left">▼ <strong>英文字幕</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://subscene.com/">Subscene</a></td><td align="left"><a href="https://www.opensubtitles.org/en/search/subs">OpenSubtitles</a></td><td align="left"><a href="https://subflicks.com/">SubFlicks</a></td><td align="left"><a href="https://www.addic7ed.com/">Addic7ed</a></td></tr><tr><td align="left">▼ <strong>电影台词</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://33.agilestudio.cn/">33台词</a></td><td align="left"><a href="https://zhaotaici.cn/">找台词</a></td><td align="left"><a href="https://www.quodb.com/">QuoDB</a>（英文）</td><td align="left"><a href="https://dialogue.moe/">Dialogue</a>（动漫）</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;影视导航&quot;&gt;&lt;a href=&quot;#影视导航&quot; class=&quot;headerlink&quot; title=&quot;影视导航&quot;&gt;&lt;/a&gt;影视导航&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;1、电影搜索&quot;&gt;&lt;a href=&quot;#1、电影搜索&quot; class=&quot;headerlink&quot; title=&quot;</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="影视" scheme="https://dont-sleep-so-late.github.io/tags/%E5%BD%B1%E8%A7%86/"/>
    
  </entry>
  
  <entry>
    <title>音乐导航</title>
    <link href="https://dont-sleep-so-late.github.io/2023/09/27/%E9%9F%B3%E4%B9%90%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/09/27/%E9%9F%B3%E4%B9%90%E5%AF%BC%E8%88%AA/</id>
    <published>2023-09-27T14:55:36.000Z</published>
    <updated>2023-09-27T15:05:57.151Z</updated>
    
    <content type="html"><![CDATA[<h1 id="音乐导航"><a href="#音乐导航" class="headerlink" title="音乐导航"></a>音乐导航</h1><hr><h2 id="1、音乐搜索"><a href="#1、音乐搜索" class="headerlink" title="1、音乐搜索"></a>1、音乐搜索</h2><p>要说 Mp3 搜索和下载的“<strong>众神之王</strong>”，<strong>MyFreeMp3</strong> 当之无愧。</p><p>地址：<a href="https://myfreemp3juices.cc/">https://myfreemp3juices.cc</a></p><p><strong>特点 1：资源齐全</strong></p><p>网站资源丰富，超过 1 亿首音乐。</p><p>比 Apple Store 还齐全，包括已经下架的音乐也能搜索，比如“<strong>PG One</strong>”的歌，堪称音乐界的 <strong>Z-library</strong>。</p><p><strong>特点 2：提供下载</strong></p><p>除了支持在线收听，网站还提供了 <strong>320Kbps</strong> 的 Mp3 下载，要知道这个比特率已经十分接近无损音乐。</p><p>而它的体积，只有无损音乐的 <strong>1&#x2F;3</strong>。</p><p><strong>特点 3：免费无限制</strong></p><p>网站无需注册，没有限制，支持中文等多种语言，国内也可以正常访问，音乐搜索里唯一的神，无误了。</p><p><strong>类似网站：</strong>下面的这些网站与 <strong>MyFreeMp3</strong> 类似，资源也很齐全。</p><table><thead><tr><th align="left">▼ <strong>国外应用</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://new.myfreemp3juices.cc/">MyFreeMp3</a></td><td align="left">免注册、支持下载、资源丰富，支持下架音乐。👍</td></tr><tr><td align="left">🌐 <a href="https://freemp3cloud.com/">Free Mp3 Cloud</a></td><td align="left">免注册、支持下载、资源丰富，支持下架音乐。👍</td></tr><tr><td align="left">🌐 <a href="https://slider.kz/">Slider.kz</a></td><td align="left">免注册、支持下载、资源丰富，支持下架音乐。👍</td></tr><tr><td align="left">🌐 <a href="https://free-mp3-download.net/">Free MP3 Down</a></td><td align="left">免注册、支持下载、支持无损下载。👍</td></tr><tr><td align="left">🌐 <a href="https://v2.mp3paw.link/">MP3Paw</a></td><td align="left">免注册、支持下载、内容来自 U2B。👍</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>国内应用</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://mu-jie.cc/musicBox/">昔枫音乐盒</a></td><td align="left">免注册、支持下载、支持歌单。</td></tr><tr><td align="left">🌐 <a href="https://zz123.com/">zz123音乐</a></td><td align="left">免注册、支持下载、支持歌单。</td></tr><tr><td align="left">🌐 <a href="https://tonzhon.com/">钟铜</a></td><td align="left">免注册、支持下载、支持歌单。</td></tr><tr><td align="left">🌐 <a href="https://bailemi.com/dance">百乐米</a></td><td align="left">免注册、支持下载、支持歌单。</td></tr><tr><td align="left">🌐 <a href="https://www.gequbao.com/">歌曲宝</a></td><td align="left">免注册、支持下载、支持歌词。</td></tr><tr><td align="left">🌐 <a href="https://www.fangpi.net/">放屁网</a></td><td align="left">免注册、支持下载、支持歌词。</td></tr><tr><td align="left">🌐 <a href="https://music.dogged.cn/">顽狗音乐</a></td><td align="left">免注册、支持下载、支持歌词。</td></tr><tr><td align="left">🌐 <a href="https://tool.liumingye.cn/music/#/">Liumingye</a></td><td align="left">免注册、支持下载、支持歌词。</td></tr><tr><td align="left">🌐 <a href="https://www.musicenc.com/">MusicEnc</a></td><td align="left">免注册、支持下载、支持歌词，但不支持版权音乐。</td></tr><tr><td align="left">🌐 <a href="https://www.shiyinren.com/">拾音人</a></td><td align="left">免注册、支持下载、支持 MTV 下载，支持无损音质下载。</td></tr></tbody></table><h2 id="2、听歌应用"><a href="#2、听歌应用" class="headerlink" title="2、听歌应用"></a>2、听歌应用</h2><p>桌面端听歌，可以选择<strong>洛雪音乐助手</strong>。</p><p>它是一款<strong>高颜值的第三方音乐播放软件</strong>，基于 Electron + Vue 开发，是 GitHub 上的开源音乐搜索软件。</p><p>支持在线搜索和收听，下载功能需要在“<strong>设置</strong>”里手动开启。</p><p>官网地址：<a href="https://lxmusic.toside.cn/">https://lxmusic.toside.cn/</a></p><p>项目地址：<a href="https://github.com/lyswhut/lx-music-desktop">https://github.com/lyswhut/lx-music-desktop</a></p><p><strong>桌面端</strong>：支持 Windows、Mac、Linux。下载：[<a href="https://github.com/lyswhut/lx-music-desktop/releases">GitHub 下载</a>]、[<a href="https://www.lanzoui.com/b0bf2cfa">网盘下载</a>]、密码：glqw</p><p><strong>手机端</strong>：支持 安卓，不支持 iOS。下载：[<a href="https://github.com/lyswhut/lx-music-mobile/releases">GitHub 下载</a>]、[<a href="https://www.lanzoui.com/b0bf2cfa">网盘下载</a>]、密码：glqw</p><p><strong>浏览器</strong>：可配合脚本一键调用播放，地址：<a href="https://greasyfork.org/zh-CN/scripts/438148">https://greasyfork.org/zh-CN/scripts/438148</a></p><table><thead><tr><th align="left">▼ <strong>桌面应用</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">📥 <a href="https://github.com/lyswhut/lx-music-desktop">洛雪音乐</a></td><td align="left">音乐搜索软件，支持版权音乐，支持 Windows、Mac、Linux</td></tr><tr><td align="left">📜 <a href="https://greasyfork.org/zh-CN/scripts/438148">洛雪音乐脚本</a></td><td align="left">从网页端一键调用洛雪音乐来播放“<strong>灰色</strong>”音乐</td></tr><tr><td align="left">📥 <a href="https://listen1.github.io/listen1/">Listen1</a></td><td align="left">多平台聚合音乐播放软，支持 Win、Mac、Linux</td></tr><tr><td align="left">📥 <a href="https://cider.sh/">Cider</a></td><td align="left">Apple Music 第三方客户端，支持 Win、Mac、Linux</td></tr><tr><td align="left">📥 <a href="https://github.com/qier222/YesPlayMusic">YesPlayMusic</a></td><td align="left">高颜值第三方网易云播放器，支持 Win、Mac、Linux</td></tr><tr><td align="left">📥 <a href="https://423down.lanzouo.com/iAYaX0nd8icf">酷我音乐 PC 版</a></td><td align="left">酷我音乐 PC 去广告豪华版，由 423Down 维护。<a href="https://423down.lanzouo.com/iAYaX0nd8icf">🪟</a></td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>手机应用</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">📥 <a href="https://www.kuwo.cn/">酷我音乐 APP</a></td><td align="left">酷我音乐 APP 豪华版，由 423Down 维护，仅支持安卓。<a href="https://www.lanzouo.com/b0f3nm6rc">🤖</a></td></tr><tr><td align="left">📥 <a href="https://github.com/lyswhut/lx-music-mobile">洛雪音乐 APP</a></td><td align="left">音乐搜索软件，支持版权音乐，仅支持安卓。<a href="https://www.lanzouy.com/b07pq1lja">🤖</a></td></tr><tr><td align="left">📥 <a href="https://mu-jie.cc/musicBox/">昔枫音乐盒</a></td><td align="left">音乐搜索软件，支持版权音乐，仅支持安卓。<a href="https://www.lanzouy.com/b07pq1lja">🤖</a></td></tr></tbody></table><h2 id="3、浏览器扩展"><a href="#3、浏览器扩展" class="headerlink" title="3、浏览器扩展"></a>3、浏览器扩展</h2><table><thead><tr><th align="left">▼ <strong>音乐扩展</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🔷 音乐收听</td><td align="left"><a href="https://listen1.github.io/listen1/">Listen 1</a>，聚合网易云音乐、QQ音乐、酷狗等网站的歌曲。👍 <a href="https://github.com/windmiles/listen1_firefox_extension/releases">🟠</a> <a href="https://chrome.google.com/webstore/detail/listen-1/indecfegkejajpaipjipfkkbedgaodbp">🟢</a> <a href="https://microsoftedge.microsoft.com/addons/detail/listen-1/hneiglcmpeedblkmbndhfbeahcpjojjg">🔵</a></td></tr><tr><td align="left">🔷 广播收听</td><td align="left"><a href="https://chrome.google.com/webstore/detail/search-to-play-the-song/anfmgjkkbagjfdejhbjdiapgkbhpigpm?hl=zh-CN">Search to Play the Song</a>，可以说是 Listen 1的简洁版，还能听广播。<a href="https://chrome.google.com/webstore/detail/search-to-play-the-song/anfmgjkkbagjfdejhbjdiapgkbhpigpm">🟢</a></td></tr><tr><td align="left">📜 歌词展示</td><td align="left">脚本 <a href="https://greasyfork.org/zh-CN/scripts/386259">U2B Genius Lyrics</a> 更好，支持显示播放音乐的歌词。<a href="https://greasyfork.org/zh-CN/scripts/386259">📜</a>（<a href="https://robwu.nl/lyricshere/">扩展方案</a>）</td></tr><tr><td align="left">🔷 歌曲识别¹</td><td align="left"><a href="https://www.aha-music.com/">AHA Music</a>，识别当前浏览器播放中的歌曲，还支持本地音乐。<a href="https://addons.mozilla.org/zh-CN/firefox/addon/song-identifier/?src=search">🟠</a> <a href="https://chrome.google.com/webstore/detail/aha-music-music-identifie/dpacanjfikmhoddligfbehkpomnbgblf">🟢</a> <a href="https://microsoftedge.microsoft.com/addons/detail/aha-music-music-identif/ejfccgmelcclnoadalcepdmnpgcnglfc">🔵</a></td></tr><tr><td align="left">🔷 歌曲识别²</td><td align="left"><a href="https://chrome.google.com/webstore/detail/%E4%BA%91%E9%9F%B3%E4%B9%90%E5%90%AC%E6%AD%8C/kemcalcncfhmdkgglekijclbomdoohkp">云音乐听歌</a>，网易云音乐官方出品的歌曲识别工具。️<a href="https://chrome.google.com/webstore/detail/%E4%BA%91%E9%9F%B3%E4%B9%90%E5%90%AC%E6%AD%8C/kemcalcncfhmdkgglekijclbomdoohkp">🟢</a></td></tr><tr><td align="left">🔷 音量增强</td><td align="left"><a href="https://www.petasittek.com/">Volume Master</a>，简单可靠的音量增强器，最高 **600%**。<a href="https://addons.mozilla.org/zh-CN/firefox/addon/600-sound-volume/">🟠</a> <a href="https://chrome.google.com/webstore/detail/volume-master/jghecgabfgfdldnmbfkhmffcabddioke">🟢</a></td></tr><tr><td align="left">🔷 文本阅读</td><td align="left"><a href="https://readaloud.app/">Read Aloud</a>，朗读网页内容，同时支持微软和谷歌的语音库。<a href="https://addons.mozilla.org/zh-CN/firefox/addon/read-aloud/">🟠</a> <a href="https://chrome.google.com/webstore/detail/read-aloud-a-text-to-spee/hdhinadidafjejdhmfkjgnolgimiaplp">🟢</a> <a href="https://microsoftedge.microsoft.com/addons/detail/read-aloud-%E6%96%87%E6%9C%AC%E8%AF%AD%E9%9F%B3%E6%9C%97%E8%AF%BB%E5%8A%A9%E7%90%86/pnfonnnmfjnpfgagnklfaccicnnjcdkm">🔵</a></td></tr><tr><td align="left">📜 音频下载</td><td align="left">脚本 <a href="https://greasyfork.org/zh-CN/scripts/382057">音视频通用下载器</a>，点击页面右边按钮打开菜单下载。<a href="https://greasyfork.org/zh-CN/scripts/382057">📜</a>（<a href="https://mediasave.ru/en/">扩展方案</a>）</td></tr></tbody></table><h2 id="4、网易云音乐"><a href="#4、网易云音乐" class="headerlink" title="4、网易云音乐"></a>4、网易云音乐</h2><p>不得不承认，听歌应用也是存在“<strong>鄙视链</strong>”的。</p><p>除了 Apple Music，网易云音乐可以说是听歌应用里的“<strong>新浪微博</strong>”，很多原创歌手都在“<strong>云村</strong>”里集合。</p><p>因此，网易云音乐是很多人听歌的<strong>第一选择</strong>。</p><p><strong>4.1、BetterNCM</strong></p><p>但网易云音乐客户端，并是怎么好用。</p><p>因此，有一个叫 <strong>BetterNCM</strong> 的增强插件诞生了，它可以通过自定义插件，为网易云音乐实现各类新功能。</p><p>主要包括“<strong>扩展</strong>”和“<strong>主题</strong>”两个部分，与浏览器的使用方法类似。</p><p>项目主页：<a href="https://github.com/MicroCBer/BetterNCM">https://github.com/MicroCBer/BetterNCM</a></p><p>一键安装：<a href="https://github.com/MicroCBer/BetterNCM-Installer">https://github.com/MicroCBer/BetterNCM-Installer</a></p><p>使用文档：<a href="https://v2e2npdz15.feishu.cn/docx/UZkSd9d46o4fVOxaPNBcGXSenme">https://v2e2npdz15.feishu.cn/docx/UZkSd9d46o4fVOxaPNBcGXSenme</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax2.sinaimg.cn/large/7a6a15d5gy1hho9q029pxj22801e0npe.jpg" alt="S17_BetterNCM"></p><p><strong>4.2、Go Musicfox</strong></p><p>如果你不想要那么多<strong>花里胡哨</strong>的功能，就想单纯的听歌。</p><p>使用 Go 语言编写的网易音乐“<strong>命令行</strong>”客户端 <strong>Go Musicfox</strong> 是一个不错的选择。</p><p>支持 Windows 、Mac 、Linux。</p><p>它可以通过命令行的方式实现登录、播放、下载、搜索、歌词、Last.fm、签到等功能。</p><p>按快捷键 <strong>D</strong> 就是下载前当播放的音乐。</p><p>下载地址：<a href="https://github.com/go-musicfox/go-musicfox/releases">https://github.com/go-musicfox/go-musicfox/releases</a></p><p>代理下载：<a href="https://githubfast.com/go-musicfox/go-musicfox/releases">https://githubfast.com/go-musicfox/go-musicfox/releases</a></p><p><img src="https://image.baidu.com/search/down?url=https://tvax1.sinaimg.cn/large/7a6a15d5gy1hho9q0gci7j21uo18aqei.jpg" alt="S17_MusicFox"></p><p><strong>4.3、UnblockNeteaseMusic</strong></p><p>但一些歌曲，由于版权被买断，导致网易云音乐曲库少，因为很多音乐都没办法听。</p><p>插件 <a href="https://github.com/nondanee/UnblockNeteaseMusic">UnblockNeteaseMusic</a>，则可以自动使用各类音源替换变灰歌曲链接，包括 QQ &#x2F; 酷狗 &#x2F; 酷我 等音源。</p><p>使用方法一：<strong>BetterNCM 插件</strong></p><p>项目地址：<a href="https://github.com/nondanee/UnblockNeteaseMusic">https://github.com/nondanee/UnblockNeteaseMusic</a></p><p>一键安装：<a href="https://github.com/ReviveUnblockNCMInstaller/RevivedUnblockInstaller">https://github.com/ReviveUnblockNCMInstaller/RevivedUnblockInstaller</a></p><p>使用方法二：<strong>独立安装包</strong></p><p>独立插件包一键安装，可参考 52pojie 论坛文章：<a href="https://www.52pojie.cn/thread-1664098-1-1.html">https://www.52pojie.cn/thread-1664098-1-1.html</a></p><h2 id="5、本地播放器"><a href="#5、本地播放器" class="headerlink" title="5、本地播放器"></a>5、本地播放器</h2><table><thead><tr><th align="left"><strong>▼ Win 播放器</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">📥 <a href="https://github.com/clsid2/mpc-hc">MPC-HC</a></td><td align="left">纯碎的、小巧的、极致快速的音乐播放器，MPC-HC 的 Fork 版本。</td></tr><tr><td align="left">📥 <a href="https://github.com/Aleksoid1978/MPC-BE">MPC-BE</a></td><td align="left">纯碎的、小巧的、极致快速的的音乐播放器，MPC-HC 的 BE 版本。</td></tr><tr><td align="left">📥 <a href="https://www.foobar2000.org/">Foobar2000</a></td><td align="left">插件丰富，支持高度定制化的音乐播放器，推荐配置 <a href="https://github.com/dream7180/foobox-cn">Foobox</a>。</td></tr><tr><td align="left">📥 <a href="https://www.videolan.org/index.zh.html">VLC</a></td><td align="left">开源的多媒体播放器，支持几乎所有音视频格式，全平台支持。</td></tr><tr><td align="left">📥 <a href="http://www.aimp.ru/">AIMP</a></td><td align="left">来自俄罗斯的一款多媒体播放器（非开源），支持 Win、安卓。</td></tr><tr><td align="left">📥 <a href="https://www.winamp.com/">Winamp</a></td><td align="left">化石级播放器，现已重新回归，并拥有了全新的设计，仅支持 Windows。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>Mac 播放器</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">📥 <a href="https://iina.io/">IINA</a></td><td align="left">可能是 Mac 最受欢迎的多媒体播放器，开源免费，简洁美观。</td></tr><tr><td align="left">📥 <a href="https://www.foobar2000.org/">Foobar2000</a></td><td align="left">支持高度定制化的音乐播放器，现在也支持 Mac 版本了。</td></tr><tr><td align="left">📥 <a href="https://github.com/ddddxxx/LyricsX">LyricsX</a></td><td align="left">Mac 下的歌词辅助工具，支持搜索和滚动显示歌词，支持本地任何播放器。</td></tr></tbody></table><h2 id="6、无损音乐"><a href="#6、无损音乐" class="headerlink" title="6、无损音乐"></a>6、无损音乐</h2><p>下面的这些网站免费并提供了下载，但部分需要注册、或者关注公众号才能下载。</p><table><thead><tr><th align="left">▼ <strong>无损音乐</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://free-mp3-download.net/">Free MP3 Down</a></td><td align="left">免登陆、三种格式 👍</td></tr><tr><td align="left">🌐 <a href="https://xiageba.com/">下歌吧</a></td><td align="left">免登陆、网盘下载 👍</td></tr><tr><td align="left">🌐 <a href="https://www.xmwav.com/">熊猫无损音乐</a></td><td align="left">免登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="http://www.23ape.net/">23ape.net</a></td><td align="left">免登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://tieba.baidu.com/f?kw=%E6%97%A0%E6%8D%9F%E9%9F%B3%E4%B9%90">无损音乐吧</a></td><td align="left">免登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://mp3bst.com/">MP3BST</a></td><td align="left">免登陆、城通网盘下载</td></tr><tr><td align="left">🌐 <a href="http://www.52wusun.com/">我爱无损音乐网</a></td><td align="left">免登陆、城通网盘下载</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>无损音乐（登陆）</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://www.hifini.com/">HiFiNi</a></td><td align="left">要登陆、网盘下载。（需要注册，登陆后即可无限制使用。）</td></tr><tr><td align="left">🌐 <a href="https://www.cdbao.net/">CD包音乐网</a></td><td align="left">要登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://wusunyinyue.cn/">无损音乐网</a></td><td align="left">要登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="http://www.ape-flac.com/">无损音乐</a></td><td align="left">要登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://sacdr.net/">易音</a></td><td align="left">要登陆、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://www.onelai.cn/">万籁音乐</a></td><td align="left">要关注公众号、网盘下载</td></tr><tr><td align="left">🌐 <a href="https://www.xlebbs.com/">享乐音乐论坛</a></td><td align="left">要登陆、网盘下载、部分收费</td></tr><tr><td align="left">🌐 <a href="https://www.dtshot.com/">DTshot</a></td><td align="left">要登陆、网盘下载、部分收费</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>无损资源</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">📥 资源 1</td><td align="left">🔗 <a href="https://www.aliyundrive.com/s/fTHhCLg1J3W">洛雪音乐 200T 音乐大合集</a>、🔗 <a href="https://www.aliyundrive.com/s/xymEytGyymx/folder/6190bd57c147df52764f45f2b7d0157a2c95c220">2 万首音乐 MTV</a></td></tr><tr><td align="left">📥 资源 2</td><td align="left">🔗 <a href="https://pan.quark.cn/s/f98de583cff9#/list/share">美国 Billboard Top100</a>、🔗 <a href="https://www.aliyundrive.com/s/7yE49zBCHr8">老歌珍藏 一人一首成名曲</a></td></tr><tr><td align="left">📥 资源 3</td><td align="left">🔗 <a href="https://cloud.189.cn/web/share?code=Jj2MravyQ7fe">豆瓣音乐Top250无损音乐</a>、🔗 <a href="https://www.aliyundrive.com/s/kT6accQfFow">700G 无损音乐</a></td></tr><tr><td align="left">📥 资源 4</td><td align="left">🔗 <a href="https://www.aliyundrive.com/s/QNnwcyZJrTK">世界名曲 6CD</a>、🔗 <a href="https://www.aliyundrive.com/s/Xyobrwvm7K1">班得瑞全14张专辑</a></td></tr><tr><td align="left">📥 资源 5</td><td align="left">🔗 <a href="https://www.aliyundrive.com/s/yK1tK7Y38mL">中国戏曲大全mp3格式</a></td></tr><tr><td align="left">📥 资源 6</td><td align="left">🔗 <a href="https://lvyueyang.github.io/web-music/">周杰伦所有音乐在线听</a>、🔗 <a href="https://www.aliyundrive.com/s/VEoHM3CQrzy">周杰伦张专辑无损珍藏版</a></td></tr><tr><td align="left">📥 资源 7</td><td align="left">🔗 <a href="https://www.aliyundrive.com/s/Pkjzg69LXiG">邓丽君195首无损</a>、🔗 <a href="https://www.aliyundrive.com/s/GYs3v6pg7N7">久石让 51张专辑无损</a></td></tr></tbody></table><h2 id="7、白噪音"><a href="#7、白噪音" class="headerlink" title="7、白噪音"></a>7、白噪音</h2><table><thead><tr><th align="left">▼ <strong>白噪音</strong></th><th align="left"><strong>简介</strong></th></tr></thead><tbody><tr><td align="left">🌐 <a href="https://raining.fm/">Raining FM</a></td><td align="left">下雨音效。</td></tr><tr><td align="left">🌐 <a href="https://rainyscope.com/">Rainyscope</a></td><td align="left">下雨音效。</td></tr><tr><td align="left">🌐 <a href="https://www.rainymood.com/">Rainy Mood</a></td><td align="left">下雨音效。</td></tr><tr><td align="left">🌐 <a href="https://www.tree.fm/">Tree.FM</a></td><td align="left">森林音效。</td></tr><tr><td align="left">🌐 <a href="https://earth.fm/">Earth.FM</a></td><td align="left">森林音效，各地风景都有。</td></tr><tr><td align="left">🌐 <a href="https://virtocean.com/#">Virtual Ocean</a></td><td align="left">海洋音效，可自定义混合。</td></tr><tr><td align="left">🌐 <a href="https://defonic.com/">Defonic</a></td><td align="left">自然音效，可自定义混合。</td></tr><tr><td align="left">🌐 <a href="https://asoftmurmur.com/">A Soft Murmur</a></td><td align="left">自然音效，可自定义混合。</td></tr><tr><td align="left">🌐 <a href="https://www.noisli.com/">Noisli</a></td><td align="left">自然音效，可自定义混合，需要登陆使用。</td></tr><tr><td align="left">🌐 <a href="https://music.163.com/#/artist?id=22095">NSSJP</a></td><td align="left">自然音效，网易云音乐播放，日本自然之声协会出品。</td></tr><tr><td align="left">📥 <a href="https://github.com/jenius-apps/ambie">Ambie</a></td><td align="left">自然音效，一款播放自然声音的应用程序，仅支持 Windows。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>场景音效</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://soundofcolleagues.com/">SoundColleague</a></td><td align="left">大学教室场景。</td></tr><tr><td align="left">🌐 <a href="https://imisstheoffice.eu/">IMissTheOffice</a></td><td align="left">办公室场景。</td></tr><tr><td align="left">🌐 <a href="https://coffitivity.com/">Coffitivity</a></td><td align="left">咖啡馆场景。</td></tr><tr><td align="left">🌐 <a href="http://imissmybar.com/">I Miss My Bar</a></td><td align="left">酒吧场景。</td></tr><tr><td align="left">🌐 <a href="https://www.window-swap.com/">WindowSwap</a></td><td align="left">窗外场景，需要登陆使用。</td></tr><tr><td align="left">🌐 <a href="https://www.thisisathing.io/">This is a thing</a></td><td align="left">冥想音效。</td></tr><tr><td align="left">🌐 <a href="https://www.calm.com/">Calm</a></td><td align="left">冥想和睡眠音效，但只有“<a href="https://www.calm.com/app/scenes">白噪音</a>”是免费的，需要登陆使用。</td></tr><tr><td align="left">🌐 <a href="https://app.lofi.co/">Lofi.co</a></td><td align="left">生产力音效，提供各种高质量场景，但免费只能用 2 个。</td></tr><tr><td align="left">🌐 <a href="https://tide.fm/zh_CN/">潮汐</a></td><td align="left">主打自然，场景，环境音乐，冥想音乐等综合性网站，支持 APP 和扩展。</td></tr><tr><td align="left">🌐 <a href="https://www.ppbzy.com/">泡泡白噪音</a></td><td align="left">主打场景白噪音，可自定义混合。</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">▼ <strong>环境音乐</strong></td><td align="left"><strong>简介</strong></td></tr><tr><td align="left">🌐 <a href="https://mynoise.net/">myNoise</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://kaizenflow.co/">Kaizen Flow</a></td><td align="left">工作音效，同时支持“番茄时钟”。</td></tr><tr><td align="left">🌐 <a href="https://www.lofly.site/">Lofly</a></td><td align="left">环境音乐+白噪音，可自定义混合，同时支持“番茄时钟”，<strong>需要魔法</strong>。</td></tr><tr><td align="left">🌐 <a href="https://melofi.app/">Melofi</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://soundscape.world/">Soundscape</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://www.lavaradio.com/milieumusic">LavaRadio</a></td><td align="left">高品质情景造乐师，使用<a href="https://www.lavaradio.com/shopmusic">客户端</a>（音乐宽带版），功能更齐全。👍</td></tr><tr><td align="left">🌐 <a href="https://www.lofi.cafe/">lofi.cafe</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://www.jazzandrain.com/">JazzAndRain</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://ambicular.com/index.html">Ambicular</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://www.ambient-mixer.com/">Ambient Mixer</a></td><td align="left">环境音乐。</td></tr><tr><td align="left">🌐 <a href="https://www.loungev.com/">Lounge V Studio</a></td><td align="left">放松音乐+自然音效，还有 4K 超清视频，这是它的 <a href="https://www.youtube.com/@LoungeVstudio/videos">U2B 频道</a>。👍</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;音乐导航&quot;&gt;&lt;a href=&quot;#音乐导航&quot; class=&quot;headerlink&quot; title=&quot;音乐导航&quot;&gt;&lt;/a&gt;音乐导航&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;1、音乐搜索&quot;&gt;&lt;a href=&quot;#1、音乐搜索&quot; class=&quot;headerlink&quot; title=&quot;</summary>
      
    
    
    
    <category term="网站推荐" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="网站" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="音乐" scheme="https://dont-sleep-so-late.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
</feed>
