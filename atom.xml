<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä½ åˆ«ç¡è¿™ä¹ˆæ™šï¼</title>
  
  <subtitle>æˆ‘æœ‰ä¸€åªå°å…”å…”ğŸ‡</subtitle>
  <link href="https://dont-sleep-so-late.github.io/atom.xml" rel="self"/>
  
  <link href="https://dont-sleep-so-late.github.io/"/>
  <updated>2024-03-10T06:03:12.666Z</updated>
  <id>https://dont-sleep-so-late.github.io/</id>
  
  <author>
    <name>ä½ åˆ«ç¡è¿™ä¹ˆæ™š</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vueé‡åˆ°çš„é—®é¢˜</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/10/Vue/vue%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/10/Vue/vue%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2024-03-10T01:17:15.000Z</published>
    <updated>2024-03-10T06:03:12.666Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined"><a href="#vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined" class="headerlink" title="vue router é…ç½® component æŠ¥é”™ TypeError: Cannot use â€˜inâ€™ operator to search for â€˜catchâ€™ in undefined"></a>vue router é…ç½® component æŠ¥é”™ TypeError: Cannot use â€˜inâ€™ operator to search for â€˜catchâ€™ in undefined</h1><h3 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h3><p>åœ¨é…ç½®è·¯ç”±æ–‡ä»¶æ—¶ï¼Œå¼€å§‹æ—¶componentä¸å°å¿ƒå†™æˆä¸‹é¢çš„æ ¼å¼</p><p><img src="https://img2024.cnblogs.com/blog/1857566/202401/1857566-20240125155043394-2094770230.png" alt="image"><br>æ‰“å¼€é¡µé¢æ§åˆ¶å°æŠ¥é”™å¦‚ä¸‹<br><img src="https://img2024.cnblogs.com/blog/1857566/202401/1857566-20240125155259068-1305464985.png" alt="image"></p><h3 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¼•å…¥ç»„ä»¶çš„ç®­å¤´å‡½æ•°å¿˜è®°å†™è¿”å›ã€‚ã€‚<br><img src="https://img2024.cnblogs.com/blog/1857566/202401/1857566-20240125155440938-641076154.png" alt="image"><br>æˆ–è€…å†™æˆä¸€è¡Œ<br><img src="https://img2024.cnblogs.com/blog/1857566/202401/1857566-20240125155334913-156267822.png" alt="image"></p><blockquote><p>ç›¸å½“ä½çº§çš„é”™è¯¯ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined&quot;&gt;&lt;a href=&quot;#vue-router-é…ç½®-component-</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Vue3 å°è£…ä¸€äº›æœ‰ç”¨çš„ç»„åˆ API</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/09/Vue/%E4%BD%BF%E7%94%A8%20Vue3%20%E5%B0%81%E8%A3%85%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E7%BB%84%E5%90%88%20API/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/09/Vue/%E4%BD%BF%E7%94%A8%20Vue3%20%E5%B0%81%E8%A3%85%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E7%BB%84%E5%90%88%20API/</id>
    <published>2024-03-09T08:20:15.000Z</published>
    <updated>2024-03-10T06:02:57.482Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Vue3æ¥å°è£…ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„ç»„åˆAPIï¼Œä¸»è¦åŒ…æ‹¬èƒŒæ™¯ã€å®ç°æ€è·¯ä»¥åŠä¸€äº›æ€è€ƒã€‚</p><p>å°±æˆ‘è‡ªå·±çš„æ„Ÿè§‰è€Œè¨€ï¼Œ<code>Hook</code>ä¸<code>Composition API</code>æ¦‚å¿µæ˜¯å¾ˆç±»ä¼¼çš„ï¼Œäº‹å®ä¸Šåœ¨Reactå¤§éƒ¨åˆ†å¯ç”¨çš„Hookéƒ½å¯ä»¥ä½¿ç”¨Vue3å†å®ç°ä¸€éã€‚</p><p>ä¸ºäº†æ‹¼å†™æ–¹ä¾¿ï¼Œä¸‹æ–‡å†…å®¹å‡ä½¿ç”¨Hookä»£æ›¿<code>Composition API</code>ã€‚</p><h2 id="useRequest"><a href="#useRequest" class="headerlink" title="useRequest"></a>useRequest</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä½¿ç”¨hookæ¥å°è£…ä¸€ç»„æ•°æ®çš„æ“ä½œæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„<code>useBook</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchBookList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useBook</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = <span class="title function_">ref</span>([])</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchBookList</span>(&#123;<span class="attr">page</span>: <span class="number">1</span>&#125;)</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        list.<span class="property">value</span> = data</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getList</span>()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        list,</span><br><span class="line">        loading,</span><br><span class="line">        getList</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å°è£…äº†è·å–èµ„æºã€å¤„ç†åŠ è½½çŠ¶æ€ç­‰é€»è¾‘ï¼Œçœ‹èµ·æ¥è²Œä¼¼èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†</p><p>ç¼ºç‚¹åœ¨äºå¯¹åº”å¦å¤–ä¸€ä¸ªèµ„æºè€Œè¨€ï¼Œæˆ‘ä»¬è²Œä¼¼è¿˜éœ€è¦å†™ç±»ä¼¼çš„æ¨¡æ¿ä»£ç ï¼Œå› æ­¤å¯ä»¥å°†è¿™ä¸€å †ä»£ç è¿›è¡ŒæŠ½è±¡ï¼Œå°è£…æˆ<code>useApi</code>æ–¹æ³•</p><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useApi</span>(<span class="params">api</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> error = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fetchResource</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">api</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æŒ‰ç…§çº¦å®šï¼Œapiè¿”å›çš„ç»“æœç›´æ¥å¤åˆ¶ç»™result</span></span><br><span class="line">            result.<span class="property">value</span> = data</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            error.<span class="property">value</span> = e</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        result,</span><br><span class="line">        fetchResource</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ä¸Šé¢çš„<code>useBook</code>æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useBook2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;loading, error, result, fetchResource,&#125; = <span class="title function_">useApi</span>(fetchBookList)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">fetchResource</span>(&#123;<span class="attr">page</span>: <span class="number">1</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        <span class="attr">list</span>: result</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„æ–¹æ³•ï¼Œå‡è®¾ç°åœ¨éœ€æ±‚å°è£…å…¶ä»–çš„è¯·æ±‚ï¼Œå¤„ç†èµ·æ¥ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä¸éœ€è¦å†ä¸€ééåœ°å¤„ç†loadingå’Œerrorç­‰æ ‡å¿—é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchUserList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> payload = &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">                <span class="attr">data</span>: [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>],</span><br><span class="line">                <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">resolve</span>(payload)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;loading, error, result, fetchResource,&#125; = <span class="title function_">useApi</span>(<span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å°è£…è¯·æ±‚è¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetchUserList</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>å¤„ç†ç½‘ç»œè¯·æ±‚æ˜¯å‰ç«¯å·¥ä½œä¸­ååˆ†å¸¸è§çš„é—®é¢˜ï¼Œå¤„ç†ä¸Šé¢åˆ—ä¸¾åˆ°çš„åŠ è½½ã€é”™è¯¯å¤„ç†ç­‰ï¼Œè¿˜å¯ä»¥åŒ…å«å»æŠ–ã€èŠ‚æµã€è½®è¯¢ç­‰å„ç§æƒ…å†µï¼Œè¿˜æœ‰ç¦»å¼€é¡µé¢æ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥åœ¨<code>useRequest</code>ä¸­è¿›ä¸€æ­¥å°è£…çš„</p><h2 id="useEventBus"><a href="#useEventBus" class="headerlink" title="useEventBus"></a>useEventBus</h2><p>EventBusåœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œäº‹ä»¶é€šçŸ¥çš„åœºæ™¯ä¸‹è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ï¼Œé€šè¿‡ç›‘å¬äº‹ä»¶å’Œè§¦å‘äº‹ä»¶ï¼Œå¯ä»¥åœ¨è®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´è§£è€¦ï¼Œå®ç°ä¸€ä¸ªå¸¸è§„çš„eventBusä¹Ÿæ¯”è¾ƒç®€å•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventBus</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">on</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!handlers) &#123;</span><br><span class="line">            handlers = []</span><br><span class="line">        &#125;</span><br><span class="line">        handlers.<span class="title function_">push</span>(cb)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">off</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!handlers) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">            <span class="keyword">const</span> idx = handlers.<span class="title function_">indexOf</span>(cb)</span><br><span class="line">            idx &gt; -<span class="number">1</span> &amp;&amp; handlers.<span class="title function_">splice</span>(idx, <span class="number">1</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">delete</span>(key)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">once</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = [<span class="function">(<span class="params">payload</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">cb</span>(payload)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">off</span>(key)</span><br><span class="line">        &#125;]</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">emit</span>(<span class="params">key, payload</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(handlers)) <span class="keyword">return</span></span><br><span class="line">        handlers.<span class="title function_">forEach</span>(<span class="function"><span class="params">handler</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">handler</span>(payload)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ç›‘å¬äº‹ä»¶ï¼Œåœ¨äº¤äº’æ—¶è§¦å‘äº‹ä»¶ï¼Œè¿™äº›æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ï¼›ä½†å¾ˆå®¹æ˜“è¢«é—å¿˜çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆäº‹ä»¶æ³¨å†Œï¼Œé‡Šæ”¾ç›¸å…³çš„èµ„æºã€‚</p><p>å› æ­¤å¯ä»¥å°è£…ä¸€ä¸ª<code>useEventBus</code>æ¥å£ï¼Œç»Ÿä¸€å¤„ç†è¿™äº›é€»è¾‘</p><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>æ—¢ç„¶è¦åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆæ³¨å†Œçš„ç›¸å…³äº‹ä»¶ï¼Œç®€å•çš„å®ç°æ€è·¯æ˜¯ï¼šåªè¦åœ¨æ³¨å†Œæ—¶(<code>on</code>å’Œ<code>once</code>)æ”¶é›†ç›¸å…³çš„äº‹ä»¶å’Œå¤„ç†å‡½æ•°ï¼Œç„¶ååœ¨<code>onUnmounted</code>çš„æ—¶å€™å–æ¶ˆ(<code>off</code>)æ”¶é›†åˆ°çš„è¿™äº›äº‹ä»¶å³å¯</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥åŠ«æŒäº‹ä»¶æ³¨å†Œçš„æ–¹æ³•ï¼ŒåŒæ—¶é¢å¤–åˆ›å»ºä¸€ä¸ª<code>eventMap</code>ç”¨äºæ”¶é›†ä½¿ç”¨å½“å‰æ¥å£æ³¨å†Œçš„äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶æ€»çº¿ï¼Œå…¨å±€å•ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="keyword">new</span> <span class="title class_">EventBus</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useEventBus</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> instance = &#123;</span><br><span class="line">        <span class="attr">eventMap</span>: <span class="keyword">new</span> <span class="title class_">Map</span>(),</span><br><span class="line">        <span class="comment">// å¤ç”¨eventBusäº‹ä»¶æ”¶é›†ç›¸å…³é€»è¾‘</span></span><br><span class="line">        <span class="attr">on</span>: bus.<span class="property">on</span>,</span><br><span class="line">        <span class="attr">once</span>: bus.<span class="property">once</span>,</span><br><span class="line">        <span class="comment">// æ¸…ç©ºeventMap</span></span><br><span class="line">        <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">list, key</span>) =&gt;</span> &#123;</span><br><span class="line">                list.<span class="title function_">forEach</span>(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">                    bus.<span class="title function_">off</span>(key, cb)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">            eventMap.<span class="title function_">clear</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> eventMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    <span class="comment">// åŠ«æŒä¸¤ä¸ªç›‘å¬æ–¹æ³•ï¼Œæ”¶é›†å½“å‰ç»„ä»¶å¯¹åº”çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">on</span> = (<span class="params">key, cb</span>) =&gt; &#123;</span><br><span class="line">        instance.<span class="title function_">on</span>(key, cb)</span><br><span class="line">        bus.<span class="title function_">on</span>(key, cb)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">once</span> = (<span class="params">key, cb</span>) =&gt; &#123;</span><br><span class="line">        instance.<span class="title function_">once</span>(key, cb)</span><br><span class="line">        bus.<span class="title function_">once</span>(key, cb)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆç›¸å…³çš„äº‹ä»¶</span></span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        instance.<span class="title function_">clear</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        on,</span><br><span class="line">        once,</span><br><span class="line">        <span class="attr">off</span>: bus.<span class="property">off</span>.<span class="title function_">bind</span>(bus),</span><br><span class="line">        <span class="attr">emit</span>: bus.<span class="property">emit</span>.<span class="title function_">bind</span>(bus)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“ç»„ä»·å¸è½½æ—¶ä¹Ÿä¼šé€šè¿‡<code>instance.clear</code>ç§»é™¤è¯¥ç»„ä»¶æ³¨å†Œçš„ç›¸å…³äº‹ä»¶ï¼Œæ¯”èµ·æ‰‹åŠ¨åœ¨æ¯ä¸ªç»„ä»¶<code>onUnmounted</code>æ—¶æ‰‹åŠ¨å–æ¶ˆè¦æ–¹ä¾¿å¾ˆå¤šã€‚</p><h3 id="æ€è€ƒ-1"><a href="#æ€è€ƒ-1" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>è¿™ä¸ªæ€è·¯å¯ä»¥è¿ç”¨åœ¨å¾ˆå¤šéœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œæ¸…ç†æ“ä½œçš„é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p><ul><li>DOMäº‹ä»¶æ³¨å†Œ<code>addEventListener</code>å’Œ<code>removeEventListener</code></li><li>è®¡æ—¶å™¨<code>setTimeout</code>å’Œ<code>clearTimeout</code></li><li>ç½‘ç»œè¯·æ±‚<code>request</code>å’Œ<code>abort</code></li></ul><p>ä»è¿™ä¸ªå°è£…ä¹Ÿå¯ä»¥çœ‹è§ç»„åˆAPIä¸€ä¸ªéå¸¸æ˜æ˜¾çš„ä¼˜åŠ¿ï¼šå°½å¯èƒ½åœ°æŠ½è±¡å…¬å…±é€»è¾‘ï¼Œè€Œæ— éœ€å…³æ³¨æ¯ä¸ªç»„ä»¶å…·ä½“çš„ç»†èŠ‚</p><h2 id="useModel"><a href="#useModel" class="headerlink" title="useModel"></a>useModel</h2><h3 id="èƒŒæ™¯-1"><a href="#èƒŒæ™¯-1" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å½“æŒæ¡äº†Hookï¼ˆæˆ–è€…Composition APIï¼‰ä¹‹åï¼Œæ„Ÿè§‰ä¸‡ç‰©çš†å¯hookï¼Œæ€»æ˜¯æƒ³æŠŠæ•°æ®å’Œæ“ä½œè¿™å †æ•°æ®çš„æ–¹æ³•å°è£…åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚ä¸‹é¢çš„è®¡æ•°å™¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        count.<span class="property">value</span>--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        count.<span class="property">value</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        decrement,</span><br><span class="line">        increment</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>useCounter</code>æš´éœ²äº†è·å–å½“å‰æ•°å€¼countã€å¢åŠ æ•°å€¼decrementå’Œå‡å°‘æ•°å€¼incrementç­‰æ•°æ®å’Œæ–¹æ³•ï¼Œç„¶åå°±å¯ä»¥åœ¨å„ä¸ªç»„ä»¶ä¸­æ„‰å¿«åœ°å®ç°è®¡æ•°å™¨äº†</p><p>åœ¨æŸäº›åœºæ™¯ä¸‹æˆ‘ä»¬å¸Œæœ›å¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«åŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç»„ä»¶è‡ªå·±ç‹¬ç«‹çš„è®¡æ•°å™¨ã€‚</p><p>ä¸€ç§æƒ…å†µæ˜¯ä½¿ç”¨è¯¸å¦‚vuexç­‰å…¨å±€çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œç„¶åä¿®æ”¹<code>useCounter</code>çš„å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">            state.<span class="property">count</span> = payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°å®ç°<code>useCounter</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> store.<span class="property">state</span>.<span class="property">count</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;setCount&#x27;</span>, count.<span class="property">value</span> + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;setCount&#x27;</span>, count.<span class="property">value</span> + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        decrement,</span><br><span class="line">        increment</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜¾ç„¶ï¼Œç°åœ¨çš„<code>useCounter2</code>ä»…ä»…åªæ˜¯storeçš„<code>state</code>ä¸<code>mutations</code>çš„å°è£…ï¼Œç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨storeä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œå°è£…å°±å˜å¾—æ„ä¹‰ä¸å¤§ï¼›æ­¤å¤–ï¼Œå¦‚æœå•å•åªæ˜¯ä¸ºäº†è¿™ä¸ªåŠŸèƒ½å°±ä¸ºé¡¹ç›®å¢åŠ äº†vuexä¾èµ–ï¼Œæ˜¾å¾—ååˆ†ç¬¨é‡ã€‚</p><p>åŸºäºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<code>useModel</code>æ¥å®ç°å¤ç”¨æŸä¸ªé’©å­çŠ¶æ€çš„éœ€æ±‚</p><h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>æ•´ä¸ªæ€è·¯ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ªMapæ¥ä¿å­˜æŸä¸ªhookçš„çŠ¶æ€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">WeakMap</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useModel</span>(<span class="params">hook</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!map.<span class="title function_">get</span>(hook)) &#123;</span><br><span class="line">        <span class="keyword">let</span> ans = <span class="title function_">hook</span>()</span><br><span class="line">        map.<span class="title function_">set</span>(hook, ans)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> map.<span class="title function_">get</span>(hook)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååŒ…è£…ä¸€ä¸‹<code>useCounter</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useModel</span>(useCounter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å¤šä¸ªç»„ä»¶è°ƒç”¨</span></span><br><span class="line"><span class="keyword">const</span> &#123;count, decrement, increment&#125; = <span class="title function_">useCounter3</span>()</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> &#123;count, decrement, increment&#125; = <span class="title function_">useCounter3</span>()</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>useCounter3</code>æ—¶ï¼Œéƒ½è¿”å›çš„æ˜¯åŒä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±å®ç°äº†å¤šä¸ªç»„ä»¶ä¹‹é—´çš„hookçŠ¶æ€å…±äº«ã€‚</p><h3 id="æ€è€ƒ-2"><a href="#æ€è€ƒ-2" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p><code>userModel</code>æä¾›äº†ä¸€ç§é™¤<code>vuex</code>å’Œ<code>provide()/inject()</code>ä¹‹å¤–å…±äº«æ•°æ®çŠ¶æ€çš„æ€è·¯ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆçµæ´»çš„ç®¡ç†æ•°æ®ä¸æ“ä½œæ•°æ®çš„æ–¹æ¡ˆï¼Œè€Œæ— éœ€å°†æ‰€æœ‰stateæ”¾åœ¨ä¸€èµ·æˆ–è€…æ¨¡å—ä¸‹é¢ã€‚</p><p>ç¼ºç‚¹åœ¨äºï¼Œå½“ä¸ä½¿ç”¨<code>useModel</code>åŒ…è£…æ—¶ï¼Œ<code>useCounter</code>å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„hookï¼ŒåæœŸç»´æŠ¤è€Œè¨€ï¼Œæˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­æŸä¸ªçŠ¶æ€åˆ°åº•æ˜¯å…¨å±€å…±äº«çš„æ•°æ®è¿˜æ˜¯å±€éƒ¨çš„æ•°æ®ã€‚</p><p>å› æ­¤åœ¨ä½¿ç”¨<code>useModel</code>å¤„ç†hookçš„å…±äº«çŠ¶æ€æ—¶ï¼Œè¿˜è¦è¦æ…é‡è€ƒè™‘ä¸€ä¸‹åˆ°åº•åˆä¸åˆé€‚ã€‚</p><h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><p>reduxçš„æ€æƒ³å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸º</p><ul><li>storeç»´æŠ¤å…¨å±€çš„stateæ•°æ®çŠ¶æ€ï¼Œ</li><li>å„ä¸ªç»„ä»¶å¯ä»¥æŒ‰éœ€ä½¿ç”¨stateä¸­çš„æ•°æ®ï¼Œå¹¶ç›‘å¬stateçš„å˜åŒ–</li><li><code>reducer</code>æ¥æ”¶actionå¹¶è¿”å›æ–°çš„stateï¼Œç»„ä»¶å¯ä»¥é€šè¿‡<code>dispatch</code>ä¼ é€’actionè§¦å‘reducer</li><li>stateæ›´æ–°åï¼Œé€šçŸ¥ç›¸å…³ä¾èµ–æ›´æ–°æ•°æ®</li></ul><p>æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†reduxçš„ä½¿ç”¨hookåŒ–ï¼Œç±»ä¼¼äº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>)&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®actionè¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="comment">// è¿”å›æ–°çš„state</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;state, dispatch&#125; = <span class="title function_">useReducer</span>(reducer, initialState);</span><br></pre></td></tr></table></figure><h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å€ŸåŠ©äºVueçš„æ•°æ®å“åº”ç³»ç»Ÿï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦å®ç°ä»»ä½•å‘å¸ƒå’Œè®¢é˜…é€»è¾‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useReducer</span>(<span class="params">reducer, initialState = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">ref</span>(initialState)</span><br><span class="line">     <span class="comment">// çº¦å®šactionæ ¼å¼ä¸º &#123;type:string, payload: any&#125;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">dispatch</span> = (<span class="params">action</span>) =&gt; &#123;</span><br><span class="line">        state.<span class="property">value</span> = <span class="title function_">reducer</span>(state.<span class="property">value</span>, action)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        state,</span><br><span class="line">        dispatch</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå®ç°ä¸€ä¸ª<code>useRedux</code>è´Ÿè´£ä¼ é€’<code>reducer</code>å’Œ<code>action</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useReducer <span class="keyword">from</span> <span class="string">&#x27;./index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;reset&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> initialState;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useStore</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¸Œæœ›æ˜¯ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„storeï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„<code>useModel</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useRedux</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useModel</span>(useStore);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;dispatch(&#123;type:&#x27;decrement&#x27;&#125;)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; state.count &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;dispatch(&#123;type:&#x27;increment&#x27;&#125;)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;useReducer&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> &#123;state, dispatch&#125; = <span class="title function_">useStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      state,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dispatch</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥è·Ÿæˆ‘ä»¬ä¸Šé¢<code>useModel</code>çš„ä¾‹å­å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸»è¦æ˜¯æš´éœ²äº†é€šç”¨çš„<code>dispatch</code>æ–¹æ³•ï¼Œåœ¨reducerå¤„ç»´æŠ¤çŠ¶æ€å˜åŒ–çš„é€»è¾‘ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªuseCounterä¸­è‡ªå·±ç»´æŠ¤ä¿®æ”¹æ•°æ®çš„é€»è¾‘</p><h3 id="æ€è€ƒ-3"><a href="#æ€è€ƒ-3" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>å½“ç„¶è¿™ä¸ªreduxæ˜¯éå¸¸ç®€é™‹çš„ï¼ŒåŒ…æ‹¬ä¸­é—´ä»¶ã€<code>combineReducers</code>ã€<code>connect</code>ç­‰æ–¹æ³•å‡ä¸ºå®ç°ï¼Œä½†ä¹Ÿä¸ºæˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªæœ€åŸºæœ¬çš„reduxæ•°æ®æµè½¬è¿‡ç¨‹ã€‚</p><h2 id="useDebounceä¸useThrottle"><a href="#useDebounceä¸useThrottle" class="headerlink" title="useDebounceä¸useThrottle"></a>useDebounceä¸useThrottle</h2><h3 id="èƒŒæ™¯-2"><a href="#èƒŒæ™¯-2" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å‰ç«¯å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹éƒ½éœ€è¦å¤„ç†èŠ‚æµæˆ–å»æŠ–çš„åœºæ™¯ï¼ŒèŠ‚æµå‡½æ•°å’Œå»æŠ–å‡½æ•°æœ¬èº«æ²¡æœ‰å‡å°‘äº‹ä»¶çš„è§¦å‘æ¬¡æ•°ï¼Œè€Œæ˜¯æ§åˆ¶äº‹ä»¶å¤„ç†å‡½æ•°çš„æ‰§è¡Œæ¥å‡å°‘å®é™…é€»è¾‘å¤„ç†è¿‡ç¨‹ï¼Œä»è€Œæé«˜æµè§ˆå™¨æ€§èƒ½ã€‚</p><p>ä¸€ä¸ªå»æŠ–çš„åœºæ™¯æ˜¯ï¼šåœ¨æœç´¢æ¡†ä¸­æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æœç´¢å…³è”çš„å†…å®¹å¹¶ä¸‹æ‹‰å±•ç¤ºï¼Œç”±äºinputæ˜¯ä¸€ä¸ªè§¦å‘é¢‘ç‡å¾ˆé«˜çš„äº‹ä»¶ï¼Œä¸€èˆ¬éœ€è¦ç­‰åˆ°ç”¨æˆ·åœæ­¢è¾“å‡ºæ–‡æœ¬ä¸€æ®µæ—¶é—´åæ‰å¼€å§‹è¯·æ±‚æ¥å£æŸ¥è¯¢æ•°æ®ã€‚</p><p>å…ˆæ¥å®ç°æœ€åŸå§‹çš„ä¸šåŠ¡é€»è¾‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, watch&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">cb, delay = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>,</span><br><span class="line">            context = <span class="variable language_">this</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useAssociateSearch</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keyword = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">search</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;search...&#x27;</span>, keyword.<span class="property">value</span>)</span><br><span class="line">        <span class="comment">// mock è¯·æ±‚æ¥å£è·å–æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// watch(keyword, search) // åŸå§‹é€»è¾‘ï¼Œæ¯æ¬¡å˜åŒ–éƒ½è¯·æ±‚</span></span><br><span class="line">    <span class="title function_">watch</span>(keyword, <span class="title function_">debounce</span>(search, <span class="number">1000</span>)) <span class="comment">// å»æŠ–ï¼Œåœæ­¢æ“ä½œ1ç§’åå†è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        keyword</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨è§†å›¾ä¸­å¼•å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;useAssociateSearch&#125; <span class="keyword">from</span> <span class="string">&quot;../useDebounce&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;useDebounce&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123;keyword&#125; = <span class="title function_">useAssociateSearch</span>()</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      keyword</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸<code>useApi</code>åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªdebounceçš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œï¼Œå°è£…æˆä¸€ä¸ªé€šç”¨çš„<code>useDebounce</code></p><h3 id="å®ç°useDebounce"><a href="#å®ç°useDebounce" class="headerlink" title="å®ç°useDebounce"></a>å®ç°useDebounce</h3><p>è²Œä¼¼ä¸éœ€è¦æˆ‘ä»¬å†é¢å¤–ç¼–å†™ä»»ä½•ä»£ç ï¼Œç›´æ¥å°†<code>debounce</code>æ–¹æ³•é‡å‘½åä¸º<code>useDebounce</code>å³å¯ï¼Œä¸ºäº†å‡‘å­—æ•°ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ”¹è£…ä¸€ä¸‹ï¼ŒåŒæ—¶å¢åŠ cancelæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useDebounce</span>(<span class="params">cb, delay = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> handler = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer.<span class="property">value</span>)</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>,</span><br><span class="line">            context = <span class="variable language_">this</span></span><br><span class="line">        timer.<span class="property">value</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">cancel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        handler,</span><br><span class="line">        cancel</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°useThrottle"><a href="#å®ç°useThrottle" class="headerlink" title="å®ç°useThrottle"></a>å®ç°useThrottle</h3><p>èŠ‚æµä¸å»æŠ–çš„å°è£…æ–¹å¼åŸºæœ¬ç›¸åŒï¼Œåªè¦çŸ¥é“<code>throttle</code>çš„å®ç°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useThrottle</span>(<span class="params">cb, duration = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> start = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">        <span class="keyword">if</span> (now - start &gt;= duration) &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            start = now</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒ-4"><a href="#æ€è€ƒ-4" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>ä»å»æŠ–&#x2F;èŠ‚æµçš„å½¢å¼å¯ä»¥çœ‹å‡ºï¼ŒæŸäº›hookä¸æˆ‘ä»¬ä¹‹å‰çš„å·¥å…·å‡½æ•°å¹¶æ²¡æœ‰ååˆ†æ˜æ˜¾çš„è¾¹ç•Œã€‚æ˜¯å°†æ‰€æœ‰ä»£ç ç»Ÿä¸€hookåŒ–ï¼Œè¿˜æ˜¯ä¿ç•™åŸæ¥å¼•å…¥å·¥å…·å‡½æ•°çš„é£æ ¼ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦æ€è€ƒå’Œå®è·µçš„é—®é¢˜</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>æœ¬æ–‡ä¸»è¦å±•ç¤ºäº†å‡ ç§Hookçš„å°è£…æ€è·¯å’Œç®€å•å®ç°</p><ul><li><code>useRequest</code>ç”¨äºç»Ÿä¸€ç®¡ç†ç½‘ç»œè¯·æ±‚ç›¸å…³çŠ¶æ€ï¼Œè€Œæ— éœ€åœ¨æ¯æ¬¡ç½‘ç»œè¯·æ±‚ä¸­é‡å¤å¤„ç†loadingã€errorç­‰é€»è¾‘</li><li><code>useEventBus</code>å®ç°äº†åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨å–æ¶ˆå½“å‰ç»„ä»¶ç›‘å¬çš„äº‹ä»¶ï¼Œæ— éœ€é‡å¤ç¼–å†™<code>onUnmounted</code>ä»£ç ï¼Œè¿™ä¸ªæ€è·¯ä¹Ÿå¯ä»¥ç”¨äºDOMäº‹ä»¶ã€å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç­‰æ³¨å†Œå’Œå–æ¶ˆ</li><li><code>useModel</code>å®ç°äº†åœ¨å¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä¸ªhookçŠ¶æ€ï¼Œå±•ç¤ºäº†ä¸€ç§é™¤vuexã€<code>provide/inject</code>å‡½æ•°ä¹‹å¤–è·¨ç»„ä»¶å…±äº«æ•°æ®çš„æ–¹æ¡ˆ</li><li><code>useReducer</code>åˆ©ç”¨hookå®ç°äº†ä¸€ä¸ªç®€æ˜“ç‰ˆçš„<code>redux</code>ï¼Œå¹¶ä¸”åˆ©ç”¨<code>useModel</code>å®ç°äº†å…¨å±€çš„store</li><li><code>useDebounce</code>ä¸<code>useThrottle</code>ï¼Œå®ç°äº†å»æŠ–å’ŒèŠ‚æµï¼Œå¹¶æ€è€ƒäº†hookåŒ–çš„ä»£ç é£æ ¼ä¸å¸¸è§„çš„utilä»£ç é£æ ¼ï¼Œä»¥åŠæ˜¯å¦æœ‰å¿…è¦å°†æ‰€æœ‰çš„ä¸œè¥¿éƒ½hookåŒ–</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Vue3æ¥å°è£…ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„ç»„åˆAPIï¼Œä¸»è¦åŒ…æ‹¬èƒŒæ™¯ã€å®ç°æ€è·¯ä»¥åŠä¸€äº›æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;å°±æˆ‘è‡ªå·±çš„æ„Ÿè§‰è€Œè¨€ï¼Œ&lt;code&gt;Hook&lt;/code&gt;ä¸&lt;code&gt;Composition API&lt;/code&gt;æ¦‚å¿µæ˜¯å¾ˆç±»ä¼¼çš„ï¼Œäº‹å®ä¸Šåœ¨Reactå¤§éƒ¨åˆ†å¯ç”¨çš„Hoo</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå…«è‚¡æ–‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/JavaScript%E5%85%AB%E8%82%A1%E6%96%87/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/JavaScript%E5%85%AB%E8%82%A1%E6%96%87/</id>
    <published>2024-03-07T15:31:36.000Z</published>
    <updated>2024-03-09T07:06:29.650Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-å˜é‡"><a href="#JavaScript-å˜é‡" class="headerlink" title="JavaScript å˜é‡"></a>JavaScript å˜é‡</h1><h2 id="varã€letã€const-çš„å·®å¼‚ï¼Ÿ"><a href="#varã€letã€const-çš„å·®å¼‚ï¼Ÿ" class="headerlink" title="varã€letã€const çš„å·®å¼‚ï¼Ÿ"></a>varã€letã€const çš„å·®å¼‚ï¼Ÿ</h2><h3 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h3><p><code>var</code>ã€<code>let</code>ã€<code>const</code> ä¸‰è€…éƒ½å¯ä»¥å£°æ˜å˜é‡ã€‚å˜é‡å¯ä»¥çœ‹ä½œç›’å­ï¼Œå˜é‡åå°±æ˜¯ç›’å­åç§°ï¼Œå€¼æ˜¯æ”¾åœ¨ç›’å­é‡Œçš„ä¸œè¥¿ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var å£°æ˜å˜é‡ï¼Œåˆå§‹å€¼å¯é€‰</span></span><br><span class="line"><span class="keyword">var</span> name;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Lucy&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let å£°æ˜å˜é‡ï¼Œåˆå§‹å€¼å¯é€‰</span></span><br><span class="line"><span class="keyword">let</span> age;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const å£°æ˜å¸¸é‡ï¼Œå¿…é¡»è¦èµ‹åˆå§‹å€¼</span></span><br><span class="line"><span class="keyword">const</span> city = <span class="string">&quot;Beijing&quot;</span>;</span><br><span class="line"><span class="comment">// å¦‚æœç»™å¸¸é‡é‡æ–°èµ‹å€¼ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> city = <span class="string">&quot;Shanghai&quot;</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;city&#x27; has alre ady been declared</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå¸¸é‡çš„å€¼æ˜¯å¯¹è±¡ï¼ˆæ•°ç»„ï¼‰ï¼Œä¸å¯ä»¥ä¿®æ”¹å¸¸é‡æŒ‡å‘çš„å¼•ç”¨ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹å¼•ç”¨çš„å€¼</span></span><br><span class="line"><span class="keyword">const</span> cities = [<span class="string">&quot;Beijing&quot;</span>];</span><br><span class="line">cities[<span class="number">0</span>] = [<span class="string">&quot;Shanghai&quot;</span>]; <span class="comment">// &quot;Shanghai&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å·®å¼‚"><a href="#å·®å¼‚" class="headerlink" title="å·®å¼‚"></a>å·®å¼‚</h3><p><code>var</code>ã€<code>let</code>ã€<code>const</code> ä¸‰è€…çš„å·®å¼‚ï¼š</p><table><thead><tr><th></th><th>å®šä¹‰</th><th>ä½œç”¨åŸŸ</th><th>æš‚æ—¶æ€§æ­»åŒº</th><th>é‡å¤å£°æ˜å˜é‡</th><th>å…¨å±€å±æ€§</th></tr></thead><tbody><tr><td>const</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>let</td><td>å£°æ˜å˜é‡ï¼ˆES6 æ–°å¢ï¼‰</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>var</td><td>å£°æ˜å˜é‡</td><td>å‡½æ•°ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…ï¼‰</td><td>â</td><td>âœ…</td><td>âœ…</td></tr></tbody></table><p>æ³¨ï¼š</p><p>æš‚æ—¶æ€§æ­»åŒºï¼šTemporal dead zoneï¼ˆTDZï¼‰</p><p>å…¨å±€å±æ€§ï¼šæ˜¯å¦ä¼šè¢«æ·»åŠ åˆ° <code>window</code> æˆ– <code>globalThis</code> ç­‰å¯¹è±¡ä¸­</p><h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><p>ä»ä¸€ä¸ªä»£ç å—çš„å¼€å§‹ç›´åˆ°ä»£ç æ‰§è¡Œåˆ°å£°æ˜å˜é‡çš„è¡Œä¹‹å‰ï¼Œ<code>let</code> æˆ– <code>const</code> å£°æ˜çš„å˜é‡éƒ½å¤„äºâ€œæš‚æ—¶æ€§æ­»åŒºä¸­ã€‚ç®€å•ç†è§£ï¼š<code>let</code> æˆ– <code>const</code> åªèƒ½å…ˆå£°æ˜å†è®¿é—®ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¿é—® person å˜é‡</span></span><br><span class="line"><span class="comment">// å˜é‡ person ä½¿ç”¨ let å£°æ˜ï¼Œå£°æ˜ä¸ä¼šæå‡ï¼Œå› æ­¤æ­¤å¤„è®¿é—®ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person);  <span class="comment">// ReferenceError: person is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ person </span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Lucy&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œä½¿ç”¨ <code>const</code> å£°æ˜å˜é‡ï¼Œå¦‚æœåœ¨å£°æ˜å‰ä½¿ç”¨ï¼Œè¡¨ç°ä¸ <code>let</code> ä¸€è‡´ã€‚<code>var</code> å£°æ˜çš„å…¨å±€å˜é‡ä¼šè¿›è¡Œå˜é‡æå‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Lucy&quot;</span></span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><h3 id="å…¨å±€å±æ€§"><a href="#å…¨å±€å±æ€§" class="headerlink" title="å…¨å±€å±æ€§"></a>å…¨å±€å±æ€§</h3><p><code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«æ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>window </code>å’Œ <code>globalThis</code> è®¿é—®ï¼Œ<code>let</code> å’Œ <code>const</code> å£°æ˜çš„å…¨å±€å˜é‡åˆ™ä¸ä¼šæ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Lucy&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">name</span>); <span class="comment">// &quot;Lucy&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">name</span>); <span class="comment">// &quot;Lucy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">12</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">age</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">age</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gender = <span class="string">&quot;female&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">gender</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">gender</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="å°ç»ƒä¹ "><a href="#å°ç»ƒä¹ " class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä»¥ä¸‹ä»£ç è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">prop</span>: <span class="number">0</span> &#125;;</span><br><span class="line">obj.<span class="property">prop</span> = obj.<span class="property">prop</span> + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">prop</span>); <span class="comment">// 1. æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">obj = &#123;&#125;; <span class="comment">// 2. æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š1 å¤„è¾“å‡º 1ï¼Œ 2 å¤„æŠ¥é”™ï¼š â€œUncaught TypeError: Assignment to constant variableâ€ã€‚è¿™ä¸ <code>const</code> çš„ç‰¹æ€§æœ‰å…³ï¼Œ<code>const</code> ä»…ä»…æ„å‘³ç€<strong>å˜é‡åå’Œå€¼çš„ç»‘å®šæ˜¯ä¸å¯å˜çš„</strong>ï¼Œä½†æ˜¯å®ƒçš„å€¼å¯ä»¥æ˜¯å¯å˜çš„ï¼Œå¦‚ 1 å¤„ çš„å€¼ <code>&#123; prop: 0 &#125;</code> å°±å¯ä»¥æ›´æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š1 å¤„ <code>obj</code> çš„å€¼æ˜¯å¯¹è±¡ï¼Œå¯ä»¥æ”¹å˜ <code>obj</code> çš„å±æ€§ï¼Œç„¶è€Œä¸èƒ½é‡æ–°ç»™ <code>obj</code> èµ‹æ–°çš„å€¼ï¼ˆ2 å¤„ï¼‰ã€‚</p><hr><h2 id="è°ˆè°ˆä½œç”¨åŸŸ"><a href="#è°ˆè°ˆä½œç”¨åŸŸ" class="headerlink" title="è°ˆè°ˆä½œç”¨åŸŸ?"></a>è°ˆè°ˆä½œç”¨åŸŸ?</h2><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><blockquote><p>ä½œç”¨åŸŸæ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå€¼å’Œè¡¨è¾¾å¼åœ¨å…¶ä¸­â€œå¯è§â€æˆ–å¯è¢«è®¿é—®ã€‚</p></blockquote><h3 id="é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"><a href="#é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"></a>é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸåˆ†ä¸ºé™æ€ä½œç”¨åŸŸï¼ˆåˆç§°ä¸ºè¯æ³•ä½œç”¨åŸŸï¼‰å’ŒåŠ¨æ€ä½œç”¨åŸŸï¼š</p><ul><li>é™æ€æ„å‘³ç€å®ƒä¸ä»£ç çš„ä½ç½®æœ‰å…³ï¼Œä¸æ‰§è¡Œä»£ç æ—¶çš„ç¯å¢ƒæ— å…³ã€‚JavaScript é‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸã€‚</li><li>åŠ¨æ€å³è¿è¡Œæ—¶ï¼Œä»£ç æ‰§è¡Œæ—¶ç¡®å®šçš„ã€‚</li></ul><h3 id="JavaScript-ä½œç”¨åŸŸ"><a href="#JavaScript-ä½œç”¨åŸŸ" class="headerlink" title="JavaScript ä½œç”¨åŸŸ"></a>JavaScript ä½œç”¨åŸŸ</h3><p>JavaScript çš„ä½œç”¨åŸŸå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š</p><ul><li><p>å…¨å±€ä½œç”¨åŸŸï¼šè„šæœ¬æ¨¡å¼è¿è¡Œæ‰€æœ‰ä»£ç çš„é»˜è®¤ä½œç”¨åŸŸ</p></li><li><p>å‡½æ•°ä½œç”¨åŸŸï¼šç”±å‡½æ•°åˆ›å»ºçš„ä½œç”¨åŸŸ</p></li><li><p>å—çº§ä½œç”¨åŸŸï¼šç”¨ä¸€å¯¹èŠ±æ‹¬å·ï¼ˆä¸€ä¸ªä»£ç å—ï¼‰åˆ›å»ºå‡ºæ¥çš„ä½œç”¨åŸŸ</p></li><li><p>æ¨¡å—ä½œç”¨åŸŸï¼šæ¨¡å—æ¨¡å¼ä¸­è¿è¡Œä»£ç çš„ä½œç”¨åŸŸ</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹å„ç§ä½œç”¨åŸŸçš„ç‰¹ç‚¹ã€‚</p><h3 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h3><p>JavaScript å˜é‡ä½œç”¨åŸŸæ˜¯åµŒå¥—çš„ï¼Œå®ƒä»¬å½¢æˆæ ‘ï¼š</p><ul><li><p>æœ€å¤–é¢çš„ä½œç”¨åŸŸæ˜¯æ ‘çš„æ ¹éƒ¨ï¼Œä¹Ÿå«å…¨å±€ä½œç”¨åŸŸã€‚</p></li><li><p>è¢«æœ€å¤–å±‚ä½œç”¨åŸŸåŒ…å«çš„ä½œç”¨åŸŸæ˜¯æ ¹çš„å­å­™ï¼Œå¦‚å„ç§åµŒå¥—çš„ä»£ç å—å½¢æˆçš„ä½œç”¨åŸŸã€‚</p></li></ul><p>å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡ç§°ä¸º<strong>å…¨å±€å˜é‡</strong>ï¼Œå¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸå†…è®¿é—®ã€‚æœ‰ä¸¤ç§å…¨å±€å˜é‡ï¼š</p><ul><li><p><strong>å…¨å±€å£°æ˜å˜é‡</strong>ï¼ˆdeclarative variablesï¼‰æ˜¯æ™®é€šå˜é‡ï¼Œåœ¨æœ€é¡¶çº§ç”± <code>const</code>ã€<code>let</code> å’Œ <code>class</code> å£°æ˜çš„å˜é‡ã€‚</p></li><li><p><strong>å…¨å±€å¯¹è±¡</strong>ï¼ˆobject variablesï¼‰æ˜¯å­˜å‚¨åœ¨å…¨å±€å¯¹è±¡ä¸­çš„å±æ€§ï¼š</p><ul><li>åœ¨æœ€é¡¶çº§ç”± <code>var</code> å’Œ <code>function</code> å£°æ˜ååˆ›å»ºçš„å˜é‡</li><li>å…¨å±€å¯¹è±¡å¯ä»¥é€šè¿‡ <code>globalThis</code> å’Œ <code>window</code> è®¿é—®ï¼Œå®ƒå¯ä»¥å¯¹å…¨å±€å¯¹è±¡å˜é‡è¿›è¡Œå¢åˆ æ”¹æŸ¥</li></ul></li></ul><p>å…¨å±€å±æ€§ <code>globalThis</code> åŒ…å«å…¨å±€çš„ <code>this</code> å€¼ï¼Œç±»ä¼¼äºå…¨å±€å¯¹è±¡ã€‚<code>globalThis</code> æä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼æ¥è·å–ä¸åŒç¯å¢ƒä¸‹çš„å…¨å±€ <code>this</code> å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡è‡ªèº«ï¼‰ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p><p>ä¸‹é¢çš„ä»£ç å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½ç†è§£ <code>globalThis</code> å’Œä¸¤ç§å…¨å±€å˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">const</span> declarativeVariable = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> objectVariable = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ‰€æœ‰è„šæœ¬å…±äº«åŒæ ·çš„é¡¶çº§ä½œç”¨åŸŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(declarativeVariable); <span class="comment">// &#x27;d&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(objectVariable); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ä¸æ˜¯æ‰€æœ‰å˜é‡éƒ½ä¼šåˆ›å»ºä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ­¤å¤„æœ€é¡¶å±‚ const åˆ›å»ºçš„æ˜¯å…¨å±€å£°æ˜å˜é‡ï¼Œä¸æ˜¯å…¨å±€å¯¹è±¡ï¼Œå› æ­¤ window å¯¹è±¡ä¸‹è®¿é—®ä¸º undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">declarativeVariable</span>); <span class="comment">// undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">objectVariable</span>); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// globalThis åŒ window è¡¨ç°ä¸€è‡´</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">declarativeVariable</span>); <span class="comment">// undefined  </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">objectVariable</span>); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿä»¥ä¸Šçš„ä»£ç ï¼Œå°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆæœ€é¡¶å±‚ <code>const</code> åˆ›å»ºçš„å˜é‡ï¼Œä½¿ç”¨ <code>window</code> è®¿é—®ä¾ç„¶æ˜¯ <code>undefined</code>ã€‚</p><h3 id="å‡½æ•°ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ</h3><p>å‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°ä½œç”¨åŸŸèŒƒå›´å†…è®¿é—®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">scope</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">var</span> address = <span class="string">&quot;Beijing&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(address); <span class="comment">// Uncaught ReferenceError: address is not defined </span></span><br></pre></td></tr></table></figure><h3 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸå¯¹å˜é‡æ¥è¯´ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºç¨‹åºèƒ½å¤Ÿè®¿é—®åˆ°å˜é‡çš„èŒƒå›´ï¼Œè¶…è¿‡ä½œç”¨åŸŸçš„å°±æ— æ³•è®¿é—®ã€‚</p><h4 id="let-å’Œ-const"><a href="#let-å’Œ-const" class="headerlink" title="let å’Œ const"></a><code>let</code> å’Œ <code>const</code></h4><p><code>let</code>ã€<code>const</code> æ”¯æŒå—çº§ä½œç”¨åŸŸã€‚å¦‚æœåœ¨ä»£ç å— <code>&#123;...&#125;</code> ä¸­ä½¿ç”¨ <code>let</code> æˆ– <code>const</code> å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡åªåœ¨è¯¥ä»£ç å—ä¸­å¯è§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">    <span class="comment">// ä½œç”¨åŸŸ Aï¼Œå¯ä»¥è®¿é—®å˜é‡ x</span></span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">0</span>; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 0</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½œç”¨åŸŸ Bï¼Œå¯ä»¥è®¿é—® xã€y</span></span><br><span class="line">        <span class="keyword">const</span> y  = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 0</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// 1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½œç”¨åŸŸ A å¤–ï¼Œä¸èƒ½è®¿é—® xã€y</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// æŠ¥é”™ï¼šUncaught ReferenceError: x is not defined</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š</p><ul><li>ä½œç”¨åŸŸ A æ˜¯å˜é‡ <code>x</code> çš„ä½œç”¨åŸŸ</li><li>ä½œç”¨åŸŸ B æ˜¯ä½œç”¨åŸŸ A çš„å†…éƒ¨ä½œç”¨åŸŸ</li><li>ä½œç”¨åŸŸ A æ˜¯ä½œç”¨åŸŸ B å¤–éƒ¨ä½œç”¨åŸŸ</li></ul><p>æ¯ä¸ªå˜é‡å¯è®¿é—®çš„èŒƒå›´æ˜¯å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸä»¥åŠè¯¥ä½œç”¨åŸŸæ‰€åµŒå¥—çš„å¤–éƒ¨ä½œç”¨åŸŸã€‚<code>let</code> å’Œ <code>const</code> å£°æ˜çš„å˜é‡æ˜¯å—çº§çš„ï¼Œå› æ­¤å®ƒä»¬ä½œç”¨åŸŸå§‹ç»ˆåœ¨å—ä¸­ã€‚åŒä¸€ä½œç”¨åŸŸå†…ï¼Œä¸å…è®¸å£°æ˜åŒåå˜é‡ã€‚å¦‚ä¸‹ç¤ºä¾‹ä»£ç ç”¨ <code>const</code> å£°æ˜åŒåå˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">2</span>; <span class="comment">// æŠ¥é”™ï¼šUncaught SyntaxError: Identifier &#x27;x&#x27; has already been declared</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸åŒä½œç”¨åŸŸä¸‹å¯ä»¥ä½¿ç”¨åŒåå˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">const</span> x = <span class="number">2</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="class"><a href="#class" class="headerlink" title="class"></a><code>class</code></h4><p><code>class</code> å£°æ˜çš„ç±»ä¹Ÿæ”¯æŒå—çº§ä½œç”¨åŸŸã€‚å¦‚ä¸‹é¢ä»£ç ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜äº† <code>Animal</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Animal</span>); <span class="comment">// class Animal &#123;&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ä»£ç å— <code>&#123;...&#125;</code> ä¸­åˆ›å»º <code>Animal</code>ï¼Œæ­¤æ—¶åœ¨ä»£ç å—å¤–éƒ¨å°±æ— æ³•è®¿é—® <code>Animal</code>äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">class Animal &#123;&#125;</span><br><span class="line">console.log(Animal) // class Animal &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(Animal); // Uncaught ReferenceError: Animal is not defined </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—ä½œç”¨åŸŸ"><a href="#æ¨¡å—ä½œç”¨åŸŸ" class="headerlink" title="æ¨¡å—ä½œç”¨åŸŸ"></a>æ¨¡å—ä½œç”¨åŸŸ</h3><p>æ¯ä¸ª ECMAScript æ¨¡å—ï¼ˆES6 Modulesï¼‰éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå› æ­¤ï¼Œåœ¨é¡¶çº§æ¨¡å—ä¸­å£°æ˜çš„å˜é‡ä¸æ˜¯å…¨å±€çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic.leetcode.cn/1675243681-ITEQCA-image.png#id=Usa3j&originHeight=485&originWidth=815&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä½œç”¨åŸŸæ˜¯å€¼æˆ–è€…è¡¨è¾¾å¼çš„å¯è®¿é—®èŒƒå›´ã€‚åˆ†ä¸ºé™æ€ä½œç”¨åŸŸï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰å’ŒåŠ¨æ€ä½œç”¨åŸŸï¼ŒJavaScript é‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸã€‚å…¶ä¸­ï¼Œåˆ†ä¸ºå››ç§ä¸åŒçš„ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸä»¥åŠæ¨¡å—ä½œç”¨åŸŸã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæ–‡ä¸­è¿˜æåˆ°äº†å„ç§å£°æ˜ä¸ä½œç”¨åŸŸçš„å…³ç³»ï¼Œä¸‹é¢æ€»ç»“ä¸€ä¸‹å„ç§å£°æ˜çš„å¼‚åŒã€‚æˆ‘ä»¬ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢æ¥çœ‹å„ç§å£°æ˜çš„å¼‚åŒï¼š</p><ul><li>ä½œç”¨åŸŸ</li><li>æš‚æ—¶æ€§æ­»åŒºï¼šå˜é‡ä½•æ—¶å¯ä»¥è®¿é—®ï¼Ÿä¸€äº›å˜é‡åœ¨è¿›å…¥ä½œç”¨åŸŸåå¯å°½å¿«è¢«è®¿é—®ï¼Œä½†æœ‰çš„å¿…é¡»ç­‰åˆ°ä»£ç æ‰§è¡Œåˆ°å®ƒä»¬å£°æ˜æ—¶æ‰å¯ä»¥è®¿é—®ã€‚é€šä¿—è¯´æ³•æ˜¯ï¼Œè¿™ä¸ªå˜é‡æ˜¯å¦å¯ä»¥å…ˆè®¿é—®å†å£°æ˜ã€‚æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼Œ Temporal Dead Zoneï¼‰ å°±æ˜¯å˜é‡åœ¨è¿›å…¥ä½œç”¨åŸŸå’Œæ‰§è¡Œå£°æ˜å‰çš„ä¸€æ®µæ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œè®¿é—®å˜é‡ä¼šæŠ¥é”™ã€‚</li><li>é‡å¤ï¼šå˜é‡æ˜¯å¦å¯ä»¥é‡å¤å£°æ˜ï¼ˆåŒçº§ä½œç”¨åŸŸä¸‹ï¼‰</li><li>å…¨å±€å±æ€§ï¼šå£°æ˜çš„å˜é‡æ˜¯å¦ä¼šè¢«æ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­</li></ul><table><thead><tr><th></th><th>å®šä¹‰</th><th>ä½œç”¨åŸŸ</th><th>æš‚æ—¶æ€§æ­»åŒº</th><th>é‡å¤å£°æ˜å˜é‡</th><th>å…¨å±€å±æ€§</th></tr></thead><tbody><tr><td>const</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>let</td><td>å£°æ˜å˜é‡ï¼ˆES6 æ–°å¢ï¼‰</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>function</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>â</td><td>âœ…</td><td>âœ…</td></tr><tr><td>class</td><td></td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>var</td><td>å£°æ˜å˜é‡</td><td>å‡½æ•°ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…ï¼‰</td><td>â</td><td>âœ…</td><td>âœ…</td></tr></tbody></table><hr><h2 id="ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ</h2><p>å˜é‡æå‡å’Œä¸Šæ–‡æåˆ°è§¦å‘æ—¶é—´æœ‰å…³ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ<code>var</code> å’Œ <code>function</code> å£°æ˜çš„å˜é‡å¯ä»¥åœ¨å£°æ˜å‰è®¿é—®ï¼Œè¿™å°±æ˜¯å› ä¸ºå˜é‡æå‡çš„ç¼˜æ•…ã€‚</p><p>å½“ JavaScript å¼•æ“æ‰§è¡Œä»£ç æ—¶ï¼Œåˆ›å»ºäº†å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒæœ‰ä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆ›å»ºï¼ˆå‡†å¤‡å·¥ä½œï¼‰</li><li>æ‰§è¡Œ</li></ul><p>åœ¨åˆ›å»ºé˜¶æ®µï¼ŒJavaScript å¼•æ“å°† <code>var</code> å’Œ <code>function</code> å£°æ˜ç§»åˆ°äº†é¡¶å±‚ï¼Œè¿™å°±æ˜¯ JavaScript çš„å˜é‡æå‡ã€‚</p><h3 id="var-å…³é”®å­—"><a href="#var-å…³é”®å­—" class="headerlink" title="var å…³é”®å­—"></a><code>var</code> å…³é”®å­—</h3><p>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨å£°æ˜å‰è®¿é—® <code>counter</code> å˜é‡ï¼Œå¹¶æœªæŠ¥é”™ã€‚è¿™æ˜¯å˜é‡æå‡çš„ç¼˜æ•…ã€‚</p><h3 id="function-æå‡"><a href="#function-æå‡" class="headerlink" title="function æå‡"></a><code>function</code> æå‡</h3><p>å’Œ <code>var</code> ä¸€æ ·ï¼Œå‡½æ•°å£°æ˜ä¹Ÿä¼šæå‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x, y);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 30</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>let</code> å…³é”®å­—ã€å‡½æ•°è¡¨è¾¾å¼ã€ç®­å¤´å‡½æ•°ç­‰å‡ä¸ä¼šå˜é‡æå‡ã€‚</p><h3 id="å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å"><a href="#å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å" class="headerlink" title="å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å"></a>å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å</h3><p>ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬çŸ¥é“ <code>var</code> å£°æ˜çš„åŒåå˜é‡ï¼Œåè€…ä¼šè¦†ç›–å‰è€…ï¼Œå¦‚æœæ˜¯å‡½æ•°å‘¢ï¼Ÿå…ˆçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x, y);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result &quot;</span> + result); <span class="comment">// &quot;result 60&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">add</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result1 &quot;</span> + result); <span class="comment">// &quot;result1 60&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªåŒåå‡½æ•° <code>add</code>ï¼Œå®šä¹‰åœ¨åé¢çš„å‡½æ•°è¦†ç›–äº†å‰é¢çš„å‡½æ•°ï¼Œå› æ­¤ <code>result</code> å’Œ <code>result1</code> çš„ç»“æœéƒ½æ˜¯æ‰§è¡Œåé¢çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚</p><p>å› æ­¤ï¼Œä»£ç ä¸­å‡ºç°åŒåçš„å˜é‡åæˆ–è€…å‡½æ•°åï¼Œéƒ½æ˜¯åè€…è¦†ç›–å‰è€…ã€‚</p><h3 id="å°ç»ƒä¹ -1"><a href="#å°ç»ƒä¹ -1" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result1 &quot;</span> + result); <span class="comment">// &quot;result1 60&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + <span class="number">40</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè€ƒå¯Ÿçš„æ˜¯åŒåå˜é‡å’Œå‡½æ•°çš„æå‡ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯æœ€åä¸€ä¸ªå‡½æ•° <code>add</code>ã€‚</p><hr><h1 id="JavaScript-æ•°æ®ç±»å‹"><a href="#JavaScript-æ•°æ®ç±»å‹" class="headerlink" title="JavaScript æ•°æ®ç±»å‹"></a>JavaScript æ•°æ®ç±»å‹</h1><h2 id="JavaScript-æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#JavaScript-æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="JavaScript æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>JavaScript æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>JavaScript ä¸­æœ‰å…«ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆå‰ä¸ƒç§ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºåŸå§‹æ•°æ®ç±»å‹ï¼Œåä¸€ç§ <code>Object</code> ä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºéåŸå§‹æ•°æ®ç±»å‹æˆ–å¼•ç”¨ç±»å‹ï¼‰ã€‚</p><ul><li>å…¶ä¸­åŸå§‹æ•°æ®ç±»å‹ï¼š<ul><li><code>number</code> ç”¨äºä»»ä½•ç±»å‹çš„æ•°å­—ï¼šæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œåœ¨ <code>Â±(2(^53)-1)</code> èŒƒå›´å†…çš„æ•´æ•°ã€‚</li><li><code>bigint</code> ç”¨äºä»»æ„é•¿åº¦çš„æ•´æ•°ã€‚</li><li><code>string</code> ç”¨äºå­—ç¬¦ä¸²ï¼šä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥åŒ…å« 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬çš„å­—ç¬¦ç±»å‹ã€‚</li><li><code>boolean</code> ç”¨äº <code>true</code> å’Œ <code>false</code>ã€‚</li><li><code>null</code> ç”¨äºæœªçŸ¥çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª <code>null</code> å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚</li><li><code>undefined</code> ç”¨äºæœªå®šä¹‰çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª <code>undefined</code> å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚</li><li><code>symbol</code> ç”¨äºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚</li></ul></li><li>ä»¥åŠä¸€ç§éåŸå§‹æ•°æ®ç±»å‹ï¼š<ul><li><code>Object</code> ç”¨äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚ä»¥ä¸‹ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼š<ul><li><code>Function</code>ï¼ˆå‡½æ•°ï¼‰</li><li><code>Array</code>ï¼ˆæ•°ç»„ï¼‰</li><li><code>Date</code>ï¼ˆæ—¥æœŸï¼‰</li><li><code>RegExp</code>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</li></ul></li></ul></li></ul><h2 id="åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ"><a href="#åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ"></a>åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>JavaScript åŒ…å«ä¸¤ç§ä¸åŒç±»å‹çš„å€¼ï¼š</p><ul><li><p>åŸå§‹æ•°æ®ç±»å‹ï¼ˆPrimitive valuesï¼‰</p></li><li><p>å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆReference valuesï¼‰</p></li></ul><h3 id="æ ˆå†…å­˜å’Œå †å†…å­˜"><a href="#æ ˆå†…å­˜å’Œå †å†…å­˜" class="headerlink" title="æ ˆå†…å­˜å’Œå †å†…å­˜"></a>æ ˆå†…å­˜å’Œå †å†…å­˜</h3><p>å½“å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šä¸ºå˜é‡åˆ†é…ä¸¤ç§å†…å­˜ï¼šæ ˆå†…å­˜å’Œå †å†…å­˜ã€‚</p><p>é™æ€å€¼åœ¨ç¼–è¯‘é˜¶æ®µæœ‰å›ºå®šçš„å¤§å°ï¼Œé™æ€å€¼æœ‰ï¼š</p><ul><li>åŸå§‹å€¼ï¼š<code>Null</code>ã€<code>Undefined</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code>ã€<code>BigInt</code></li><li>å¼•ç”¨å€¼ï¼šæ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚</li></ul><p>é™æ€å€¼æœ‰å›ºå®šçš„å¤§å°ï¼Œä¸èƒ½æ”¹å˜ã€‚JavaScript å¼•æ“ä¸ºå®ƒä»¬åˆ†é…ä¸€ç‰‡å›ºå®šçš„å†…å­˜ï¼Œå¹¶å­˜å‚¨åœ¨æ ˆä¸Šã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br></pre></td></tr></table></figure><p>å› ä¸º <code>name</code> å’Œ <code>age</code> éƒ½æ˜¯åŸå§‹å€¼ç±»å‹ï¼ŒJavaScript å¼•æ“å°†å®ƒä»¬å­˜å‚¨åœ¨æ ˆä¸Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic.leetcode.cn/1675246723-ulSguk-image.png"></p><p>JavaScript å°†å¯¹è±¡ï¼ˆ<code>Object</code>) å­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å†…å­˜å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675246788-HjXqny-image.png"></p><p>JavaScript å¼•æ“åœ¨å †å†…å­˜ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŒæ—¶å®ƒå’Œæ ˆå†…å­˜ä¸Šçš„ <code>person</code> å˜é‡è¿æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¯´ <code>person</code> å˜é‡æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚</p><h3 id="åŠ¨æ€å±æ€§"><a href="#åŠ¨æ€å±æ€§" class="headerlink" title="åŠ¨æ€å±æ€§"></a>åŠ¨æ€å±æ€§</h3><p>ä¸€ä¸ªå¼•ç”¨å€¼å…è®¸æˆ‘ä»¬æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å±æ€§ ssn </span></span><br><span class="line">person.<span class="property">ssn</span> = <span class="string">&quot;123-45&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ name</span></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&quot;John Doe&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤å±æ€§ age </span></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">age</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123;name: &#x27;John Doe&#x27;, ssn: &#x27;123-45&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p>JavaScript ä¹Ÿå…è®¸åœ¨åŸå§‹å€¼ä¸Šæ·»åŠ å±æ€§ï¼Œä½†è¿™ä¸ªå±æ€§ä¸ä¼šèµ·ä½œç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">name.<span class="property">alias</span> = <span class="string">&quot;Knight&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">alias</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="å¤åˆ¶å€¼"><a href="#å¤åˆ¶å€¼" class="headerlink" title="å¤åˆ¶å€¼"></a>å¤åˆ¶å€¼</h3><h4 id="åŸå§‹å€¼"><a href="#åŸå§‹å€¼" class="headerlink" title="åŸå§‹å€¼"></a>åŸå§‹å€¼</h4><p><strong>å¯¹äºåŸå§‹å€¼æ¥è¯´ï¼ŒJavaScript å¼•æ“åˆ›å»ºä¸€ä¸ªå€¼çš„å‰¯æœ¬ï¼Œå¹¶å°†å€¼èµ‹ç»™æ–°çš„å˜é‡ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> newAge = age; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age, newAge); <span class="comment">// 25 25</span></span><br></pre></td></tr></table></figure><p>è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ <code>age</code>ï¼Œå¹¶å°† 25 èµ‹å€¼ç»™å®ƒã€‚</p></li><li><p>å…¶æ¬¡ï¼Œå£°æ˜å¦ä¸€ä¸ªæ–°çš„å˜é‡ <code>newAge</code>ï¼Œå°† <code>age</code> èµ‹å€¼ç»™ <code>newAge</code>ï¼ŒJavaScript å¼•æ“å°† 25 å¤åˆ¶äº†ä¸€ä»½ï¼Œç»™äº†æ–°å˜é‡ã€‚</p></li></ul><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675247356-DMFMSb-image.png"></p><p>å› æ­¤ï¼Œå¯¹ä¸¤ä¸ªå˜é‡çš„æ“ä½œä¸ä¼šäº’ç›¸å½±å“ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> newAge = age;</span><br><span class="line"></span><br><span class="line">newAge = newAge + <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age, newAge); <span class="comment">// 25 26</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675247413-GScWMN-image.png"></p><h3 id="å¼•ç”¨å€¼"><a href="#å¼•ç”¨å€¼" class="headerlink" title="å¼•ç”¨å€¼"></a>å¼•ç”¨å€¼</h3><p><strong>å¯¹äºå¼•ç”¨å€¼æ¥è¯´ï¼Œå¤åˆ¶çš„å€¼æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æ“ä½œçš„æ˜¯ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p><p>å½“æˆ‘ä»¬å°†ä¸€ä¸ªå¼•ç”¨å€¼ä»ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼ŒJavaScript å¼•æ“åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æŒ‡å‘å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚æ„å‘³ç€ï¼Œä½ ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> member = person;</span><br><span class="line">member.<span class="property">age</span> = <span class="number">26</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123;name: &#x27;John&#x27;, age: 26&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member); <span class="comment">// &#123;name: &#x27;John&#x27;, age: 26&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>ä¿®æ”¹å‰ï¼š</p><p><img src="https://pic.leetcode.cn/1675247510-JurGlA-image.png"></p><p>ä¿®æ”¹åï¼š</p><p><img src="https://pic.leetcode.cn/1675247526-qFUHsM-image.png" alt="image.png"></p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><p>JavaScript æœ‰ä¸¤ç§ç±»å‹çš„å€¼ï¼šåŸå§‹å€¼å’Œå¼•ç”¨å€¼</p></li><li><p>å¼•ç”¨ç±»å‹çš„å€¼å¯ä»¥å¯¹å®ƒçš„å±æ€§åšå¢åˆ æ”¹æŸ¥ï¼ŒåŸå§‹å€¼ä¸è¡Œ</p></li><li><p>ä»ä¸€ä¸ªå˜é‡å¤åˆ¶åŸå§‹å€¼åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å€¼çš„å¤‡ä»½ï¼Œæ„å‘³ç€ä¿®æ”¹ä¸€ä¸ªå˜é‡ä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå˜é‡</p></li><li><p>ä»ä¸€ä¸ªå˜é‡å¤åˆ¶å¼•ç”¨å€¼åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªå˜é‡ä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ„å‘³ç€é€šè¿‡ä¸€ä¸ªå˜é‡ä¿®æ”¹å¯¹è±¡å°†ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p></li></ul><h3 id="å°ç»ƒä¹ -2"><a href="#å°ç»ƒä¹ -2" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increaseAge</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    obj.<span class="property">age</span> += <span class="number">1</span>;</span><br><span class="line">    obj = &#123;<span class="attr">name</span>: <span class="string">&quot;Jame&quot;</span>, <span class="attr">age</span>: <span class="number">22</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">increaseAge</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š1 å¤„æ˜¯ï¼š<code>&#123; name: &quot;Jame&quot;, age: 22 &#125;</code>ï¼Œ 2 å¤„æ˜¯ <code>&#123; name: &#39;John&#39;, age: 26 &#125;</code>ã€‚ä¸¤ä¸ªå˜é‡çš„å†…å­˜ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://pic.leetcode.cn/1675247879-Inlzhw-image.png" alt="image.png"></p><p>å®é™…ä¸Šï¼Œ<code>obj = &#123;name: &quot;Jame&quot;, age: 22&#125;</code> ä½¿å¾— <code>obj</code> é‡æ–°æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¼•ç”¨çš„ï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­é‡æ–°åˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶è®© <code>obj</code> æŒ‡å‘å®ƒã€‚ å› æ­¤ <code>console.log(person)</code> çš„ç»“æœæ˜¯ <code>&#123; name: &quot;Jame&quot;, age: 22 &#125;</code>ã€‚</p><p>åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹åœ¨å†…å­˜ä¸­çš„åˆ†é…ä¸å‡½æ•°å‚æ•°ä¼ é€’æœ‰è”ç³»ã€‚å‡½æ•°ä¼ å‚éƒ½æ˜¯å€¼ä¼ é€’ï¼Œåªä¸è¿‡æ ¹æ®å€¼çš„ç±»å‹ä¸åŒæœ‰æ‰€åŒºåˆ«ã€‚</p><p>ç”±ä¸Šå¯çŸ¥ï¼š</p><ul><li>JavaScript å®å‚éƒ½æ˜¯ä¼ å€¼</li><li>å‡½æ•°å®å‚ä¼šåœ¨å‡½æ•°ä¸­åˆ›å»ºæ–°çš„å±€éƒ¨å˜é‡ã€‚</li></ul><hr><h2 id="ä¸ºä»€ä¹ˆ-0-1-0-2-0-3"><a href="#ä¸ºä»€ä¹ˆ-0-1-0-2-0-3" class="headerlink" title="ä¸ºä»€ä¹ˆ 0.1 + 0.2 !&#x3D;&#x3D; 0.3 ?"></a>ä¸ºä»€ä¹ˆ 0.1 + 0.2 !&#x3D;&#x3D; 0.3 ?</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>è¿™æ˜¯ä¸€é“ç»å…¸çš„é¢è¯•é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¶‰åŠåˆ° JavaScript ä¸­çš„æ•°å­—ç±»å‹ã€‚ä¸‹é¢æ˜¯ <code>Number</code> çš„å®šä¹‰ï¼š</p><p>MDN ä¸­å¯¹ <code>Number</code> çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>æ ¹æ®è¯­è¨€è§„èŒƒï¼ŒJavaScript é‡‡ç”¨â€œéµå¾ª IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½æ ¼å¼â€ï¼ˆâ€double-precision 64-bit format IEEE 754 valuesâ€ï¼‰è¡¨ç¤ºæ•°å­—ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</h3><p>ç®€å•åœ°è¯´ï¼Œ0.1 å’Œ 0.2 çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥å®ƒä»¬ç›¸åŠ æ—¶ï¼Œç»“æœä¸æ˜¯ç²¾ç¡®çš„ 0.3ï¼Œ è€Œæ˜¯éå¸¸æ¥è¿‘çš„å€¼ï¼š0.30000000000000004ã€‚</p><p>è¿™æ˜¯å’Œ JavaScript é‡‡ç”¨â€œéµå¾ª IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½æ ¼å¼â€æœ‰å…³ã€‚</p><ul><li>sign bitï¼ˆç¬¦å·ï¼‰ï¼š ç”¨æ¥è¡¨ç¤ºæ­£è´Ÿå·</li><li>exponentï¼ˆæŒ‡æ•°ï¼‰ï¼š ç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°</li><li>mantissaï¼ˆå°¾æ•°ï¼‰ï¼šç”¨æ¥è¡¨ç¤ºç²¾ç¡®åº¦</li></ul><p><img src="https://pic.leetcode.cn/1675248285-kMFmze-image.png" alt="image.png"></p><p>åœ¨è¿™ä¸ªæ ‡å‡†ä¸‹ï¼š</p><ul><li><p>1 ä½å­˜å‚¨ç¬¦å·ï¼ˆSignï¼‰ï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ 1 è¡¨ç¤ºè´Ÿæ•°ã€‚</p></li><li><p>ç”¨ 11 ä½å­˜å‚¨æŒ‡æ•°ï¼ŒæŒ‡æ•°å¿…é¡»æ˜¯â€œæœ‰ç¬¦å·â€çš„å€¼ï¼Œè¿™é‡Œä½¿ç”¨äº†åå·®æŒ‡æ•°ï¼Œå³å­˜å‚¨ E + bias çš„å€¼ã€‚å¯¹äº 11 ä½æ¥è¯´ï¼Œbias çš„å€¼æ˜¯ 2^(11-1) - 1ï¼Œä¹Ÿå°±æ˜¯ 1023ã€‚11 ä½æ— ç¬¦å·æ•´æ•°çš„å€¼çš„èŒƒå›´æ˜¯ 0 åˆ° 2^11ï¼ˆ2047ï¼‰ï¼Œç”±äºå…¨ 0 å’Œ å…¨ 1 çš„æŒ‡æ•°å€¼æ˜¯ä¸ºç‰¹æ®Šæ•°å­—ä¿ç•™çš„ï¼Œæ‰€ä»¥å¯ç”¨çš„æŒ‡æ•°æ˜¯ä» 1 åˆ° 2046ã€‚å‡å»æŒ‡æ•°åå·®å€¼ 1023ï¼Œ å°±èƒ½å¾—åˆ°æŒ‡æ•°çš„å®é™…èŒƒå›´ï¼Œå³ä» -1022 åˆ° +1023ã€‚</p></li><li><pre><code class="js">1 - 1023 = -10222046 - 1023 = +1023<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ç”¨ 52 ä½å­˜å‚¨ Fractionã€‚</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶ï¼Œæˆ‘ä»¬å†æ¥çœ‹ 0.1 + 0.2 çš„è½¬æ¢è¿‡ç¨‹ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ‹¿ 0.1 æ¥çœ‹ï¼š</span><br><span class="line">0.1 å¯¹åº”çš„äºŒè¿›åˆ¶æ˜¯ 1 * 2^-4 * 1.1001100110011â€¦â€¦</span><br><span class="line">ç¬¦å·ä½ï¼š0</span><br><span class="line">E + baisï¼š -4 + 1023 = 1019</span><br><span class="line">Fractionï¼š 1001100110011â€¦â€¦</span><br><span class="line">å¯¹åº”çš„ 64 ä½å®Œæ•´è¡¨ç¤ºå¦‚ä¸‹å›¾ï¼š</span><br><span class="line"></span><br><span class="line">![image.png](https://pic.leetcode.cn/1675248450-nFKGop-image.png)</span><br><span class="line"></span><br><span class="line">åŒç†ï¼Œ0.2 çš„å®Œæ•´è¡¨ç¤ºæ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">![image.png](https://pic.leetcode.cn/1675248480-DpROri-image.png)</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œ**å½“ 0.1 å­˜ä¸‹æ¥çš„æ—¶å€™ï¼Œå°±å‘ç”Ÿäº†ç²¾åº¦ä¸¢å¤±ï¼Œå½“æˆ‘ä»¬ç”¨æµ®ç‚¹æ•°è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å…¶å®æ˜¯ç²¾åº¦ä¸¢å¤±åçš„æ•°ã€‚**</span><br><span class="line"></span><br><span class="line">å½“æˆ‘ä»¬å¯¹ä¸¤ä¸ªæ•°å­—æ±‚å’Œæ—¶ï¼Œå®ƒä»¬çš„â€œç²¾åº¦æŸå¤±â€ä¼šå åŠ èµ·æ¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ 0.1 + 0.2 ä¸ç­‰äº 0.3ã€‚</span><br><span class="line"></span><br><span class="line">### å¦‚ä½•è§£å†³ï¼Ÿ</span><br><span class="line"></span><br><span class="line">**æ–¹æ³•ä¸€ï¼š`toFixed(n)`**</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ–¹æ³• `toFixed(n)` å¯¹ç»“æœè¿›è¡Œèˆå…¥ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>let sum = 0.1 + 0.2;alert(sum.toFixed(2)); // 0.30<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ³¨æ„ï¼š`toFixed `æ€»æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å…ƒåŠ å·å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼š</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">let sum = 0.1 + 0.2;</span><br><span class="line">alert( +sum.toFixed(2) ); // &quot;0.30&quot;</span><br></pre></td></tr></table></figure></code></pre></li></ul><p><strong>æ–¹æ³•äºŒï¼šå°†æ•°å­—ä¸´æ—¶ä¹˜ä»¥ 100ï¼ˆæˆ–æ›´å¤§çš„æ•°å­—ï¼‰ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•´æ•°ï¼Œè¿›è¡Œæ•°å­¦è¿ç®—ï¼Œç„¶åå†é™¤å›ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( (0.1 * 100 + 0.2 * 100) / 100 ); // 0.3</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Number.EPSILONã€‚å¦‚æœä¸¤ä¸ªæ•°çš„ç²¾åº¦æŸå¤±åœ¨å…è®¸èŒƒå›´å†…ï¼Œåˆ™å¯ä»¥è®¤ä¸ºä¸¤ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ã€‚</strong></p><p><code>Number.EPSILON</code> å±æ€§è¡¨ç¤º 1 ä¸ <code>Number</code> å¯è¡¨ç¤ºçš„å¤§äº 1 çš„æœ€å°çš„æµ®ç‚¹æ•°ä¹‹é—´çš„å·®å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numbersCloseEnoughToEqual</span>(<span class="params">n1, n2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">abs</span>(n1 - n2) &lt; <span class="title class_">Number</span>.<span class="property">EPSILON</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">0.1</span> + <span class="number">0.2</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">0.3</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">numbersCloseEnoughToEqual</span>(a, b); <span class="comment">// true</span></span><br><span class="line"><span class="title function_">numbersCloseEnoughToEqual</span>(<span class="number">0.0000001</span>, <span class="number">0.0000002</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="å°ç»ƒä¹ -3"><a href="#å°ç»ƒä¹ -3" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢ä»£ç çš„æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">9999999999999999</span>); <span class="comment">// 16ä½</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼šè¾“å‡ºç»“æœ 10000000000000000ï¼ˆ17ä½ï¼‰ã€‚</p><p>è¿™ä¹Ÿæ˜¯å› ä¸ºç²¾åº¦æŸå¤±ã€‚æœ‰ 64 ä½æ¥è¡¨ç¤ºè¯¥æ•°å­—ï¼Œå…¶ä¸­ 52 ä½å¯ç”¨äºå­˜å‚¨æ•°å­—ï¼Œä½†è¿™è¿˜ä¸å¤Ÿã€‚æ‰€ä»¥æœ€ä¸é‡è¦çš„æ•°å­—å°±æ¶ˆå¤±äº†ã€‚</p><p>JavaScript ä¸ä¼šåœ¨æ­¤ç±»äº‹ä»¶ä¸­è§¦å‘ errorã€‚å®ƒä¼šå°½æœ€å¤§åŠªåŠ›ä½¿æ•°å­—ç¬¦åˆæ‰€éœ€çš„æ ¼å¼ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æ ¼å¼ä¸å¤Ÿå¤§åˆ°æ»¡è¶³éœ€æ±‚ã€‚</p><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://zh.m.wikipedia.org/zh-cn/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8">åŒç²¾åº¦æµ®ç‚¹æ•°</a><br><a href="https://leetcode.cn/link/?target=https://www.binaryconvert.com/result_double.html?decimal=048046049">Double (IEEE754 Double precision 64-bit)</a><br><a href="https://leetcode.cn/link/?target=https://zh.javascript.info/number">æ•°å­—ç±»å‹</a></p></blockquote><hr><h2 id="è°ˆè°ˆ-undefined-å’Œ-null-ï¼Ÿ"><a href="#è°ˆè°ˆ-undefined-å’Œ-null-ï¼Ÿ" class="headerlink" title="è°ˆè°ˆ undefined å’Œ null ï¼Ÿ"></a>è°ˆè°ˆ undefined å’Œ null ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p><code>undefined</code> å’Œ <code>null</code> éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚å®ƒä»¬çš„å®šä¹‰æ˜¯ï¼š</p><ul><li><p><code>undefined</code> æ„å‘³ç€å˜é‡å·²ç»å£°æ˜äº†ä½†æ˜¯æ²¡æœ‰èµ‹å€¼ã€‚</p></li><li><p><code>null</code> æ˜¯ç©ºå€¼ï¼Œå¯ä»¥ä½œä¸ºå¯¹è±¡çš„åˆå§‹å€¼ã€‚</p></li></ul><h3 id="undefined-ä¸æ˜¯-undeclared"><a href="#undefined-ä¸æ˜¯-undeclared" class="headerlink" title="undefined ä¸æ˜¯ undeclared"></a>undefined ä¸æ˜¯ undeclared</h3><ul><li><p><code>undeclared</code> æ˜¯æŒ‡å˜é‡ä»æœªåœ¨ä»£ç ä¸­å‡ºç°.ä½¿ç”¨æœªå£°æ˜çš„å˜é‡å°±ä¼šæŠ¥é”™ï¼šâ€ReferenceError: cat is not definedâ€œã€‚</p></li><li><p><code>undefined</code> åˆ™æ˜¯å£°æ˜äº†ä½†æ˜¯å€¼æ˜¯ <code>undefined</code> æˆ–è€…å€¼å¹¶ä¸å­˜åœ¨ã€‚</p></li></ul><h3 id="å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ"><a href="#å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ"></a>å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ</h3><p>å› ä¸º <code>undefined</code> æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥è¢«å½“ä½œå˜é‡æ¥ä½¿ç”¨å’Œèµ‹å€¼ï¼Œä½†æ˜¯è¿™æ ·ä¼šå½±å“ <code>undefined</code> çš„æ­£å¸¸åˆ¤æ–­ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>void 0</code> è·å¾—å®‰å…¨çš„å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(void 0); // undefined</span><br></pre></td></tr></table></figure><h3 id="å’Œ"><a href="#å’Œ" class="headerlink" title="?? å’Œ ??="></a><code>??</code> å’Œ <code>??=</code></h3><h3 id="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰"></a>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ<code>??</code>ï¼‰</h3><p>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ<code>??</code>ï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘è¿ç®—ç¬¦ï¼Œåˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦æ˜¯ <code>null</code> æˆ– <code>undefined</code>ã€‚å¦‚ä»£ç  <code>a ?? b</code>ï¼Œå¦‚æœ <code>a</code> æ˜¯ <code>null</code> æˆ– <code>undefined</code>ï¼Œè¿”å› <code>b</code>ï¼Œ åä¹‹ï¼Œè¿”å› <code>a</code>ã€‚</p><p><code>a ?? b</code> å¯ä»¥ç†è§£ä¸º: <code>a !== undefined &amp;&amp; a !== null ? a : b</code></p><p>æˆ‘ä»¬å¯ä»¥ç»™å€¼ä¸º <code>null</code> æˆ– <code>undefined</code> çš„å˜é‡ä¸€ä¸ªé»˜è®¤å€¼ã€‚å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><h3 id="vs"><a href="#vs" class="headerlink" title="?? vs ||"></a><code>??</code> vs <code>||</code></h3><p><code>??</code> å’Œ <code>||</code> çš„ç›¸åŒç‚¹ï¼šéƒ½å¯ä»¥ä¸ºå€¼ä¸º <code>null</code> æˆ– <code>undefined</code> çš„å˜é‡èµ‹é»˜è®¤å€¼ã€‚å¦‚ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br><span class="line"></span><br><span class="line">fullName = firstName || lastName;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><p>ä¸åŒç‚¹åœ¨äºï¼š</p><ul><li><p><code>??</code> åªåˆ¤æ–­å€¼ <code>null</code> å’Œ <code>undefined</code></p></li><li><p><code>||</code> æ˜¯ä»»ä½•å‡å€¼ï¼ˆ<code>0</code>ï¼Œ <code>&#39;&#39;</code>ï¼Œ <code>NaN</code>ï¼Œ <code>null</code>ï¼Œ <code>undefined</code>ï¼‰éƒ½ä¸ä¼šè¢«è¿”å›ã€‚è¿™å¯¼è‡´å¦‚æœä½ ä½¿ç”¨ <code>0</code>ï¼Œ<code>&#39;&#39;</code> æˆ– <code>NaN</code> ä½œä¸ºæœ‰æ•ˆå€¼ï¼Œå°±ä¼šå‡ºç°ä¸å¯é¢„æ–™çš„åæœã€‚</p></li></ul><p>å¦‚ä¸‹é¢ä»£ç ï¼Œåˆ¤æ–­å€¼æ˜¯ <code>&#39;&#39;</code> æ—¶ä¸¤è€…çš„ä¸åŒè¡¨ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;&#x27;</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">fullName = firstName || lastName;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦"><a href="#é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ ??="></a>é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ <code>??=</code></h3><p>é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ<code>x ??= y</code>ï¼‰ä»…åœ¨ <code>x</code> æ˜¯ç©ºå€¼ï¼ˆ<code>null</code> æˆ– <code>undefined</code>ï¼‰æ—¶å¯¹å…¶èµ‹å€¼ã€‚</p><p><code>a ??= b</code> å¯ä»¥ç†è§£ä¸º: <code>a ?? (a = b) </code>ã€‚</p><p>å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>;</span><br><span class="line">firstName ??= <span class="string">&#x27;yangyang&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstName); <span class="comment">// &#x27;yangyang&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing">ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰ - JavaScript | MDN</a><br><a href="https://leetcode.cn/link/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_assignment">é€»è¾‘ç©ºèµ‹å€¼ï¼ˆ??&#x3D;ï¼‰ - JavaScript | MDN</a></p></blockquote><h2 id="typeof-null-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#typeof-null-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="typeof null çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"></a>typeof null çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>JavaScript ä¸­ï¼Œ<code>typeof null</code> æ˜¯ <code>object</code>ï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸º <code>null</code> æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸æ˜¯å¯¹è±¡ã€‚è¿™æ˜¯ä¸ª bugï¼Œä½†æ˜¯å› ä¸ºä¿®å¤è¿™ä¸ª bug ä¼šå½±å“ç°å­˜çš„ä»£ç ï¼Œæ‰€ä»¥å°±ä¸€ç›´æ²¡æ”¹ã€‚</p><p>è¿™ä¸ª bug æ˜¯ JavaScript ç¬¬ä¸€ç‰ˆçš„é—ç•™ç‰©ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œå€¼éƒ½æ˜¯ 32 ä½å­˜å‚¨å•å…ƒï¼Œç”±ç±»å‹æ ‡ç­¾ï¼ˆ1-3ä½ï¼‰å’Œå®é™…çš„å€¼ç»„æˆã€‚ç±»å‹æ ‡ç­¾å­˜åœ¨å•å…ƒçš„ä½ä½é‡Œï¼Œæœ‰ä¸‹é¢äº”ç§ï¼š</p><ul><li>000ï¼š å¯¹è±¡ï¼Œæ•°æ®æ˜¯å¯¹è±¡ç±»å‹</li><li>1ï¼šæ•´æ•°ï¼Œå­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ä¸ª 31 ä½çš„æœ‰ç¬¦å·æ•´æ•°ã€‚</li><li>010ï¼šæµ®ç‚¹æ•°ï¼Œå­˜çš„æ•°æ®æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°</li><li>100ï¼š å­—ç¬¦ä¸²ï¼Œå­˜çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²</li><li>110ï¼šå¸ƒå°”ï¼Œå­˜çš„æ•°æ®æ˜¯å¸ƒå°”</li></ul><p>ä½ä½å¦‚æœæ˜¯ 1 ä½ï¼Œç±»å‹æ ‡ç­¾å°±æ˜¯ 1 ä½é•¿åº¦ï¼ˆå¦‚æ•´æ•°ç±»å‹ï¼‰ï¼Œå¦‚æœæ˜¯ 0ï¼Œç±»å‹æ ‡ç­¾æ˜¯ 3 ä½é•¿åº¦ï¼Œæä¾›ä¸¤ä¸ªé¢å¤–çš„ä½ï¼Œå¦‚å…¶ä½™çš„å››ä¸ªç±»å‹ã€‚</p><h3 id="å°ç»ƒä¹ -4"><a href="#å°ç»ƒä¹ -4" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p><code>typeof NaN</code> è¿”å›ä»€ä¹ˆï¼Ÿ</p><p>ç­”æ¡ˆï¼š<code>typeof NaN</code> è¿”å› <code>&#39;number&#39;</code>ã€‚<code>NaN</code> è¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå®ƒæ˜¯ <code>Number</code> çš„ç‰¹æ®Šå€¼ã€‚</p><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://2ality.com/2013/10/typeof-null.html">The history of â€œtypeof nullâ€</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JavaScript-å˜é‡&quot;&gt;&lt;a href=&quot;#JavaScript-å˜é‡&quot; class=&quot;headerlink&quot; title=&quot;JavaScript å˜é‡&quot;&gt;&lt;/a&gt;JavaScript å˜é‡&lt;/h1&gt;&lt;h2 id=&quot;varã€letã€const-çš„å·®å¼‚ï¼Ÿ&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Vueå…«è‚¡æ–‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/Vue%E5%85%AB%E8%82%A1%E6%96%87/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/Vue%E5%85%AB%E8%82%A1%E6%96%87/</id>
    <published>2024-03-07T15:31:36.000Z</published>
    <updated>2024-03-07T16:16:07.072Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vue-çš„è®¾è®¡æ¨¡å¼"><a href="#Vue-çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="Vue çš„è®¾è®¡æ¨¡å¼"></a>Vue çš„è®¾è®¡æ¨¡å¼</h2><h3 id="ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ MVVM æ¨¡å¼ï¼Œå’Œ MVC æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ä»‹ç»ä¸€ä¸‹ MVVM æ¨¡å¼ï¼Œå’Œ MVC æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>MVVM å³ Model-View-ViewModel çš„ç®€å†™ï¼Œå³æ¨¡å‹-è§†å›¾-è§†å›¾æ¨¡å‹ã€‚æ¨¡å‹ï¼ˆModelï¼‰æŒ‡çš„æ˜¯åç«¯ä¼ é€’çš„æ•°æ®ã€‚è§†å›¾ï¼ˆViewï¼‰æŒ‡çš„æ˜¯æ‰€çœ‹åˆ°çš„é¡µé¢ã€‚è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰æ˜¯ MVVM æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯è¿æ¥ View å’Œ Model çš„æ¡¥æ¢ã€‚<br>è§†å›¾æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹å‘çš„ä½œç”¨ï¼š<br>1.å°†æ¨¡å‹ï¼ˆModelï¼‰è½¬åŒ–æˆè§†å›¾ï¼ˆViewï¼‰ï¼Œå³å°†åç«¯ä¼ é€’çš„æ•°æ®è½¬åŒ–æˆæ‰€çœ‹åˆ°çš„é¡µé¢ï¼Œå®ç°çš„æ–¹å¼æ˜¯ï¼šæ•°æ®ç»‘å®šã€‚<br>2.å°†è§†å›¾ï¼ˆViewï¼‰è½¬åŒ–æˆæ¨¡å‹ï¼ˆModelï¼‰ï¼Œå³å°†æ‰€çœ‹åˆ°çš„é¡µé¢è½¬åŒ–æˆåç«¯çš„æ•°æ®ï¼Œå®ç°çš„æ–¹å¼æ˜¯ï¼šDOM äº‹ä»¶ç›‘å¬ã€‚å½“è¿™ä¸¤ä¸ªæ–¹å‘çš„æ•°æ®è½¬æ¢éƒ½å®ç°æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°æ®çš„åŒå‘ç»‘å®šã€‚</p><p><strong>MVVMæ¨¡å‹å›¾è§£ï¼š</strong></p><p><img src="https://pic.leetcode.cn/1677830973-gNoWGQ-image.png"></p><p>MVC æ˜¯ Model-View-Controller çš„ç®€å†™ï¼Œå³æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ã€‚M å’Œ V æŒ‡çš„æ„æ€å’Œ MVVM ä¸­çš„ M å’Œ V æ„æ€ä¸€æ ·ã€‚C å³ Controller æŒ‡çš„æ˜¯é¡µé¢ä¸šåŠ¡é€»è¾‘ã€‚ä½¿ç”¨ MVC çš„ç›®çš„å°±æ˜¯å°† M å’Œ V çš„ä»£ç åˆ†ç¦»ã€‚MVC æ˜¯å•å‘é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯ View è·Ÿ Model ï¼Œå¿…é¡»é€šè¿‡ Controller æ¥æ‰¿ä¸Šå¯ä¸‹ã€‚</p><p><strong>MVCæ¨¡å‹å›¾è§£ï¼š</strong></p><p><img src="https://pic.leetcode.cn/1677830876-FXzrYJ-image.png"></p><p>MVVM ä¸ MVC æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šMVVM å®ç°äº† View å’Œ Model çš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“ Model çš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œ Dom å…ƒç´ æ¥æ”¹å˜ View çš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜å±æ€§åè¯¥å±æ€§å¯¹åº” View å±‚æ˜¾ç¤ºä¼šè‡ªåŠ¨æ”¹å˜ï¼ˆåŒå‘ç»‘å®šï¼‰ã€‚</p><hr><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="Vue2-çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"><a href="#Vue2-çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›" class="headerlink" title="Vue2 çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"></a>Vue2 çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›</h3><p>ç”Ÿå‘½å‘¨æœŸå¯ä»¥ç†è§£ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ä¸ºåˆå§‹åŒ– Vue å®ä¾‹çš„è¿‡ç¨‹ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºæ•°æ®æ¸²æŸ“ï¼Œæ›´æ–° Dom çš„è¿‡ç¨‹ï¼Œç¬¬ä¸‰éƒ¨åˆ†ä¸ºé”€æ¯å®ä¾‹çš„è¿‡ç¨‹ï¼Œæ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æœ‰å¯¹åº”çš„é’©å­å‡½æ•°æ¥å®Œæˆå¯¹åº”çš„éƒ¨åˆ†è¿‡ç¨‹ã€‚</p><p>åˆå§‹åŒ–é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeCreate</span>()<span class="comment">//å®ä¾‹åˆ›å»ºå‰ï¼šæ¨¡æ¿å’Œæ•°æ®å‡æœªè·å–åˆ°</span></span><br><span class="line"><span class="title function_">created</span>()<span class="comment">//å®ä¾‹åˆ›å»ºåï¼šæœ€æ—©å¯ä»¥è·å¾—dataæ•°æ®ï¼Œä½†æ¨¡æ¿è¿˜æœªè·å–åˆ°</span></span><br><span class="line"><span class="title function_">beforfeMount</span>()<span class="comment">//æ•°æ®æŒ‚è½½å‰ï¼šæ¨¡æ¿å·²ç»è·å–åˆ°ï¼Œä½†æ˜¯æ•°æ®æœªæŒ‚è½½åˆ°æ¨¡æ¿ä¸Š</span></span><br><span class="line"><span class="title function_">mounted</span>()<span class="comment">//æ•°æ®æŒ‚è½½åï¼šæ•°æ®å·²æŒ‚è½½åˆ°æ¨¡æ¿ä¸­</span></span><br></pre></td></tr></table></figure><p>æ›´æ–°é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">beforeUpdate()//æ¨¡æ¿æ›´æ–°å‰ï¼šdataæ”¹å˜åï¼Œæ›´æ–°æ•°æ®æ¨¡æ¿å‰è°ƒç”¨ </span><br><span class="line">updated()//æ¨¡æ¿æ›´æ–°åï¼šå°†dataæ¸²æŸ“åˆ°æ•°æ®æ¨¡æ¿ä¸­</span><br></pre></td></tr></table></figure><p>é”€æ¯é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestroy</span>() <span class="comment">//å®ä¾‹é”€æ¯å‰ </span></span><br><span class="line"><span class="title function_">destroyed</span>() <span class="comment">//å®ä¾‹é”€æ¯å</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240307234024.png"></p><h3 id="keep-alive-ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"><a href="#keep-alive-ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›" class="headerlink" title="keep-alive ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"></a>keep-alive ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›</h3><p>keep-alive æ˜¯ Vue æä¾›çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨æ¥å¯¹ç»„ä»¶è¿›è¡Œç¼“å­˜ï¼Œåœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­å°†çŠ¶æ€ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“ DOMã€‚ å¦‚æœä¸ºä¸€ä¸ªç»„ä»¶åŒ…è£¹äº† keep-aliveï¼Œé‚£ä¹ˆå®ƒä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼šdeactivatedã€activatedã€‚åŒæ—¶ï¼ŒbeforeDestroy å’Œ destroyed å°±ä¸ä¼šå†è¢«è§¦å‘äº†ï¼Œå› ä¸ºç»„ä»¶ä¸ä¼šè¢«çœŸæ­£é”€æ¯ã€‚ å½“ç»„ä»¶è¢«æ¢æ‰æ—¶ï¼Œä¼šè¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ã€è§¦å‘ deactivated ç”Ÿå‘½å‘¨æœŸï¼› å½“ç»„ä»¶è¢«åˆ‡å›æ¥æ—¶ï¼Œå†å»ç¼“å­˜é‡Œæ‰¾è¿™ä¸ªç»„ä»¶ã€è§¦å‘ activated é’©å­å‡½æ•°ã€‚</p><h3 id="çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"><a href="#çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" class="headerlink" title="çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"></a>çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</h3><h4 id="1-æŒ‚è½½é˜¶æ®µ"><a href="#1-æŒ‚è½½é˜¶æ®µ" class="headerlink" title="1.æŒ‚è½½é˜¶æ®µ"></a>1.æŒ‚è½½é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠ beforeCreateã€createdã€beforeMountã€mounted 4 ä¸ªé’©å­å‡½æ•°ã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š<br>çˆ¶ beforeCreate -&gt; çˆ¶ created -&gt; çˆ¶ beforeMount -&gt; å­ beforeCreate -&gt; å­ created -&gt; å­ beforeMount -&gt; å­ mounted -&gt; çˆ¶ mounted</p><p>ä¸€å®šå¾—ç­‰å­ç»„ä»¶æŒ‚è½½å®Œæ¯•åï¼Œçˆ¶ç»„ä»¶æ‰èƒ½æŒ‚åœ¨å®Œæ¯•ï¼Œæ‰€ä»¥çˆ¶ç»„ä»¶çš„ mounted åœ¨æœ€åã€‚</p><h4 id="2-æ›´æ–°é˜¶æ®µ"><a href="#2-æ›´æ–°é˜¶æ®µ" class="headerlink" title="2.æ›´æ–°é˜¶æ®µ"></a>2.æ›´æ–°é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠ beforeUpdateã€updated 2 ä¸ªé’©å­å‡½æ•°ã€‚æ³¨æ„ï¼Œå½“çˆ¶å­ç»„ä»¶æœ‰æ•°æ®ä¼ é€’æ—¶ï¼Œæ‰æœ‰è¿™ä¸ªæ›´æ–°é˜¶æ®µæ‰§è¡Œé¡ºåºçš„æ¯”è¾ƒã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š</p><p>çˆ¶ beforeUpdate -&gt; å­ beforeUpdate -&gt; å­ updated -&gt; çˆ¶ updated</p><h4 id="3-é”€æ¯é˜¶æ®µ"><a href="#3-é”€æ¯é˜¶æ®µ" class="headerlink" title="3.é”€æ¯é˜¶æ®µ"></a>3.é”€æ¯é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠbeforeDestroyã€destroyed 2 ä¸ªé’©å­å‡½æ•°ã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š<br>çˆ¶ beforeDestroy -&gt; å­ beforeDestroy -&gt; å­ destroyed -&gt; çˆ¶ destroyed</p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>1.å½“çˆ¶ç»„ä»¶æ‰§è¡Œå®Œ beforeMount æŒ‚è½½å¼€å§‹åï¼Œä¼šä¾æ¬¡æ‰§è¡Œå­ç»„ä»¶ä¸­çš„é’©å­ï¼Œç›´åˆ°å…¨éƒ¨å­ç»„ä»¶ mounted æŒ‚è½½åˆ°å®ä¾‹ä¸Šï¼Œçˆ¶ç»„ä»¶æ‰ä¼šè¿›å…¥ mounted é’©å­</p><p>2.å­çº§è§¦å‘äº‹ä»¶ï¼Œä¼šå…ˆè§¦å‘çˆ¶çº§ beforeUpdate é’©å­ï¼Œå†å»è§¦å‘å­çº§ beforeUpdate é’©å­ï¼Œä¸‹é¢åˆæ˜¯å…ˆæ‰§è¡Œå­çº§ updated é’©å­ï¼Œåæ‰§è¡Œçˆ¶çº§ updated é’©å­</p><h3 id="å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› "><a href="#å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› " class="headerlink" title="å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› "></a>å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› </h3><p>æˆ‘ä»¬å¯ä»¥åœ¨é’©å­å‡½æ•° createdã€beforeMountã€mounted ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚æ¨èåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šèƒ½æ›´å¿«è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼›SSR ä¸æ”¯æŒ beforeMount ã€mounted é’©å­å‡½æ•°ï¼Œæ”¾åœ¨ created ä¸­æœ‰åŠ©äºä¸€è‡´æ€§ã€‚</p><h4 id="ã€å»¶ä¼¸é—®ç­”ã€‘created-å’Œ-mouted-åŒºåˆ«"><a href="#ã€å»¶ä¼¸é—®ç­”ã€‘created-å’Œ-mouted-åŒºåˆ«" class="headerlink" title="ã€å»¶ä¼¸é—®ç­”ã€‘created å’Œ mouted åŒºåˆ«"></a>ã€å»¶ä¼¸é—®ç­”ã€‘created å’Œ mouted åŒºåˆ«</h4><p>created ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¼šåœ¨ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºä¹‹åç«‹å³è°ƒç”¨ï¼Œä½†æ˜¯æ­¤æ—¶ç»„ä»¶çš„æ¨¡æ¿è¿˜æ²¡æœ‰è¢«æ¸²æŸ“æˆ HTMLï¼Œå› æ­¤åœ¨è¿™ä¸ªæ—¶å€™ä¸èƒ½è®¿é—®ç»„ä»¶ä¸­çš„ DOM å…ƒç´ ã€‚</p><p>mounted ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°åˆ™ä¼šåœ¨ç»„ä»¶çš„æ¨¡æ¿è¢«æ¸²æŸ“æˆ HTML ä¹‹åè°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è®¿é—®ç»„ä»¶ä¸­çš„ DOM å…ƒç´ ã€‚é€šå¸¸åœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­è¿›è¡Œå¼‚æ­¥è¯·æ±‚æ•°æ®ã€åˆå§‹åŒ–æ’ä»¶ã€è®¢é˜…äº‹ä»¶ç­‰æ“ä½œã€‚</p><p>æ€»ä¹‹ï¼Œcreated é’©å­å‡½æ•°é€‚ç”¨äºç»„ä»¶åˆå§‹åŒ–æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ“ä½œï¼Œè€Œ mounted é’©å­å‡½æ•°é€‚ç”¨äºéœ€è¦æ“ä½œç»„ä»¶çš„ DOM å…ƒç´ æ—¶ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Vue-çš„è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#Vue-çš„è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;Vue çš„è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;Vue çš„è®¾è®¡æ¨¡å¼&lt;/h2&gt;&lt;h3 id=&quot;ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&quot;&gt;&lt;a href=</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>HTML</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/06/html5/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/06/html5/</id>
    <published>2024-03-06T07:02:15.000Z</published>
    <updated>2024-03-06T07:25:21.342Z</updated>
    
    <content type="html"><![CDATA[<h1 id="âœHTML5"><a href="#âœHTML5" class="headerlink" title="âœHTML5"></a>âœHTML5</h1><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><h1 id="âœç›®å½•æ€»è§ˆ"><a href="#âœç›®å½•æ€»è§ˆ" class="headerlink" title="âœç›®å½•æ€»è§ˆ"></a>âœç›®å½•æ€»è§ˆ</h1><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152415.png"></p><h1 id="1-HTML5æé«˜"><a href="#1-HTML5æé«˜" class="headerlink" title="1.HTML5æé«˜"></a>1.HTML5æé«˜</h1><ul><li>HTML5çš„æ–°å¢ç‰¹æ€§ä¸»è¦æ˜¯é’ˆå¯¹äºä»¥å‰çš„ä¸è¶³ï¼Œå¢åŠ äº†ä¸€äº›æ–°çš„æ ‡ç­¾ï¼Œæ–°çš„è¡¨å•å’Œæ–°çš„è¡¨å•å±æ€§ç­‰ã€‚</li><li>è¿™äº›æ–°ç‰¹æ€§éƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ï¼ŒåŸºæœ¬éƒ½æ˜¯IE9+ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨æ‰æ”¯æŒï¼Œå¦‚æœä¸è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥å¤§é‡ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§</li><li></li></ul><p>HTML5æœ‰æ›´å¤§çš„æŠ€æœ¯é›†ï¼Œå…è®¸æ›´å¤šæ ·åŒ–å’Œå¼ºå¤§çš„ç½‘ç«™å’Œåº”ç”¨ç¨‹åºã€‚å¢åŠ äº†æ–°ç‰¹æ€§ï¼šè¯­ä¹‰ç‰¹æ€§ï¼Œæœ¬åœ°å­˜å‚¨ç‰¹æ€§ï¼Œè®¾å¤‡å…¼å®¹ç‰¹æ€§ï¼Œè¿æ¥ç‰¹æ€§ï¼Œç½‘é¡µå¤šåª’ä½“ç‰¹æ€§ï¼Œä¸‰ç»´ã€å›¾å½¢åŠç‰¹æ•ˆç‰¹æ€§ï¼Œæ€§èƒ½ä¸é›†æˆç‰¹æ€§ï¼ŒCSS3ç‰¹æ€§ã€‚è¿™ä¸ªé›†åˆæœ‰æ—¶ç§°ä¸ºHTML5å’Œæœ‹å‹ï¼Œé€šå¸¸ç¼©å†™ä¸ºHTML5</p><h2 id="1-æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥"><a href="#1-æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥" class="headerlink" title="1.æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥"></a>1.æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥</h2><p>ä»¥å‰å¸ƒå±€ï¼Œæˆ‘ä»¬åŸºæœ¬ç”¨div æ¥åšã€‚ div å¯¹äºæœç´¢å¼•æ“æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰è¯­ä¹‰çš„ã€‚</p><p>æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152419.png"></p><ul><li>&lt; header &gt; :å¤´éƒ¨æ ‡ç­¾</li><li>&lt; nav &gt;: å¯¼èˆªæ ‡ç­¾</li><li>&lt; article &gt;ï¼š å†…å®¹æ ‡ç­¾</li><li>&lt; section &gt;:å®šä¹‰æ–‡æ¡£æŸä¸ªåŒºåŸŸ</li><li>&lt; aside &gt;:ä¾§è¾¹æ æ ‡ç­¾</li><li>&lt; footer &gt;: å°¾éƒ¨æ ‡ç­¾</li></ul><p><strong>â€“æ³¨æ„ï¼š</strong></p><ul><li>è¿™ç§è¯­ä¹‰åŒ–æ ‡å‡†ä¸»è¦æ˜¯é’ˆå¯¹<strong>æœç´¢å¼•æ“</strong>çš„</li><li>è¿™äº›æ–°æ ‡ç­¾é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨<strong>å¤šæ¬¡</strong></li><li>åœ¨IE9ä¸­ï¼Œéœ€è¦æŠŠè¿™äº›å…ƒç´ è½¬æ¢ä¸º<strong>å—çº§å…ƒç´ </strong></li><li>å…¶å®ï¼Œç§»åŠ¨ç«¯æ›´å–œæ¬¢ä½¿ç”¨è¿™äº›æ ‡ç­¾</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> &lt;style&gt;</span><br><span class="line">        header, nav &#123;</span><br><span class="line">            height: 120px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            border-radius: 15px;</span><br><span class="line">            width: 800px;</span><br><span class="line">            margin: 15px auto;</span><br><span class="line">        &#125;</span><br><span class="line">        section &#123;</span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            background-color: skyblue;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;å¤´éƒ¨æ ‡ç­¾&lt;/header&gt;</span><br><span class="line">    &lt;nav&gt;å¯¼èˆªæ æ ‡ç­¾&lt;/nav&gt;</span><br><span class="line">    &lt;section&gt;æŸä¸ªåŒºåŸŸ&lt;/section&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥"><a href="#2-æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥" class="headerlink" title="2.æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥"></a>2.æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥</h2><h3 id="2-1-videoè§†é¢‘ğŸ”¥"><a href="#2-1-videoè§†é¢‘ğŸ”¥" class="headerlink" title="2.1 videoè§†é¢‘ğŸ”¥"></a>2.1 videoè§†é¢‘ğŸ”¥</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152422.png"></p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;æ–‡ä»¶åœ°å€&quot;   controls=&quot;controls&quot;&gt;&lt;/video&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">        video &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;video src=&quot;media/mi.mp4&quot; autoplay=&quot;autoplay&quot; muted=&quot;muted&quot;  loop=&quot;loop&quot; poster=&quot;media/mi9.jpg&quot;&gt;&lt;/video&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>è§†é¢‘å°±ç»ªè‡ªåŠ¨æ’­æ”¾(<strong>è°·æ­Œæµè§ˆå™¨éœ€è¦æ·»åŠ mutedæ¥è§£å†³è‡ªåŠ¨æ’­æ”¾é—®é¢˜</strong>)</td></tr><tr><td>controls</td><td>controls</td><td>å‘ç”¨æˆ·æ˜¾ç¤ºæ’­æ”¾æ§ä»¶</td></tr><tr><td>width</td><td>pixels(åƒç´ )</td><td>è®¾ç½®æ’­æ”¾å™¨å®½åº¦</td></tr><tr><td>height</td><td>pixels(åƒç´ )</td><td>è®¾ç½®æ’­æ”¾å™¨é«˜åº¦</td></tr><tr><td>loop</td><td>loop</td><td>æ’­æ”¾å®Œæ˜¯å¦ç»§ç»­æ’­æ”¾è¯¥è§†é¢‘,å¾ªç¯æ’­æ”¾</td></tr><tr><td>preload</td><td>auto(é¢„å…ˆåŠ è½½è§†é¢‘)none(ä¸åº”åŠ è½½è§†é¢‘)</td><td>è§„å®šæ˜¯å¦é¢„åŠ è½½è§†é¢‘(å¦‚æœæœ‰äº†autoplay å°±å¿½ç•¥è¯¥å±æ€§)</td></tr><tr><td>src</td><td>url</td><td>è§†é¢‘urlçš„åœ°å€</td></tr><tr><td>poster</td><td>lmgurl</td><td>åŠ è½½ç­‰å¾…çš„ç”»é¢å›¾ç‰‡</td></tr><tr><td>muted</td><td>muted</td><td>é™éŸ³æ’­æ”¾</td></tr></tbody></table><ul><li>ä¸€èˆ¬ä¸æ˜¾ç¤ºcontrolsï¼Œè®©è§†é¢‘å¾ªç¯æ’­æ”¾</li></ul><h3 id="2-2-audioéŸ³é¢‘"><a href="#2-2-audioéŸ³é¢‘" class="headerlink" title="2.2 audioéŸ³é¢‘"></a>2.2 audioéŸ³é¢‘</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152426.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src=&quot;æ–‡ä»¶åœ°å€&quot; controls=&quot;controls&quot;&gt;&lt;/audio&gt;</span><br><span class="line"></span><br><span class="line">&lt;audio src=&quot;media/music.mp3&quot; autoplay=&quot;autoplay&quot; controls=&quot;controls&quot;&gt;&lt;/audio&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™éŸ³é¢‘åœ¨å°±ç»ªåé©¬ä¸Šæ’­æ”¾</td></tr><tr><td>controls</td><td>controls</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™å‘ç”¨æˆ·æ˜¾ç¤ºæ§ä»¶ï¼Œæ¯”å¦‚æ’­æ”¾æŒ‰é’®</td></tr><tr><td>loop</td><td>loop</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™æ¯å½“éŸ³é¢‘ç»“æŸæ—¶é‡æ–°å¼€å§‹æ’­æ”¾</td></tr><tr><td>src</td><td>url</td><td>è¦æ’­æ”¾çš„éŸ³é¢‘çš„url</td></tr></tbody></table><h3 id="2-3æ€»ç»“"><a href="#2-3æ€»ç»“" class="headerlink" title="2.3æ€»ç»“"></a>2.3æ€»ç»“</h3><ol><li>éŸ³é¢‘æ ‡ç­¾å’Œè§†é¢‘æ ‡ç­¾ä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸€è‡´</li><li>æµè§ˆå™¨æ”¯æŒæƒ…å†µä¸åŒ</li><li><strong>è°·æ­Œæµè§ˆå™¨æŠŠéŸ³é¢‘å’Œè§†é¢‘è‡ªåŠ¨æ’­æ”¾ç¦æ­¢äº†</strong></li><li>æˆ‘ä»¬å¯ä»¥ç»™è§†é¢‘æ ‡ç­¾æ·»åŠ mutedå±æ€§æ¥é™éŸ³æ’­æ”¾è§†é¢‘ï¼ŒéŸ³é¢‘ä¸å¯ä»¥(å¯ä»¥é€šè¿‡JavaScriptè§£å†³)</li><li>è§†é¢‘æ ‡ç­¾æ˜¯é‡ç‚¹ï¼Œæˆ‘ä»¬ç»å¸¸è®¾ç½®è‡ªåŠ¨æ’­æ”¾ï¼Œä¸é€‚ç”¨controlsæ§ä»¶ï¼Œå¾ªç¯å’Œè®¾ç½®å¤§å°å±æ€§</li></ol><h2 id="3-æ–°å¢inputç±»å‹ğŸ”¥"><a href="#3-æ–°å¢inputç±»å‹ğŸ”¥" class="headerlink" title="3.æ–°å¢inputç±»å‹ğŸ”¥"></a>3.æ–°å¢inputç±»å‹ğŸ”¥</h2><table><thead><tr><th>å±æ€§å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>type&#x3D;â€œemailâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºEmailç±»å‹</td></tr><tr><td>type&#x3D;â€œurlâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºURLç±»å‹</td></tr><tr><td>type&#x3D;â€œdataâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¥æœŸç±»å‹</td></tr><tr><td>type&#x3D;â€œtimeâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¶é—´ç±»å‹</td></tr><tr><td>type&#x3D;â€œmonthâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæœˆç±»å‹</td></tr><tr><td>type&#x3D;â€œweekâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºå‘¨ç±»å‹</td></tr><tr><td><strong>type&#x3D;â€numberâ€</strong></td><td><strong>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ•°å­—ç±»å‹</strong></td></tr><tr><td><strong>type&#x3D;â€telâ€</strong></td><td><strong>æ‰‹æœºå·ç </strong></td></tr><tr><td><strong>type&#x3D;â€searchâ€</strong></td><td><strong>æœç´¢æ¡†</strong></td></tr><tr><td>type&#x3D;â€œcolorâ€</td><td>ç”Ÿæˆä¸€ä¸ªé¢œè‰²é€‰æ‹©è¡¨å•</td></tr></tbody></table><ul><li>é‡ç‚¹è®°ä½ï¼š <strong>number tel search</strong> è¿™ä¸‰ä¸ª</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- æˆ‘ä»¬éªŒè¯çš„æ—¶å€™å¿…é¡»æ·»åŠ formè¡¨å•åŸŸ --&gt;</span><br><span class="line">    &lt;form action=&quot;&quot;&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;é‚®ç®±: &lt;input type=&quot;email&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;ç½‘å€: &lt;input type=&quot;url&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ—¥æœŸ: &lt;input type=&quot;date&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ—¶é—´: &lt;input type=&quot;time&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ•°é‡: &lt;input type=&quot;number&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ‰‹æœºå·ç : &lt;input type=&quot;tel&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æœç´¢: &lt;input type=&quot;search&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;é¢œè‰²: &lt;input type=&quot;color&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;!-- å½“æˆ‘ä»¬ç‚¹å‡»æäº¤æŒ‰é’®å°±å¯ä»¥éªŒè¯è¡¨å•äº† --&gt;</span><br><span class="line">            &lt;li&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ–°å¢è¡¨å•å±æ€§ğŸ”¥"><a href="#4-æ–°å¢è¡¨å•å±æ€§ğŸ”¥" class="headerlink" title="4.æ–°å¢è¡¨å•å±æ€§ğŸ”¥"></a>4.æ–°å¢è¡¨å•å±æ€§ğŸ”¥</h2><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>required</td><td>è¡¨å•æ‹¥æœ‰è¯¥å±æ€§è¡¨ç¤ºå…¶å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œå¿…å¡«</td></tr><tr><td><strong>placeholder</strong></td><td><strong>æç¤ºæ–‡æœ¬</strong></td><td><strong>è¡¨å•çš„æç¤ºä¿¡æ¯ï¼Œå­˜åœ¨é»˜è®¤å€¼å°†ä¸æ˜¾ç¤º</strong></td></tr><tr><td>autofocus</td><td>autofocus</td><td>è‡ªåŠ¨èšç„¦å±æ€§ï¼Œé¡µé¢åŠ è½½å®Œæˆè‡ªåŠ¨èšç„¦åˆ°æŒ‡å®šè¡¨å•</td></tr><tr><td>autocomplete</td><td>off&#x2F;on</td><td>å½“ç”¨æˆ·åœ¨å­—æ®µå¼€å§‹é”®å…¥æ—¶ï¼Œæµè§ˆå™¨åŸºäºä¹‹å‰é”®å…¥è¿‡çš„å€¼ï¼Œåº”è¯¥æ˜¾ç¤ºå‡ºåœ¨å­—æ®µä¸­å¡«å†™çš„é€‰é¡¹ï¼Œé»˜è®¤å·²ç»æ‰“å¼€ã€‚å¦‚autocomplete&#x3D;â€œonâ€ ,å…³é—­autocomplete&#x3D;â€œoffâ€ï¼Œéœ€è¦æ”¾åœ¨è¡¨å•å†…ï¼ŒåŒæ—¶åŠ ä¸Šnameå±æ€§ï¼ŒåŒæ—¶æˆåŠŸæäº¤</td></tr><tr><td><strong>multiple</strong></td><td><strong>multiple</strong></td><td><strong>å¯ä»¥å¤šé€‰æ–‡ä»¶æç¤º</strong></td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot;&gt;</span><br><span class="line">       &lt;input type=&quot;search&quot; name=&quot;sear&quot; id=&quot;&quot; required=&quot;required&quot; placeholder=&quot;pinkè€å¸ˆ&quot; autofocus=&quot;autofocus&quot; autocommplete=&quot;off&quot;&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;</span><br><span class="line">   &lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¾ç½®æ–¹å¼ä¿®æ”¹placeholderé‡Œé¢çš„å­—ä½“é¢œè‰²</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input::placeholder &#123;</span><br><span class="line">color: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬æ–‡è½¬è‡ª <a href="https://blog.csdn.net/Augenstern_QXL/article/details/115599059">https://blog.csdn.net/Augenstern_QXL&#x2F;article&#x2F;details&#x2F;115599059</a><br>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;âœHTML5&quot;&gt;&lt;a href=&quot;#âœHTML5&quot; class=&quot;headerlink&quot; title=&quot;âœHTML5&quot;&gt;&lt;/a&gt;âœHTML5&lt;/h1&gt;&lt;p&gt;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="HTML5" scheme="https://dont-sleep-so-late.github.io/tags/HTML5/"/>
    
  </entry>
  
  <entry>
    <title>Vue3é¡¹ç›®é…ç½®</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/05/Vue/Vue3%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/05/Vue/Vue3%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/</id>
    <published>2024-03-05T09:31:36.000Z</published>
    <updated>2024-03-09T03:25:21.479Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vite@latest name -- --template vue-ts</span><br></pre></td></tr></table></figure><h2 id="ç¼–ç è§„èŒƒé…ç½®"><a href="#ç¼–ç è§„èŒƒé…ç½®" class="headerlink" title="ç¼–ç è§„èŒƒé…ç½®"></a>ç¼–ç è§„èŒƒé…ç½®</h2><blockquote><p>ESLintï¼šç¼–ç è§„èŒƒæ£€æŸ¥<br>Prettierï¼šä»£ç æ ¼å¼åŒ–å·¥å…·</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint =&gt; ESLintçš„æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@typescript-eslint/parser =&gt; ESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætsï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒtsä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@typescript-eslint/eslint-plugin =&gt; ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹tsä»£ç çš„è§„èŒƒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-plugin-vue =&gt; vue3çš„ä»£ç æ ¡éªŒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prettier =&gt; prettieræ’ä»¶çš„æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-config-prettier =&gt; è§£å†³ESLintä¸­çš„æ ·å¼è§„èŒƒå’Œprettierä¸­æ ·å¼è§„èŒƒçš„å†²çªï¼Œä»¥prettierçš„æ ·å¼è§„èŒƒä¸ºå‡†ï¼Œä½¿ESLintä¸­çš„æ ·å¼è§„èŒƒè‡ªåŠ¨å¤±æ•ˆ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-plugin-prettier =&gt; å°†prettierä½œä¸ºESLintè§„èŒƒæ¥ä½¿ç”¨</span></span><br><span class="line">cnpm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-vue prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="eslintrc-jsé…ç½®æ–‡ä»¶"><a href="#eslintrc-jsé…ç½®æ–‡ä»¶" class="headerlink" title=".eslintrc.jsé…ç½®æ–‡ä»¶"></a><code>.eslintrc.js</code>é…ç½®æ–‡ä»¶</h4><blockquote><p><a href="https://eslint.org/docs/latest/user-guide/configuring/configuration-files#configuration-file-formats">https://eslint.org/docs/latest/user-guide/configuring/configuration-files#configuration-file-formats</a><br><a href="https://eslint.vuejs.org/rules">https://eslint.vuejs.org/rules</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>, <span class="comment">//å®šä¹‰ESLintçš„è§£æå™¨</span></span><br><span class="line">    <span class="attr">extends</span>: [</span><br><span class="line">        <span class="string">&#x27;prettier/@typescript-eslint&#x27;</span>,  <span class="comment">// ä½¿@typescript-eslintä¸­çš„æ ·å¼è§„èŒƒå¤±æ•ˆï¼Œéµå¾ªprettierä¸­çš„æ ·å¼è§„èŒƒ</span></span><br><span class="line">        <span class="string">&#x27;plugin:prettier/recommended&#x27;</span> <span class="comment">// ä½¿ç”¨prettierä¸­çš„æ ·å¼è§„èŒƒï¼Œä¸”å¦‚æœä½¿ESLintä¼šæ£€æµ‹prettierçš„æ ¼å¼é—®é¢˜ï¼ŒåŒæ ·å°†æ ¼å¼é—®é¢˜ä»¥errorçš„å½¢å¼æŠ›å‡º</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">settings</span>: &#123;</span><br><span class="line">        <span class="string">&quot;react&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;React&quot;</span>,</span><br><span class="line">            <span class="string">&quot;version&quot;</span>: <span class="string">&quot;detect&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">2019</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="comment">//æŒ‡å®šä»£ç çš„è¿è¡Œç¯å¢ƒ</span></span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="prettierrc-jsé…ç½®æ–‡ä»¶"><a href="#prettierrc-jsé…ç½®æ–‡ä»¶" class="headerlink" title=".prettierrc.jsé…ç½®æ–‡ä»¶"></a><code>.prettierrc.js</code>é…ç½®æ–‡ä»¶</h4><blockquote><p><a href="https://prettier.io/docs/en/configuration.html">https://prettier.io/docs/en/configuration.html</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">printWidth</span>: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">trailingComma</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">    <span class="attr">bracketSpacing</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">jsxBracketSameLine</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">arrowParens</span>: <span class="string">&quot;avoid&quot;</span>,</span><br><span class="line">    <span class="attr">insertPragma</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">useTabs</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶"><a href="#eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶" class="headerlink" title=".eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶"></a><code>.eslintignore</code>ESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">*.md</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">dist</span><br><span class="line">/public</span><br><span class="line">.eslintrc.js</span><br><span class="line">src/assets</span><br></pre></td></tr></table></figure><h4 id="prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶"><a href="#prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶" class="headerlink" title=".prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶"></a><code>.prettierignore</code>Prettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/dist/*</span><br><span class="line">/node_modules/**</span><br><span class="line">**/*.svg</span><br><span class="line">/public/*</span><br></pre></td></tr></table></figure><h3 id="ä»£ç æ£€æŸ¥-è‡ªåŠ¨ä¿®å¤-è‡ªåŠ¨æ ¼å¼åŒ–"><a href="#ä»£ç æ£€æŸ¥-è‡ªåŠ¨ä¿®å¤-è‡ªåŠ¨æ ¼å¼åŒ–" class="headerlink" title="ä»£ç æ£€æŸ¥ &amp; è‡ªåŠ¨ä¿®å¤ &amp; è‡ªåŠ¨æ ¼å¼åŒ–"></a>ä»£ç æ£€æŸ¥ &amp; è‡ªåŠ¨ä¿®å¤ &amp; è‡ªåŠ¨æ ¼å¼åŒ–</h3><p><code>package.json</code>çš„<code>scripts</code>ä¸­æ·»åŠ </p><blockquote><p><code>--ext</code>: é…ç½®è¦æ£€æŸ¥æ–‡ä»¶çš„åç¼€<br><code>eslint --ext .js --ext .ts --ext .vue src</code>: åªæ£€æŸ¥srcæ–‡ä»¶å¤¹ä¸‹çš„js&#x2F;ts&#x2F;vueæ–‡ä»¶</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;lint&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src&quot;,</span><br><span class="line">    &quot;lint-fix&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src --fix&quot;,</span><br><span class="line">    &quot;prettier&quot;: &quot;prettier --write .&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»£ç æ£€æŸ¥</span></span><br><span class="line">cnpm run lint</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªåŠ¨ä¿®å¤  tips: éƒ¨åˆ†ä»£ç ä¿®å¤å¯èƒ½ä¼šå½±å“åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ä¼šè‡ªåŠ¨ä¿®å¤ï¼Œä¼šç»™å‡ºæç¤º</span></span><br><span class="line">cnpm run lint-fix</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prettier è‡ªåŠ¨æ ¼å¼åŒ–</span></span><br><span class="line">cnpm run prettier</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿä¸€ä»£ç é£æ ¼"><a href="#ç»Ÿä¸€ä»£ç é£æ ¼" class="headerlink" title="ç»Ÿä¸€ä»£ç é£æ ¼"></a>ç»Ÿä¸€ä»£ç é£æ ¼</h3><blockquote><p>éœ€å®‰è£…æ’ä»¶<code>EditorConfig for VS Code</code></p></blockquote><p><code>.editorconfig</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># https://editorconfig.org</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">insert_final_newline = true</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">insert_final_newline = false</span><br><span class="line">trim_trailing_whitespace = false</span><br></pre></td></tr></table></figure><h2 id="Viteé…ç½®"><a href="#Viteé…ç½®" class="headerlink" title="Viteé…ç½®"></a>Viteé…ç½®</h2><h3 id="é…ç½®è·¯å¾„åˆ«å"><a href="#é…ç½®è·¯å¾„åˆ«å" class="headerlink" title="é…ç½®è·¯å¾„åˆ«å"></a>é…ç½®è·¯å¾„åˆ«å</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="comment">//srcé…ç½®è·¯å¾„</span></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="comment">//@æ›¿ä»£src</span></span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œpathâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…nodeå£°æ˜æ–‡ä»¶</span></span><br><span class="line">cnpm i @types/node --save-dev</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°<code>tsconfig.json</code>é…ç½®æ–‡ä»¶,æ‰¾åˆ°é…ç½®é¡¹<code>compilerOptions </code>æ·»åŠ é…ç½®,è¿™ä¸€æ­¥çš„ä½œç”¨æ˜¯è®© IDE å¯ä»¥å¯¹è·¯å¾„è¿›è¡Œæ™ºèƒ½æç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;baseUrl&quot;: &quot;.&quot;,</span><br><span class="line">&quot;paths&quot;: &#123;</span><br><span class="line">  &quot;@/*&quot;: [</span><br><span class="line">    &quot;src/*&quot;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p><code>.env.dev</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å‘ç¯å¢ƒ</span><br><span class="line">NODE_ENV=&#x27;dev&#x27;</span><br><span class="line"></span><br><span class="line"># ä¸ºäº†é˜²æ­¢æ„å¤–åœ°å°†ä¸€äº›ç¯å¢ƒå˜é‡æ³„æ¼åˆ°å®¢æˆ·ç«¯ï¼Œåªæœ‰ä»¥ VITE_ ä¸ºå‰ç¼€çš„å˜é‡æ‰ä¼šæš´éœ²ç»™ç»è¿‡ vite å¤„ç†çš„ä»£ç ã€‚</span><br><span class="line"># tsä¸­é€šè¿‡`import.meta.env.VITE_APP_BASE_API`å–å€¼</span><br><span class="line">VITE_APP_PORT = 5173</span><br><span class="line">VITE_APP_BASE_API = &#x27;/dev-api&#x27;</span><br></pre></td></tr></table></figure><h3 id="åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜-é…ç½®é¡¹ç›®è¿è¡Œç«¯å£"><a href="#åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜-é…ç½®é¡¹ç›®è¿è¡Œç«¯å£" class="headerlink" title="åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ &amp; é…ç½®é¡¹ç›®è¿è¡Œç«¯å£"></a>åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ &amp; é…ç½®é¡¹ç›®è¿è¡Œç«¯å£</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–`.env`ç¯å¢ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; </span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">      <span class="comment">// host:&#x27;localhost&#x27;ï¼Œ//åªèƒ½æœ¬åœ°è®¿é—®</span></span><br><span class="line">      <span class="attr">host</span>:<span class="string">&#x27;0.0.0.0&#x27;</span>,<span class="comment">//å±€åŸŸç½‘åˆ«äººä¹Ÿå¯è®¿é—®</span></span><br><span class="line">      <span class="attr">port</span>: <span class="title class_">Number</span>(env.<span class="property">VITE_APP_PORT</span>),</span><br><span class="line">      <span class="comment">// è¿è¡Œæ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">      <span class="comment">// open: true,</span></span><br><span class="line">      <span class="attr">proxy</span>: &#123;</span><br><span class="line">        [env.<span class="property">VITE_APP_BASE_API</span>]: &#123;</span><br><span class="line">          <span class="attr">target</span>: <span class="string">&#x27;http://localhost:1218&#x27;</span>,</span><br><span class="line">          <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">rewrite</span>: <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">            path.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + env.<span class="property">VITE_APP_BASE_API</span>), <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥scsså…¨å±€å˜é‡"><a href="#å¼•å…¥scsså…¨å±€å˜é‡" class="headerlink" title="å¼•å…¥scsså…¨å±€å˜é‡"></a>å¼•å…¥scsså…¨å±€å˜é‡</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// å¼•å…¥scsså…¨å±€å˜é‡</span></span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">      <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">        <span class="attr">scss</span>: &#123;</span><br><span class="line">          <span class="attr">additionalData</span>: <span class="string">`@import &quot;@/styles/app-theme.scss&quot;;`</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>src/styles/app-theme.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$dark_main_color</span>: <span class="number">#021b32</span>;</span><br></pre></td></tr></table></figure><h2 id="TypeScripté…ç½®"><a href="#TypeScripté…ç½®" class="headerlink" title="TypeScripté…ç½®"></a>TypeScripté…ç½®</h2><p><code>tsconfig.json</code></p><blockquote><p>é€šè¿‡viteåˆ›å»ºé¡¹ç›®åçš„é»˜è®¤é…ç½®</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;useDefineForClassFields&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Node&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.tsx&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;references&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig.node.json&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ-routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚"><a href="#è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ-routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚" class="headerlink" title="è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ@&#x2F;routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚"></a>è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ@&#x2F;routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚</h3><p><code>tsconfig.json</code>æ–°å¢å¦‚ä¸‹é…ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;src/*&quot;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è§£å†³ï¼štemplateä¸­ä½¿ç”¨-storeæŠ¥é”™"><a href="#è§£å†³ï¼štemplateä¸­ä½¿ç”¨-storeæŠ¥é”™" class="headerlink" title="è§£å†³ï¼štemplateä¸­ä½¿ç”¨$storeæŠ¥é”™"></a>è§£å†³ï¼štemplateä¸­ä½¿ç”¨$storeæŠ¥é”™</h3><p><code>vite-env.d.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Store</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">$store</span>: <span class="title class_">Store</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p><code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;small-tools-web&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.1&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;module&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    // è¿è¡Œ</span><br><span class="line">    &quot;dev&quot;: &quot;vite --mode dev&quot;,</span><br><span class="line">    // æ„å»ºç”Ÿæˆ dist æ–‡ä»¶å¤¹</span><br><span class="line">    &quot;build:prod&quot;: &quot;vue-tsc --noEmit &amp;&amp; vite build --mode prod&quot;,</span><br><span class="line">    // åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªé™æ€ Web æœåŠ¡å™¨ï¼Œå°† dist æ–‡ä»¶å¤¹è¿è¡Œåœ¨ http://localhost:8080</span><br><span class="line">    &quot;preview&quot;: &quot;vite preview --port 8080 --mode prod&quot;,</span><br><span class="line">    // eslintæ£€æŸ¥</span><br><span class="line">    &quot;lint&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src&quot;,</span><br><span class="line">    // eslintè‡ªåŠ¨ä¿®å¤</span><br><span class="line">    &quot;lint-fix&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src --fix&quot;,</span><br><span class="line">    // prettierè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </span><br><span class="line">    &quot;prettier&quot;: &quot;prettier --write .&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;vue&quot;: &quot;^3.2.37&quot;,</span><br><span class="line">    &quot;vue-router&quot;: &quot;^4.1.2&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;@types/node&quot;: &quot;^18.0.5&quot;,</span><br><span class="line">    &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^5.30.6&quot;,</span><br><span class="line">    &quot;@typescript-eslint/parser&quot;: &quot;^5.30.6&quot;,</span><br><span class="line">    &quot;@vitejs/plugin-vue&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;eslint&quot;: &quot;^8.20.0&quot;,</span><br><span class="line">    &quot;eslint-config-prettier&quot;: &quot;^8.5.0&quot;,</span><br><span class="line">    &quot;eslint-plugin-prettier&quot;: &quot;^4.2.1&quot;,</span><br><span class="line">    &quot;eslint-plugin-vue&quot;: &quot;^9.2.0&quot;,</span><br><span class="line">    &quot;prettier&quot;: &quot;^2.7.1&quot;,</span><br><span class="line">    &quot;typescript&quot;: &quot;^4.6.4&quot;,</span><br><span class="line">    &quot;vite&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;vue-tsc&quot;: &quot;^0.38.4&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># devDependencies: é‡Œé¢çš„æ’ä»¶åªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ </span><br><span class="line"># dependencies: éœ€è¦å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„</span><br><span class="line"></span><br><span class="line"># å†™å…¥åˆ° dependencies å¯¹è±¡</span><br><span class="line">npm i module_name -S    =&gt;    npm install module_name --save</span><br><span class="line"></span><br><span class="line"># å†™å…¥åˆ° devDependencies å¯¹è±¡</span><br><span class="line">npm i module_name -D    =&gt;    npm install module_name --save-dev</span><br></pre></td></tr></table></figure><h2 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h2><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass --save-dev</span><br></pre></td></tr></table></figure><h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h2><blockquote><p><a href="https://router.vuejs.org/zh">https://router.vuejs.org/zh</a></p></blockquote><h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></figure><h3 id="å…¥é—¨é…ç½®"><a href="#å…¥é—¨é…ç½®" class="headerlink" title="å…¥é—¨é…ç½®"></a>å…¥é—¨é…ç½®</h3><p><code>src/router/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/error-page/404.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><p><code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ è·¯ç”± â†“â†“â†“ ******</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>src/views/error-page/404.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;404&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><code>src/App.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- è·¯ç”±å‡ºå£ --&gt;</span><br><span class="line">  &lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt;</span><br><span class="line">  &lt;router-view/&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>è®¿é—®<code>http://ip:ç«¯å£/#/404</code></p><h2 id="Element-Plus"><a href="#Element-Plus" class="headerlink" title="Element-Plus"></a>Element-Plus</h2><blockquote><p><a href="https://element-plus.gitee.io/zh-CN">https://element-plus.gitee.io/zh-CN</a></p></blockquote><h3 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br><span class="line">npm install @element-plus/icons-vue</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ element-plus â†“â†“â†“ ******</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ‰€æœ‰å›¾æ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">    app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="Volar-æ”¯æŒ"><a href="#Volar-æ”¯æŒ" class="headerlink" title="Volar æ”¯æŒ"></a>Volar æ”¯æŒ</h3><p><code>tsconfig.json</code>ä¸­é€šè¿‡<code>compilerOptions.types</code>æŒ‡å®šå…¨å±€ç»„ä»¶ç±»å‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;element-plus/global&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">link</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">class</span>=<span class="string">&quot;is-loading&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:icon</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Check&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Message&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Star&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; <span class="title class_">Check</span>, <span class="title class_">Delete</span>, <span class="title class_">Edit</span>, <span class="title class_">Message</span>, <span class="title class_">Search</span>, <span class="title class_">Star</span>, &#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ ·å¼"><a href="#è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h2><h3 id="è‡ªå®šä¹‰æ ·å¼-1"><a href="#è‡ªå®šä¹‰æ ·å¼-1" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/styles/index.scss&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>src/styles/index.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./element-plus-theme&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#021b32</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/styles/element-plus-theme.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ è¦†ç›– element-plus çš„æ ·å¼ â†“â†“â†“ ******</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰é’®</span></span><br><span class="line"><span class="selector-class">.el-button--text</span> &#123;</span><br><span class="line">  <span class="comment">// background-color: #8f6732 !important; </span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><blockquote><p><a href="https://pinia.vuejs.org/">https://pinia.vuejs.org</a></p></blockquote><h3 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia --save</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// pinia</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line"></span><br><span class="line"><span class="comment">// store</span></span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$store</span> = <span class="title function_">useStore</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p><code>src/store/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useAppStore <span class="keyword">from</span> <span class="string">&#x27;./modules/app&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useStore</span> = (<span class="params"></span>) =&gt; (&#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="title function_">useAppStore</span>()</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore;</span><br></pre></td></tr></table></figure><p><code>src/store/modules/app.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/app&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useAppStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;app&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: (): <span class="function"><span class="params">AppState</span> =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="variable language_">localStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>) || <span class="string">&#x27;Small Tools&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">setName</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>, name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useAppStore;</span><br></pre></td></tr></table></figure><p><code>src/utils/storage.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * window.localStorage =&gt; æµè§ˆå™¨æ°¸ä¹…å­˜å‚¨ï¼Œç”¨äºé•¿ä¹…ä¿å­˜æ•´ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œä¿å­˜çš„æ•°æ®æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œç›´åˆ°æ‰‹åŠ¨å»åˆ é™¤ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable language_">localStorage</span> = &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: <span class="built_in">string</span>, val: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(val));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">json</span>: <span class="built_in">any</span> = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * window.sessionStorage =&gt; æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®ä¿å­˜åœ¨å½“å‰ä¼šè¯ä¸­ï¼Œåœ¨å…³é—­çª—å£æˆ–æ ‡ç­¾é¡µä¹‹åå°†ä¼šåˆ é™¤è¿™äº›æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable language_">sessionStorage</span> = &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: <span class="built_in">string</span>, val: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(val));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">json</span>: <span class="built_in">any</span> = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é¡µé¢å¼•ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; app.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; $store.app.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;el-button @click=&quot;changeStore(&#x27;666&#x27;)&quot;&gt;change store&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">import useStore from &quot;@/store&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; app &#125; = useStore()</span><br><span class="line">// const name = ref(app.name)</span><br><span class="line">// å“åº”å¼</span><br><span class="line">const &#123; name: name &#125; = storeToRefs(app)</span><br><span class="line"></span><br><span class="line">function changeStore(value: string) &#123;</span><br><span class="line">    app.setName(value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="Axioså’ŒAPIå°è£…"><a href="#Axioså’ŒAPIå°è£…" class="headerlink" title="Axioså’ŒAPIå°è£…"></a>Axioså’ŒAPIå°è£…</h2><blockquote><p><a href="http://www.axios-js.com/zh-cn/docs">http://www.axios-js.com/zh-cn/docs</a></p></blockquote><h3 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install axios --save</span><br></pre></td></tr></table></figure><h3 id="axioså·¥å…·å°è£…"><a href="#axioså·¥å…·å°è£…" class="headerlink" title="axioså·¥å…·å°è£…"></a>axioså·¥å…·å°è£…</h3><p><code>src/utils/request.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; <span class="title class_">AxiosRequestConfig</span>, <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span>, <span class="title class_">ElMessageBox</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_APP_BASE_API</span>,</span><br><span class="line">  <span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼š50s</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">50000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span> &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!config.<span class="property">headers</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">        <span class="string">`Expected &#x27;config&#x27; and &#x27;config.headers&#x27; not to be undefined`</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="keyword">if</span> (user.<span class="property">token</span>) &#123;</span><br><span class="line">      <span class="comment">// æˆæƒè®¤è¯</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">Authorization</span> = user.<span class="property">token</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç§Ÿæˆ·ID</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;TENANT_ID&#x27;</span>] = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = response.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; code, msg &#125; = res;</span><br><span class="line">    <span class="keyword">if</span> (code === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// tokenè¿‡æœŸ</span></span><br><span class="line">      <span class="keyword">if</span> (code === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;æ‚¨çš„ç™»å½•è´¦å·å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•&quot;</span>, &#123;</span><br><span class="line">          <span class="attr">confirmButtonText</span>: <span class="string">&quot;å†æ¬¡ç™»å½•&quot;</span>,</span><br><span class="line">          <span class="attr">cancelButtonText</span>: <span class="string">&quot;å–æ¶ˆ&quot;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span></span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ¸…é™¤æµè§ˆå™¨å…¨éƒ¨ç¼“å­˜</span></span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">          <span class="comment">// è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">          <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">          location.<span class="title function_">reload</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">          <span class="attr">message</span>: msg || <span class="string">&#x27;ç³»ç»Ÿå‡ºé”™&#x27;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(msg || <span class="string">&#x27;Error&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; msg &#125; = error.<span class="property">response</span>.<span class="property">data</span>;</span><br><span class="line">    <span class="comment">// æœªè®¤è¯</span></span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;æ‚¨çš„ç™»å½•è´¦å·å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&quot;å†æ¬¡ç™»å½•&quot;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>: <span class="string">&quot;å–æ¶ˆ&quot;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span></span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ¸…é™¤æµè§ˆå™¨å…¨éƒ¨ç¼“å­˜</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="comment">// è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">        location.<span class="title function_">reload</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•!&quot;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(msg || <span class="string">&#x27;Error&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure><h3 id="apiå°è£…"><a href="#apiå°è£…" class="headerlink" title="apiå°è£…"></a>apiå°è£…</h3><p>&#96;src&#x2F;api&#x2F;</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¿åˆ°æ‰€æœ‰api</span></span><br><span class="line"><span class="keyword">const</span> modulesFiles = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">globEager</span>(<span class="string">&#x27;./*/*.*&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="attr">modules</span>: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> modulesFiles) &#123;</span><br><span class="line">  <span class="keyword">const</span> moduleName = key.<span class="title function_">replace</span>(<span class="regexp">/(.*\/)*([^.]+).*/gi</span>, <span class="string">&#x27;$2&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">value</span>: <span class="built_in">any</span> = modulesFiles[key];</span><br><span class="line">  <span class="keyword">if</span> (value.<span class="property">default</span>) &#123;</span><br><span class="line">    <span class="comment">// å…¼å®¹js</span></span><br><span class="line">    modules[moduleName] = value.<span class="property">default</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å…¼å®¹ts</span></span><br><span class="line">    modules[moduleName] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(666, modules);</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> modules;</span><br></pre></td></tr></table></figure><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®å…¨å±€api</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span> = api;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="apiè°ƒç”¨demo"><a href="#apiè°ƒç”¨demo" class="headerlink" title="apiè°ƒç”¨demo"></a>apiè°ƒç”¨demo</h3><p><code>src/api/system/sys_login.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Captcha</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/api/system/login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosPromise</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–éªŒè¯ç </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCaptcha</span>(<span class="params"></span>): <span class="title class_">AxiosPromise</span>&lt;<span class="title class_">Captcha</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/captcha?t=&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>().<span class="title function_">toString</span>(),</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/types/api/system/login.d.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯ç ç±»å‹å£°æ˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Captcha</span> &#123;</span><br><span class="line">    <span class="attr">img</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">uuid</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/views/login/index.vue</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ç»„ä»¶å®ä¾‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; proxy &#125;: any = <span class="title function_">getCurrentInstance</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// è·å–éªŒè¯ç </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleCaptcha</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> res = <span class="keyword">await</span> proxy.<span class="property">$api</span>.<span class="property">sys_login</span>.<span class="title function_">getCaptcha</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res:&#x27;</span>, res);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">handleCaptcha</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><h3 id="ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­"><a href="#ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­" class="headerlink" title="ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­"></a>ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­</h3><p><code>src/views/login/index.vue</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleLogin</span>(<span class="params"></span>) &#123;</span><br><span class="line">  loginFormRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      state.<span class="property">loading</span> = <span class="literal">true</span>;</span><br><span class="line">      user.<span class="title function_">login</span>(state.<span class="property">loginForm</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: state.<span class="property">redirect</span> || <span class="string">&#x27;/&#x27;</span>, <span class="attr">query</span>: state.<span class="property">otherQuery</span> &#125;);</span><br><span class="line">        state.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        state.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="title function_">handleCaptchaGenerate</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p><code>src/store/modules/user.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LoginFormData</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/api/system/login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/user&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; login, logout &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/system/sys_login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getUserPerm &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/system/user&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resetRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">UserState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">userId</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">openId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="variable language_">localStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">nickname</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">avatarUrl</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">roleNames</span>: [],</span><br><span class="line">    <span class="attr">permissionTreeList</span>: [],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">RESET_STATE</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$reset();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç™»å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">login</span>(<span class="params">loginData: LoginFormData</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; username, password, code, uuid &#125; = loginData;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">login</span>(&#123;</span><br><span class="line">          <span class="attr">username</span>: username.<span class="title function_">trim</span>(),</span><br><span class="line">          <span class="attr">password</span>: password,</span><br><span class="line">          <span class="attr">grant_type</span>: <span class="string">&#x27;captcha&#x27;</span>,</span><br><span class="line">          <span class="attr">code</span>: code,</span><br><span class="line">          <span class="attr">uuid</span>: uuid,</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; tokenType, value &#125; = response.<span class="property">data</span>;</span><br><span class="line">          <span class="keyword">const</span> token = tokenType + <span class="string">&#x27; &#x27;</span> + value;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">set</span>(<span class="string">&#x27;token&#x27;</span>, token);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">token</span> = token;</span><br><span class="line">          <span class="title function_">resolve</span>(token);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ˜µç§°ã€å¤´åƒã€è§’è‰²é›†åˆã€æƒé™é›†åˆï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getUserInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getUserPerm</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="string">&#x27;Verification failed, please Login again.&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">const</span> &#123; userId, openId, nickname, avatarUrl, roleNames, permissionTreeList &#125; = data;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">userId</span> = userId;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">openId</span> = openId;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">nickname</span> = nickname;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">avatarUrl</span> = avatarUrl;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">roleNames</span> = roleNames;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">permissionTreeList</span> = permissionTreeList;</span><br><span class="line">          <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  æ³¨é”€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">logout</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">RESET_STATE</span>();</span><br><span class="line">          <span class="title function_">resetRouter</span>();</span><br><span class="line">          <span class="title function_">resolve</span>(<span class="literal">null</span>);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…é™¤ Token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">resetToken</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">RESET_STATE</span>();</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="literal">null</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useUserStore;</span><br></pre></td></tr></table></figure><p><code>src/store/modules/permission.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PermissionState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/permission&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RouteRecordRaw</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; constantRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modules = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">glob</span>(<span class="string">&#x27;../../views/**/**.vue&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">Layout</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;@/layout/index.vue&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">parentView</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;@/layout/parentView.vue&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">filterAsyncRoutes</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  routes: RouteRecordRaw[],</span></span><br><span class="line"><span class="params">  roleNames: <span class="built_in">string</span>[]</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">res</span>: <span class="title class_">RouteRecordRaw</span>[] = [];</span><br><span class="line">  routes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> tmp = &#123; ...route &#125; <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">if</span> (tmp.<span class="property">component</span> === <span class="string">&#x27;Layout&#x27;</span>) &#123;</span><br><span class="line">      tmp.<span class="property">component</span> = <span class="title class_">Layout</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tmp.<span class="property">component</span> === <span class="string">&#x27;parentView&#x27;</span>) &#123;</span><br><span class="line">      tmp.<span class="property">component</span> = parentView</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> component = modules[<span class="string">`../../views/<span class="subst">$&#123;tmp.component&#125;</span>.vue`</span>] <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">      <span class="keyword">if</span> (component) &#123;</span><br><span class="line">        tmp.<span class="property">component</span> = modules[<span class="string">`../../views/<span class="subst">$&#123;tmp.component&#125;</span>.vue`</span>];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tmp.<span class="property">component</span> = modules[<span class="string">`../../views/error-page/404.vue`</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">push</span>(tmp);</span><br><span class="line">    <span class="keyword">if</span> (tmp.<span class="property">children</span>) &#123;</span><br><span class="line">      tmp.<span class="property">children</span> = <span class="title function_">filterAsyncRoutes</span>(tmp.<span class="property">children</span>, roleNames);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¾§è¾¹æ æƒé™è·¯ç”±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> usePermissionStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;permission&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">PermissionState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">routes</span>: [],</span><br><span class="line">    <span class="attr">addRoutes</span>: [],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">setRoutes</span>(<span class="params">routes: RouteRecordRaw[]</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">addRoutes</span> = routes;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">routes</span> = constantRoutes.<span class="title function_">concat</span>(routes);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">generateRoutes</span>(<span class="params">roleNames: <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">      <span class="keyword">const</span> accessedRoutes = <span class="title function_">filterAsyncRoutes</span>(user.<span class="property">permissionTreeList</span>, roleNames);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setRoutes</span>(accessedRoutes);</span><br><span class="line">        <span class="title function_">resolve</span>(accessedRoutes);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> usePermissionStore;</span><br></pre></td></tr></table></figure><h3 id="router"><a href="#router" class="headerlink" title="router"></a>router</h3><p><code>src/router/index.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createRouter, createWebHashHistory, RouteRecordRaw &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">// é™æ€è·¯ç”±</span><br><span class="line">export const constantRoutes: Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/login&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/login/index.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/test&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/test/index.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/404&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/error-page/404.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºè·¯ç”±</span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">    history: createWebHashHistory(),</span><br><span class="line">    routes: constantRoutes as RouteRecordRaw[],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// é‡ç½®è·¯ç”±</span><br><span class="line">export function resetRouter() &#123;</span><br><span class="line">    const &#123; permission &#125; = useStore();</span><br><span class="line">    permission.routes.forEach((route) =&gt; &#123;</span><br><span class="line">        const name = route.name;</span><br><span class="line">        if (name &amp;&amp; router.hasRoute(name)) &#123;</span><br><span class="line">            router.removeRoute(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure><h3 id="åˆ·æ–°è·¯ç”±æ—¶æƒé™"><a href="#åˆ·æ–°è·¯ç”±æ—¶æƒé™" class="headerlink" title="åˆ·æ–°è·¯ç”±æ—¶æƒé™"></a>åˆ·æ–°è·¯ç”±æ—¶æƒé™</h3><p><code>permission.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NProgress</span> <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span>;</span><br><span class="line"><span class="title class_">NProgress</span>.<span class="title function_">configure</span>(&#123; <span class="attr">showSpinner</span>: <span class="literal">false</span> &#125;); <span class="comment">// è¿›åº¦ç¯æ˜¾ç¤º/éšè—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™½åå•è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/auth-redirect&#x27;</span>];</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">start</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; user, permission &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">  <span class="keyword">const</span> hasToken = user.<span class="property">token</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasToken) &#123;</span><br><span class="line">    <span class="comment">// ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> hasGetUserInfo = user.<span class="property">roleNames</span>.<span class="property">length</span> &gt; <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">if</span> (hasGetUserInfo) &#123;</span><br><span class="line">        <span class="keyword">if</span> (to.<span class="property">matched</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">from</span>.<span class="property">name</span> ? <span class="title function_">next</span>(&#123; <span class="attr">name</span>: <span class="keyword">from</span>.<span class="property">name</span> <span class="keyword">as</span> <span class="built_in">any</span> &#125;) : <span class="title function_">next</span>(<span class="string">&#x27;/401&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">next</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">await</span> user.<span class="title function_">getUserInfo</span>();</span><br><span class="line">          <span class="keyword">const</span> roleNames = user.<span class="property">roleNames</span>;</span><br><span class="line">          <span class="keyword">const</span> <span class="attr">accessRoutes</span>: <span class="built_in">any</span> = <span class="keyword">await</span> permission.<span class="title function_">generateRoutes</span>(roleNames);</span><br><span class="line">          accessRoutes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">            router.<span class="title function_">addRoute</span>(route);</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="title function_">next</span>(&#123; ...to, <span class="attr">replace</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="comment">// ç§»é™¤ token å¹¶è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">          <span class="keyword">await</span> user.<span class="title function_">resetToken</span>();</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>((error <span class="keyword">as</span> <span class="built_in">any</span>) || <span class="string">&#x27;Has Error&#x27;</span>);</span><br><span class="line">          <span class="title function_">next</span>(<span class="string">`/login?redirect=<span class="subst">$&#123;to.path&#125;</span>`</span>);</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æœªç™»å½•å¯ä»¥è®¿é—®ç™½åå•é¡µé¢(ç™»å½•é¡µé¢)</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">indexOf</span>(to.<span class="property">path</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/login?redirect=<span class="subst">$&#123;to.path&#125;</span>`</span>);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±æƒé™</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/permission&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€è·¯ç”±å¸ƒå±€"><a href="#åŠ¨æ€è·¯ç”±å¸ƒå±€" class="headerlink" title="åŠ¨æ€è·¯ç”±å¸ƒå±€"></a>åŠ¨æ€è·¯ç”±å¸ƒå±€</h2><h3 id="åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢"><a href="#åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢" class="headerlink" title="åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢"></a>åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢</h3><p>å…·ä½“è§æºç <code>src/layout</code>éƒ¨åˆ†</p><p><code>src/layout/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;classObj&quot; class=&quot;app-wrapper&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;device === &#x27;mobile&#x27; &amp;&amp; sidebar.opened&quot; class=&quot;drawer-bg&quot; @click=&quot;handleClickOutside&quot; /&gt;</span><br><span class="line">    &lt;Sidebar class=&quot;sidebar-container&quot; /&gt;</span><br><span class="line">    &lt;div :class=&quot;&#123; hasTagsView: needTagsView &#125;&quot; class=&quot;main-container&quot;&gt;</span><br><span class="line">      &lt;div :class=&quot;&#123; &#x27;fixed-header&#x27;: true &#125;&quot;&gt;</span><br><span class="line">        &lt;navbar /&gt;</span><br><span class="line">        &lt;tags-view v-if=&quot;needTagsView&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;app-main /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, watchEffect &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useWindowSize &#125; from &#x27;@vueuse/core&#x27;;</span><br><span class="line">import &#123; AppMain, Navbar, TagsView &#125; from &#x27;./components/index&#x27;;</span><br><span class="line">import Sidebar from &#x27;./components/Sidebar/index.vue&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const &#123; width &#125; = useWindowSize();</span><br><span class="line">const WIDTH = 992;</span><br><span class="line"></span><br><span class="line">const &#123; app, setting &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line">const needTagsView = computed(() =&gt; setting.tagsView);</span><br><span class="line"></span><br><span class="line">const classObj = computed(() =&gt; (&#123;</span><br><span class="line">  hideSidebar: !sidebar.value.opened,</span><br><span class="line">  openSidebar: sidebar.value.opened,</span><br><span class="line">  withoutAnimation: sidebar.value.withoutAnimation,</span><br><span class="line">  mobile: device.value === &#x27;mobile&#x27;,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  if (width.value &lt; WIDTH) &#123;</span><br><span class="line">    app.toggleDevice(&#x27;mobile&#x27;);</span><br><span class="line">    app.closeSideBar(true);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    app.toggleDevice(&#x27;desktop&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function handleClickOutside() &#123;</span><br><span class="line">  app.closeSideBar(false);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">@import &#x27;@/styles/mixin.scss&#x27;;</span><br><span class="line">@import &#x27;@/styles/variables.module.scss&#x27;;</span><br><span class="line"></span><br><span class="line">.app-wrapper &#123;</span><br><span class="line">  @include clearfix;</span><br><span class="line">  position: relative;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line"></span><br><span class="line">  &amp;.mobile.openSidebar &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.drawer-bg &#123;</span><br><span class="line">  background: #000;</span><br><span class="line">  opacity: 0.3;</span><br><span class="line">  width: 100%;</span><br><span class="line">  top: 0;</span><br><span class="line">  height: 100%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: 999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fixed-header &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  z-index: 9;</span><br><span class="line">  width: calc(100% - #&#123;$sideBarWidth&#125;);</span><br><span class="line">  transition: width 0.28s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hideSidebar .fixed-header &#123;</span><br><span class="line">  width: calc(100% - 54px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mobile .fixed-header &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/parentView.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;ParentView&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>src/layout/components/AppMain.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class=&quot;app-main&quot;&gt;</span><br><span class="line">    &lt;router-view v-slot=&quot;&#123; Component, route &#125;&quot;&gt;</span><br><span class="line">      &lt;transition name=&quot;router-fade&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">        &lt;keep-alive :include=&quot;cachedViews&quot;&gt;</span><br><span class="line">          &lt;component :is=&quot;Component&quot; :key=&quot;route.fullPath&quot; /&gt;</span><br><span class="line">        &lt;/keep-alive&gt;</span><br><span class="line">      &lt;/transition&gt;</span><br><span class="line">    &lt;/router-view&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const cachedViews = computed(() =&gt; tagsView.cachedViews);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.app-main &#123;</span><br><span class="line">  min-height: calc(100vh - 50px);</span><br><span class="line">  width: 100%;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fixed-header+.app-main &#123;</span><br><span class="line">  padding-top: 50px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hasTagsView &#123;</span><br><span class="line">  .app-main &#123;</span><br><span class="line">    min-height: calc(100vh - 84px);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .fixed-header+.app-main &#123;</span><br><span class="line">    padding-top: 84px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.el-popup-parent--hidden &#123;</span><br><span class="line">  .fixed-header &#123;</span><br><span class="line">    padding-right: 15px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/index.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export &#123; default as Navbar &#125; from &#x27;./Navbar.vue&#x27;;</span><br><span class="line">export &#123; default as AppMain &#125; from &#x27;./AppMain.vue&#x27;;</span><br><span class="line">export &#123; default as TagsView &#125; from &#x27;./TagsView/index.vue&#x27;;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Navbar.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;navbar&quot;&gt;</span><br><span class="line">    &lt;hamburger id=&quot;hamburger-container&quot; :is-active=&quot;sidebar.opened&quot; class=&quot;hamburger-container&quot;</span><br><span class="line">      @toggleClick=&quot;toggleSideBar&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;breadcrumb id=&quot;breadcrumb-container&quot; class=&quot;breadcrumb-container&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;right-menu&quot;&gt;</span><br><span class="line">      &lt;el-dropdown class=&quot;avatar-container right-menu-item hover-effect&quot; trigger=&quot;click&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;el-avatar :src=&quot;avatarUrl&quot; /&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; nickname &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;CaretBottom style=&quot;width: 0.6em; height: 0.6em; margin-left: 5px&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;template #dropdown&gt;</span><br><span class="line">          &lt;el-dropdown-menu&gt;</span><br><span class="line">            &lt;router-link to=&quot;/&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;é¦–é¡µ&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/system/personal-center&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;ä¸ªäººä¸­å¿ƒ&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;a target=&quot;_blank&quot; href=&quot;https://gitee.com/zhengqingya&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;Gitee&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;router-link to=&quot;/other/anonymity&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;æå»ºè®®&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;el-dropdown-item divided @click=&quot;logout&quot;&gt; é€€å‡º &lt;/el-dropdown-item&gt;</span><br><span class="line">          &lt;/el-dropdown-menu&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-dropdown&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRoute, useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; ElMessageBox &#125; from &#x27;element-plus&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶ä¾èµ–</span><br><span class="line">import Breadcrumb from &#x27;@/components/Breadcrumb/index.vue&#x27;;</span><br><span class="line">import Hamburger from &#x27;@/components/Hamburger/index.vue&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; app, user, tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line">const avatarUrl = computed(() =&gt; user.avatarUrl);</span><br><span class="line">const nickname = computed(() =&gt; user.nickname);</span><br><span class="line"></span><br><span class="line">function toggleSideBar() &#123;</span><br><span class="line">  app.toggleSidebar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function logout() &#123;</span><br><span class="line">  ElMessageBox.confirm(&#x27;ç¡®å®šæ³¨é”€å¹¶é€€å‡ºç³»ç»Ÿå—ï¼Ÿ&#x27;, &#x27;æç¤º&#x27;, &#123;</span><br><span class="line">    confirmButtonText: &#x27;ç¡®å®š&#x27;,</span><br><span class="line">    cancelButtonText: &#x27;å–æ¶ˆ&#x27;,</span><br><span class="line">    type: &#x27;warning&#x27;,</span><br><span class="line">  &#125;).then(() =&gt; &#123;</span><br><span class="line">    user</span><br><span class="line">      .logout()</span><br><span class="line">      .then(() =&gt; &#123;</span><br><span class="line">        tagsView.delAllViews();</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(() =&gt; &#123;</span><br><span class="line">        router.push(`/login?redirect=$&#123;route.fullPath&#125;`);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">ul &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.navbar &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  position: relative;</span><br><span class="line">  background: $dark_main_color;</span><br><span class="line">  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);</span><br><span class="line"></span><br><span class="line">  .hamburger-container &#123;</span><br><span class="line">    line-height: 46px;</span><br><span class="line">    height: 100%;</span><br><span class="line">    float: left;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    transition: background 0.3s;</span><br><span class="line">    -webkit-tap-highlight-color: transparent;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      background: rgba(0, 0, 0, 0.025);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .breadcrumb-container &#123;</span><br><span class="line">    float: left;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .right-menu &#123;</span><br><span class="line">    float: right;</span><br><span class="line">    height: 100%;</span><br><span class="line">    line-height: 50px;</span><br><span class="line"></span><br><span class="line">    &amp;:focus &#123;</span><br><span class="line">      outline: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .right-menu-item &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      padding: 0 8px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      color: #5a5e66;</span><br><span class="line">      vertical-align: text-bottom;</span><br><span class="line"></span><br><span class="line">      &amp;.hover-effect &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        transition: background 0.3s;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          background: rgba(0, 0, 0, 0.025);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .avatar-container &#123;</span><br><span class="line">      margin-right: 60px;</span><br><span class="line"></span><br><span class="line">      .user-info &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        position: absolute;</span><br><span class="line">        right: -50px;</span><br><span class="line">        top: 15px;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;&#123; &#x27;has-logo&#x27;: true &#125;&quot;&gt;</span><br><span class="line">    &lt;logo :collapse=&quot;isCollapse&quot; /&gt;</span><br><span class="line">    &lt;el-scrollbar wrap-class=&quot;scrollbar-wrapper&quot;&gt;</span><br><span class="line">      &lt;el-menu :default-active=&quot;activeMenu&quot; :collapse=&quot;isCollapse&quot; :background-color=&quot;variables.menuBg&quot;</span><br><span class="line">        :text-color=&quot;variables.menuText&quot; :active-text-color=&quot;variables.menuActiveText&quot; :unique-opened=&quot;true&quot;</span><br><span class="line">        :collapse-transition=&quot;false&quot; mode=&quot;vertical&quot;&gt;</span><br><span class="line">        &lt;sidebar-item v-for=&quot;route in routes&quot; :item=&quot;route&quot; :key=&quot;route.path&quot; :base-path=&quot;route.path&quot; /&gt;</span><br><span class="line">      &lt;/el-menu&gt;</span><br><span class="line">    &lt;/el-scrollbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">import SidebarItem from &#x27;./SidebarItem.vue&#x27;;</span><br><span class="line">import Logo from &#x27;./Logo.vue&#x27;;</span><br><span class="line">import variables from &#x27;@/styles/variables.module.scss&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; permission, app &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line">const routes = computed(() =&gt; permission.routes);</span><br><span class="line">const isCollapse = computed(() =&gt; !app.sidebar.opened);</span><br><span class="line"></span><br><span class="line">const activeMenu = computed(() =&gt; &#123;</span><br><span class="line">  const &#123; meta, path &#125; = route;</span><br><span class="line">  // if set path, the sidebar will highlight the path you set</span><br><span class="line">  if (meta.activeMenu) &#123;</span><br><span class="line">    return meta.activeMenu as string;</span><br><span class="line">  &#125;</span><br><span class="line">  return path;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/Link.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a v-if=&quot;isExternal(to)&quot; :href=&quot;to&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">  &lt;div v-else @click=&quot;push&quot;&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, defineComponent &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; isExternal &#125; from &#x27;@/utils/validate&#x27;;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; app &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    to: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    const router = useRouter();</span><br><span class="line">    const push = () =&gt; &#123;</span><br><span class="line">      if (device.value === &#x27;mobile&#x27; &amp;&amp; sidebar.value.opened == true) &#123;</span><br><span class="line">        app.closeSideBar(false);</span><br><span class="line">      &#125;</span><br><span class="line">      router.push(props.to).catch((err) =&gt; &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      push,</span><br><span class="line">      isExternal,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/Logo.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;sidebar-logo-container&quot; :class=&quot;&#123; collapse: isCollapse &#125;&quot;&gt;</span><br><span class="line">    &lt;transition name=&quot;sidebarLogoFade&quot;&gt;</span><br><span class="line">      &lt;router-link</span><br><span class="line">        v-if=&quot;collapse&quot;</span><br><span class="line">        key=&quot;collapse&quot;</span><br><span class="line">        class=&quot;sidebar-logo-link&quot;</span><br><span class="line">        to=&quot;/&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;img v-if=&quot;logo&quot; :src=&quot;logo&quot; class=&quot;sidebar-logo&quot; /&gt;</span><br><span class="line">        &lt;h1 v-else class=&quot;sidebar-title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">      &lt;router-link v-else key=&quot;expand&quot; class=&quot;sidebar-logo-link&quot; to=&quot;/&quot;&gt;</span><br><span class="line">        &lt;img v-if=&quot;logo&quot; :src=&quot;logo&quot; class=&quot;sidebar-logo&quot; /&gt;</span><br><span class="line">        &lt;h1 class=&quot;sidebar-title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  collapse: &#123;</span><br><span class="line">    type: Boolean,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const state = reactive(&#123;</span><br><span class="line">  isCollapse: props.collapse,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const &#123; isCollapse &#125; = toRefs(state);</span><br><span class="line"></span><br><span class="line">const title = ref(&#x27;Small Tools&#x27;);</span><br><span class="line">const logo = ref(</span><br><span class="line">  &#x27;https://wpimg.wallstcn.com/69a1c46c-eb1c-4b46-8bd4-e9e686ef5251.png&#x27;</span><br><span class="line">);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.sidebarLogoFade-enter-active &#123;</span><br><span class="line">  transition: opacity 1.5s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebarLogoFade-enter,</span><br><span class="line">.sidebarLogoFade-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-logo-container &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  line-height: 50px;</span><br><span class="line">  background: #00284c;</span><br><span class="line">  text-align: center;</span><br><span class="line">  overflow: hidden;</span><br><span class="line"></span><br><span class="line">  &amp; .sidebar-logo-link &#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    width: 100%;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-logo &#123;</span><br><span class="line">      width: 32px;</span><br><span class="line">      height: 32px;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-title &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      margin: 0;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-weight: 600;</span><br><span class="line">      line-height: 50px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      font-family: Avenir, Helvetica Neue, Arial, Helvetica, sans-serif;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      margin-left: 12px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;.collapse &#123;</span><br><span class="line">    .sidebar-logo &#123;</span><br><span class="line">      margin-right: 0px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/SidebarItem.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if=&quot;!item.hidden&quot;&gt;</span><br><span class="line">    &lt;template v-if=&quot;</span><br><span class="line">      hasOneShowingChild(item.children, item) &amp;&amp;</span><br><span class="line">      (!onlyOneChild.children || onlyOneChild.noShowingChildren) &amp;&amp;</span><br><span class="line">      (!item.meta || !item.meta.alwaysShow)</span><br><span class="line">    &quot;&gt;</span><br><span class="line">      &lt;app-link v-if=&quot;onlyOneChild.meta&quot; :to=&quot;resolvePath(onlyOneChild.path)&quot;&gt;</span><br><span class="line">        &lt;el-menu-item :index=&quot;resolvePath(onlyOneChild.path)&quot; :class=&quot;&#123; &#x27;submenu-title-noDropdown&#x27;: !isNest &#125;&quot;&gt;</span><br><span class="line">          &lt;el-icon v-if=&quot;onlyOneChild.meta &amp;&amp; onlyOneChild.meta.icon&quot;&gt;</span><br><span class="line">            &lt;component :is=&quot;onlyOneChild.meta.icon&quot; /&gt;</span><br><span class="line">          &lt;/el-icon&gt;</span><br><span class="line">          &lt;template #title&gt;</span><br><span class="line">            &#123;&#123; onlyOneChild.meta.title &#125;&#125;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">      &lt;/app-link&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-sub-menu v-else :index=&quot;resolvePath(item.path)&quot;&gt;</span><br><span class="line">      &lt;template #title&gt;</span><br><span class="line">        &lt;el-icon v-if=&quot;item.meta &amp;&amp; item.meta.icon&quot;&gt;</span><br><span class="line">          &lt;component :is=&quot;item.meta.icon&quot; /&gt;</span><br><span class="line">        &lt;/el-icon&gt;</span><br><span class="line">        &lt;span v-if=&quot;item.meta &amp;&amp; item.meta.title&quot;&gt;&#123;&#123;</span><br><span class="line">            item.meta.title</span><br><span class="line">        &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;sidebar-item v-for=&quot;child in item.children&quot; :key=&quot;child.path&quot; :item=&quot;child&quot; :is-nest=&quot;true&quot;</span><br><span class="line">        :base-path=&quot;resolvePath(child.path)&quot; class=&quot;nest-menu&quot; /&gt;</span><br><span class="line">    &lt;/el-sub-menu&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">import path from &#x27;path-browserify&#x27;;</span><br><span class="line">import &#123; isExternal &#125; from &#x27;@/utils/validate&#x27;;</span><br><span class="line">import AppLink from &#x27;./Link.vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  item: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  isNest: &#123;</span><br><span class="line">    type: Boolean,</span><br><span class="line">    required: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  basePath: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const onlyOneChild = ref();</span><br><span class="line"></span><br><span class="line">function hasOneShowingChild(children = [] as any, parent: any) &#123;</span><br><span class="line">  if (!children) &#123;</span><br><span class="line">    children = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const showingChildren = children.filter((item: any) =&gt; &#123;</span><br><span class="line">    if (item.meta &amp;&amp; item.meta.hidden) &#123;</span><br><span class="line">      return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // Temp set(will be used if only has one showing child)</span><br><span class="line">      onlyOneChild.value = item;</span><br><span class="line">      return true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // When there is only one child router, the child router is displayed by default</span><br><span class="line">  if (showingChildren.length === 1) &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Show parent if there are no child router to display</span><br><span class="line">  if (showingChildren.length === 0) &#123;</span><br><span class="line">    onlyOneChild.value = &#123; ...parent, path: &#x27;&#x27;, noShowingChildren: true &#125;;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function resolvePath(routePath: string) &#123;</span><br><span class="line">  if (isExternal(routePath)) &#123;</span><br><span class="line">    return routePath;</span><br><span class="line">  &#125;</span><br><span class="line">  if (isExternal(props.basePath)) &#123;</span><br><span class="line">    return props.basePath;</span><br><span class="line">  &#125;</span><br><span class="line">  return path.resolve(props.basePath, routePath);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/TagsView/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tags-view__container&quot;&gt;</span><br><span class="line">    &lt;scroll-pane ref=&quot;scrollPaneRef&quot; class=&quot;tags-view__wrapper&quot; @scroll=&quot;handleScroll&quot;&gt;</span><br><span class="line">      &lt;router-link v-for=&quot;tag in visitedViews&quot; :key=&quot;tag.path&quot; :data-path=&quot;tag.path&quot;</span><br><span class="line">        :class=&quot;isActive(tag) ? &#x27;active&#x27; : &#x27;&#x27;&quot; :to=&quot;&#123; path: tag.path, query: tag.query &#125;&quot; class=&quot;tags-view__item&quot;</span><br><span class="line">        @click.middle=&quot;!isAffix(tag) ? closeSelectedTag(tag) : &#x27;&#x27;&quot; @contextmenu.prevent=&quot;openMenu(tag, $event)&quot;&gt;</span><br><span class="line">        &#123;&#123; tag.meta.title &#125;&#125;</span><br><span class="line">        &lt;span v-if=&quot;!isAffix(tag)&quot; class=&quot;icon-close&quot; @click.prevent.stop=&quot;closeSelectedTag(tag)&quot;&gt;</span><br><span class="line">          &lt;svg-icon icon-class=&quot;close&quot; /&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/scroll-pane&gt;</span><br><span class="line">    &lt;ul v-show=&quot;visible&quot; :style=&quot;&#123; left: left + &#x27;px&#x27;, top: top + &#x27;px&#x27; &#125;&quot; class=&quot;tags-view__menu&quot;&gt;</span><br><span class="line">      &lt;li @click=&quot;refreshSelectedTag(selectedTag)&quot;&gt;</span><br><span class="line">        åˆ·æ–°</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isAffix(selectedTag)&quot; @click=&quot;closeSelectedTag(selectedTag)&quot;&gt;</span><br><span class="line">        å…³é—­</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li @click=&quot;closeOtherTags&quot;&gt;</span><br><span class="line">        å…³é—­å…¶å®ƒ</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isFirstView()&quot; @click=&quot;closeLeftTags&quot;&gt;</span><br><span class="line">        å…³é—­å·¦ä¾§</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isLastView()&quot; @click=&quot;closeRightTags&quot;&gt;</span><br><span class="line">        å…³é—­å³ä¾§</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li @click=&quot;closeAllTags(selectedTag)&quot;&gt;</span><br><span class="line">        å…³é—­æ‰€æœ‰</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  computed,</span><br><span class="line">  getCurrentInstance,</span><br><span class="line">  nextTick,</span><br><span class="line">  ref,</span><br><span class="line">  watch,</span><br><span class="line">  onMounted,</span><br><span class="line">  ComponentInternalInstance,</span><br><span class="line">&#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">import path from &#x27;path-browserify&#x27;;</span><br><span class="line"></span><br><span class="line">import &#123; useRoute, useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; TagView &#125; from &#x27;@/types/store/tagsview&#x27;;</span><br><span class="line"></span><br><span class="line">import ScrollPane from &#x27;./ScrollPane.vue&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView, permission &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance() as ComponentInternalInstance;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const visitedViews = computed&lt;any&gt;(() =&gt; tagsView.visitedViews);</span><br><span class="line">const routes = computed&lt;any&gt;(() =&gt; permission.routes);</span><br><span class="line"></span><br><span class="line">const affixTags = ref([]);</span><br><span class="line">const visible = ref(false);</span><br><span class="line">const selectedTag = ref(&#123;&#125;);</span><br><span class="line">const scrollPaneRef = ref();</span><br><span class="line">const left = ref(0);</span><br><span class="line">const top = ref(0);</span><br><span class="line"></span><br><span class="line">watch(</span><br><span class="line">  route,</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    addTags();</span><br><span class="line">    moveToCurrentTag();</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    //åˆå§‹åŒ–ç«‹å³æ‰§è¡Œ</span><br><span class="line">    immediate: true,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">watch(visible, (value) =&gt; &#123;</span><br><span class="line">  if (value) &#123;</span><br><span class="line">    document.body.addEventListener(&#x27;click&#x27;, closeMenu);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    document.body.removeEventListener(&#x27;click&#x27;, closeMenu);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function filterAffixTags(routes: any[], basePath = &#x27;/&#x27;) &#123;</span><br><span class="line">  let tags: TagView[] = [];</span><br><span class="line"></span><br><span class="line">  routes.forEach((route) =&gt; &#123;</span><br><span class="line">    if (route.meta &amp;&amp; route.meta.affix) &#123;</span><br><span class="line">      const tagPath = path.resolve(basePath, route.path);</span><br><span class="line">      tags.push(&#123;</span><br><span class="line">        fullPath: tagPath,</span><br><span class="line">        path: tagPath,</span><br><span class="line">        name: route.name,</span><br><span class="line">        meta: &#123; ...route.meta &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (route.children) &#123;</span><br><span class="line">      const childTags = filterAffixTags(route.children, route.path);</span><br><span class="line">      if (childTags.length &gt;= 1) &#123;</span><br><span class="line">        tags = tags.concat(childTags);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  return tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function initTags() &#123;</span><br><span class="line">  const res = filterAffixTags(routes.value) as [];</span><br><span class="line">  affixTags.value = res;</span><br><span class="line">  for (const tag of res) &#123;</span><br><span class="line">    // Must have tag name</span><br><span class="line">    if ((tag as TagView).name) &#123;</span><br><span class="line">      tagsView.addVisitedView(tag);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function addTags() &#123;</span><br><span class="line">  if (route.name) &#123;</span><br><span class="line">    tagsView.addView(route);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveToCurrentTag() &#123;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    for (const r of visitedViews.value) &#123;</span><br><span class="line">      if (r.path === route.path) &#123;</span><br><span class="line">        scrollPaneRef.value.moveToTarget(r);</span><br><span class="line">        // when query is different then update</span><br><span class="line">        if (r.fullPath !== route.fullPath) &#123;</span><br><span class="line">          tagsView.updateVisitedView(route);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isActive(tag: TagView) &#123;</span><br><span class="line">  return tag.path === route.path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isAffix(tag: TagView) &#123;</span><br><span class="line">  return tag.meta &amp;&amp; tag.meta.affix;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isFirstView() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    return (</span><br><span class="line">      (selectedTag.value as TagView).fullPath ===</span><br><span class="line">      visitedViews.value[1].fullPath ||</span><br><span class="line">      (selectedTag.value as TagView).fullPath === &#x27;/index&#x27;</span><br><span class="line">    );</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isLastView() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    return (</span><br><span class="line">      (selectedTag.value as TagView).fullPath ===</span><br><span class="line">      visitedViews.value[visitedViews.value.length - 1].fullPath</span><br><span class="line">    );</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function refreshSelectedTag(view: TagView) &#123;</span><br><span class="line">  tagsView.delCachedView(view);</span><br><span class="line">  const &#123; fullPath &#125; = view;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    router.replace(&#123; path: &#x27;/redirect&#x27; + fullPath &#125;).catch((err) =&gt; &#123;</span><br><span class="line">      console.warn(err);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function toLastView(visitedViews: TagView[], view?: any) &#123;</span><br><span class="line">  const latestView = visitedViews.slice(-1)[0];</span><br><span class="line">  if (latestView &amp;&amp; latestView.fullPath) &#123;</span><br><span class="line">    router.push(latestView.fullPath);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // now the default is to redirect to the home page if there is no tags-view,</span><br><span class="line">    // you can adjust it according to your needs.</span><br><span class="line">    if (view.name === &#x27;Dashboard&#x27;) &#123;</span><br><span class="line">      // to reload home page</span><br><span class="line">      router.replace(&#123; path: &#x27;/redirect&#x27; + view.fullPath &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      router.push(&#x27;/&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeSelectedTag(view: TagView) &#123;</span><br><span class="line">  tagsView.delView(view).then((res: any) =&gt; &#123;</span><br><span class="line">    if (isActive(view)) &#123;</span><br><span class="line">      toLastView(res.visitedViews, view);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeLeftTags() &#123;</span><br><span class="line">  tagsView.delLeftViews(selectedTag.value).then((res: any) =&gt; &#123;</span><br><span class="line">    if (</span><br><span class="line">      !res.visitedViews.find((item: any) =&gt; item.fullPath === route.fullPath)</span><br><span class="line">    ) &#123;</span><br><span class="line">      toLastView(res.visitedViews);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function closeRightTags() &#123;</span><br><span class="line">  tagsView.delRightViews(selectedTag.value).then((res: any) =&gt; &#123;</span><br><span class="line">    if (</span><br><span class="line">      !res.visitedViews.find((item: any) =&gt; item.fullPath === route.fullPath)</span><br><span class="line">    ) &#123;</span><br><span class="line">      toLastView(res.visitedViews);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeOtherTags() &#123;</span><br><span class="line">  router.push(selectedTag.value);</span><br><span class="line">  tagsView.delOtherViews(selectedTag.value).then(() =&gt; &#123;</span><br><span class="line">    moveToCurrentTag();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeAllTags(view: TagView) &#123;</span><br><span class="line">  tagsView.delAllViews().then((res: any) =&gt; &#123;</span><br><span class="line">    toLastView(res.visitedViews, view);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function openMenu(tag: TagView, e: MouseEvent) &#123;</span><br><span class="line">  const menuMinWidth = 105;</span><br><span class="line">  const offsetLeft = proxy?.$el.getBoundingClientRect().left; // container margin left</span><br><span class="line">  const offsetWidth = proxy?.$el.offsetWidth; // container width</span><br><span class="line">  const maxLeft = offsetWidth - menuMinWidth; // left boundary</span><br><span class="line">  const l = e.clientX - offsetLeft + 15; // 15: margin right</span><br><span class="line"></span><br><span class="line">  if (l &gt; maxLeft) &#123;</span><br><span class="line">    left.value = maxLeft;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    left.value = l;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  top.value = e.clientY;</span><br><span class="line">  visible.value = true;</span><br><span class="line">  selectedTag.value = tag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeMenu() &#123;</span><br><span class="line">  visible.value = false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function handleScroll() &#123;</span><br><span class="line">  closeMenu();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initTags();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.tags-view__container &#123;</span><br><span class="line">  height: 34px;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background: $dark_main_color;</span><br><span class="line">  border-bottom: 1px solid #d8dce5;</span><br><span class="line">  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 0 3px 0 rgba(0, 0, 0, 0.04);</span><br><span class="line"></span><br><span class="line">  .tags-view__wrapper &#123;</span><br><span class="line">    .tags-view__item &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      position: relative;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      height: 26px;</span><br><span class="line">      line-height: 26px;</span><br><span class="line">      border: 1px solid #d8dce5;</span><br><span class="line">      color: #495060;</span><br><span class="line">      background: $dark_main_color;</span><br><span class="line">      padding: 0 8px;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      margin-left: 5px;</span><br><span class="line">      margin-top: 4px;</span><br><span class="line"></span><br><span class="line">      &amp;:first-of-type &#123;</span><br><span class="line">        margin-left: 15px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-of-type &#123;</span><br><span class="line">        margin-right: 15px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        color: var(--el-color-primary);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        background-color: var(--el-color-primary);</span><br><span class="line">        color: var(--el-color-primary-light-9);</span><br><span class="line">        border-color: var(--el-color-primary);</span><br><span class="line"></span><br><span class="line">        &amp;::before &#123;</span><br><span class="line">          content: &#x27;&#x27;;</span><br><span class="line">          background: #fff;</span><br><span class="line">          display: inline-block;</span><br><span class="line">          width: 8px;</span><br><span class="line">          height: 8px;</span><br><span class="line">          border-radius: 50%;</span><br><span class="line">          position: relative;</span><br><span class="line">          margin-right: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .icon-close &#123;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        text-align: center;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          background-color: #ccc;</span><br><span class="line">          color: #fff;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tags-view__menu &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    background: $dark_main_color;</span><br><span class="line">    z-index: 3000;</span><br><span class="line">    position: absolute;</span><br><span class="line">    list-style-type: none;</span><br><span class="line">    padding: 5px 0;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    font-weight: 400;</span><br><span class="line">    // color: #333;</span><br><span class="line">    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 7px 16px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        background: rgb(77, 156, 130);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/TagsView/ScrollPane.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-scrollbar</span><br><span class="line">    ref=&quot;scrollContainer&quot;</span><br><span class="line">    :vertical=&quot;false&quot;</span><br><span class="line">    class=&quot;scroll-container&quot;</span><br><span class="line">    @wheel.prevent=&quot;handleScroll&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/el-scrollbar&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  computed,</span><br><span class="line">  onMounted,</span><br><span class="line">  onBeforeUnmount,</span><br><span class="line">  getCurrentInstance,</span><br><span class="line">&#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; TagView &#125; from &#x27;@/types/store/tagsview&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const tagAndTagSpacing = ref(4);</span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance() as any;</span><br><span class="line"></span><br><span class="line">const emits = defineEmits([&#x27;scroll&#x27;]);</span><br><span class="line">const emitScroll = () =&gt; &#123;</span><br><span class="line">  emits(&#x27;scroll&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const visitedViews = computed(() =&gt; tagsView.visitedViews);</span><br><span class="line"></span><br><span class="line">const scrollWrapper = computed(() =&gt; proxy?.$refs.scrollContainer.$refs.wrap$);</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  scrollWrapper.value.addEventListener(&#x27;scroll&#x27;, emitScroll, true);</span><br><span class="line">&#125;);</span><br><span class="line">onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">  scrollWrapper.value.removeEventListener(&#x27;scroll&#x27;, emitScroll);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function handleScroll(e: WheelEvent) &#123;</span><br><span class="line">  const eventDelta = (e as any).wheelDelta || -e.deltaY * 40;</span><br><span class="line">  scrollWrapper.value.scrollLeft =</span><br><span class="line">    scrollWrapper.value.scrollLeft + eventDelta / 4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveToTarget(currentTag: TagView) &#123;</span><br><span class="line">  const $container = proxy.$refs.scrollContainer.$el;</span><br><span class="line">  const $containerWidth = $container.offsetWidth;</span><br><span class="line">  const $scrollWrapper = scrollWrapper.value;</span><br><span class="line"></span><br><span class="line">  let firstTag = null;</span><br><span class="line">  let lastTag = null;</span><br><span class="line"></span><br><span class="line">  // find first tag and last tag</span><br><span class="line">  if (visitedViews.value.length &gt; 0) &#123;</span><br><span class="line">    firstTag = visitedViews.value[0];</span><br><span class="line">    lastTag = visitedViews.value[visitedViews.value.length - 1];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (firstTag === currentTag) &#123;</span><br><span class="line">    $scrollWrapper.scrollLeft = 0;</span><br><span class="line">  &#125; else if (lastTag === currentTag) &#123;</span><br><span class="line">    $scrollWrapper.scrollLeft = $scrollWrapper.scrollWidth - $containerWidth;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    const tagListDom = document.getElementsByClassName(&#x27;tags-view__item&#x27;);</span><br><span class="line">    const currentIndex = visitedViews.value.findIndex(</span><br><span class="line">      (item) =&gt; item === currentTag</span><br><span class="line">    );</span><br><span class="line">    let prevTag = null;</span><br><span class="line">    let nextTag = null;</span><br><span class="line">    for (const k in tagListDom) &#123;</span><br><span class="line">      if (k !== &#x27;length&#x27; &amp;&amp; Object.hasOwnProperty.call(tagListDom, k)) &#123;</span><br><span class="line">        if (</span><br><span class="line">          (tagListDom[k] as any).dataset.path ===</span><br><span class="line">          visitedViews.value[currentIndex - 1].path</span><br><span class="line">        ) &#123;</span><br><span class="line">          prevTag = tagListDom[k];</span><br><span class="line">        &#125;</span><br><span class="line">        if (</span><br><span class="line">          (tagListDom[k] as any).dataset.path ===</span><br><span class="line">          visitedViews.value[currentIndex + 1].path</span><br><span class="line">        ) &#123;</span><br><span class="line">          nextTag = tagListDom[k];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // the tag&#x27;s offsetLeft after of nextTag</span><br><span class="line">    const afterNextTagOffsetLeft =</span><br><span class="line">      (nextTag as any).offsetLeft +</span><br><span class="line">      (nextTag as any).offsetWidth +</span><br><span class="line">      tagAndTagSpacing.value;</span><br><span class="line"></span><br><span class="line">    // the tag&#x27;s offsetLeft before of prevTag</span><br><span class="line">    const beforePrevTagOffsetLeft =</span><br><span class="line">      (prevTag as any).offsetLeft - tagAndTagSpacing.value;</span><br><span class="line">    if (afterNextTagOffsetLeft &gt; $scrollWrapper.scrollLeft + $containerWidth) &#123;</span><br><span class="line">      $scrollWrapper.scrollLeft = afterNextTagOffsetLeft - $containerWidth;</span><br><span class="line">    &#125; else if (beforePrevTagOffsetLeft &lt; $scrollWrapper.scrollLeft) &#123;</span><br><span class="line">      $scrollWrapper.scrollLeft = beforePrevTagOffsetLeft;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  moveToTarget,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.scroll-container &#123;</span><br><span class="line">  .el-scrollbar__bar &#123;</span><br><span class="line">    bottom: 0px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .el-scrollbar__wrap &#123;</span><br><span class="line">    height: 49px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.scroll-container &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="debugè°ƒè¯•"><a href="#debugè°ƒè¯•" class="headerlink" title="debugè°ƒè¯•"></a>debugè°ƒè¯•</h2><h3 id="æ–¹å¼ä¸€ï¼šdebugger"><a href="#æ–¹å¼ä¸€ï¼šdebugger" class="headerlink" title="æ–¹å¼ä¸€ï¼šdebugger"></a>æ–¹å¼ä¸€ï¼š<code>debugger</code></h3><ol><li>ä»£ç ä¸­æ·»åŠ <code>debugger</code></li><li>æµè§ˆå™¨<code>F12</code> å³å¯è¿›å…¥è°ƒè¯•</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">refreshTableData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">debugger</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">baseTable</span>.<span class="title function_">refresh</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼äºŒï¼švscode"><a href="#æ–¹å¼äºŒï¼švscode" class="headerlink" title="æ–¹å¼äºŒï¼švscode"></a>æ–¹å¼äºŒï¼švscode</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180250.png"></p><p><code>launch.json</code></p><blockquote><p>æœ‰ä¸ªè¿™ä¸ªæ–‡ä»¶åï¼Œå¯ç›´æ¥åœ¨vscodeä¸­F5æ‰“å¼€å½“å‰æœåŠ¡</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pwa-chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Launch Chrome against localhost&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:5173&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;webRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue-js-devtools"><a href="#æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue-js-devtools" class="headerlink" title="æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue.js devtools"></a>æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶<code>Vue.js devtools</code></h3><blockquote><p><a href="https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg">https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg</a></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180319.png"></p><h3 id="æ–¹å¼å››ï¼šæµè§ˆå™¨F12-æºä»£ç ä¸­ç›´æ¥debug"><a href="#æ–¹å¼å››ï¼šæµè§ˆå™¨F12-æºä»£ç ä¸­ç›´æ¥debug" class="headerlink" title="æ–¹å¼å››ï¼šæµè§ˆå™¨F12 -&gt; æºä»£ç ä¸­ç›´æ¥debug"></a>æ–¹å¼å››ï¼šæµè§ˆå™¨F12 -&gt; æºä»£ç ä¸­ç›´æ¥debug</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180413.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;/a&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>Vue3å­¦ä¹ </title>
    <link href="https://dont-sleep-so-late.github.io/2024/01/28/Vue/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/"/>
    <id>https://dont-sleep-so-late.github.io/2024/01/28/Vue/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/</id>
    <published>2024-01-28T15:31:36.000Z</published>
    <updated>2024-01-28T15:57:57.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-Vue3ç®€ä»‹"><a href="#1-Vue3ç®€ä»‹" class="headerlink" title="1. Vue3ç®€ä»‹"></a>1. Vue3ç®€ä»‹</h1><ul><li><p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p></li><li><p>ç»å†äº†ï¼š<a href="https://github.com/vuejs/core/commits/main">4800+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/core/graphs/contributors">300+è´¡çŒ®è€…</a></p></li><li><p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece Â· vuejs&#x2F;core</a></p></li><li><p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /></li></ul><h2 id="1-1-ã€æ€§èƒ½çš„æå‡ã€‘"><a href="#1-1-ã€æ€§èƒ½çš„æå‡ã€‘" class="headerlink" title="1.1. ã€æ€§èƒ½çš„æå‡ã€‘"></a>1.1. ã€æ€§èƒ½çš„æå‡ã€‘</h2><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p></li><li><p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p></li></ul><h2 id="1-2-ã€-æºç çš„å‡çº§ã€‘"><a href="#1-2-ã€-æºç çš„å‡çº§ã€‘" class="headerlink" title="1.2.ã€ æºç çš„å‡çº§ã€‘"></a>1.2.ã€ æºç çš„å‡çº§ã€‘</h2><ul><li><p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p></li><li><p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p></li></ul><h2 id="1-3-ã€æ‹¥æŠ±TypeScriptã€‘"><a href="#1-3-ã€æ‹¥æŠ±TypeScriptã€‘" class="headerlink" title="1.3. ã€æ‹¥æŠ±TypeScriptã€‘"></a>1.3. ã€æ‹¥æŠ±TypeScriptã€‘</h2><ul><li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li></ul><h2 id="1-4-ã€æ–°çš„ç‰¹æ€§ã€‘"><a href="#1-4-ã€æ–°çš„ç‰¹æ€§ã€‘" class="headerlink" title="1.4. ã€æ–°çš„ç‰¹æ€§ã€‘"></a>1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</h2><ol><li><p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>ä¸<code>reactive</code></p></li><li><p><code>computed</code>ä¸<code>watch</code></p><p>â€¦â€¦</p></li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>â€¦â€¦</p></li></ul></li><li><p>å…¶ä»–æ”¹å˜ï¼š</p><ul><li><p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li><li><p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p><p>â€¦â€¦</p></li></ul></li></ol><h1 id="2-åˆ›å»ºVue3å·¥ç¨‹"><a href="#2-åˆ›å»ºVue3å·¥ç¨‹" class="headerlink" title="2. åˆ›å»ºVue3å·¥ç¨‹"></a>2. åˆ›å»ºVue3å·¥ç¨‹</h1><h2 id="2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘"><a href="#2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘" class="headerlink" title="2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘"></a>2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</h2><p>ç‚¹å‡»æŸ¥çœ‹<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  éšåé€‰æ‹©3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è"><a href="#2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è" class="headerlink" title="2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)"></a>2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</h2><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li><li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li><li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black" /></li></ul><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.åˆ›å»ºå‘½ä»¤</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.å…·ä½“é…ç½®</span></span><br><span class="line"><span class="comment">## é…ç½®é¡¹ç›®åç§°</span></span><br><span class="line">âˆš Project name: vue3_test</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span></span><br><span class="line">âˆš Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span></span><br><span class="line">âˆš Add JSX Support?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span></span><br><span class="line">âˆš Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span></span><br><span class="line">âˆš Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span></span><br><span class="line">âˆš Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span></span><br><span class="line">âˆš Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? Â» No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span></span><br><span class="line">âˆš Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span></span><br><span class="line">âˆš Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //ç»„ä»¶å</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/volar.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231218085906380.png" alt="image-20231218085906380" style="zoom:42%;" /> <p>æ€»ç»“ï¼š</p><ul><li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li><li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li><li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li></ul><h2 id="2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"><a href="#2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘" class="headerlink" title="2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"></a>2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</h2><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="3-Vue3æ ¸å¿ƒè¯­æ³•"><a href="#3-Vue3æ ¸å¿ƒè¯­æ³•" class="headerlink" title="3. Vue3æ ¸å¿ƒè¯­æ³•"></a>3. Vue3æ ¸å¿ƒè¯­æ³•</h1><h2 id="3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘"><a href="#3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘" class="headerlink" title="3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘"></a>3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</h2><ul><li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li><li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li></ul><h3 id="Options-API-çš„å¼Šç«¯"><a href="#Options-API-çš„å¼Šç«¯" class="headerlink" title="Options API çš„å¼Šç«¯"></a>Options API çš„å¼Šç«¯</h3><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><h3 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h3><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p></blockquote><h2 id="3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘"><a href="#3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘" class="headerlink" title="3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘"></a>3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</h2><h3 id="setup-æ¦‚è¿°"><a href="#setup-æ¦‚è¿°" class="headerlink" title="setup æ¦‚è¿°"></a>setup æ¦‚è¿°</h3><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong>_<strong>â€</strong>_ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†â€¦â€¦ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li><li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      // æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">      let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">      // æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­</span><br><span class="line">      function changeName()&#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(name)</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge()&#123;</span><br><span class="line">        age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(age)</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel()&#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="setup-çš„è¿”å›å€¼"><a href="#setup-çš„è¿”å›å€¼" class="headerlink" title="setup çš„è¿”å›å€¼"></a>setup çš„è¿”å›å€¼</h3><ul><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚</strong></li><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;ä½ å¥½å•Šï¼&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setup-ä¸-Options-API-çš„å…³ç³»"><a href="#setup-ä¸-Options-API-çš„å…³ç³»" class="headerlink" title="setup ä¸ Options API çš„å…³ç³»"></a>setup ä¸ Options API çš„å…³ç³»</h3><ul><li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ã€‚</li><li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li></ul><h3 id="setup-è¯­æ³•ç³–"><a href="#setup-è¯­æ³•ç³–" class="headerlink" title="setup è¯­æ³•ç³–"></a>setup è¯­æ³•ç³–</h3><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³– --&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  console.log(this) //undefined</span><br><span class="line">  </span><br><span class="line">  // æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">  let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changName()&#123;</span><br><span class="line">    name = &#x27;æå››&#x27;//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function changAge()&#123;</span><br><span class="line">    console.log(age)</span><br><span class="line">    age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p><ol><li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol><h2 id="3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰å“åº”å¼å˜é‡ã€‚</li><li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><ul><li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li><li>å¯¹äº<code>let name = ref(&#39;å¼ ä¸‰&#39;)</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  // nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  // telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    name.value = &#x27;æå››&#x27;</span><br><span class="line">    console.log(name.value)</span><br><span class="line"></span><br><span class="line">    // æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚</span><br><span class="line">    // name = ref(&#x27;zhang-san&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰ä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li><li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = reactive(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li><li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = ref(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = ref([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = ref(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(car)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.value.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games.value[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.value.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-6-ã€ref-å¯¹æ¯”-reactiveã€‘"><a href="#3-6-ã€ref-å¯¹æ¯”-reactiveã€‘" class="headerlink" title="3.6. ã€ref å¯¹æ¯” reactiveã€‘"></a>3.6. ã€ref å¯¹æ¯” reactiveã€‘</h2><p>å®è§‚è§’åº¦çœ‹ï¼š</p><blockquote><ol><li><p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p></li><li><p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p></li></ol></blockquote><ul><li>åŒºåˆ«ï¼š</li></ul><blockquote><ol><li><p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>volar</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/è‡ªåŠ¨è¡¥å……value.png" alt="è‡ªåŠ¨è¡¥å……value" style="zoom:50%;border-radius:20px" /> </li><li><p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨åŸåˆ™ï¼š</li></ul><blockquote><ol><li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li></ol></blockquote><h2 id="3-7-ã€toRefs-ä¸-toRefã€‘"><a href="#3-7-ã€toRefs-ä¸-toRefã€‘" class="headerlink" title="3.7. ã€toRefs ä¸ toRefã€‘"></a>3.7. ã€toRefs ä¸ toRefã€‘</h2><ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li><li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ€§åˆ«ï¼š&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;ä¿®æ”¹æ€§åˆ«&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;name:&#x27;å¼ ä¸‰&#x27;, age:18, gender:&#x27;ç”·&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let &#123;name,gender&#125; =  toRefs(person)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let age = toRef(person,&#x27;age&#x27;)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeGender()&#123;</span><br><span class="line">    gender.value = &#x27;å¥³&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-8-ã€computedã€‘"><a href="#3-8-ã€computedã€‘" class="headerlink" title="3.8. ã€computedã€‘"></a>3.8. ã€computedã€‘</h2><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/computed.gif" style="zoom:20%;" />  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    åï¼š&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;å…¨åæ”¹ä¸ºï¼šli-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // è¯»å–</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      console.log(&#x27;æœ‰äººä¿®æ”¹äº†fullName&#x27;,val)</span><br><span class="line">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br><span class="line">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-9-ã€watchã€‘"><a href="#3-9-ã€watchã€‘" class="headerlink" title="3.9.ã€watchã€‘"></a>3.9.ã€watchã€‘</h2><ul><li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li><li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š</li></ul><blockquote><ol><li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li><li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li></ol></blockquote><p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><h3 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="* æƒ…å†µä¸€"></a>* æƒ…å†µä¸€</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sumå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="* æƒ…å†µäºŒ"></a>* æƒ…å†µäºŒ</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäºŒï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;æå››&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†</span><br><span class="line">    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®</span><br><span class="line">    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ</span><br><span class="line">    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µä¸‰"><a href="#æƒ…å†µä¸‰" class="headerlink" title="*  æƒ…å†µä¸‰"></a>*  æƒ…å†µä¸‰</h3><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;ä¿®æ”¹obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;æå››&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Objå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µå››"><a href="#æƒ…å†µå››" class="headerlink" title="* æƒ…å†µå››"></a>* æƒ…å†µå››</h3><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li><li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li></ol><p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µå››ï¼šç›‘è§†ã€refã€‘æˆ–ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„æŸä¸ªå±æ€§&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.nameå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäº”"><a href="#æƒ…å†µäº”" class="headerlink" title="* æƒ…å†µäº”"></a>* æƒ…å†µäº”</h3><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-10-ã€watchEffectã€‘"><a href="#3-10-ã€watchEffectã€‘" class="headerlink" title="3.10. ã€watchEffectã€‘"></a>3.10. ã€watchEffectã€‘</h2><ul><li><p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p></li><li><p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p><blockquote><ol><li><p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p></li><li><p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p></li><li><p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p></li></ol></blockquote></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;éœ€æ±‚ï¼šæ°´æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œåˆ™è”ç³»æœåŠ¡å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;æ°´æ¸©ï¼š&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ°´ä½ï¼š&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;æ°´æ¸©+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;æ°´ä½+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let temp = ref(0)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    height.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height</span><br><span class="line">  watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼</span><br><span class="line">    const [newTemp,newHeight] = value</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // ç”¨watchEffectå®ç°ï¼Œä¸ç”¨</span><br><span class="line">  const stopWtach = watchEffect(()=&gt;&#123;</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;</span><br><span class="line">      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†</span><br><span class="line">    if(temp.value === 100 || height.value === 50)&#123;</span><br><span class="line">      console.log(&#x27;æ¸…ç†äº†&#x27;)</span><br><span class="line">      stopWtach()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘"><a href="#3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘" class="headerlink" title="3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘"></a>3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</h2><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p><blockquote><ul><li><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p></li></ul></blockquote><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;å°šç¡…è°·&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;å‰ç«¯&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;ç‚¹æˆ‘æ‰“å°å†…å®¹&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let title1 = ref()</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let title3 = ref()</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    // é€šè¿‡idè·å–å…ƒç´ </span><br><span class="line">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br><span class="line">    // æ‰“å°å†…å®¹</span><br><span class="line">    console.log((t1 as HTMLElement).innerText)</span><br><span class="line">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br><span class="line">    console.log(t1?.innerText)</span><br><span class="line">    </span><br><span class="line">/************************************/</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡refè·å–å…ƒç´ </span><br><span class="line">    console.log(title1.value)</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">    console.log(title3.value)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- çˆ¶ç»„ä»¶App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let ren = ref()</span><br><span class="line"></span><br><span class="line">  function test()&#123;</span><br><span class="line">    console.log(ren.value.name)</span><br><span class="line">    console.log(ren.value.age)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- å­ç»„ä»¶Person.vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹ --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">// æ•°æ®</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  /****************************/</span><br><span class="line">  /****************************/</span><br><span class="line">  // ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨</span><br><span class="line">  defineExpose(&#123;name,age&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-12-ã€propsã€‘"><a href="#3-12-ã€propsã€‘" class="headerlink" title="3.12. ã€propsã€‘"></a>3.12. ã€propsã€‘</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:string,</span><br><span class="line"><span class="attr">name</span>:string,</span><br><span class="line"> <span class="attr">age</span>:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Person :list=&quot;persons&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"> import &#123;type Persons&#125; from &#x27;./types&#x27;</span><br><span class="line"></span><br><span class="line"> let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123;id:&#x27;e98219e12&#x27;,name:&#x27;å¼ ä¸‰&#x27;,age:18&#125;,</span><br><span class="line">   &#123;id:&#x27;e98219e13&#x27;,name:&#x27;æå››&#x27;,age:19&#125;,</span><br><span class="line">    &#123;id:&#x27;e98219e14&#x27;,name:&#x27;ç‹äº”&#x27;,age:20&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;å°çŒªä½©å¥‡&#x27;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘"><a href="#3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘" class="headerlink" title="3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘"></a>3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</h2><ul><li><p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>è§„å¾‹ï¼š</p><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p></blockquote></li><li><p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p><p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p><p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p></blockquote></li><li><p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3å†™æ³• --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; </span><br><span class="line">    ref, </span><br><span class="line">    onBeforeMount, </span><br><span class="line">    onMounted, </span><br><span class="line">    onBeforeUpdate, </span><br><span class="line">    onUpdated, </span><br><span class="line">    onBeforeUnmount, </span><br><span class="line">    onUnmounted </span><br><span class="line">  &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#x27;setup&#x27;)</span><br><span class="line">  // ç”Ÿå‘½å‘¨æœŸé’©å­</span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-14-ã€è‡ªå®šä¹‰hookã€‘"><a href="#3-14-ã€è‡ªå®šä¹‰hookã€‘" class="headerlink" title="3.14. ã€è‡ªå®šä¹‰hookã€‘"></a>3.14. ã€è‡ªå®šä¹‰hookã€‘</h2><ul><li><p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p></li><li><p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// å‘è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// ç»´æŠ¤æ•°æ®</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‚è½½é’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;ç‚¹æˆ‘+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;ç‚¹æˆ‘-1&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;åŠ è½½ä¸­......&lt;/span&gt;&lt;br&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;å†æ¥ä¸€åªç‹—&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineComponent&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import useSum from &#x27;./hooks/useSum&#x27;</span><br><span class="line">  import useDog from &#x27;./hooks/useDog&#x27;</span><br><span class="line"></span><br><span class="line">  let &#123;sum,increment,decrement&#125; = useSum()</span><br><span class="line">  let &#123;dogList,getDog&#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="4-è·¯ç”±"><a href="#4-è·¯ç”±" class="headerlink" title="4. è·¯ç”±"></a>4. è·¯ç”±</h1><h2 id="4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"><a href="#4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘" class="headerlink" title="4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"></a>4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <h2 id="4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"><a href="#4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘" class="headerlink" title="4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"></a>4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</h2><ul><li><p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p></li><li><p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vueè·¯ç”±æµ‹è¯•&lt;/h2&gt;</span><br><span class="line">    &lt;!-- å¯¼èˆªåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;é¦–é¡µ&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;æ–°é—»&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;å…³äº&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å±•ç¤ºåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"><a href="#4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘" class="headerlink" title="4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"></a>4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</h2><blockquote><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p></li><li><p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p></li></ol></blockquote><h2 id="4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"><a href="#4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘" class="headerlink" title="4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"></a>4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</h2><ol><li><p><code>history</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p><p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//historyæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p><p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hashæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘"><a href="#4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘" class="headerlink" title="4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘"></a>4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¬¬ä¸€ç§ï¼štoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;ä¸»é¡µ&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¬¬äºŒç§ï¼štoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-6-ã€å‘½åè·¯ç”±ã€‘"><a href="#4-6-ã€å‘½åè·¯ç”±ã€‘" class="headerlink" title="4.6. ã€å‘½åè·¯ç”±ã€‘"></a>4.6. ã€å‘½åè·¯ç”±ã€‘</h2><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p><p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è·³è½¬è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç®€åŒ–å‰ï¼šéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–åï¼šç›´æ¥é€šè¿‡åå­—è·³è½¬ï¼ˆtoçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§ï¼‰ --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-7-ã€åµŒå¥—è·¯ç”±ã€‘"><a href="#4-7-ã€åµŒå¥—è·¯ç”±ã€‘" class="headerlink" title="4.7. ã€åµŒå¥—è·¯ç”±ã€‘"></a>4.7. ã€åµŒå¥—è·¯ç”±ã€‘</h2><ol><li><p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p></li><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- æˆ– --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;news.name&#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-8-ã€è·¯ç”±ä¼ å‚ã€‘"><a href="#4-8-ã€è·¯ç”±ä¼ å‚ã€‘" class="headerlink" title="4.8. ã€è·¯ç”±ä¼ å‚ã€‘"></a>4.8. ã€è·¯ç”±ä¼ å‚ã€‘</h2><h3 id="queryå‚æ•°"><a href="#queryå‚æ•°" class="headerlink" title="queryå‚æ•°"></a>queryå‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &quot;&gt;</span><br><span class="line">è·³è½¬</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°queryå‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="paramså‚æ•°"><a href="#paramså‚æ•°" class="headerlink" title="paramså‚æ•°"></a>paramså‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink :to=&quot;`/news/detail/001/æ–°é—»001/å†…å®¹001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name:&#x27;xiang&#x27;, //ç”¨nameè·³è½¬</span><br><span class="line">    params:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°paramså‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">params</span>)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p><p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p></blockquote><h2 id="4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘"><a href="#4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘" class="headerlink" title="4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘"></a>4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;, </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-10-ã€-replaceå±æ€§ã€‘"><a href="#4-10-ã€-replaceå±æ€§ã€‘" class="headerlink" title="4.10. ã€ replaceå±æ€§ã€‘"></a>4.10. ã€ replaceå±æ€§ã€‘</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p><ul><li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li><li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li></ul></li><li><p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"><a href="#4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘" class="headerlink" title="4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"></a>4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</h2><p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>$route</code>å’Œ<code>$router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><h2 id="4-12-ã€é‡å®šå‘ã€‘"><a href="#4-12-ã€é‡å®šå‘ã€‘" class="headerlink" title="4.12. ã€é‡å®šå‘ã€‘"></a>4.12. ã€é‡å®šå‘ã€‘</h2><ol><li><p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h1><h2 id="5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"><a href="#5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘" class="headerlink" title="5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"></a>5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h2 id="5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘"><a href="#5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘" class="headerlink" title="5.2ã€æ­å»º pinia ç¯å¢ƒã€‘"></a>5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</h2><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p><p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨æ’ä»¶ */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p><img src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><h2 id="5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘"><a href="#5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘" class="headerlink" title="5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘"></a>5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</h2><ol><li><p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p></li><li><p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  // å¼•å…¥å¯¹åº”çš„useXxxxxStore</span><br><span class="line">  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;</span><br><span class="line">  </span><br><span class="line">  // è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store</span><br><span class="line">  const sumStore = useSumStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import axios from &#x27;axios&#x27;</span><br><span class="line">  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;</span><br><span class="line"></span><br><span class="line">  const talkStore = useTalkStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼"><a href="#5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼" class="headerlink" title="5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)"></a>5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</h2><ol><li><p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//åŠ </span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//æ“ä½œcountStoreä¸­çš„sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//å‡</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value:number</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å¯¹åº”action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-5-ã€storeToRefsã€‘"><a href="#5-5-ã€storeToRefsã€‘" class="headerlink" title="5.5.ã€storeToRefsã€‘"></a>5.5.ã€storeToRefsã€‘</h2><ul><li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;count&quot;&gt;</span><br><span class="line">&lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">  /* å¼•å…¥storeToRefs */</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">/* å¾—åˆ°countStore */</span><br><span class="line">  const countStore = useCountStore()</span><br><span class="line">  /* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */</span><br><span class="line">  const &#123;sum&#125; = storeToRefs(countStore)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-6-ã€gettersã€‘"><a href="#5-6-ã€gettersã€‘" class="headerlink" title="5.6.ã€gettersã€‘"></a>5.6.ã€gettersã€‘</h2><ol><li><p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p></li><li><p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="attr">bigSum</span>:(state):<span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> *<span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>. school.<span class="title function_">toUpperCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = countStore</span><br><span class="line"><span class="keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="title function_">storeToRefs</span>(countStore)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-7-ã€-subscribeã€‘"><a href="#5-7-ã€-subscribeã€‘" class="headerlink" title="5.7.ã€$subscribeã€‘"></a>5.7.ã€$subscribeã€‘</h2><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate,state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LoveTalk&#x27;</span>,mutate,state)</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘"><a href="#5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘" class="headerlink" title="5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘"></a>5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// talkListå°±æ˜¯state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalkå‡½æ•°ç›¸å½“äºaction</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</span></span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">data</span>:&#123;<span class="attr">content</span>:title&#125;&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),title&#125;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;talkList,getATalk&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6-ç»„ä»¶é€šä¿¡"><a href="#6-ç»„ä»¶é€šä¿¡" class="headerlink" title="6. ç»„ä»¶é€šä¿¡"></a>6. ç»„ä»¶é€šä¿¡</h1><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p><ul><li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li></ul><ul><li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li><li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li><li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li><li><code>$children</code>è¢«ç æ‰äº†ã€‚</li></ul><p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> <h2 id="6-1-ã€propsã€‘"><a href="#6-1-ã€propsã€‘" class="headerlink" title="6.1. ã€propsã€‘"></a>6.1. ã€propsã€‘</h2><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p><ul><li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li><li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li></ul><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶ï¼Œ&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;å„¿å­ç»™çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// æ•°æ®</span><br><span class="line">const car = ref(&#x27;å¥”é©°&#x27;)</span><br><span class="line">const toy = ref()</span><br><span class="line">// æ–¹æ³•</span><br><span class="line">function getToy(value:string)&#123;</span><br><span class="line">toy.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;çˆ¶ç»™æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;getToy(toy)&quot;&gt;ç©å…·ç»™çˆ¶äº²&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&#x27;å¥¥ç‰¹æ›¼&#x27;)</span><br><span class="line"></span><br><span class="line">defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"><a href="#6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘" class="headerlink" title="6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"></a>6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</h2><ol><li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ &#x3D;&gt; çˆ¶ã€‚</strong></li><li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li></ol><ul><li>åŸç”Ÿäº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li><li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li></ul></li><li>è‡ªå®šä¹‰äº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li><li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong ></li></ul></li></ul><ol start="3"><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;send-toy&#x27;</span>, å…·ä½“æ•°æ®)</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-3-ã€mittã€‘"><a href="#6-3-ã€mittã€‘" class="headerlink" title="6.3. ã€mittã€‘"></a>6.3. ã€mittã€‘</h2><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p>å®‰è£…<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºemitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abcäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyzäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // æ¸…ç†äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æš´éœ²mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toyäº‹ä»¶è¢«è§¦å‘&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p><h2 id="6-4-ã€v-modelã€‘"><a href="#6-4-ã€v-modelã€‘" class="headerlink" title="6.4.ã€v-modelã€‘"></a>6.4.ã€v-modelã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p></li><li><p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç  --&gt;</span><br><span class="line">&lt;input </span><br><span class="line">  type=&quot;text&quot; </span><br><span class="line">  :value=&quot;userName&quot; </span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šv-modelçš„æœ¬è´¨ --&gt;</span><br><span class="line">&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§ï¼Œç›®çš„æ˜¯ï¼šä¸ºäº†å‘ˆç°æ•°æ® --&gt;</span><br><span class="line">&lt;!--ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶ï¼Œè§¦å‘inputäº‹ä»¶æ—¶ï¼Œè¿›è€Œè§¦å‘update:model-valueäº‹ä»¶--&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;modelValue&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä¹Ÿå¯ä»¥æ›´æ¢valueï¼Œä¾‹å¦‚æ”¹æˆabc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹ --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;abc&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;abc&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:abc&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-5-ã€-attrs-ã€‘"><a href="#6-5-ã€-attrs-ã€‘" class="headerlink" title="6.5.ã€$attrs ã€‘"></a>6.5.ã€$attrs ã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p></li><li><p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p><blockquote><p> æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p></blockquote></li></ol><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1)</span><br><span class="line">let b = ref(2)</span><br><span class="line">let c = ref(3)</span><br><span class="line">let d = ref(4)</span><br><span class="line"></span><br><span class="line">function updateA(value)&#123;</span><br><span class="line">a.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­™ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;aï¼š&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;bï¼š&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;cï¼š&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;dï¼š&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;xï¼š&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;yï¼š&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;updateA(666)&quot;&gt;ç‚¹æˆ‘æ›´æ–°A&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-6-ã€-refsã€-parentã€‘"><a href="#6-6-ã€-refsã€-parentã€‘" class="headerlink" title="6.6. ã€$refsã€$parentã€‘"></a>6.6. ã€$refsã€$parentã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š</p><ul><li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li><li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li></ul></li><li><p>åŸç†å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td></tr><tr><td><code>$parent</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td></tr></tbody></table></li></ol><h2 id="6-7-ã€provideã€injectã€‘"><a href="#6-7-ã€provideã€injectã€‘" class="headerlink" title="6.7. ã€provideã€injectã€‘"></a>6.7. ã€provideã€injectã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p></li><li><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</li><li>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</li></ul></li><li><p>å…·ä½“ç¼–ç ï¼š</p><p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;èµ„äº§+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;æ±½è½¦ä»·æ ¼+1&lt;/button&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let money = ref(100)</span><br><span class="line">  let car = reactive(&#123;</span><br><span class="line">    brand:&#x27;å¥”é©°&#x27;,</span><br><span class="line">    price:100</span><br><span class="line">  &#125;)</span><br><span class="line">  // ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•</span><br><span class="line">  function updateMoney(value:number)&#123;</span><br><span class="line">    money.value += value</span><br><span class="line">  &#125;</span><br><span class="line">  // æä¾›æ•°æ®</span><br><span class="line">  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)</span><br><span class="line">  provide(&#x27;car&#x27;,car)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p></blockquote><p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;æˆ‘æ˜¯å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateMoney(6)&quot;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">  import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line">  // æ³¨å…¥æ•°æ®</span><br><span class="line"> let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)</span><br><span class="line">  let car = inject(&#x27;car&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-8-ã€piniaã€‘"><a href="#6-8-ã€piniaã€‘" class="headerlink" title="6.8. ã€piniaã€‘"></a>6.8. ã€piniaã€‘</h2><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p><h2 id="6-9-ã€slotã€‘"><a href="#6-9-ã€slotã€‘" class="headerlink" title="6.9. ã€slotã€‘"></a>6.9. ã€slotã€‘</h2><h3 id="1-é»˜è®¤æ’æ§½"><a href="#1-é»˜è®¤æ’æ§½" class="headerlink" title="1. é»˜è®¤æ’æ§½"></a>1. é»˜è®¤æ’æ§½</h3><p><img src="http://49.232.112.44/images/default_slot.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;!-- é»˜è®¤æ’æ§½ --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-å…·åæ’æ§½"><a href="#2-å…·åæ’æ§½" class="headerlink" title="2. å…·åæ’æ§½"></a>2. å…·åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;æ›´å¤š&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a>3. ä½œç”¨åŸŸæ’æ§½</h3><ol><li><p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">          &lt;h2&gt;ä»Šæ—¥æ¸¸æˆæ¦œå•&lt;/h2&gt;</span><br><span class="line">          &lt;slot :games=&quot;games&quot; a=&quot;å“ˆå“ˆ&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">        import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">        let games = reactive([</span><br><span class="line">          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;è‹±é›„è”ç›Ÿ&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;ç‹è€…è£è€€&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;çº¢è‰²è­¦æˆ’&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;æ–—ç½—å¤§é™†&#x27;&#125;</span><br><span class="line">        ])</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="7-å…¶å®ƒ-API"><a href="#7-å…¶å®ƒ-API" class="headerlink" title="7. å…¶å®ƒ API"></a>7. å…¶å®ƒ API</h1><h2 id="7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘"><a href="#7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘" class="headerlink" title="7.1.ã€shallowRef ä¸ shallowReactive ã€‘"></a>7.1.ã€shallowRef ä¸ shallowReactive ã€‘</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p></li></ol><h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>é€šè¿‡ä½¿ç”¨ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> å’Œ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p></blockquote><h2 id="7-2-ã€readonly-ä¸-shallowReadonlyã€‘"><a href="#7-2-ã€readonly-ä¸-shallowReadonlyã€‘" class="headerlink" title="7.2.ã€readonly ä¸ shallowReadonlyã€‘"></a>7.2.ã€readonly ä¸ shallowReadonlyã€‘</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li><li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li></ul></li><li><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li><li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li></ul></li></ol><h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p></li><li><p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p></li></ul></li></ol><h2 id="7-3-ã€toRaw-ä¸-markRawã€‘"><a href="#7-3-ã€toRaw-ä¸-markRawã€‘" class="headerlink" title="7.3.ã€toRaw ä¸ markRawã€‘"></a>7.3.ã€toRaw ä¸ markRawã€‘</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®&#x2F;è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p></blockquote></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// å“åº”å¼å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2))</span><br></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol><li><p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p><blockquote><p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p></blockquote></li><li><p>ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><h2 id="7-4-ã€customRefã€‘"><a href="#7-4-ã€customRefã€‘" class="headerlink" title="7.4.ã€customRefã€‘"></a>7.4.ã€customRefã€‘</h2><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p><p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">initValue:<span class="built_in">string</span>,delay:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">track</span>() <span class="comment">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span> initValue</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value</span><br><span class="line">          <span class="title function_">trigger</span>() <span class="comment">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><h1 id="8-Vue3æ–°ç»„ä»¶"><a href="#8-Vue3æ–°ç»„ä»¶" class="headerlink" title="8. Vue3æ–°ç»„ä»¶"></a>8. Vue3æ–°ç»„ä»¶</h1><h2 id="8-1-ã€Teleportã€‘"><a href="#8-1-ã€Teleportã€‘" class="headerlink" title="8.1. ã€Teleportã€‘"></a>8.1. ã€Teleportã€‘</h2><ul><li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="8-2-ã€Suspenseã€‘"><a href="#8-2-ã€Suspenseã€‘" class="headerlink" title="8.2. ã€Suspenseã€‘"></a>8.2. ã€Suspenseã€‘</h2><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ </li><li>ä½¿ç”¨æ­¥éª¤ï¼š <ul><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">          &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;Child/&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;h3&gt;åŠ è½½ä¸­.......&lt;/h3&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"><a href="#8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘" class="headerlink" title="8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"></a>8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-ã€å…¶ä»–ã€‘"><a href="#8-4-ã€å…¶ä»–ã€‘" class="headerlink" title="8.4.ã€å…¶ä»–ã€‘"></a>8.4.ã€å…¶ä»–ã€‘</h2><ul><li><p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p></li><li><p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p></li><li><p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p></li><li><p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p></li><li><p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p></li><li><p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p><p>â€¦â€¦</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-Vue3ç®€ä»‹&quot;&gt;&lt;a href=&quot;#1-Vue3ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1. Vue3ç®€ä»‹&quot;&gt;&lt;/a&gt;1. Vue3ç®€ä»‹&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;2020å¹´9æœˆ18æ—¥ï¼Œ&lt;code&gt;Vue.js&lt;/code&gt;å‘å¸ƒç‰ˆ&lt;c</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>è§†é¢‘ç´ æ</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:31:36.000Z</published>
    <updated>2023-12-15T14:31:17.693Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å…è´¹è§†é¢‘"><a href="#1ã€å…è´¹è§†é¢‘" class="headerlink" title="1ã€å…è´¹è§†é¢‘"></a>1ã€å…è´¹è§†é¢‘</h2><table><thead><tr><th align="left">â–¼ <strong>é«˜æ¸…è§†é¢‘</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://pixabay.com/zh/videos/">Pixabay</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.pexels.com/zh-cn/videos/">Pexels</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://coverr.co/">Coverr</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-stock-video/">Mixkit</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.vidsplay.com/">Vidsplay</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://isorepublic.com/videos/">ISO Republic</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videezy.com/">Videezy</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/">Videvo</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.freepik.com/videos">Freepik</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">â–¼ <strong>å°ä¼—è§†é¢‘</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.motionplaces.com/">Motion Places</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºå»¶æ—¶æ‘„å½±ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mazwai.com/">Mazwai</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºç”µå½±é£æ ¼ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://dareful.com/">Dareful</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://focastock.com/videos/">FOCA</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freenaturestock.com/videos/">Nature Stock</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">â–¼ <strong>èšåˆæœç´¢</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.6huo.com/footages">é¢„å‘Šç‰‡ä¸–ç•Œ</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://video.librestock.com/">Librestock</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.free-video-footage.com/">FVF</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr></tbody></table><h2 id="2ã€è§†é¢‘ç´ æ"><a href="#2ã€è§†é¢‘ç´ æ" class="headerlink" title="2ã€è§†é¢‘ç´ æ"></a>2ã€è§†é¢‘ç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>è§†é¢‘ç´ æ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.aigei.com/">çˆ±ç»™ç½‘</a></td><td align="left">å›½å†…çŸ¥åçš„è§†é¢‘ç´ æç½‘ç«™ï¼Œä¸‹è½½è¦é“œå¸ï¼Œæ¯æ—¥å…è´¹é€ 20 é“œå¸ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.heycan.com/home">é»‘ç½å¤´</a></td><td align="left">æŠ–éŸ³æ——ä¸‹ç´ æå¹³å°ï¼ŒUGC å¹³å°ï¼Œå…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cool.bilibili.com/square/video">ç´ æé…·å¹³å°</a></td><td align="left">B ç«™æ——ä¸‹ç´ æå¹³å°ï¼ŒUGC å¹³å°ï¼Œå…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sucai.zhiyu.art/">çŸ¥é±¼ç´ æ</a></td><td align="left">å›½å†…è§†é¢‘ç´ æåº“ï¼Œ<strong>â€œå…±äº«åè®®â€</strong>çš„ç´ æå¯å…è´¹å•†ç”¨ã€å…è´¹ç”¨æˆ·æ¯å¤© 1 æ¬¡ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://shipin520.com/">æ½®ç‚¹è§†é¢‘</a></td><td align="left">å›½å†…è§†é¢‘ç´ æåº“ï¼Œå…è´¹ç”¨æˆ·æ¯å¤© 1 æ¬¡ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://al.jybest.ltd/%E8%BD%AF%E4%BB%B6/Windows/4000%E4%B8%AA%E7%BB%BF%E5%B9%95%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%9027G">ç»¿å¹•è§†é¢‘27G</a></td><td align="left">ç½‘ä¸Šæ‰¾åˆ°çš„ 4000ä¸ªç»¿å¹•è§†é¢‘ç´ æ 27Gï¼Œæ”¯æŒé¢„è§ˆå’Œä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cutestockfootage.com/">Cute Footage</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.productioncrate.com/">ProductionCrate</a></td><td align="left">è¦ç™»å½•ã€ä»˜è´¹ç½‘ç«™çš„å…è´¹å†…å®¹ï¼Œæ¯æ—¥ 4 æ¬¡å…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.monzoom.com/">Monzoom</a></td><td align="left">è¦ç™»å½•ã€CC0ç‰ˆæƒã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr></tbody></table><h2 id="3ã€è§†é¢‘åæœŸ"><a href="#3ã€è§†é¢‘åæœŸ" class="headerlink" title="3ã€è§†é¢‘åæœŸ"></a>3ã€è§†é¢‘åæœŸ</h2><table><thead><tr><th align="left">â–¼ <strong>ç‰¹æ•ˆæ¨¡ç‰ˆ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-video-templates/">Mixkit</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.lookae.com/">LookAE</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.newcger.com/">NewCGer</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://c4dsky.com/">ä¹¦ç”Ÿå½±è§†</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mfcpx.com/">FCPXèµ„æºç«™</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.cgdream.com.cn/">CGæ¨¡å‹ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.cgown.com/">CGèµ„æºç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.cgahz.com/">CGçˆ±å¥½è€…ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.cgufo.com/">CGUFO</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.aepond.com/">AEPON</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://prmuban.com/">PRæ¨¡æ¿ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gfxcamp.com/">GFXCamp</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.lovelifemrle.com/">çˆ±ç”Ÿæ´»çš„ä¹å…ˆç”Ÿ</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://videocopilot.net.cn/">Video-Copilot</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€å…è´¹è§†é¢‘&quot;&gt;&lt;a href=&quot;#1ã€å…è´¹è§†é¢‘&quot; class=&quot;headerlink&quot; title=&quot;1ã€å…è´¹è§†é¢‘&quot;&gt;&lt;/a&gt;1ã€å…è´¹è§†é¢‘&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;é«˜æ¸…è§†é¢‘&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="è§†é¢‘" scheme="https://dont-sleep-so-late.github.io/tags/%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>å­—ä½“å¯¼èˆª</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:30:36.000Z</published>
    <updated>2023-12-15T14:29:13.489Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ä¸­æ–‡å­—ä½“"><a href="#1ã€ä¸­æ–‡å­—ä½“" class="headerlink" title="1ã€ä¸­æ–‡å­—ä½“"></a>1ã€ä¸­æ–‡å­—ä½“</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹å•†ç”¨</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://wordshub.github.io/free-font/">å­—é›†</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œå¤§æ¦‚æ˜¯ 2020 å¹´æœ€å…¨çš„å…è´¹å¯å•†ç”¨å­—ä½“åº“ã€‚ğŸ‘</td></tr><tr><td align="left">ğŸŒ <a href="https://www.maoken.com/all-fonts-imgs">çŒ«å•ƒç½‘</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæœ‰ <a href="https://www.maoken.com/all-fonts-imgs">å›¾æ–‡ç‰ˆ</a>ã€<a href="https://www.maoken.com/preview">é¢„è§ˆç‰ˆ</a>ã€<a href="https://www.maoken.com/all-fonts">è¡¨æ ¼ç‰ˆ</a> ç­‰å¤šç§æ–¹æ³•ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ziyouziti.com/">è‡ªç”±å­—ä½“</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œé™„æœ‰å­—ä½“ä½¿ç”¨æ ·ç‰ˆï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left"><a href="https://www.potatofield.cn/fontlibrary">ğŸŒ æ´‹èŠ‹ç”°</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæ”¶å½•äº† 140+ å­—ä½“ï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.freechinesefont.com/">CN Fonts</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæ”¶å½•äº† 180+ å­—ä½“ï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.100font.com/">100font</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.shejidt.com/fonts">SHEJIDT</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://51font.17font.com/">51Font</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://pan.baidu.com/share/init?surl=ALdMdP2fX_WEQjTDutZkAw">900å…è´¹å­—ä½“</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œç½‘å‹æ•´ç†çš„å…è´¹å•†ç”¨å­—ä½“é›†åˆï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ï¼Œæå–ç ï¼š52pj</td></tr><tr><td align="left">â–¼ <strong>å­—ä½“èµ„è®¯</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.thetype.com/">The Type</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.zhaozi.cn/">æ‰¾å­—ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontke.com/">å­—å®¢ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://izihun.com/">å­—é­‚ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.ziticq.com/">å­—ä½“ä¼ å¥‡</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fonts.net.cn/">å­—ä½“å¤©ä¸‹</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">â–¼ <strong>è‹±æ–‡å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontshare.com/">Fontshare</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="2ã€è‹±æ–‡å­—ä½“"><a href="#2ã€è‹±æ–‡å­—ä½“" class="headerlink" title="2ã€è‹±æ–‡å­—ä½“"></a>2ã€è‹±æ–‡å­—ä½“</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹å•†ç”¨</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://wordmark.it/">Wordmark</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.dafont.com/themes.php">Dafont</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"><a href="https://www.azfonts.net/">ğŸŒ AZfonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"><a href="https://fontesk.com/">ğŸŒ Fontesk</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontshare.com/">FontShare</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001freefonts.com/">1001FreeFonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.actionfonts.com/">Action Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>å­—ä½“èµ„è®¯</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left"><a href="https://www.typewolf.com/">ğŸŒ TypeWolf</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fonts.com/">Fonts.com</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºä»˜è´¹å­—ä½“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fontdiner.com/">FontDiner</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºå¤å¤å­—ä½“ã€‚</td></tr><tr><td align="left"><a href="https://blambot.com/">ğŸŒ Blambot</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºæ¼«ç”»å­—ä½“ã€‚</td></tr></tbody></table><h2 id="3ã€å­—ä½“å·¥å…·"><a href="#3ã€å­—ä½“å·¥å…·" class="headerlink" title="3ã€å­—ä½“å·¥å…·"></a>3ã€å­—ä½“å·¥å…·</h2><table><thead><tr><th align="left">â–¼ <strong>å­—ä½“æŸ¥è¯¢</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://fonts.safe.360.cn/">360æŸ¥å­—ä½“</a></td><td align="left">å­—ä½“ç‰ˆæƒæŸ¥è¯¢ï¼Œç”± 360 å…¬å¸æ¨å‡ºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.likefont.com/">è¯†å­—ä½“ç½‘</a></td><td align="left">ä¸­æ–‡å­—ä½“è¯†åˆ«ï¼Œæ”¯æŒä¸­ã€è‹±ã€æ—¥éŸ©ã€ç­‰æ–‡å­—ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fonts.adobe.com/">Adobe Fonts</a></td><td align="left">ä¸­æ–‡å­—ä½“è¯†åˆ«ï¼ŒAdobe å…¬å¸å‡ºå“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.myfonts.com/pages/whatthefont">WhatTheFont!</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.whatfontis.com/">WhatFontIs</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontsquirrel.com/matcherator">Identify Fonts</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.identifont.com/index.html">IdentiFont</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œé€šè¿‡å­—ä½“æè¿°æ¥è¯†åˆ«å­—ä½“ã€‚</td></tr><tr><td align="left">â–¼ <strong>æ‰‹å†™å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://shouxie.laoxiezi.com/">è€é‹å­</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ‰‹å†™å­—ä½“åœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.beautifulcarrot.com/">èåœå·¥åŠ</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨¡æ‹Ÿæ‰‹å†™å­—ä½“è½¯ä»¶ï¼Œä¸€é”®ç”Ÿæˆæ‰‹å†™æ–‡ç¨¿ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.iamzlt.com/?p=602">æ‰‹å†™æ¨¡æ‹Ÿå™¨</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨¡æ‹Ÿæ‰‹å†™å­—ä½“è½¯ä»¶ï¼Œä¸€é”®ç”Ÿæˆæ‰‹å†™æ–‡ç¨¿ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.calligrapher.ai/">Calligrapher</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œå¯ä»¥å°†è‹±æ–‡å˜æˆæ‰‹å†™ä½“ï¼Œå¹¶æœ‰åŠ¨ç”»æ•ˆæœï¼Œå¹¶æä¾› SVG ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.an2.net/">ç”°å­—æ ¼å­—å¸–</a></td><td align="left">ç”°å­—æ ¼å¸–ç”Ÿæˆå™¨ï¼Œå…è´¹çš„åœ¨çº¿ç”°å­—æ ¼å­—å¸–ç”Ÿæˆå™¨ï¼Œæ”¯æŒç¬”é¡ºï¼Œå°å­¦ç”Ÿç»ƒå­—ç¥å™¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>ä¹¦æ³•å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left"><a href="http://www.shufami.com/">ğŸŒ ä¹¦æ³•è¿·</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œåœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.diyiziti.com/">ç¬¬ä¸€å­—ä½“</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œåœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left"><a href="http://g.shufaziti.com/">ğŸŒ å…‰æ˜ä¹¦æ³•</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨ªå¹…é›†å­—å·¥å…·ã€‚</td></tr><tr><td align="left"><a href="http://shufa.4a40.com/">ğŸŒ ä¹¦æ³•é›†å­—</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œä¹¦æ³•å­—å…¸åœ¨çº¿æŸ¥è¯¢ã€‚</td></tr><tr><td align="left"><a href="http://www.395.net.cn/">ğŸŒ 395å·¥å…·</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œæœ‰å„å¼å„æ ·çš„åœ¨çº¿å·¥å…·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.moage.cn/shufa">å¤é£å®¶ä¹¦</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œå¤é£å®¶ä¹¦ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>å°ç« å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.gaitubao.com/yinzhang">æ”¹å›¾å®</a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mofans.net/yinzhang/">å¢¨èŠ³å°ç« </a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://redmi.work/">395å°ç« </a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">â–¼ <strong>ç³»ç»Ÿå­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸ“¥ <a href="https://fontforge.org/en-US/">FontForge</a></td><td align="left">å­—ä½“ç¼–è¾‘å™¨ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„å­—ä½“ï¼Œæ”¯æŒä¸­æ–‡ï¼Œä¸”å…è´¹å¼€æºã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.mactype.net/">MacType</a></td><td align="left">å­—ä½“æ¸²æŸ“å·¥å…·ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿæ–‡å­—æ˜¾ç¤ºæ›´åŠ æ¸…æ™°ã€æ›´æœ‰ç«‹ä½“æ„Ÿã€‚</td></tr></tbody></table><h2 id="4ã€å­—ä½“ç‰¹æ•ˆ"><a href="#4ã€å­—ä½“ç‰¹æ•ˆ" class="headerlink" title="4ã€å­—ä½“ç‰¹æ•ˆ"></a>4ã€å­—ä½“ç‰¹æ•ˆ</h2><table><thead><tr><th align="left">â–¼ <strong>åœ¨çº¿å·¥å…·</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.logosc.cn/text/">æ ‡å°æ™º</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œä¸€é”®ç”Ÿæˆå„ç§ç‰¹æ•ˆçš„å­—ä½“ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://vaufonts.com/">VAU Fonts</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œä¸€é”®ç”Ÿæˆå„ç§ç‰¹æ•ˆçš„å­—ä½“ï¼Œåœ¨â€œ<strong>Preset</strong>â€é‡Œå¯ä»¥åˆ‡æ¢æ•ˆæœã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://andyh0913.github.io/FrenchFries-Font-Converter/">éº¦å½“åŠ³å­—ä½“</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œç”Ÿæˆéº¦å½“åŠ³è–¯æ¡å­—ä½“ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://textanim.com/">TEXTANIM</a></td><td align="left">ç”ŸæˆåŠ¨æ•ˆå­—ä½“ï¼Œç”Ÿæˆ GIF åŠ¨æ•ˆå­—ä½“ï¼Œæ•ˆæœç›¸å¯¹æ¯”è¾ƒå¤å¤ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://llamafont.com/">Llama Font</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œç”Ÿæˆè‰æ³¥é©¬ï¼ˆç¾Šé©¼ï¼‰å­—ä½“ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æœ¬åœ°å·¥å…·</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸ“¥ <a href="https://aaa-logo.com/">AAA Logo</a></td><td align="left">å…è´¹ï¼Œ1000+ ç°æˆ Logo æ¨¡ç‰ˆä¸€é”®ç”Ÿæˆï¼Œåªæ”¯æŒ Windowsã€‚<a href="https://www.aaa-logo.com/download.php">ğŸªŸ</a></td></tr><tr><td align="left">ğŸ“¥ <a href="https://apps.apple.com/cn/app/art-text-4-text-effects-app/id1499327230?mt=12">Art Text 4</a></td><td align="left">ä¸“ä¸šå›¾å½¢è®¾è®¡å·¥å…·ï¼Œå¯ä»¥ä¸€é”®ç”ŸæˆæƒŠè‰³çš„æ–‡æœ¬å’Œå›¾å½¢ï¼Œåªæ”¯æŒ Macã€‚<a href="https://two.onefileserver.top/macxz/10293/art_text_4_4.3.0.dmg">ğŸ</a></td></tr></tbody></table><h2 id="5ã€å­—ä½“ç‰ˆæƒ"><a href="#5ã€å­—ä½“ç‰ˆæƒ" class="headerlink" title="5ã€å­—ä½“ç‰ˆæƒ"></a>5ã€å­—ä½“ç‰ˆæƒ</h2><p>æ— è®ºä½ æ˜¯åšä»€ä¹ˆå·¥ä½œçš„ï¼Œå­—ä½“ç‰ˆæƒï¼Œä½ ä¸€å®šè¦ææ¸…æ¥šã€‚å› ä¸ºï¼Œ<strong>ä»–ä»¬æ˜¯çœŸçš„å‘Šï¼</strong></p><p>é‚£æˆ‘ä»¬è¦å¦‚ä½•é¿å…å­—ä½“ä¾µæƒå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ç”¨æ’é™¤æ³•ã€‚</p><p><strong>1ã€ç³»ç»Ÿè‡ªå¸¦çš„â€œå¾®è½¯é›…é»‘â€å’Œâ€œè‹¹æ–¹é»‘ä½“â€ä¸å¯å•†ç”¨ã€‚</strong></p><p>ç†è®ºä¸Š Windows å’Œ Mac è‡ªå¸¦çš„å­—ä½“ï¼Œä¹Ÿä¸æ˜¯å¯å•†ç”¨çš„ï¼Œåªæ˜¯ä»–ä»¬æ˜¯å‡ºè‡ªâ€œå¤§å…¬å¸â€ï¼Œæ²¡æ—¶é—´å‘Šä½ ç½¢äº†ã€‚</p><p><strong>2ã€å¦‚æœä½ ä¸æ‰“ç®—èŠ±é’±ä¹°å­—ä½“ï¼Œå‡¡æ˜¯å›½å†…å¤§å…¬å¸çš„å­—ä½“å“ç‰Œï¼Œéƒ½ä¸è¦ç”¨ã€‚</strong></p><p>å› ä¸ºå›½å†…å…¬æ€€å¯„å¾‹å¸ˆå‡½çš„æ–¹æ³•å¯å¤ªç®€å•äº†ï¼Œç”šè‡³å¯ä»¥åœ¨å…¬ä¼—å·è¯„è®ºåŒºç•™è¨€ï¼Œå›½å¤–å…¬å¸è‡³å°‘è¿˜æ‰¾ä¸ªæ³•äººä»£è¡¨ã€‚</p><p><strong>3ã€å¦‚æœä½ ä¸æ‰“ç®—èŠ±é’±ä¹°å­—ä½“ï¼Œé‚£äº›ä¼ ç»Ÿå­—ä½“å“ç‰Œï¼Œä¸€å¾‹ä¸è¦ç”¨ã€‚</strong></p><p>å‡ ä¹ä½ èƒ½å«å¾—å‡ºåå­—çš„å­—ä½“å“ç‰Œï¼Œæ¯”å¦‚ æ–¹æ­£ã€ååº·ã€æ±‰ä»ªã€åæ–‡ã€åå…‰ã€è’™çº³ã€æ–‡æ‚¦ã€æ±‰é¼ã€æ–‡é¼ ç­‰ç­‰ã€‚</p><p>è¿™äº›å­—ä½“å°±åƒé«˜å‹ç”µçº¿ä¸€æ ·çš„ï¼Œåƒä¸‡åˆ«ç¢°ã€‚ï¼ˆä¹Ÿå°‘é‡å­—ä½“å¯å…è´¹å•†ç”¨ï¼Œä½†ä¸å¥½çœ‹ï¼‰</p><p>å¦‚æœä½ å®‰è£…è¿‡è¿™æ­¤å­—ä½“ï¼Œèµ¶ç´§ä»ä½ çš„ç”µè„‘ä¸Šåˆ é™¤ï¼Œä¸è¦ç»™è‡ªå·±åŸ‹é›·ã€‚</p><p>ä»–ä»¬æ˜¯çœŸçš„å‘Šï¼</p><p><strong>4ã€åªç”¨ä½ ç¡®å®šæ˜¯å¯å…è´¹å•†ç”¨çš„å­—ä½“ã€‚</strong></p><p>å¯å…è´¹å•†ç”¨çš„å­—ä½“å¾ˆå¤šï¼Œæˆ‘ä»¬æ²¡å¿…è¦ä¸‹è½½æ‰€æœ‰çš„å­—ä½“ã€‚</p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŠŠé‚£äº›ç»è¿‡ç¡®å®šæ˜¯å¯ä»¥â€œ<strong>å…è´¹å•†ç”¨çš„å­—ä½“</strong>â€ï¼Œæ‰æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</p><p>è®°å¾—è¿˜è¦ä¿å­˜ä¸€å¼ â€œ<strong>å­—ä½“æˆªå›¾</strong>â€ï¼Œæ–¹ä¾¿è¯†åˆ«ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€ä¸­æ–‡å­—ä½“&quot;&gt;&lt;a href=&quot;#1ã€ä¸­æ–‡å­—ä½“&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä¸­æ–‡å­—ä½“&quot;&gt;&lt;/a&gt;1ã€ä¸­æ–‡å­—ä½“&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;å…è´¹å•†ç”¨&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="å­—ä½“" scheme="https://dont-sleep-so-late.github.io/tags/%E5%AD%97%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³ä¹ç´ æ</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:27:36.000Z</published>
    <updated>2023-12-15T14:30:29.334Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€éŸ³æ•ˆç´ æ"><a href="#1ã€éŸ³æ•ˆç´ æ" class="headerlink" title="1ã€éŸ³æ•ˆç´ æ"></a>1ã€éŸ³æ•ˆç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>å›½å†…ç½‘ç«™</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.aigei.com/sound">çˆ±ç»™ç½‘</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€<strong>ä¸‹è½½éœ€ä»˜è´¹</strong>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.tosound.com/">æ·˜å£°ç½‘</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.ear0.com/">è€³è†ç½‘</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sc.chinaz.com/yinxiao/">ç«™é•¿ç´ æ</a></td><td align="left">å…ç™»é™†ã€<strong>ç‰ˆæƒä¸æ˜ï¼Œå•†ç”¨éœ€è°¨æ…</strong>ã€‚</td></tr><tr><td align="left">â–¼ <strong>å›½å¤–ç½‘ç«™</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://pixabay.com/sound-effects/">Pixabay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-sound-effects/">Mixkit</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.findsounds.com/typesChinese.html">FindSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundeffectsplus.com/">SoundEffects+</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundgator.com/">SoundGator</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://taira-komori.jpn.org/freesoundcn.html">å°æ£®å¹³</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/royalty-free-sound-effects/">Videvo</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://soundbible.com/">SoundBible</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://orangefreesounds.com/">OrangeSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundjay.com/">SoundJay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.pacdv.com/sounds/">PacDV</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.partnersinrhyme.com/pir/PIRsfx.shtml">PartnersInRhyme</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mediacollege.com/downloads/sound-effects/">Media College</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr></tbody></table><h2 id="2ã€éŸ³æ•ˆåˆé›†"><a href="#2ã€éŸ³æ•ˆåˆé›†" class="headerlink" title="2ã€éŸ³æ•ˆåˆé›†"></a>2ã€éŸ³æ•ˆåˆé›†</h2><table><thead><tr><th align="left">â–¼ <strong>éŸ³æ•ˆåˆé›†</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://99sounds.org/">99Sounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼Œæ¬§æ´²çš„éŸ³æ•ˆå·¥ä½œå®¤ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://gamesounds.xyz/">GameSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼Œå¯ç›´æ¥ä¸‹è½½å¤šä¸ªå…ç‰ˆæƒéŸ³æ•ˆèµ„æºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.adobe.com/products/audition/offers/AdobeAuditionDLCSFX.html">Adobe Sound</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼ŒAdobe å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr><tr><td align="left">ğŸŒ <a href="https://www.blackmagicdesign.com/cn/support/">DaVinci Sound</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼ŒDaVinci å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr><tr><td align="left">ğŸŒ <a href="https://sound-effects.bbcrewind.co.uk/">BBC Sound</a></td><td align="left">å…ç™»é™†ã€<strong>å•†ç”¨éœ€æˆæƒ</strong>ã€æä¾›åˆé›†ä¸‹è½½ï¼ŒBBC å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr></tbody></table><h2 id="3ã€éŸ³ä¹ç´ æ"><a href="#3ã€éŸ³ä¹ç´ æ" class="headerlink" title="3ã€éŸ³ä¹ç´ æ"></a>3ã€éŸ³ä¹ç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹éŸ³ä¹</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://pixabay.com/zh/music/">Pixabay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://coverr.co/free-stock-music">Coverr</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-stock-music/">Mixkit</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sampld.app/">Sampld</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/royalty-free-music/">Videvo</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ncs.io/music">NCS</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freemusicarchive.org/home">FMA</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.bensound.com/free-music-for-videos">BenSound</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.purple-planet.com/">Purple Planet</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://incompetech.com/music/royalty-free/music.html">incompetech</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://dig.ccmixter.org/">dig.ccMixter</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fiftysounds.com/">FiftySounds</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cctrax.com/">CCTrax</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freepd.com/">FreePD</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://whatfunk.com/">WhatFunk</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://audionautix.com/">AudionautiX</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.partnersinrhyme.com/midi/Classical/index.shtml">PartnersInRhyme</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fesliyanstudios.com/">Fesliyan Studios</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://dust-sounds.com/">Dust-Sounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ—¥æœ¬ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://amachamusic.chagasi.com/">ç”˜èŒ¶ã®éŸ³æ¥½å·¥æˆ¿</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ—¥æœ¬ç½‘ç«™ã€‚</td></tr></tbody></table><h2 id="4ã€ä¸“ç”¨éŸ³ä¹"><a href="#4ã€ä¸“ç”¨éŸ³ä¹" class="headerlink" title="4ã€ä¸“ç”¨éŸ³ä¹"></a>4ã€ä¸“ç”¨éŸ³ä¹</h2><table><thead><tr><th align="left">â–¼ <strong>U2B éŸ³ä¹</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/user/NoCopyrightSounds">NCS</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/c/FreeMusicAudioLibraryNow/videos">FMAL</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/@AlrotaMusic/videos">Alrota Music</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/@MusicCityOfficial2017/videos">Music City</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/c/audiolibrary-channel/videos">Audio Library</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">â–¼ <strong>ä¸“ç”¨éŸ³ä¹</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://musopen.org/music/">Musopen</a></td><td align="left">å¤å…¸éŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sonniss.com/gameaudiogdc">GameAudioGDC</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€å…ç™»é™†ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://opengameart.org/">OpenGameArt</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://downloads.khinsider.com/">VGM</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€éŸ³æ•ˆç´ æ&quot;&gt;&lt;a href=&quot;#1ã€éŸ³æ•ˆç´ æ&quot; class=&quot;headerlink&quot; title=&quot;1ã€éŸ³æ•ˆç´ æ&quot;&gt;&lt;/a&gt;1ã€éŸ³æ•ˆç´ æ&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;å›½å†…ç½‘ç«™&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="éŸ³ä¹" scheme="https://dont-sleep-so-late.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>æ¸¸æˆå¯¼èˆª</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:25:36.000Z</published>
    <updated>2023-12-15T14:26:50.628Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å°æ¸¸æˆ"><a href="#1ã€å°æ¸¸æˆ" class="headerlink" title="1ã€å°æ¸¸æˆ"></a>1ã€å°æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>æ‰“å‘æ—¶é—´</strong></th><th align="left">â€”</th><th align="left">â€”</th><th align="left">â€”</th></tr></thead><tbody><tr><td align="left"><a href="http://magickeyboard.io/">é­”æœ¯é”®ç›˜</a></td><td align="left"><a href="https://eelslap.com/">æµ·å¸¦é±¼æ‹è„¸</a></td><td align="left"><a href="https://tikolu.net/spot-the-difference/menu">æŒ‡å‡ºä¸ä¸€æ ·</a></td><td align="left"><a href="https://vole.wtf/happy-birthday/">å„å¼å„æ ·ç”Ÿæ—¥æ­Œ</a></td></tr><tr><td align="left"><a href="https://humanclock.com/">äººç±»æ—¶é’Ÿ</a></td><td align="left"><a href="https://www.slapkirk.com/play#spockmode">åœ¨çº¿æ‰‡è€³å…‰</a></td><td align="left"><a href="https://qake.se/fw/index.html">åœ¨çº¿æ”¾çƒŸèŠ±</a></td><td align="left"><a href="https://theuselessweb.com/">æ— èŠç½‘ç«™ä¼ é€é—¨</a></td></tr><tr><td align="left"><a href="https://seoi.net/penint/">ç”»çº¿ä¸ºé›•</a></td><td align="left"><a href="https://webapp.magicposer.com/">é­”æ³•äººå‹å¸ˆ</a></td><td align="left"><a href="https://yesno.wtf/">Yes Or No?</a></td><td align="left"><a href="https://weirdorconfusing.com/">äºšé©¬é€Šé›·äººå•†å“</a></td></tr><tr><td align="left"><a href="https://thisissand.com/">å †æ²™å­æ¸¸æˆ</a></td><td align="left"><a href="http://www.koalastothemax.com/">æ— é™äºŒåˆ†æ³•</a></td><td align="left"><a href="https://pointerpointer.com/">é¼ æ ‡æŒ‡é’ˆåœ¨å“ªï¼Ÿ</a></td><td align="left"><a href="https://www.twinsornot.com/">çœŸä¸æ˜¯åŒèƒèƒï¼Ÿ</a></td></tr><tr><td align="left">â–¼ <strong>ä¼‘é—²è§£å‹</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://ac.yunyoujun.cn/#/">ä¾¿æºå°ç©ºè°ƒ</a></td><td align="left"><a href="https://tv.hzfe.org/">ç«¥å¹´å°ç”µè§†</a></td><td align="left"><a href="https://driveandlisten.herokuapp.com/">å…¨çƒè‡ªé©¾æ¸¸ä½“éªŒ</a></td><td align="left"><a href="https://www.pixelthoughts.co/">æ·±å‘¼å¸æ”¾æ¾ 60 ç§’</a></td></tr><tr><td align="left"><a href="https://fan.elpsy.cn/">æ¸…å‡‰å°é£æ‰‡</a></td><td align="left"><a href="http://www.megamonalisa.com/">è’™å¨œä¸½èå±•é¦†</a></td><td align="left"><a href="https://9-eyes.com/">æœ‰è¶£è°·æ­Œè¡—æ™¯å›¾</a></td><td align="left"><a href="https://works.yangerxiao.com/breathe-relaxer/">é™å¿ƒå‘¼å¸ æ„Ÿå—å¹³é™</a></td></tr><tr><td align="left"><a href="https://goldfishies.com/">åœ¨çº¿å…»é‡‘é±¼</a></td><td align="left"><a href="https://www.petside.com/infinite-cat/">çŒ«çš„æ— é™å¾ªç¯</a></td><td align="left"><a href="https://homeless-toys.netlify.app/#/">æ— å®¶å¯å½’çš„ç©å¶</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://alexanderperrin.com.au/paper/shorttrip/">çŸ­æš‚çš„æ—…è¡Œ</a></td><td align="left"><a href="https://www.window-swap.com/Window">å…¨çƒçª—æˆ·å…±äº«</a></td><td align="left"><a href="http://www.donothingfor2minutes.com/">2 åˆ†é’Ÿä»€ä¹ˆä¹Ÿä¸å¹²</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>å­¦ä¼šæ€è€ƒ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://dccxi.com/trust/">ä¿¡ä»»çš„è¿›åŒ–</a></td><td align="left"><a href="https://www.arealme.com/cn">å„ç§å„æ ·çš„è‡ªæˆ‘æµ‹è¯•</a></td><td align="left"><a href="https://thechoiceisyours.whatisthematrix.com/cn/">é€‰æ‹©ä½ ç›¸ä¿¡çš„ç°å®</a></td><td align="left"><a href="https://neal.fun/life-checklist/">äººç”Ÿæ¸…å•æ£€æŸ¥è¡¨</a></td></tr><tr><td align="left"><a href="https://ncase.me/crowds/zh-CN.html">ç¾¤ä½“çš„æ™ºæ…§ä¸æ„šè ¢</a></td><td align="left"><a href="http://www.20q.net/">20ä¸ªé—®é¢˜çŒœä½ æƒ³ä»€ä¹ˆ</a></td><td align="left"><a href="https://www.getbadnews.com/#intro">å‡æ–°é—»æ˜¯æ€æ ·ç‚¼æˆçš„</a></td><td align="left"><a href="https://www.futureme.org/">å†™ç»™æœªæ¥çš„è‡ªå·± 1</a></td></tr><tr><td align="left"><a href="https://cn.puzzle-nonograms.com/">ç»å…¸é€»è¾‘æ¨ç†æ¸¸æˆ</a></td><td align="left"><a href="https://stylishsite.github.io/">è´¾æ–¯çº³çš„çŒ«</a></td><td align="left"><a href="https://ncase.me/remember/zh.html">å¦‚ä½•è®°å¿†ä»»ä½•ä¸œè¥¿</a></td><td align="left"><a href="https://www.hi2future.com/">å†™ç»™æœªæ¥çš„è‡ªå·± 2</a></td></tr><tr><td align="left"><a href="http://www.iqsuperman.net/">IQ æµ‹è¯•é¢˜</a></td><td align="left"><a href="https://types.yuzeli.com/survey">å¿ƒç†å¥åº·æµ‹è¯•</a></td><td align="left"><a href="https://neal.fun/paper/">ä¸€å¼ çº¸æŠ˜Næ¬¡çš„åšåº¦</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.piixemto.com/zh/">å¿ƒç†å­¦æµ‹è¯•</a></td><td align="left"><a href="https://z-lyen.github.io/anxiety/">å’Œç„¦è™‘ä¸€èµ·å†’é™©ï¼</a></td><td align="left"><a href="https://www.did-you-knows.com/">DidYouKnow å†·çŸ¥è¯†</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>èº«ä½“æµ‹è¯•</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="http://www.ultrasonic-ringtones.com/">å¬è§‰æµ‹è¯•</a></td><td align="left"><a href="https://michaelbach.de/ot/index.html">çœ¼ç›çš„å¹»è§‰</a></td><td align="left"><a href="https://enchroma.com/pages/color-blindness-test">è‰²ç›²è‰²å¼±æµ‹è¯•</a></td><td align="left"><a href="http://illusionoftheyear.com/">å…¨çƒè§†è§‰é”™è§‰æ”¶é›†</a></td></tr><tr><td align="left"><a href="https://checkboxrace.com/">ç‚¹å‡»é€‰æ‹©æ¡†</a></td><td align="left"><a href="http://mp3ornot.com/">éŸ³è´¨åŒºåˆ«æµ‹è¯•</a></td><td align="left"><a href="https://www.qijishow.com/Brand/cool/index.html">å¸¦ä½ ä½“éªŒæ‰­æ›²å¹»è§‰</a></td><td align="left"><a href="https://humanbenchmark.com/">è®°å¿†åŠ›ååº”åŠ›æµ‹è¯•</a></td></tr><tr><td align="left">â–¼ <strong>ç”Ÿæ´»æŠ€èƒ½</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://yong.dgod.net/webim/index.html">åœ¨çº¿è¾“å…¥æ³•</a></td><td align="left"><a href="https://api.ihint.me/shuang/">åŒæ‹¼æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://qwerty.kaiyi.cool/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  1</a></td><td align="left"><a href="https://vultr.youmu.moe/quiz/">ä¸­å›½è¡Œæ”¿åŒºåˆ’æµ‹è¯•</a></td></tr><tr><td align="left"><a href="https://www.type.fun/">è½»æ¾å­¦æ‰“å­—</a></td><td align="left"><a href="http://www.chaiwubi.com/bmcx/">äº”ç¬”ç¼–ç æŸ¥è¯¢</a></td><td align="left"><a href="https://www.typelit.io/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  2</a></td><td align="left"><a href="https://www.foldnfly.com/#/1-1-1-1-1-1-1-1-2">æ•™ä½ å¦‚ä½•æ‹†çº¸é£æœº</a></td></tr><tr><td align="left"><a href="https://www.typingclub.com/da-zi">é”®ç›˜æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://werneror.github.io/FingerMemory/">äº”ç¬”æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://www.keybr.com/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  3</a></td><td align="left"><a href="https://www.animatedknots.com/">æ•™ä½ å¦‚ä½•ç»³å­æ‰“ç»“</a></td></tr></tbody></table><h2 id="2ã€åœ¨çº¿æ¸¸æˆ"><a href="#2ã€åœ¨çº¿æ¸¸æˆ" class="headerlink" title="2ã€åœ¨çº¿æ¸¸æˆ"></a>2ã€åœ¨çº¿æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>æ¸¸æˆç½‘ç«™</strong></th><th align="left">â€”</th><th align="left">â€”</th><th align="left">â€”</th></tr></thead><tbody><tr><td align="left"><a href="https://www.4399.com/">4399</a></td><td align="left"><a href="https://poki.cn/">Poki</a></td><td align="left"><a href="https://neal.fun/">Neal.Fun</a></td><td align="left"><a href="https://www.bestgames.com/">Best Games</a></td></tr><tr><td align="left"><a href="https://www.17173.com/">17173</a></td><td align="left"><a href="https://frvr.com/">FRVR</a></td><td align="left"><a href="https://zh.y8.com/">Y8 Games</a></td><td align="left"><a href="https://www.crazygames.com/">Crazy Games</a></td></tr><tr><td align="left">â–¼ <strong>åœ¨çº¿æ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://game.hullqin.cn/">çº¿ä¸‹èšä¼šæ¸¸æˆ</a></td><td align="left"><a href="https://flash.zczc.cz/">Flash ä¿å­˜è®¡åˆ’</a></td><td align="left"><a href="https://nes.heheda.top/">çº¢ç™½æœºæ¸¸æˆç›’</a></td><td align="left"><a href="https://likexia.gitee.io/game/index.html#/">Git æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://dos.lol/">åœ¨çº¿ DOS æ¸¸æˆ</a></td><td align="left"><a href="https://game.haiyong.site/">100ä¸ªæ‘¸é±¼å°æ¸¸æˆ</a></td><td align="left"><a href="https://zaixianwan.app/">è€æ¸¸æˆåœ¨çº¿ç©</a></td><td align="left"><a href="https://g8hh.com.cn/#/">é”…å·´æ±‰åŒ–</a></td></tr><tr><td align="left"><a href="https://www.yikm.net/">å°éœ¸ç‹ï¼Œå…¶ä¹æ— ç©·</a></td><td align="left"><a href="https://famicn.com/index.html">ä¸­æ–‡å®¶ç”¨æ¸¸æˆåšç‰©é¦†</a></td><td align="left"><a href="http://www.gbarom.cn/">æŒæœºè¿·</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>åŠ¨ä½œæ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.4399.com/flash/145201_2.htm">æ‹³çš‡97</a></td><td align="left"><a href="https://pvz.heheda.top/">æ¤ç‰©å¤§æˆ˜åƒµå°¸</a></td><td align="left"><a href="http://oos.moxiecode.com/js_webgl/ping_pong/">3D ä¹’ä¹“çƒ</a></td><td align="left"><a href="http://www.sinuousgame.com/">é¼ æ ‡èº²é¿çƒæ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://krunker.io/?game=SV:umt2g">åœ¨çº¿ CS</a></td><td align="left"><a href="https://classic.minecraft.net/?join=XeFyaTfaMDn-1-Px">æˆ‘çš„ä¸–ç•Œ</a></td><td align="left"><a href="https://www.linerider.com/">è½¨é“æ»‘è¡Œè€…</a></td><td align="left"><a href="https://www.foddy.net/Athletics.html">QWOP è·‘æ­¥æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://bruno-simon.com/">åœ¨çº¿å¼€è½¦</a></td><td align="left"><a href="https://fn.heheda.top/">æ°´æœå¿è€…</a></td><td align="left"><a href="http://canvasrider.com/">è½¨é“æ»‘è¡Œè€… 2</a></td><td align="left"><a href="https://img.youquhome.com/wp-ziyuan/nanren20.htm">æ˜¯ç”·äººåšæŒ20ç§’</a></td></tr><tr><td align="left"><a href="https://game.chronodivide.com/">çº¢è‰²è­¦æˆ’ 2</a></td><td align="left"><a href="https://squid-game.io/">é±¿é±¼æ¸¸æˆ</a></td><td align="left"><a href="https://tusenpo.github.io/FlappyFrog/">Excited çš„å°é¸Ÿ â–²</a></td><td align="left"><a href="https://edition.cnn.com/interactive/2021/03/cnnix-steership/">è‹ä¼Šå£«è¿æ²³æ¨¡æ‹Ÿå™¨</a></td></tr><tr><td align="left"><a href="https://playcsol.com/">åæç²¾è‹± 1.6</a></td><td align="left"><a href="http://www.heyzxz.me/pcol/">æ–¯è¯ºå…‹</a></td><td align="left"><a href="https://www.geo-fs.com/">åœ¨çº¿é£è¡Œæ¨¡æ‹Ÿå™¨</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ£‹ç‰Œæ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://playtictactoe.org/">äº•å­—æ£‹</a></td><td align="left"><a href="https://huazhechen.gitee.io/cuber/">ä¸‰é˜¶é­”æ–¹ 1</a></td><td align="left"><a href="https://knots.netlify.app/">ç¯å½¢ç»“æ‹¼å›¾</a></td><td align="left"><a href="https://yorg.io/">å¡”é˜²ç”Ÿå­˜æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://lichess.org/">å›½é™…è±¡æ£‹</a></td><td align="left"><a href="https://iamthecu.be/">ä¸‰é˜¶é­”æ–¹ 2</a></td><td align="left"><a href="https://kirilllive.github.io/Fifteen_puzzle_maker/">æ»‘åŠ¨æ‹¼å›¾</a></td><td align="left"><a href="https://printablecreative.com/">ç›Šæ™ºæ¸¸æˆå›¾ç”Ÿæˆå™¨</a></td></tr><tr><td align="left"><a href="https://lines.frvr.com/">è¿çº¿æ¸¸æˆ</a></td><td align="left"><a href="https://blocks.ovh/">ä¸ƒå·§æ¿</a></td><td align="left"><a href="https://slices.ovh/">ç›Šæ™ºåˆ‡å›¾</a></td><td align="left"></td></tr><tr><td align="left"><a href="http://farter.cn/tetr.js/">ä¿„ç½—æ–¯æ–¹å— 1</a></td><td align="left"><a href="https://ruyihe.com/sxx">ç–¯ç‹‚æ•°æ˜Ÿæ˜Ÿ</a></td><td align="left"><a href="https://maze.toys/mazes/mini/">è¿·å®«æ¸¸æˆ</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://chvin.github.io/react-tetris/">ä¿„ç½—æ–¯æ–¹å— 2</a></td><td align="left"><a href="http://www.jigzone.com/">æ‹¼å›¾æ¸¸æˆ</a></td><td align="left"><a href="https://www.webhek.com/post/draw-a-stickman/">è¯·ç”»ä¸€ä¸ªå°äºº</a></td><td align="left"></td></tr></tbody></table><h2 id="3ã€PC-æ¸¸æˆ"><a href="#3ã€PC-æ¸¸æˆ" class="headerlink" title="3ã€PC æ¸¸æˆ"></a>3ã€PC æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>é—¨æˆ·ç½‘ç«™</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.3dmgame.com/">3DMæ¸¸æˆç½‘</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæ›¾ç»æ˜¯å›½å†…æ¸¸æˆèµ„æºæœ€å¤šçš„ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gamersky.com/">æ¸¸æ°‘æ˜Ÿç©º</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå¤§å‹å•æœºæ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç‰¹è‰²èµ„è®¯å’Œä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://down.ali213.net/">æ¸¸ä¾ ç½‘</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå•æœºæ¸¸æˆä¸‹è½½åŸºåœ°ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.vgter.com/">ä¸Šæ¸¸ä¸–ç•Œ</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç²¾å“ PCã€Switchã€PS4 ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mhhf.com/">çµåŠ¨æ¸¸æˆ</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç²¾å“ PCã€Switchã€PS4 ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.taptap.cn/">TapTap</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå¤šä¸ºæ‰‹æœºæ¸¸æˆã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>åšå®¢ç½‘ç«™</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.zzzzz688.com/">æ¸¸æˆå¤©å ‚</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…¨çƒæ¸¸æˆä¸‹è½½åŸºåœ°ï¼Œ</td></tr><tr><td align="left">ğŸŒ <a href="https://steamzg.com/">å°å½èµ„æº</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå¯å…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.jiligamefun.com/">å½å“©å½å“©æ¸¸æˆ</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå¤šä¸º ACG æ¸¸æˆ.<a href="https://mp.weixin.qq.com/s/vKpSKCMICy0cBp7OACnMPw">éªŒè¯ç </a>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.xyg688.com/">å°å¦–æ€ªåˆ†äº«</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…´è¶£ä½¿ç„¶çš„èµ„æºæ¬è¿åšå®¢ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://kims3.xyz/">kimsèµ„æºç«™</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…è´¹ç”µè„‘æ¸¸æˆä¸‹è½½ç«™ï¼Œæä¾›é«˜é€Ÿä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.switch618.com/">Switch618</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…è´¹ï¼Œä½†è¦ç™»é™†ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>Stream æ¸¸æˆ</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://store.steampowered.com/">Steam</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œç›®å‰æœ€å¤§ PC æ¸¸æˆå¹³å°ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://steamunlocked.net/">SteamUnlocked</a></td><td align="left">Steam èµ„æºæ¸¸æˆç½‘ç«™ï¼Œæœ‰å¾ˆå¤šå¤§ä½œç ´è§£ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.s-sgames.com/">SGAMES</a></td><td align="left">ä¸“æ³¨äºç²¾å“æ¸¸æˆï¼Œå„ç±»å¯è”æœºç²¾å“èµ„æºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://gamestarfield.com/">GameStarfield</a></td><td align="left">Steam èµ„æºæ¸¸æˆç½‘ç«™ï¼Œæœ‰å¾ˆå¤šå¤§ä½œç ´è§£ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.curseforge.com/">CurseForge</a></td><td align="left">å…¨çƒæœ€å¤§çš„æ¸¸æˆ MOD æ¨¡ç»„èµ„æºä¸‹è½½ç«™ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ¸¸æˆç½‘ç›˜</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="http://gbtgame.ysepan.com/">GBTä¹èµæ¸¸æˆç©ºé—´</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚PC æ¸¸æˆä¸ºä¸»ï¼Œæ”¶è—å¤šä¸ºç²¾å“æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://flysheep.ysepan.com/">flysheep é¿éš¾æ‰€</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚Steamã€epicã€VRã€å•æœºã€Switch æ¸¸æˆç­‰ã€‚<a href="https://www.flysheep6.com/">ç‹¬ç«‹ç½‘ç«™</a></td></tr><tr><td align="left">ğŸŒ <a href="http://821730880.ysepan.com/">èŒæ–°å•æœºä¹‹å®¶</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://docs.qq.com/document/DT2xBeVJvaHNQUHht">50TBæ¸¸æˆåˆé›†</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚<a href="https://www.lanzouw.com/iYp4j067mbtg">Excel ä¸‹è½½</a>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://github.com/michelpereira/awesome-open-source-games">å¼€æºæ¸¸æˆåˆé›†</a></td><td align="left">å¼€æºæ¸¸æˆåˆé›†ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ¸¸æˆç£åŠ›</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.1377x.to/">1377x</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://bt4gprx.com/">BT4G â–²</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://torrentgalaxy.to/">TorrentGalaxy</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.limetorrents.lol/">LimeTorrents</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://rutracker.org/forum/index.php">RuTracker.org</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://pcgamestorrents.com/">PCGamesTorrent</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gamestorrents.fm/home/">GamesTorrents</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cpygames.com/">CPY GAMES</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://crotorrents.com/">CroTorrents</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://igg-games.com/">IGGGAMES</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fitgirl-repacks.site/">FitGirl Repacks</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://repack-games.com/">Repack-Games</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://rutracker.org/forum/index.php">RuTracker</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ï¼Œä¿„è¯­ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://thebyrut.org/">Byrut</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ï¼Œä¿„è¯­ã€‚</td></tr></tbody></table><h2 id="4ã€Mac-æ¸¸æˆ"><a href="#4ã€Mac-æ¸¸æˆ" class="headerlink" title="4ã€Mac æ¸¸æˆ"></a>4ã€Mac æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>Mac æ¸¸æˆ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸ“¥ <a href="https://www.lanzouw.com/i726k0z4j4pi">Mac æ¸¸æˆé›†åˆ</a></td><td align="left">æŸæ¸¸æˆç½‘ç«™æµå‡º 300+ æ¬¾ Mac å¹³å°çƒ­é—¨æ¸¸æˆï¼Œæä¾›ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://playcover.io/">PlayCover</a></td><td align="left">åœ¨ Macï¼ˆArmèŠ¯ç‰‡ï¼‰ ä¸Šè¿è¡Œ iOS åº”ç”¨ï¼Œæ¯”å¦‚â€œ<strong>åŸç¥</strong>â€ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://getwhisky.app/zh-Hans/">Whisky</a></td><td align="left">åœ¨ Macï¼ˆArmèŠ¯ç‰‡ï¼‰ ä¸Šè¿è¡Œ Windows åº”ç”¨ï¼Œæ¯”å¦‚â€œ<strong>åŸç¥</strong>â€ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://decrypt.day/">Decrypt Day</a></td><td align="left">IPA è„±å£³åº”ç”¨ä¸‹è½½ï¼Œæµ·å¤–ç½‘ç«™ï¼Œé€Ÿåº¦å¯èƒ½è¾ƒæ…¢ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ipa.store/">iPA Store</a></td><td align="left">IPA è„±å£³åº”ç”¨ä¸‹è½½ï¼Œéœ€è¦æ³¨å†Œè½½ï¼Œæ¯å¤© 2 ä¸ªå…è´¹ä¸‹è½½æ¬¡æ•°ã€‚</td></tr></tbody></table><h2 id="5ã€æ¸¸æˆå·¥å…·"><a href="#5ã€æ¸¸æˆå·¥å…·" class="headerlink" title="5ã€æ¸¸æˆå·¥å…·"></a>5ã€æ¸¸æˆå·¥å…·</h2><table><thead><tr><th align="left">â–¼ <strong>æ¸¸æˆå·¥å…·</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸ“œ <a href="https://greasyfork.org/zh-CN/scripts/437233">é˜²æ²‰è¿·ç»ˆç»“è€…</a></td><td align="left">å»é™¤å›½å†… 17173ã€4399 ç­‰æ¸¸æˆç½‘ç«™çš„ç™»å½•éœ€æ±‚ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://browser.360.cn/eex/index.html">360 æé€Ÿæµè§ˆå™¨X</a></td><td align="left">ç›®å‰è¿˜æ”¯æŒ Flash çš„æµè§ˆå™¨ï¼Œæ¨è<a href="https://www.123pan.com/s/7bzA-pQpOd">å¥¶é…ªç‰ˆæœ¬</a>ï¼Œè€Œä¸”è¿˜æœ‰ <a href="https://browser.360.cn/ee/mac/index.html">Mac ç‰ˆæœ¬</a>ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://pcstory.net/">è˜‘è‡æ¸¸æˆä¸‹è½½å™¨</a></td><td align="left">ä¸‹è½½å™¨ï¼Œç½‘å§ 36T æ¸¸æˆå…¨éƒ¨åˆ°ä½ å£è¢‹é‡Œï¼Œç‚¹å‡»ä¸‹è½½å®Œæˆåç›´æ¥å¼€ç©ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://steampp.net/">Watt Toolkit</a></td><td align="left">åŠ é€Ÿå™¨ï¼Œæ”¯æŒ Winã€Macã€Linux å¤šå¹³å°ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://uu.163.com/">UUåŠ é€Ÿå™¨</a></td><td align="left">åŠ é€Ÿå™¨ï¼Œç½‘æ˜“å‡ºå“ï¼Œå…è´¹ï¼Œä¸æ­¢å¿«ï¼Œè¿˜å¾ˆç¨³ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.wemod.com/zh">WeMod</a></td><td align="left">ä¿®æ”¹å™¨ï¼ŒPC æ¸¸æˆä½œå¼Šã€ä¿®æ”¹å™¨å’Œ Mod å°½åœ¨ä¸€æ¬¾åº”ç”¨ä¸­ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://blog.csdn.net/vbcom/article/details/7245186">DirectX Repair</a></td><td align="left">æ£€æµ‹å¹¶ä¿®å¤ç³»ç»Ÿçš„ DirectX çŠ¶æ€ï¼Œç©å¤§å‹æ¸¸æˆå¿…å¤‡ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€å°æ¸¸æˆ&quot;&gt;&lt;a href=&quot;#1ã€å°æ¸¸æˆ&quot; class=&quot;headerlink&quot; title=&quot;1ã€å°æ¸¸æˆ&quot;&gt;&lt;/a&gt;1ã€å°æ¸¸æˆ&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;æ‰“å‘æ—¶é—´&lt;/strong&gt;</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="æ¸¸æˆ" scheme="https://dont-sleep-so-late.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
  </entry>
  
  <entry>
    <title>Mybatisç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/mybatis/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/mybatis/</id>
    <published>2023-11-13T15:08:34.000Z</published>
    <updated>2023-11-13T15:17:57.074Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€MyBatis"><a href="#ä¸€ã€MyBatis" class="headerlink" title="ä¸€ã€MyBatis"></a>ä¸€ã€MyBatis</h2><h3 id="1-MyBatisï¼š"><a href="#1-MyBatisï¼š" class="headerlink" title="1.MyBatisï¼š"></a>1.MyBatisï¼š</h3><p>MyBatisï¼šæ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨æ˜ å°„çš„æ¡†æ¶ã€‚è¿™é‡Œæ‰€è°“çš„â€œåŠè‡ªåŠ¨â€æ˜¯ç›¸å¯¹äºHibernateå…¨è¡¨æ˜ å°„è€Œè¨€çš„ï¼ŒMyBatiséœ€è¦æ‰‹åŠ¨åŒ¹é…æä¾›POJOã€SQLå’Œæ˜ å°„å…³ç³»ï¼Œè€ŒHibernateåªéœ€æä¾›POJOå’Œæ˜ å°„å…³ç³»å³å¯ã€‚<br>ä¸Hibernateç›¸æ¯”ï¼Œè™½ç„¶ä½¿ç”¨MyBatisæ‰‹åŠ¨ç¼–å†™SQLè¦æ¯”ä½¿ç”¨Hibernateçš„å·¥ä½œé‡å¤§ï¼Œä½†MyBatiså¯ä»¥é…ç½®åŠ¨æ€SQLå¹¶ä¼˜åŒ–SQLï¼Œå¯ä»¥é€šè¿‡é…ç½®å†³å®šSQLçš„æ˜ å°„è§„åˆ™ï¼Œå®ƒè¿˜æ”¯æŒå­˜å‚¨è¿‡ç¨‹ç­‰ã€‚å¯¹äºä¸€äº›å¤æ‚çš„å’Œéœ€è¦ä¼˜åŒ–æ€§èƒ½çš„é¡¹ç›®æ¥è¯´ï¼Œæ˜¾ç„¶ä½¿ç”¨MyBatisæ›´åŠ åˆé€‚ã€‚</p><p>MyBatisæ¡†æ¶æ˜¯å½“å‰ä¸»æµçš„JavaæŒä¹…å±‚ï¼ˆæ•°æ®è®¿é—®å±‚DAOï¼‰æ¡†æ¶ä¹‹ä¸€ï¼Œå®ƒä¸Hibernateä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§ORMï¼ˆObject&#x2F;Relation Mappingï¼Œå³å¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ã€‚æ‰€è°“çš„ORMå°±æ˜¯ä¸€ç§ä¸ºäº†è§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“ä¸­æ•°æ®ç±»å‹ä¸åŒ¹é…çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡æè¿°Javaå¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè‡ªåŠ¨å°†Javaåº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æŒä¹…åŒ–åˆ°å…³ç³»å‹æ•°æ®åº“çš„è¡¨ä¸­ã€‚</p><h3 id="2-MyBatisæ ¸å¿ƒç»„ä»¶ï¼š"><a href="#2-MyBatisæ ¸å¿ƒç»„ä»¶ï¼š" class="headerlink" title="2.MyBatisæ ¸å¿ƒç»„ä»¶ï¼š"></a>2.MyBatisæ ¸å¿ƒç»„ä»¶ï¼š</h3><p>SqlSessionFactoryBuilderï¼ˆæ„é€ å™¨ï¼‰: æ ¹æ®XMLé…ç½®ï¼ˆæ¨èæ–¹å¼ï¼‰æˆ–è€…ä»£ç æ¥ç”ŸæˆSqlSessionFactoryï¼ˆå·¥å‚æ¥å£ï¼‰å¯¹è±¡, åˆ›å»ºå®Œæˆåè¯¥å¯¹è±¡å°±ä¸éœ€è¦äº†ï¼Œæ‰€ä»¥åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ï¼Œåé¢æ— éœ€ä¿å­˜ã€‚</p><p>SqlSessionFactoryï¼šä¾é å·¥å‚æ¥åˆ›å»ºSqlSessionï¼ˆä¼šè¯ï¼‰å¯¹è±¡ï¼›è¯¥å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¿å­˜ä¸€ä¸ªã€‚</p><p>SqlSessionï¼šç±»ä¼¼äºä¸€ä¸ªJDBCçš„Connectionå¯¹è±¡ã€‚æ˜¯ä¸€ä¸ªæ—¢å¯ä»¥å‘é€SQLå»æ‰§è¡Œå¹¶è¿”å›ç»“æœï¼Œä¹Ÿå¯ä»¥è·å–Mapperçš„æ¥å£ã€‚</p><p>SQL Mapperï¼šæ˜¯MyBatisæ–°è®¾è®¡çš„ç»„ä»¶ï¼Œæ˜¯ç”±ä¸€ä¸ªJavaæ¥å£å’ŒXMLæ–‡ä»¶ï¼ˆæˆ–æ³¨è§£ï¼‰æ„æˆçš„ï¼Œéœ€è¦ç»™å‡ºå¯¹åº”çš„SQLå’Œæ˜ å°„è§„åˆ™ã€‚è´Ÿè´£å‘é€SQLå»æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚é€šè¿‡namespace.idè°ƒç”¨Mapperä¸­å®šä¹‰çš„SQLã€‚</p><h3 id="3-MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š"><a href="#3-MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š" class="headerlink" title="3. MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š"></a>3. MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</h3><p>ï¼ˆ1ï¼‰è¯»å–MyBatisé…ç½®æ–‡ä»¶mybatis-config.xmlã€‚<br>ï¼ˆ2ï¼‰åŠ è½½æ˜ å°„æ–‡ä»¶Mapper.xmlã€‚<br>ï¼ˆ3ï¼‰æ„å»ºä¼šè¯å·¥å‚ã€‚<br>ï¼ˆ4ï¼‰åˆ›å»ºSqlSessionå¯¹è±¡ã€‚<br>ï¼ˆ5ï¼‰ä½¿ç”¨Executoræ¥å£æ¥æ“ä½œæ•°æ®åº“ã€‚<br>ï¼ˆ6ï¼‰ä½¿ç”¨MappedStatementç±»å‹çš„å‚æ•°å¯¹æ˜ å°„ä¿¡æ¯è¿›è¡Œå°è£…ã€‚<br>ï¼ˆ7ï¼‰è¾“å…¥å‚æ•°æ˜ å°„ã€‚<br>ï¼ˆ8ï¼‰è¾“å‡ºç»“æœæ˜ å°„ã€‚</p><h3 id="4-å…ƒç´ "><a href="#4-å…ƒç´ " class="headerlink" title="4. &lt;sql&gt;å…ƒç´ "></a>4. <code>&lt;sql&gt;</code>å…ƒç´ </h3><p><code>&lt;sql&gt;</code>å…ƒç´ çš„ä½œç”¨å°±æ˜¯å®šä¹‰å¯é‡ç”¨çš„SQLä»£ç ç‰‡æ®µã€‚ä½¿ç”¨æ—¶ï¼Œå…ˆé€šè¿‡<code>&lt;sql&gt;</code>å…ƒç´ å®šä¹‰é‡ç”¨çš„ä»£ç ç‰‡æ®µï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨<code>&lt;include&gt;</code>å…ƒç´ çš„refidå±æ€§å¼•ç”¨äº†è‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µã€‚</p><h3 id="5-MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š"><a href="#5-MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š" class="headerlink" title="5.MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š"></a>5.MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š</h3><p>SqlSessionFactoryå¯¹è±¡çš„å®ä¾‹å¯ä»¥é€šè¿‡SqlSessionFactoryBuilderå¯¹è±¡æ¥æ„å»ºï¼Œè€ŒSqlSessionFactoryBuilderåˆ™å¯ä»¥é€šè¿‡XMLé…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„Configurationå®ä¾‹æ„å»ºå‡ºSqlSessionFactoryçš„å®ä¾‹ï¼Œé€šè¿‡XMLé…ç½®æ–‡ä»¶æ„å»ºå‡ºçš„SqlSessionFactoryå®ä¾‹ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;é…ç½®æ–‡ä»¶ä½ç½®&quot;</span>);</span><br><span class="line"><span class="comment">// æ ¹æ®é…ç½®æ–‡ä»¶æ„å»ºSqlSessionFactory</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br></pre></td></tr></table></figure><p><strong>MyBatisä½¿ç”¨è¿‡ç¨‹ï¼š</strong><br>ä½¿ç”¨SqlSessionFactoryBuilderåˆ›å»ºSqlSessionFactoryå¯¹è±¡;</p><p>ç„¶åé€šè¿‡SqlSessionFactoryåˆ›å»ºSqlSessionå¯¹è±¡;</p><p>é€šè¿‡SqlSessionå¯¹è±¡å®ŒæˆåŸºæœ¬æ“ä½œï¼ˆæ‰§è¡ŒSQLï¼‰ã€‚</p><p>å…³é—­SqlSessionã€‚</p><h3 id="6-å…ƒç´ "><a href="#6-å…ƒç´ " class="headerlink" title="6. &lt;mapper&gt;å…ƒç´ "></a>6. <code>&lt;mapper&gt;</code>å…ƒç´ </h3><p>åœ¨æ˜ å°„æ–‡ä»¶ä¸­ï¼Œ<code>&lt;mapper&gt;</code>å…ƒç´ æ˜¯æ˜ å°„æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œå…¶ä»–å…ƒç´ éƒ½æ˜¯å®ƒçš„å­å…ƒç´ ã€‚è¿™äº›å­å…ƒç´ åŠå…¶ä½œç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š<br><code>&lt;select&gt;</code>ï¼šç”¨äºæ˜ å°„æŸ¥è¯¢è¯­å¥ï¼Œå¯è‡ªå®šä¹‰å‚æ•°ï¼Œè¿”å›ç»“æœé›†ç­‰ã€‚<br><code>&lt;insert&gt;</code>ï¼šç”¨äºæ˜ å°„æ’å…¥è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ’å…¥çš„æ¡æ•°ã€‚<br><code>&lt;update&gt;</code>ï¼šç”¨äºæ˜ å°„æ›´æ–°è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ›´æ–°çš„æ¡æ•°ã€‚<br><code>&lt;delete&gt;</code>ï¼šç”¨äºæ˜ å°„åˆ é™¤è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨åˆ é™¤çš„æ¡æ•°ã€‚<br><code>&lt;sql&gt;</code>ï¼šç”¨äºå®šä¹‰ä¸€éƒ¨åˆ†SQLï¼Œç„¶åå¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨æ­¤SQLã€‚<br><code>&lt;cache&gt;</code>ï¼šç”¨äºç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚<br><code>&lt;cache-ref&gt;</code>ï¼šç”¨äºå…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚<br><code>&lt;resultMap&gt;</code>ï¼šç”¨äºæè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚</p><p>å½“æ•°æ®è¡¨ä¸­çš„åˆ—å’Œéœ€è¦è¿”å›çš„å¯¹è±¡çš„å±æ€§ä¸å®Œå…¨ä¸€è‡´ï¼Œ MyBatisæ˜¯ä¸ä¼šè‡ªåŠ¨èµ‹å€¼çš„ã€‚æ­¤æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>&lt;resultMap&gt;</code>å…ƒç´ è¿›è¡Œå¤„ç†ã€‚<code>&lt;resultMap&gt;</code>å…ƒç´ çš„å­å…ƒç´ <code>&lt;id&gt;</code>ç”¨äºè¡¨ç¤ºå“ªä¸ªåˆ—æ˜¯ä¸»é”®ï¼Œè€Œ<code>&lt;result&gt;</code>å…ƒç´ ç”¨äºè¡¨ç¤ºPOJOå’Œæ•°æ®è¡¨ä¸­æ™®é€šåˆ—çš„æ˜ å°„å…³ç³»ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;custResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;custId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cust_id&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨"><a href="#7-mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨" class="headerlink" title="7. mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨"></a>7. mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨</h3><p>MyBaitsæ˜ å°„æ–‡ä»¶ä¸­ä½¿ç”¨<code>&lt;include&gt;</code>å…ƒç´ çš„ refid å±æ€§å¯ä»¥å¼•ç”¨è‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µï¼Œå…¶å±æ€§å€¼ä¸ºè‡ªå®šä¹‰ä»£ç ç‰‡æ®µçš„idã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;custColumns&quot;</span>&gt;</span> </span><br><span class="line">cust_id custId,name,age </span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;sqlCustList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">select</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;custColumns&quot;</span>/&gt;</span>   </span><br><span class="line">from customer c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="8-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ "><a href="#8-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ " class="headerlink" title="8. MyBatisæ˜ å°„æ–‡ä»¶ä¸­&lt;mapper&gt;å…ƒç´ "></a>8. MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>å…ƒç´ </h3><p>MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>å…ƒç´ æ˜¯é…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œå®ƒåŒ…å«ä¸€ä¸ªnamespaceå±æ€§ï¼Œè¯¥å±æ€§ä¸ºè¿™ä¸ª<code>&lt;mapper&gt;</code>æŒ‡å®šäº†å”¯ä¸€çš„å‘½åç©ºé—´ã€‚åœ¨Mybatisæ˜ å°„æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ“ä½œéƒ½æœ‰ä¸€ä¸ªidå±æ€§è¡¨ç¤ºæ“ä½œçš„å”¯ä¸€æ ‡è¯†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;customer&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;customerList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">         select * from customer</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ "><a href="#9-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ " class="headerlink" title="9. MyBatisæ˜ å°„æ–‡ä»¶ä¸­&lt;insert&gt;å…ƒç´ "></a>9. MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;insert&gt;</code>å…ƒç´ </h3><p>MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;insert&gt;</code>å…ƒç´ ç”¨äºæ˜ å°„æ’å…¥è¯­å¥ï¼Œåœ¨æ‰§è¡Œå®Œå…ƒç´ ä¸­å®šä¹‰çš„SQLè¯­å¥åï¼Œä¸<code>&lt;update&gt;</code>å’Œ<code>&lt;delete&gt;</code>å…ƒç´ åœ¨æ‰§è¡Œå®Œä¹‹åä¸€æ ·ï¼Œä¹Ÿä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºå½±å“è®°å½•æ¡æ•°çš„æ•´æ•°ã€‚<code>&lt;insert&gt;</code>å…ƒç´ çš„å±æ€§ä¸<code>&lt;select&gt;</code>å…ƒç´ çš„å±æ€§ä¸åŒï¼Œå¯ä»¥ä½¿ç”¨keyPropertyå±æ€§æŒ‡å®šå“ªä¸ªæ˜¯ä¸»é”®å­—æ®µï¼Œä½¿ç”¨useGeneratedKeyså±æ€§å®šä¹‰ä¸»é”®æ˜¯å¦ä½¿ç”¨æ•°æ®åº“å†…ç½®ç­–ç•¥ç”Ÿæˆï¼Œä»è€Œå®ç°å¯¹äºè¡¨ä¸­è‡ªå¢ç¼–å·ä¸»é”®åˆ—çš„ä¸»é”®å›å¡«å’Œè‡ªå®šä¹‰åŠŸèƒ½ã€‚</p><h3 id="10-æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š"><a href="#10-æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š" class="headerlink" title="10.æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š"></a>10.æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š</h3><p>é€šå¸¸ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªMapperæ¥å£ï¼Œæ˜ å°„æ–‡ä»¶ä¸­çš„namespaceä¸æ¥å£çš„å…¨é™å®šåä¸€è‡´ã€‚</p><p>æ˜ å°„æ–‡ä»¶ä¸­æ¯ä¸ªæ“ä½œidå¯¹åº”Mapperæ¥å£çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åä¸æ˜ å°„æ–‡ä»¶ä¸­æ“ä½œçš„idç›¸åŒï¼Œå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ä¸æ“ä½œä¸­çš„parameterTypeå’ŒresultTypeç›¸åŒ</p><p>SQLè°ƒç”¨çš„æ—¶å€™é€šè¿‡æ¥å£è°ƒç”¨ï¼Œè€Œä¸ç”¨å†æŒ‡å‡ºæ“ä½œçš„id</p><h3 id="11-MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹"><a href="#11-MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹" class="headerlink" title="11.MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹"></a>11.MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹</h3><p>mybatis-config.xmlä½œä¸ºMyBatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®äº†MyBatisçš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ã€‚<br>MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="comment">&lt;!-- é…ç½®--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">properties</span>/&gt;</span><span class="comment">&lt;!-- å±æ€§--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">settings</span>/&gt;</span><span class="comment">&lt;!--è®¾ç½®--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>/&gt;</span><span class="comment">&lt;!-- ç±»å‹å‘½å--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeHandlers</span>/&gt;</span> <span class="comment">&lt;!--ç±»å‹å¤„ç†å™¨--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">objectFactory</span>/&gt;</span>  &lt;!â€“ å¯¹è±¡å·¥å‚ --&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">plugings</span>/&gt;</span>  <span class="comment">&lt;!--æ’ä»¶ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span>&gt;</span> <span class="comment">&lt;!--é…ç½®ç¯å¢ƒ--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span>&gt;</span> <span class="comment">&lt;!--ç¯å¢ƒå˜é‡--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span>/&gt;</span><span class="comment">&lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span>/&gt;</span> <span class="comment">&lt;!--æ•°æ®æº--&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">databaseIdProvider</span>/&gt;</span><span class="comment">&lt;!--æ•°æ®åº“å‚å•†æ ‡è¯†--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>/&gt;</span> <span class="comment">&lt;!--æ˜ å°„å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›å±‚æ¬¡æ˜¯ä¸èƒ½å¤Ÿé¢ å€’é¡ºåºçš„ï¼Œå¦‚æœé¢ å€’é¡ºåºï¼ŒMyBatisåœ¨è§£æXMLæ–‡ä»¶çš„æ—¶å€™å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Customer&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Customer&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Course&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Course&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.QuickManual&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;QuickManual&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!-- ?useUnicode=true&amp;amp;characterEncoding=utf8ä¸ºäº†æ”¯æŒä¸­æ–‡æ•°æ®çš„å†™å…¥ --&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CustomerMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CourseMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/QuickManualMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€MyBatis&quot;&gt;&lt;a href=&quot;#ä¸€ã€MyBatis&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€MyBatis&quot;&gt;&lt;/a&gt;ä¸€ã€MyBatis&lt;/h2&gt;&lt;h3 id=&quot;1-MyBatisï¼š&quot;&gt;&lt;a href=&quot;#1-MyBatisï¼š&quot; cla</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Mybatis" scheme="https://dont-sleep-so-late.github.io/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/SpringMVC/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/SpringMVC/</id>
    <published>2023-11-13T15:00:34.000Z</published>
    <updated>2023-11-14T13:04:01.848Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Springæ¡†æ¶"><a href="#ä¸€ã€Springæ¡†æ¶" class="headerlink" title="ä¸€ã€Springæ¡†æ¶"></a>ä¸€ã€Springæ¡†æ¶</h2><h3 id="1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š"><a href="#1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š" class="headerlink" title="1.å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š"></a>1.å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š</h3><p>Struts1<br>Web work<br>Struts2<br>Spring MVC</p><p>Spring MVCæ˜¯Springæä¾›çš„ä¸€ä¸ªå®ç°äº†Web MVCè®¾è®¡æ¨¡å¼çš„è½»é‡çº§Webæ¡†æ¶ã€‚é‡‡ç”¨å·¥å‚æ¨¡å¼ã€‚å®ƒä¸Struts2æ¡†æ¶ä¸€æ ·ï¼Œéƒ½å±äºMVCæ¡†æ¶ï¼Œä½†å…¶ä½¿ç”¨å’Œæ€§èƒ½ç­‰æ–¹é¢æ¯”Struts2æ›´åŠ ä¼˜å¼‚ã€‚SpringMVCé¡¹ç›®ä¸­å¿…é¡»æ·»åŠ çš„JARåŒ…åŒ…æ‹¬ï¼š4ä¸ªæ ¸å¿ƒJARåŒ…ã€commons-loggingçš„JARä»¥åŠä¸¤ä¸ªwebç›¸å…³çš„JARï¼ˆspring-webå’Œspring-webmvcçš„JARåŒ…ï¼‰ã€‚</p><h3 id="2-Spring-MVCçš„ç‰¹ç‚¹ã€‚"><a href="#2-Spring-MVCçš„ç‰¹ç‚¹ã€‚" class="headerlink" title="2.Spring MVCçš„ç‰¹ç‚¹ã€‚"></a>2.Spring MVCçš„ç‰¹ç‚¹ã€‚</h3><p>ï¼ˆ1ï¼‰ æ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨Springæ‰€æä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚<br>ï¼ˆ2ï¼‰ çµæ´»æ€§å¼ºï¼Œæ˜“äºä¸å…¶ä»–æ¡†æ¶é›†æˆã€‚<br>ï¼ˆ3ï¼‰ æä¾›äº†ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼Œä½¿å¼€å‘äººå‘˜æ— éœ€é¢å¤–å¼€å‘æ§åˆ¶å™¨å¯¹è±¡ã€‚<br>ï¼ˆ4ï¼‰ å¯è‡ªåŠ¨ç»‘å®šç”¨æˆ·è¾“å…¥ï¼Œå¹¶èƒ½æ­£ç¡®çš„è½¬æ¢æ•°æ®ç±»å‹ã€‚<br>ï¼ˆ5ï¼‰ å†…ç½®äº†å¸¸è§çš„æ ¡éªŒå™¨ï¼Œå¯ä»¥æ ¡éªŒç”¨æˆ·è¾“å…¥ã€‚å¦‚æœæ ¡éªŒä¸èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆå°±ä¼šé‡å®šå‘åˆ°è¾“å…¥è¡¨å•ã€‚<br>ï¼ˆ6ï¼‰ æ”¯æŒå›½é™…åŒ–ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ·åŒºåŸŸæ˜¾ç¤ºå¤šå›½è¯­è¨€ã€‚</p><h3 id="3-Spring-MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š"><a href="#3-Spring-MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š" class="headerlink" title="3.Spring MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š"></a>3.Spring MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</h3><p>ï¼ˆ1ï¼‰æ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨Springæ‰€æä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚<br>ï¼ˆ2ï¼‰çµæ´»æ€§å¼ºï¼Œæ˜“äºä¸å…¶ä»–æ¡†æ¶é›†æˆã€‚<br>ï¼ˆ3ï¼‰æä¾›äº†ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼Œä½¿å¼€å‘äººå‘˜æ— éœ€é¢å¤–å¼€å‘æ§åˆ¶å™¨å¯¹è±¡ã€‚<br>ï¼ˆ4ï¼‰å¯è‡ªåŠ¨ç»‘å®šç”¨æˆ·è¾“å…¥ï¼Œå¹¶èƒ½æ­£ç¡®çš„è½¬æ¢æ•°æ®ç±»å‹ã€‚<br>ï¼ˆ5ï¼‰å†…ç½®äº†å¸¸è§çš„æ ¡éªŒå™¨ï¼Œå¯ä»¥æ ¡éªŒç”¨æˆ·è¾“å…¥ã€‚å¦‚æœæ ¡éªŒä¸èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆå°±ä¼šé‡å®šå‘åˆ°è¾“å…¥è¡¨å•ã€‚<br>ï¼ˆ6ï¼‰æ”¯æŒå›½é™…åŒ–ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ·åŒºåŸŸæ˜¾ç¤ºå¤šå›½è¯­è¨€ã€‚<br>ï¼ˆ7ï¼‰æ”¯æŒå¤šç§è§†å›¾æŠ€æœ¯ã€‚å®ƒæ”¯æŒJSPã€Velocityå’ŒFreeMarkerç­‰è§†å›¾æŠ€æœ¯ã€‚<br>ï¼ˆ8ï¼‰ä½¿ç”¨åŸºäºXMLçš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘åï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åºã€‚</p><h3 id="4-Spring-MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š"><a href="#4-Spring-MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š" class="headerlink" title="4.Spring MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š"></a>4.Spring MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</h3><p>ï¼ˆ1ï¼‰ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚ä¼šè¢«Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletæ‰€æ‹¦æˆªã€‚<br>ï¼ˆ2ï¼‰DispatcherServletæ‹¦æˆªåˆ°è¯·æ±‚åï¼Œä¼šè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚<br>ï¼ˆ3ï¼‰å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚URLæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨ï¼ˆå¦‚æœæœ‰åˆ™ç”Ÿæˆï¼‰ä¸€å¹¶è¿”å›ç»™DispatcherServlet ã€‚<br>ï¼ˆ4ï¼‰DispatcherServletä¼šé€šè¿‡è¿”å›ä¿¡æ¯é€‰æ‹©åˆé€‚çš„HandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰ã€‚<br>ï¼ˆ5ï¼‰HandlerAdapterä¼šè°ƒç”¨å¹¶æ‰§è¡ŒHandlerï¼ˆå¤„ç†å™¨ï¼‰ï¼Œè¿™é‡Œçš„å¤„ç†å™¨æŒ‡çš„å°±æ˜¯ç¨‹åºä¸­ç¼–å†™çš„Controllerç±»ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºåç«¯æ§åˆ¶å™¨ã€‚<br>ï¼ˆ6ï¼‰Controlleræ‰§è¡Œå®Œæˆåï¼Œä¼šè¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­ä¼šåŒ…å«è§†å›¾åæˆ–åŒ…å«æ¨¡å‹å’Œè§†å›¾åã€‚<br>ï¼ˆ7ï¼‰HandlerAdapterå°†ModelAndViewå¯¹è±¡è¿”å›ç»™DispatcherServlet ã€‚<br>ï¼ˆ8ï¼‰DispatcherServletä¼šæ ¹æ®ModelAndViewå¯¹è±¡é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ViewResloverï¼ˆè§†å›¾è§£æå™¨ï¼‰ã€‚<br>ï¼ˆ9ï¼‰ViewResloverè§£æåï¼Œä¼šå‘DispatcherServletä¸­è¿”å›å…·ä½“çš„Viewï¼ˆè§†å›¾ï¼‰ã€‚<br>ï¼ˆ10ï¼‰DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚<br>ï¼ˆ11ï¼‰è§†å›¾æ¸²æŸ“ç»“æœä¼šè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨æ˜¾ç¤ºã€‚</p><h3 id="5-åœ¨web-xmlä¸­ï¼Œé…ç½®Spring-MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet"><a href="#5-åœ¨web-xmlä¸­ï¼Œé…ç½®Spring-MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet" class="headerlink" title="5.åœ¨web.xmlä¸­ï¼Œé…ç½®Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet"></a>5.åœ¨web.xmlä¸­ï¼Œé…ç½®Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231113230308.png"></p><p>å¦‚æœæ²¡æœ‰é€šè¿‡<init-param>å…ƒç´ é…ç½®ï¼Œåº”ç”¨ç¨‹åºä¼šé»˜è®¤åˆ°WEB-INFç›®å½•ä¸‹å¯»æ‰¾å¦‚ä¸‹æ–¹å¼å‘½åçš„é…ç½®æ–‡ä»¶ï¼šservletName-servlet.xmlã€‚servletNameæŒ‡çš„æ˜¯éƒ¨ç½²åœ¨web.xmlæ–‡ä»¶ä¸­çš„DispatcherServletçš„åç§°ï¼Œè€Œ-servlet.xmlæ˜¯é…ç½®æ–‡ä»¶åçš„å›ºå®šå†™æ³•ï¼Œå¦‚åœ¨WEB-INFä¸‹æŸ¥æ‰¾springmvc-servlet.xmlæ–‡ä»¶ã€‚</p><h3 id="6-æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹"><a href="#6-æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹" class="headerlink" title="6.æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹"></a>6.æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹</h3><p>ModelAndViewç±»å‹ä¸­å¯ä»¥æ·»åŠ Modelæ•°æ®ï¼Œå¹¶æŒ‡å®šè§†å›¾ï¼›Stringç±»å‹çš„è¿”å›å€¼å¯ä»¥è·³è½¬è§†å›¾ï¼Œä½†ä¸èƒ½æºå¸¦æ•°æ®ï¼›è€Œvoidç±»å‹ä¸»è¦åœ¨å¼‚æ­¥è¯·æ±‚æ—¶ä½¿ç”¨ï¼Œå®ƒåªè¿”å›æ•°æ®ï¼Œè€Œä¸ä¼šè·³è½¬è§†å›¾ã€‚</p><h3 id="7-Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š"><a href="#7-Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š" class="headerlink" title="7.@Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š"></a>7.@Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š</h3><p>ï¼ˆ1ï¼‰åœ¨ç›¸åº”çš„ç±»ä¸Šæ ‡æ³¨@Controlleræ³¨è§£ã€‚<br>ï¼ˆ2ï¼‰åœ¨Spring MVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„æ‰«æé…ç½®ä¿¡æ¯ã€‚é¦–å…ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥contextåç§°ç©ºé—´çš„é…ç½®ï¼Œç„¶åä½¿ç”¨<code>&lt;context:component-scan&gt;</code>å…ƒç´ æŒ‡å®šéœ€è¦æ‰«æçš„ç±»åŒ…ã€‚</p><h3 id="8-SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š"><a href="#8-SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š" class="headerlink" title="8.SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š"></a>8.SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š</h3><p>åŸºäºSpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸»è¦æœ‰ï¼šHttpServletRequestã€HttpServletResponseã€HttpSessionã€Modelã€HttpMethodç­‰ï¼›<br>åŸºäºSpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„è¿”å›ç±»å‹ä¸»è¦æœ‰ï¼šModelAndViewã€Mapã€Stringã€voidã€HttpEntity&lt;?&gt;ã€Viewç­‰ã€‚</p><h3 id="9-SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š"><a href="#9-SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š" class="headerlink" title="9.SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š"></a>9.SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š</h3><p>åœ¨actionçš„æ–¹æ³•ä¸­å†™ä¸è¯·æ±‚å‚æ•°åŒåçš„å˜é‡</p><p>åœ¨actionçš„æ–¹æ³•çš„å‚æ•°ä¸­ä½¿ç”¨HttpServletRequestã€HttpServletResponseã€HttpSessionã€Modelã€HttpMethodç­‰å¯¹è±¡</p><p>åœ¨æ–¹æ³•çš„å‚æ•°ä¸­ä½¿ç”¨@RequestParamæ³¨è§£</p><p>ç•Œé¢ä¸Šçš„è¾“å…¥ä¿¡æ¯æ˜¯æŸä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„ä¿¡æ¯ï¼Œåœ¨æ¥æ”¶çš„æ—¶å€™ç›´æ¥å°è£…ä¸ºè¯¥è‡ªå®šä¹‰å¯¹è±¡</p><p>æŠŠè¯·æ±‚å‚æ•°æ”¾åˆ°è¯·æ±‚è·¯å¾„ä¸­ï¼Œå³é‡‡ç”¨RESTfulé£æ ¼ã€‚</p><h3 id="10-SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š"><a href="#10-SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š" class="headerlink" title="10.SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š"></a>10.SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š</h3><p>è¿”å›ModelAndViewå¯¹è±¡ï¼Œå¦‚new ModelAndView(â€œstudentListâ€,model)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè§†å›¾ï¼Œç¬¬äºŒå‚æ•°è¡¨ç¤ºè§†å›¾ä¸­éœ€è¦çš„æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentUpdateView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">updateView</span><span class="params">(String id)</span>&#123;</span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.findById(id);</span><br><span class="line">Map&lt;String,Object&gt; model = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">model.put(<span class="string">&quot;student&quot;</span>,student);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;studentUpdate&quot;</span>,model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å±‚çš„æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºStringï¼Œåœ¨æ–¹æ³•ä¸­è¿”å›è¡¨ç¤ºè¾“å‡ºç•Œé¢çš„å­—ç¬¦ä¸²ï¼Œä¸ModelAndViewä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;studentAddView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addView</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentAdd&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ä½¿ç”¨Stringè¡¨ç¤ºè¦è¿”å›çš„è§†å›¾ï¼Œä½¿ç”¨Modelè¡¨ç¤ºè¦è¿”å›çš„æ•°æ®ã€‚åœ¨è¯·æ±‚æ–¹æ³•çš„å‚æ•°ä¸­å®šä¹‰Modelå¯¹è±¡ï¼Œåœ¨è¯·æ±‚æ–¹æ³•ä½“ä¸­æŠŠæ•°æ®å­˜å‚¨åˆ°Modelå¯¹è±¡ä¸­å“åº”ç»™å‰ç«¯é¡µé¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentList.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">studentList</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">List&lt;Student&gt; students = studentService.getStudents();</span><br><span class="line">model.addAttribute(<span class="string">&quot;students&quot;</span>,students);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentList&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹è¿”å›JSONæ•°æ®ã€‚</p><h3 id="11-RequestParamæ³¨è§£"><a href="#11-RequestParamæ³¨è§£" class="headerlink" title="11.@RequestParamæ³¨è§£"></a>11.@RequestParamæ³¨è§£</h3><p>@RequestParamæ³¨è§£ä¸»è¦ç”¨äºå¯¹è¯·æ±‚ä¸­çš„å‚æ•°è¿›è¡Œå®šä¹‰ï¼Œå¤šç”¨äºåœ¨è¯·æ±‚å‚æ•°åä¸æ–¹æ³•å½¢å‚åä¸ä¸€è‡´æ—¶çš„å‚æ•°é—´æ¥ç»‘å®šã€‚åœ¨ä½¿ç”¨æ—¶å¯ä»¥æŒ‡å®šä»–çš„4ä¸ªå±æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰valueï¼šnameå±æ€§çš„åˆ«åï¼Œè¿™é‡ŒæŒ‡å‚æ•°çš„åå­—ï¼Œå³å…¥å‚çš„è¯·æ±‚å‚æ•°åå­—ï¼Œå¦‚æœåªä½¿ç”¨vauleå±æ€§ï¼Œåˆ™å¯ä»¥çœç•¥valueå±æ€§åã€‚<br>ï¼ˆ2ï¼‰nameï¼šç”¨äºæŒ‡å®šè¯·æ±‚å¤´ç»‘å®šçš„åç§°ã€‚<br>ï¼ˆ3ï¼‰required ï¼šç”¨äºæŒ‡å®šå‚æ•°æ˜¯å¦å¿…é¡»ï¼Œé»˜è®¤æ˜¯trueï¼Œè¡¨ç¤ºè¯·æ±‚ä¸­ä¸€å®šè¦æœ‰ç›¸åº”çš„å‚æ•°ã€‚<br>ï¼ˆ4ï¼‰defaultValueï¼šé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰åŒåå‚æ•°æ—¶çš„é»˜è®¤å€¼ã€‚</p><h3 id="12-åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶"><a href="#12-åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶" class="headerlink" title="12.åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶"></a>12.åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶</h3><p>åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶ï¼Œå‰ç«¯è¯·æ±‚çš„å‚æ•°åç¼–å†™å¿…é¡»ç¬¦åˆä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š<br>ï¼ˆ1ï¼‰å¦‚æœæŸ¥è¯¢æ¡ä»¶å‚æ•°æ˜¯åŒ…è£…ç±»çš„ç›´æ¥åŸºæœ¬å±æ€§ï¼Œåˆ™å‚æ•°åç›´æ¥ç”¨å¯¹åº”çš„å±æ€§åï¼›<br>ï¼ˆ2ï¼‰å¦‚æœæŸ¥è¯¢æ¡ä»¶å‚æ•°æ˜¯åŒ…è£…ç±»ä¸­POJOçš„å­å±æ€§ï¼Œåˆ™å‚æ•°åå¿…é¡»ä¸ºâ€œå¯¹è±¡.å±æ€§â€ï¼Œå…¶ä¸­â€œå¯¹è±¡â€è¦å’ŒåŒ…è£…POJOä¸­çš„å¯¹è±¡å±æ€§åç§°ä¸€è‡´ï¼Œâ€œå±æ€§â€è¦å’ŒåŒ…è£…POJOä¸­çš„å¯¹è±¡å­å±æ€§ä¸€è‡´ã€‚</p><h3 id="13-JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£-RequestBodyå’Œ-ResponseBody"><a href="#13-JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£-RequestBodyå’Œ-ResponseBody" class="headerlink" title="13.JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBody"></a>13.JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBody</h3><p>JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨äº†ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBodyã€‚å…¶ä¸­@RequestBodyç”¨äºå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ç»‘å®šåˆ°æ–¹æ³•çš„å½¢å‚ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶æ ‡å‡†åœ¨åœ¨æ–¹æ³•çš„å½¢å‚ä¸Šã€‚@ResponseBodyç”¨äºç›´æ¥è¿”å›returnå¯¹è±¡ã€‚Jacksonç”¨åˆ°çš„å¼€æºåŒ…çš„æœ‰ jackson-annoations-2.8.8.jarã€ jackson-core-2.8.8.jarã€jackson-databind-2.8.8.jarã€‚</p><h3 id="14-JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„"><a href="#14-JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„" class="headerlink" title="14.JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„"></a>14.JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„</h3><p>JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„ä»¥ â€œ[â€ å¼€å§‹ï¼Œä»¥ â€œ]â€ ç»“æŸï¼Œå¯¹è±¡ç»“æ„ä»¥ â€œ{â€ å¼€å§‹ï¼Œä»¥ â€œ}â€ç»“æŸï¼ŒJSONå¯¹è±¡æ•°æ®ç»“æ„çš„ä¸­é—´éƒ¨åˆ†ç”±é”®å€¼å¯¹ï¼ˆkeyï¼švalueï¼‰ä»¥è‹±æ–‡ â€œ,â€ åˆ†éš”çš„å€¼çš„åˆ—è¡¨ç»„æˆã€‚å…³é”®å­—ï¼ˆkeyï¼‰å¿…é¡»ä¸ºStringç±»å‹ï¼Œå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯Stringã€Numberã€Objectã€Arrayç­‰æ•°æ®ç±»å‹ã€‚</p><h3 id="15-RESTful"><a href="#15-RESTful" class="headerlink" title="15.RESTful"></a>15.RESTful</h3><p>RESTfulä¹Ÿç§°ä¹‹ä¸ºRESTï¼Œæ˜¯è‹±æ–‡â€œRepresentational State Transferâ€çš„ç®€ç§°ã€‚RESTfulé£æ ¼åœ¨HTTPè¯·æ±‚ä¸­ï¼Œä½¿ç”¨putã€deleteã€postå’Œgetæ–¹å¼åˆ†åˆ«å¯¹åº”æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢çš„æ“ä½œã€‚</p><h3 id="16-PathVariable-â€œidâ€-æ³¨è§£"><a href="#16-PathVariable-â€œidâ€-æ³¨è§£" class="headerlink" title="16.@PathVariable(â€œidâ€)æ³¨è§£"></a>16.@PathVariable(â€œidâ€)æ³¨è§£</h3><p>@PathVariable(â€œidâ€)æ³¨è§£ç”¨äºæ¥æ”¶å¹¶ç»‘å®šè¯·æ±‚å‚æ•°ï¼Œå®ƒå¯ä»¥å°†URLè¯·æ±‚ä¸­çš„å˜é‡æ˜ å°„åˆ°è¯·æ±‚æ–¹æ³•çš„å½¢å‚ä¸Šã€‚<br>å¦‚æœè¯·æ±‚è·¯å¾„ä¸­çš„å‚æ•°åæ–¹æ³•å½¢å‚åç§°ä¸€æ ·ï¼Œåˆ™@PathVariableåé¢çš„ â€œ (â€œidâ€) â€ å¯ä»¥çœç•¥ã€‚</p><h3 id="17-Spring-MVCçš„æ–‡ä»¶ä¸Šä¼ "><a href="#17-Spring-MVCçš„æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="17.Spring MVCçš„æ–‡ä»¶ä¸Šä¼ "></a>17.Spring MVCçš„æ–‡ä»¶ä¸Šä¼ </h3><p>Spring MVCçš„æ–‡ä»¶ä¸Šä¼ æ˜¯é€šè¿‡MultipartResolverå¯¹è±¡å®ç°çš„ã€‚</p><p>æ–‡ä»¶ä¸Šä¼ è¡¨å•éœ€è¦æ»¡è¶³çš„3ä¸ªæ¡ä»¶å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰ formè¡¨å•çš„methodå±æ€§è®¾ç½®ä¸ºpostï¼›<br>ï¼ˆ2ï¼‰ formè¡¨å•çš„enctypeå±æ€§è®¾ç½®ä¸ºmultipart&#x2F;form-dataï¼›<br>ï¼ˆ3ï¼‰ æä¾›çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥æ¡†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;a href=&quot;#ä¸€ã€Springæ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;/a&gt;ä¸€ã€Springæ¡†æ¶&lt;/h2&gt;&lt;h3 id=&quot;1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š&quot;&gt;&lt;a href=&quot;#1-å…¸å‹çš„We</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Springç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/Spring%E7%AC%94%E8%AE%B0/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/Spring%E7%AC%94%E8%AE%B0/</id>
    <published>2023-11-13T14:20:34.000Z</published>
    <updated>2023-11-18T12:29:25.031Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Springæ¡†æ¶"><a href="#ä¸€ã€Springæ¡†æ¶" class="headerlink" title="ä¸€ã€Springæ¡†æ¶"></a>ä¸€ã€Springæ¡†æ¶</h2><h3 id="1-ä¸‰å±‚ä½“ç³»æ¶æ„"><a href="#1-ä¸‰å±‚ä½“ç³»æ¶æ„" class="headerlink" title="1.ä¸‰å±‚ä½“ç³»æ¶æ„"></a>1.ä¸‰å±‚ä½“ç³»æ¶æ„</h3><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸æœåŠ¡å™¨ç«¯åœ¨é‡‡ç”¨åˆ†å±‚æ–¹å¼è¿›è¡Œæ¶æ„ã€‚<br>ä¸‰å±‚ä½“ç³»æ¶æ„ï¼Œåˆ†åˆ«ä¸ºï¼š<br>è¡¨ç¤ºå±‚(Webå±‚ï¼ŒåŒ…æ‹¬æ§åˆ¶å±‚ï¼Œä½¿ç”¨SpringMVCæ¡†æ¶)ã€<br>ä¸šåŠ¡é€»è¾‘å±‚(Serviceï¼Œä½¿ç”¨Springæ¡†æ¶)ã€<br>æŒä¹…å±‚(æ•°æ®è®¿é—®å±‚ï¼ŒDaoï¼Œä½¿ç”¨Mybatisæ¡†æ¶)ã€‚<br>Springå¯¹æ¯ä¸€å±‚éƒ½æä¾›äº†æŠ€æœ¯æ”¯æŒã€‚</p><h3 id="2-Springçš„æ ¸å¿ƒ"><a href="#2-Springçš„æ ¸å¿ƒ" class="headerlink" title="2.Springçš„æ ¸å¿ƒ"></a>2.Springçš„æ ¸å¿ƒ</h3><p>Springçš„æ ¸å¿ƒæ˜¯æ§åˆ¶åè½¬ï¼ˆIoCï¼š Inverse of Control ï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼š Aspect Oriented Programming ï¼‰ã€‚<br>åœ¨ä½¿ç”¨Springæ¡†æ¶ä¹‹åï¼Œå¯¹è±¡çš„å®ä¾‹ä¸å†ç”±è°ƒç”¨è€…æ¥åˆ›å»ºï¼Œè€Œæ˜¯ç”±Springå®¹å™¨æ¥åˆ›å»ºï¼ŒSpringå®¹å™¨ä¼šè´Ÿè´£æ§åˆ¶ç¨‹åºä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨è€…çš„ç¨‹åºä»£ç ç›´æ¥æ§åˆ¶ã€‚</p><p>IoCçš„å…¨ç§°æ˜¯Inversion of Controlï¼Œä¸­æ–‡åç§°ä¸ºæ§åˆ¶åè½¬ã€‚æ§åˆ¶åè½¬å°±æ˜¯æŒ‡åœ¨ä½¿ç”¨Springæ¡†æ¶ä¹‹åï¼Œå¯¹è±¡çš„å®ä¾‹ä¸å†ç”±è°ƒç”¨è€…æ¥åˆ›å»ºï¼Œè€Œæ˜¯ç”±Springå®¹å™¨æ¥åˆ›å»ºï¼ŒSpringå®¹å™¨ä¼šè´Ÿè´£æ§åˆ¶ç¨‹åºä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨è€…çš„ç¨‹åºä»£ç ç›´æ¥æ§åˆ¶ã€‚è¿™æ ·ï¼Œæ§åˆ¶æƒç”±åº”ç”¨ä»£ç è½¬ç§»åˆ°äº†Springå®¹å™¨ï¼Œæ§åˆ¶æƒå‘ç”Ÿäº†åè½¬ã€‚</p><p>DIçš„å…¨ç§°æ˜¯Dependency Injectionï¼Œä¸­æ–‡ç§°ä¹‹ä¸ºä¾èµ–æ³¨å…¥ã€‚å®ƒä¸æ§åˆ¶åè½¬ï¼ˆIoCï¼‰çš„å«ä¹‰ç›¸åŒï¼Œåªä¸è¿‡è¿™ä¸¤ä¸ªç§°å‘¼æ˜¯ä»ä¸¤ä¸ªè§’åº¦æè¿°çš„åŒä¸€ä¸ªæ¦‚å¿µã€‚ä»Springå®¹å™¨çš„è§’åº¦æ¥çœ‹ï¼ŒSpringå®¹å™¨è´Ÿè´£å°†è¢«ä¾èµ–å¯¹è±¡èµ‹å€¼ç»™è°ƒç”¨è€…çš„æˆå‘˜å˜é‡ï¼Œè¿™ç›¸å½“äºä¸ºè°ƒç”¨è€…æ³¨å…¥äº†å®ƒä¾èµ–çš„å®ä¾‹ï¼Œè¿™å°±æ˜¯Springçš„ä¾èµ–æ³¨å…¥ã€‚</p><h3 id="3-Spring-çš„Beanä¸­ä¸»è¦çš„è£…é…æ–¹å¼"><a href="#3-Spring-çš„Beanä¸­ä¸»è¦çš„è£…é…æ–¹å¼" class="headerlink" title="3.Spring çš„Beanä¸­ä¸»è¦çš„è£…é…æ–¹å¼"></a>3.Spring çš„Beanä¸­ä¸»è¦çš„è£…é…æ–¹å¼</h3><p>Spring çš„Beanä¸­ä¸»è¦åŒ…å«ä¸‰ç§è£…é…æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºåŸºäºXMLçš„è£…é…ï¼ŒåŸºäºAnnotationçš„è£…é…å’Œè‡ªåŠ¨è£…é…ï¼Œè¿™ä¸‰ç§è£…é…æ–¹å¼çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><h4 id="ï¼ˆ1ï¼‰åŸºäºXMLçš„è£…é…ï¼š"><a href="#ï¼ˆ1ï¼‰åŸºäºXMLçš„è£…é…ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰åŸºäºXMLçš„è£…é…ï¼š"></a>ï¼ˆ1ï¼‰åŸºäºXMLçš„è£…é…ï¼š</h4><p>Springæä¾›äº†2ç§åŸºäºXMLçš„è£…é…æ–¹å¼ï¼šè®¾å€¼æ³¨å…¥ï¼ˆSetter Injectionï¼‰å’Œæ„é€ æ³¨å…¥ï¼ˆConstructor Injectionï¼‰ã€‚<br>ä¸€ç§æ˜¯å±æ€§setteræ–¹æ³•æ³¨å…¥ï¼ˆæˆ–è®¾å€¼æ³¨å…¥ï¼‰ï¼Œå¦ä¸€ç§æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ã€‚å±æ€§setteræ–¹æ³•æ³¨å…¥æ˜¯æŒ‡IoCå®¹å™¨ä½¿ç”¨setteræ–¹æ³•æ¥æ³¨å…¥è¢«ä¾èµ–çš„å®ä¾‹ã€‚é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Beanåï¼Œè°ƒç”¨è¯¥Beançš„setteræ–¹æ³•ï¼Œå³å¯å®ç°åŸºäºsetteræ–¹æ³•çš„ä¾èµ–æ³¨å…¥ã€‚å±æ€§setteræ–¹æ³•æ³¨å…¥çš„å¿…å¤‡æ¡ä»¶å¦‚ä¸‹ï¼š</p><p>Beanç±»å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ„é€ æ–¹æ³•</p><p>Beanç±»å¿…é¡»ä¸ºå±æ€§æä¾›setteræ–¹æ³•</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>&lt;property&gt;</code>å…ƒç´ æ¥ä¸ºæ¯ä¸ªå±æ€§æ³¨å…¥å€¼</p><p>è®¾ç½®æ³¨å…¥ä¸­çš„Beanç±»å¿…é¡»æä¾›ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ï¼ŒåŒæ—¶å¿…é¡»ä¸ºéœ€è¦æ³¨å…¥çš„å±æ€§æä¾›å¯¹åº”çš„setteræ–¹æ³•ã€‚ä½¿ç”¨è®¾å€¼æ³¨å…¥æ—¶ï¼Œåœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨<code>&lt;bean&gt;</code>å…ƒç´ çš„å­å…ƒç´ <code>&lt;property&gt;</code>æ¥ä¸ºæ¯ä¸ªå±æ€§æ³¨å…¥å€¼ã€‚ä½¿ç”¨æ„é€ æ³¨å…¥æ—¶ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œéœ€è¦ä½¿ç”¨<code>&lt;bean&gt;</code>å…ƒç´ çš„å­å…ƒç´ <code>&lt;constructor-arg&gt;</code>æ¥å®šä¹‰æ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å…¶valueå±æ€§ï¼ˆæˆ–å­å…ƒç´ ï¼‰æ¥è®¾ç½®è¯¥å‚æ•°çš„å€¼ã€‚<br>æ„é€ æ–¹æ³•æ³¨å…¥æ˜¯æŒ‡IoCå®¹å™¨ä½¿ç”¨æ„é€ æ–¹æ³•æ¥æ³¨å…¥è¢«ä¾èµ–çš„å®ä¾‹ã€‚åŸºäºæ„é€ æ–¹æ³•çš„ä¾èµ–æ³¨å…¥é€šè¿‡è°ƒç”¨å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•æ¥å®ç°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ç€ä¸€ä¸ªä¾èµ–ã€‚è¦æ±‚å¿…é¡»æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p><p>Beanç±»å¿…é¡»æä¾›æœ‰å‚æ„é€ æ–¹æ³•</p><p>é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>&lt;constructor-arg&gt;</code>å…ƒç´ æ¥ä¸ºå‚æ•°æ³¨å…¥å€¼</p><h4 id="ï¼ˆ2ï¼‰åŸºäºAnnotationçš„è£…é…ï¼š"><a href="#ï¼ˆ2ï¼‰åŸºäºAnnotationçš„è£…é…ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰åŸºäºAnnotationçš„è£…é…ï¼š"></a>ï¼ˆ2ï¼‰åŸºäºAnnotationçš„è£…é…ï¼š</h4><p>ä½¿ç”¨åŸºäºAnnotationçš„è£…é…æ—¶ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨@Repositoryã€@Serviceä¸@Controlleråˆ†åˆ«å¯¹å®ç°ç±»è¿›è¡Œæ ‡æ³¨ï¼Œç„¶åç”¨@Autowiredæˆ–@Resourceæ³¨è§£å¯¹æ³¨å…¥çš„Beançš„å±æ€§è¿›è¡Œæ ‡æ³¨ï¼Œæœ€ååœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;context:annotation-config /&gt;</code>æ¥å¼€å¯æ³¨è§£å¤„ç†å™¨ï¼Œæˆ–ä½¿ç”¨<code>&lt;context:component-scan base-package=&quot;Beanæ‰€åœ¨çš„åŒ…è·¯å¾„&quot;/&gt;</code>çš„é…ç½®æ–¹å¼å³å¯å®ç°Annotationçš„è£…é…ã€‚</p><p>@Controlleré€šå¸¸ä½œç”¨åœ¨æ§åˆ¶å±‚ï¼Œç”¨äºå°†æ§åˆ¶å±‚çš„ç±»æ ‡è¯†ä¸ºSpringä¸­çš„Beanã€‚</p><p>@Serviceé€šå¸¸ä½œç”¨åœ¨ä¸šåŠ¡å±‚ï¼Œç”¨äºå°†ä¸šåŠ¡å±‚çš„ç±»æ ‡è¯†ä¸ºSpringä¸­çš„Beanã€‚</p><p>@Repositoryé€šå¸¸ä½œç”¨åœ¨æ•°æ®æŒä¹…å±‚ï¼ˆæˆ–æ•°æ®è®¿é—®å±‚ï¼ŒDAOå±‚ï¼‰ï¼Œç”¨äºå°†æ•°æ®æŒä¹…å±‚çš„ç±»æ ‡è¯†ä¸ºSpringä¸­çš„Beanã€‚</p><p>@Autowiredæˆ–@Resourceæ³¨è§£å¯¹æ³¨å…¥çš„Beançš„å±æ€§è¿›è¡Œæ ‡æ³¨ï¼Œç”¨äºå°†å®ä¾‹åŒ–åå¯¹è±¡æ³¨å…¥åˆ°Beançš„å±æ€§ä¸­ï¼Œå®ç°ä¾èµ–æ³¨å…¥ã€‚</p><h4 id="ï¼ˆ3ï¼‰è‡ªåŠ¨è£…é…ï¼š"><a href="#ï¼ˆ3ï¼‰è‡ªåŠ¨è£…é…ï¼š" class="headerlink" title="ï¼ˆ3ï¼‰è‡ªåŠ¨è£…é…ï¼š"></a>ï¼ˆ3ï¼‰è‡ªåŠ¨è£…é…ï¼š</h4><p>åœ¨<code>&lt;bean&gt;</code>å…ƒç´ ä¸­ä½¿ç”¨ autowireå±æ€§ï¼Œå¹¶å°†å…¶å±æ€§å€¼è®¾ç½®ä¸º byNameæˆ–è€… byTypeå³å¯å®ç°è‡ªåŠ¨è£…é…ã€‚</p><h3 id="4-Springæ¡†æ¶çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š"><a href="#4-Springæ¡†æ¶çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š" class="headerlink" title="4.Springæ¡†æ¶çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š"></a>4.Springæ¡†æ¶çš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š</h3><p>ï¼ˆ1ï¼‰éä¾µå…¥å¼è®¾è®¡ï¼šSpringæ˜¯ä¸€ç§éä¾µå…¥å¼ï¼ˆnon-invasiveï¼‰æ¡†æ¶ï¼Œå®ƒå¯ä»¥ä½¿åº”ç”¨ç¨‹åºä»£ç å¯¹æ¡†æ¶çš„ä¾èµ–æœ€å°åŒ–ã€‚<br>ï¼ˆ2ï¼‰æ–¹ä¾¿è§£è€¦ã€ç®€åŒ–å¼€å‘ï¼šSpringå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤å·¥ä½œéƒ½äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œå¤§å¤§çš„é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚<br>ï¼ˆ3ï¼‰æ”¯æŒAOPï¼šSpringæä¾›äº†å¯¹AOPçš„æ”¯æŒï¼Œå®ƒå…è®¸å°†ä¸€äº›é€šç”¨ä»»åŠ¡ï¼Œå¦‚å®‰å…¨ã€äº‹åŠ¡ã€æ—¥å¿—ç­‰è¿›è¡Œé›†ä¸­å¼å¤„ç†ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„å¤ç”¨æ€§ã€‚<br>ï¼ˆ4ï¼‰æ”¯æŒå£°æ˜å¼äº‹åŠ¡å¤„ç†ï¼šåªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚<br>ï¼ˆ5ï¼‰æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•ï¼šSpringæä¾›äº†å¯¹Junit4çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åºã€‚<br>ï¼ˆ6ï¼‰æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼šSpringä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisã€Quartzç­‰ï¼‰çš„ç›´æ¥æ”¯æŒã€‚<br>ï¼ˆ7ï¼‰é™ä½äº†Java EE APIçš„ä½¿ç”¨éš¾åº¦ï¼šSpringå¯¹Java EEå¼€å‘ä¸­éå¸¸éš¾ç”¨çš„ä¸€äº›APIï¼ˆå¦‚ï¼šJDBCã€JavaMailç­‰ï¼‰ï¼Œéƒ½æä¾›äº†å°è£…ï¼Œä½¿è¿™äº›APIåº”ç”¨éš¾åº¦å¤§å¤§é™ä½ã€‚</p><h3 id="5-Springæ¡†æ¶åŒ…ï¼š"><a href="#5-Springæ¡†æ¶åŒ…ï¼š" class="headerlink" title="5.Springæ¡†æ¶åŒ…ï¼š"></a>5.Springæ¡†æ¶åŒ…ï¼š</h3><p>Springå¼€å‘æ‰€éœ€çš„jaråŒ…åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š Springæ¡†æ¶4ä¸ªæ ¸å¿ƒåŸºç¡€åŒ…å’Œä¸€ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ã€‚</p><p>spring-core-4.3.6.RELEASE.jar<br>åŒ…å«Springæ¡†æ¶çš„æ ¸å¿ƒå·¥å…·ç±»ï¼ŒSpringå…¶å®ƒç»„ä»¶éƒ½è¦ç”¨åˆ°è¿™ä¸ªåŒ…é‡Œçš„ç±»ã€‚</p><p>spring-beans-4.3.6.RELEASE.jar<br>æ‰€æœ‰åº”ç”¨éƒ½è¦ç”¨åˆ°çš„JARåŒ…ï¼Œå®ƒåŒ…å«è®¿é—®é…ç½®æ–‡ä»¶ã€åˆ›å»ºå’Œç®¡ç†Beanä»¥åŠè¿›è¡Œæ§åˆ¶åè½¬æˆ–è€…ä¾èµ–æ³¨å…¥æ“ä½œç›¸å…³çš„æ‰€æœ‰ç±»ã€‚</p><p>spring-context-4.3.6.RELEASE.jar<br>æä¾›äº†åœ¨åŸºç¡€IoCåŠŸèƒ½ä¸Šçš„æ‰©å±•æœåŠ¡ï¼Œè¿˜æä¾›äº†è®¸å¤šä¼ä¸šçº§æœåŠ¡çš„æ”¯æŒ</p><p>spring-expression-4.3.6.RELEASE.jar<br>å®šä¹‰äº†Springçš„è¡¨è¾¾å¼è¯­è¨€ã€‚</p><p>åœ¨ä½¿ç”¨Springå¼€å‘æ—¶ï¼Œé™¤äº†è¦ä½¿ç”¨è‡ªå¸¦çš„JARåŒ…å¤–ï¼ŒSpringçš„æ ¸å¿ƒå®¹å™¨è¿˜éœ€è¦ä¾èµ–ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…commons.loggingçš„JARåŒ…ã€‚</p><h3 id="6-ApplicationContextå®¹å™¨"><a href="#6-ApplicationContextå®¹å™¨" class="headerlink" title="6.ApplicationContextå®¹å™¨"></a>6.ApplicationContextå®¹å™¨</h3><p>é€šå¸¸åœ¨Javaé¡¹ç›®ä¸­ï¼Œé€šå¸¸ä¼šé€šè¿‡ClassPathXmlApplicationContextç±»æ¥å®ä¾‹åŒ–ApplicationContextå®¹å™¨çš„æ–¹å¼ï¼Œè€Œåœ¨Webé¡¹ç›®ä¸­ï¼ŒApplicationContextå®¹å™¨çš„å®ä¾‹åŒ–å·¥ä½œä¼šäº¤ç”±WebæœåŠ¡å™¨æ¥å®Œæˆã€‚</p><h3 id="7-SpringIOCåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š"><a href="#7-SpringIOCåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š" class="headerlink" title="7.SpringIOCåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š"></a>7.SpringIOCåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š</h3><p>mainæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setId(<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">user.setName(<span class="string">&quot;zhangsan22222&quot;</span>);</span><br><span class="line">userService.addUser(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®bean,é…ç½®åè¯¥ç±»ç”±springç®¡ç†--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.ioc.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¾èµ–æ³¨å…¥,é…ç½®å½“å‰ç±»ä¸­ç›¸åº”çš„å±æ€§--&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- &lt;property&gt;æ ‡ç­¾ä¸­çš„nameå°±æ˜¯UserServiceç±»ä¸­çš„userDaoå±æ€§åï¼ŒrefæŒ‡ä¸‹é¢&lt;bean name=&quot;userDao&quot;...&gt;ï¼Œè¿™æ ·å…¶å®æ˜¯springå°†UserDaoImpå¯¹è±¡å®ä¾‹åŒ–å¹¶ä¸”è°ƒç”¨UserServiceçš„setUserDaoæ–¹æ³•å°†UserDaoæ³¨å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">&lt;!â€”é…ç½®bean ï¼Œ,é…ç½®åè¯¥ç±»ç”±springç®¡ç†--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.ioc.dao.imp.UserDaoImp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"><span class="keyword">public</span> UserDao userDao;</span><br><span class="line"><span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">userDao.addUser(user);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDaoImp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImp</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ·»åŠ äº†ä¸€ä¸ªç”¨æˆ·ï¼Œå§“åæ˜¯&quot;</span></span><br><span class="line">        +user.getName()+user.getId());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€SpringJDBCTemplate"><a href="#äºŒã€SpringJDBCTemplate" class="headerlink" title="äºŒã€SpringJDBCTemplate"></a>äºŒã€SpringJDBCTemplate</h2><h3 id="1-åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®JDBC"><a href="#1-åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®JDBC" class="headerlink" title="1.åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®JDBC"></a>1.åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®JDBC</h3><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®JDBCæ—¶ï¼Œéœ€è¦å®šä¹‰äº†ä¸‰ä¸ªBeanï¼Œåˆ†åˆ«æ˜¯dataSourceã€jdbcTemplateå’Œéœ€è¦æ³¨å…¥ç±»çš„Beanã€‚åœ¨å®šä¹‰jdbcTemplateæ—¶ï¼Œéœ€è¦å°†dataSourceæ³¨å…¥åˆ°jdbcTemplateä¸­ï¼Œè€Œå…¶ä»–éœ€è¦ä½¿ç”¨jdbcTemplateçš„Beanï¼Œä¹Ÿéœ€è¦å°†jdbcTemplateæ³¨å…¥åˆ°è¯¥Beanä¸­ï¼Œè¿™æ ·é…ç½®å®Œæˆåï¼ŒSpring JDBCå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><h3 id="2-JdbcTemplateç±»"><a href="#2-JdbcTemplateç±»" class="headerlink" title="2.JdbcTemplateç±»"></a>2.JdbcTemplateç±»</h3><p>Springæ¡†æ¶æä¾›äº†JdbcTemplateç±»ï¼Œè¯¥ç±»æ˜¯Springæ¡†æ¶æ•°æ®æŠ½è±¡å±‚çš„åŸºç¡€ã€‚JdbcTemplateç±»æ˜¯Spring JDBCçš„æ ¸å¿ƒç±»ã€‚JdbcTemplateçš„ç›´æ¥çˆ¶ç±»æ˜¯æŠ½è±¡ç±»JdbcAccessorï¼Œå®ç°äº†æ¥å£JdbcOperationsã€‚<br>åœ¨JdbcTemplateç±»ä¸­ï¼Œæä¾›äº†å¤§é‡çš„æ›´æ–°å’ŒæŸ¥è¯¢æ•°æ®åº“çš„æ–¹æ³•ï¼Œä½¿ç”¨è¿™äº›æ–¹æ³•æ¥æ“ä½œæ•°æ®åº“ï¼Œå…¶å¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬execute()ã€update()å’Œquery()ã€‚<br>å…¶ä¸­execute()æ–¹æ³•èƒ½å¤Ÿå®Œæˆæ‰§è¡ŒSQLè¯­å¥çš„åŠŸèƒ½ï¼Œupdate()æ–¹æ³•å¯ä»¥å®Œæˆæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®çš„æ“ä½œï¼Œquery()æ–¹æ³•å¯ä»¥ç”¨æ¥å¤„ç†å„ç§å¯¹æ•°æ®åº“è¡¨çš„æŸ¥è¯¢æ“ä½œã€‚</p><h3 id="3-dataSourceé…ç½®"><a href="#3-dataSourceé…ç½®" class="headerlink" title="3.dataSourceé…ç½®"></a>3.dataSourceé…ç½®</h3><p>dataSourceé…ç½®ï¼Œå³JDBCè¿æ¥æ•°æ®åº“æ—¶éœ€è¦4ä¸ªåŸºæœ¬å±æ€§ï¼ŒåŒ…æ‹¬æœ‰driverClassNameã€urlã€usernameå’Œpasswordã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231113223834.png"></p><h3 id="4-Spring-ä¸ºJDBCæä¾›äº†ä¸‰ä¸ªæ¨¡æ¿ç±»ä¾›é€‰æ‹©ï¼š"><a href="#4-Spring-ä¸ºJDBCæä¾›äº†ä¸‰ä¸ªæ¨¡æ¿ç±»ä¾›é€‰æ‹©ï¼š" class="headerlink" title="4.Spring ä¸ºJDBCæä¾›äº†ä¸‰ä¸ªæ¨¡æ¿ç±»ä¾›é€‰æ‹©ï¼š"></a>4.Spring ä¸ºJDBCæä¾›äº†ä¸‰ä¸ªæ¨¡æ¿ç±»ä¾›é€‰æ‹©ï¼š</h3><p>JdbcTemplateï¼šæœ€åŸºæœ¬çš„Spring JDBCæ¨¡æ¿ï¼Œæ”¯æŒç®€å•çš„JDBCæ•°æ®è®¿é—®åŠŸèƒ½åŠåŸºäºç´¢å¼•å‚æ•°çš„æŸ¥è¯¢ã€‚ä½¿ç”¨å ä½ç¬¦ï¼ˆï¼Ÿï¼‰ç»‘å®šå‚æ•°ã€‚</p><p>NamedParameterJdbcTemplateï¼šè¯¥æ¨¡æ¿æŸ¥è¯¢æ—¶å¯ä»¥å°†å€¼ä»¥å‘½åå‚æ•°ï¼ˆï¼šå‚æ•°åï¼‰çš„å½¢å¼ç»‘å®šåˆ°SQLä¸­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç®€å•çš„ç´¢å¼•å‚æ•°ã€‚</p><p>SimpleJdbcTemplateï¼šè¯¥æ¨¡æ¿åˆ©ç”¨Java5çš„ä¸€äº›ç‰¹æ€§å¦‚è‡ªåŠ¨è£…ç®±ã€æ³›å‹ä»¥åŠå¯å˜å‚æ•°åˆ—è¡¨æ¥ç®€åŒ–JDBCæ¨¡æ¿çš„ä½¿ç”¨ã€‚</p><h3 id="5-SpringJDBCTemplateåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š"><a href="#5-SpringJDBCTemplateåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š" class="headerlink" title="5.SpringJDBCTemplateåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š"></a>5.SpringJDBCTemplateåº”ç”¨ç¤ºä¾‹æ ¸å¿ƒä»£ç ï¼š</h3><p>Mainæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span>&#123;</span><br><span class="line">    <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">    <span class="type">UserAction</span> <span class="variable">userAction</span> <span class="operator">=</span> test.getController();</span><br><span class="line">    test.testAdd(userAction);</span><br><span class="line"><span class="comment">//    test.testFindNumbers(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindNameById(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindUser(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindAll(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindMapUser(userAction);</span></span><br><span class="line"><span class="comment">//    test.testFindMapAll(userAction);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> UserAction <span class="title function_">getController</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;config/applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserAction</span> <span class="variable">userAction</span> <span class="operator">=</span> (UserAction) context.getBean(<span class="string">&quot;userAction&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> userAction;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span>  <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">7</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">20</span>);</span><br><span class="line">    userAction.add(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindNumbers</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">numbers</span> <span class="operator">=</span> userAction.findNumbers();</span><br><span class="line">    System.out.println(<span class="string">&quot;findNumbersæ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å…±æœ‰&quot;</span>+numbers+<span class="string">&quot;ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindNameById</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> userAction.findNameById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;findNameByIdæ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å­¦å·ä¸º1çš„å­¦ç”Ÿçš„å§“åä¸ºï¼š&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindUser</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findUseræ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span>  <span class="operator">=</span> userAction.findById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;idï¼š&quot;</span>+user.getId()</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.getName()</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    List&lt;User&gt; users  = userAction.findAll();</span><br><span class="line">    System.out.println(<span class="string">&quot;findAllæ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(User user:users)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;idï¼š&quot;</span>+user.getId()</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.getName()</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindMapUser</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findMapUseræ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    Map&lt;String,Object&gt; user  = userAction.findMapById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;idï¼š&quot;</span>+user.get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    +<span class="string">&quot;,name:&quot;</span>+user.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">    +<span class="string">&quot;,age:&quot;</span>+user.get(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindMapAll</span><span class="params">(UserAction userAction)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;findMapAllæ–¹æ³•çš„æŸ¥è¯¢ç»“æœï¼š&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String,Object&gt;&gt; users  = userAction.findAllMap();</span><br><span class="line">    <span class="keyword">for</span>(Map&lt;String,Object&gt; user:users)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;idï¼š&quot;</span>+user.get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">        +<span class="string">&quot;,name:&quot;</span>+user.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        +<span class="string">&quot;,age:&quot;</span>+user.get(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">class</span>=<span class="string">&quot;action.UserAction&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.UserService&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource1&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;npjt&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;namedParameterJdbcTemplate&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource1&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- NamedParameterJdbcTemplateé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;namedParameterJdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;jdbcTemplate1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>UserAction.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAction</span> &#123;</span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> UserService <span class="title function_">getUserService</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserService userService)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userService = userService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">userService.add(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findNameById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findNumbers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findMapById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userService.findAllMap();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">userDao.add(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findNameById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findNumbers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findMapById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> userDao.findAllMap();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> NamedParameterJdbcTemplate npjt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> NamedParameterJdbcTemplate <span class="title function_">getNpjt</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> npjt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNpjt</span><span class="params">(NamedParameterJdbcTemplate npjt)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.npjt = npjt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into CUSTOMERS values(?,?,?)&quot;</span>;</span><br><span class="line">jdbcTemplate.update(sql,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;user.getId(),user.getName(),user.getAge()&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*NamedParameterJdbcTemplateä½¿ç”¨ï¼šMapä¼ å‚*/</span></span><br><span class="line">String sql1=<span class="string">&quot;insert into CUSTOMERS (id,name,age) values (:id,:name,:age)&quot;</span>;</span><br><span class="line">Map&lt;String,Object&gt; paramMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">paramMap.put(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;npjt&quot;</span>);</span><br><span class="line">paramMap.put(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">npjt.update(sql1, paramMap);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*NamedParameterJdbcTemplateä½¿ç”¨ï¼šå®ä½“ç±»ï¼ˆUserï¼‰ä¼ å‚*/</span></span><br><span class="line">SqlParameterSource paramSource=<span class="keyword">new</span> <span class="title class_">BeanPropertySqlParameterSource</span>(user);</span><br><span class="line">npjt.update(sql1, paramSource);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">findNameById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT NAME FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; id &#125;, String.class);</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumbers</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT COUNT(*) FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line"><span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="comment">//List&lt;Customer&gt; customers = jdbcTemplate.query(sql, new BeanPropertyRowMapper(Customer.class));</span></span><br><span class="line">List&lt;User&gt; customers = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">CustomerRowMapper</span>());</span><br><span class="line"><span class="keyword">return</span> customers;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">User</span> <span class="variable">customer</span> <span class="operator">=</span> (User) jdbcTemplate.queryForObject(sql,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; id &#125;,<span class="keyword">new</span> <span class="title class_">CustomerRowMapper</span>());</span><br><span class="line"><span class="keyword">return</span> customer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title function_">findMapById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate.queryForMap(sql,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;id&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">findAllMap</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM CUSTOMERS&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate.queryForList(sql);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€SpringAOPå’Œäº‹åŠ¡æ§åˆ¶"><a href="#ä¸‰ã€SpringAOPå’Œäº‹åŠ¡æ§åˆ¶" class="headerlink" title="ä¸‰ã€SpringAOPå’Œäº‹åŠ¡æ§åˆ¶"></a>ä¸‰ã€SpringAOPå’Œäº‹åŠ¡æ§åˆ¶</h2><h3 id="1-AOP-Aspect-Oriented-Programming-é¢å‘åˆ‡é¢ç¼–ç¨‹-ï¼š"><a href="#1-AOP-Aspect-Oriented-Programming-é¢å‘åˆ‡é¢ç¼–ç¨‹-ï¼š" class="headerlink" title="1.AOP(Aspect-Oriented Programming,é¢å‘åˆ‡é¢ç¼–ç¨‹)ï¼š"></a>1.AOP(Aspect-Oriented Programming,é¢å‘åˆ‡é¢ç¼–ç¨‹)ï¼š</h3><p>æ˜¯Springç”¨åˆ°çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œæ˜¯å¯¹ä¼ ç»Ÿ OOP(Object-Oriented Programming,é¢å‘å¯¹è±¡ç¼–ç¨‹)çš„è¡¥å……ã€‚</p><p>AOPåœ¨ç¨‹åºå¼€å‘ä¸­ä¸»è¦ç”¨æ¥è§£å†³ä¸€äº›ç³»ç»Ÿå±‚é¢ä¸Šçš„é—®é¢˜ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œäº‹åŠ¡ï¼Œæƒé™ç­‰ã€‚</p><p>AOPçš„ä¸»è¦ç¼–ç¨‹å¯¹è±¡æ˜¯åˆ‡é¢(aspect)ï¼Œé‡‡ç”¨AOPï¼Œå¯ä»¥å¯¹åˆ†æ•£åœ¨å„å¤„ä¸”ä¸å¯¹è±¡æ ¸å¿ƒåŠŸèƒ½æ— å…³çš„ä¸€äº›åŠŸèƒ½è¡Œä¸ºä»£ç ï¼ˆæ¨ªåˆ‡ä»£ç ï¼‰è¿›è¡Œå°è£…ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¢«å‘½åä¸ºâ€œåˆ‡é¢â€ï¼ˆAspectï¼‰ï¼Œåˆ‡é¢å°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´è¢«ä¸šåŠ¡æ¨¡å—å…±åŒè°ƒç”¨çš„é€»è¾‘æå–å¹¶å°è£…èµ·æ¥ï¼Œå‡å°‘äº†ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><h3 id="2-AOPæ¡†æ¶ï¼šSpring-AOPå’ŒAspectJã€‚"><a href="#2-AOPæ¡†æ¶ï¼šSpring-AOPå’ŒAspectJã€‚" class="headerlink" title="2.AOPæ¡†æ¶ï¼šSpring AOPå’ŒAspectJã€‚"></a>2.AOPæ¡†æ¶ï¼šSpring AOPå’ŒAspectJã€‚</h3><p>ç›®å‰æµè¡Œçš„AOPæ¡†æ¶æœ‰ä¸¤ä¸ªï¼šSpring AOPå’ŒAspectJ</p><p>Spring AOPä»£ç†å¯ä»¥æ˜¯JDKåŠ¨æ€ä»£ç†ï¼Œä¹Ÿå¯æ˜¯CGLIBä»£ç†ã€‚Springé»˜è®¤ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œåœ¨éœ€è¦ä»£ç†ç±»è€Œä¸æ˜¯ä»£ç†æ¥å£çš„æ—¶å€™ï¼ŒSpringä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºä½¿ç”¨CGLIBä»£ç†ï¼Œä¸è¿‡ç°åœ¨çš„é¡¹ç›®éƒ½æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œæ‰€ä»¥JDKåŠ¨æ€ä»£ç†ç›¸å¯¹æ¥è¯´ç”¨çš„è¿˜æ˜¯å¤šä¸€äº›ã€‚</p><p>æ–°ç‰ˆæœ¬çš„Springæ¡†æ¶ï¼Œå»ºè®®ä½¿ç”¨AspectJæ¥å¼€å‘AOPã€‚ ä½¿ç”¨AspectJå®ç°AOPæœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯åŸºäºXMLçš„å£°æ˜å¼AspectJï¼Œå¦ä¸€ç§æ˜¯åŸºäºæ³¨è§£çš„å£°æ˜å¼AspectJã€‚</p><h3 id="3-AspectJæ¡†æ¶ä¸­æ³¨è§£"><a href="#3-AspectJæ¡†æ¶ä¸­æ³¨è§£" class="headerlink" title="3.AspectJæ¡†æ¶ä¸­æ³¨è§£"></a>3.AspectJæ¡†æ¶ä¸­æ³¨è§£</h3><p>AspectJæ¡†æ¶ä¸­æ³¨è§£@Pointcutç”¨äºå®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œåœ¨ä½¿ç”¨æ—¶è¿˜éœ€å®šä¹‰ä¸€ä¸ªåŒ…å«åå­—å’Œä»»æ„å‚æ•°çš„æ–¹æ³•ç­¾åæ¥è¡¨ç¤ºåˆ‡å…¥ç‚¹åç§°ã€‚</p><h3 id="4-Springçš„é…ç½®æ–‡ä»¶ä¸­çš„å…ƒç´ "><a href="#4-Springçš„é…ç½®æ–‡ä»¶ä¸­çš„å…ƒç´ " class="headerlink" title="4.Springçš„é…ç½®æ–‡ä»¶ä¸­çš„&lt;beans&gt;å…ƒç´ "></a>4.Springçš„é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;beans&gt;</code>å…ƒç´ </h3><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;beans&gt;</code>å…ƒç´ ä¸‹å¯ä»¥åŒ…å«å¤šä¸ª<code>&lt;aop:config&gt;</code>å…ƒç´ ï¼Œä¸€ä¸ª<code>&lt;aop:config&gt;</code>å…ƒç´ ä¸­åˆå¯ä»¥åŒ…å«å±æ€§å’Œå­å…ƒç´ ï¼Œå…¶å­å…ƒç´ åŒ…æ‹¬<code>&lt;aop:pointcut&gt;</code>ã€<code>&lt;aop:advisor&gt;</code>å’Œ<code>&lt;aop:aspect&gt;</code>ã€‚</p><p>é…ç½®åˆ‡é¢ä½¿ç”¨çš„æ˜¯<code>&lt;aop:aspect&gt;</code>å…ƒç´ ï¼Œ<code>&lt;aop:aspect&gt;</code>å­å…ƒç´ çš„pointcut-refå±æ€§ç”¨äºæŒ‡å®šä¸€ä¸ªå·²ç»å­˜åœ¨çš„åˆ‡å…¥ç‚¹åç§°ã€‚</p><h3 id="5-AOPæœ¯è¯­ä¸­Advice"><a href="#5-AOPæœ¯è¯­ä¸­Advice" class="headerlink" title="5.AOPæœ¯è¯­ä¸­Advice"></a>5.AOPæœ¯è¯­ä¸­Advice</h3><p>AOPæœ¯è¯­ä¸­Adviceè¡¨ç¤ºAOPæ¡†æ¶åœ¨ç‰¹å®šçš„åˆ‡å…¥ç‚¹æ‰§è¡Œçš„é€šçŸ¥&#x2F;å¢å¼ºå¤„ç†ï¼Œå³åœ¨å®šä¹‰å¥½çš„åˆ‡å…¥ç‚¹å¤„æ‰€è¦æ‰§è¡Œçš„ç¨‹åºä»£ç ã€‚</p><h3 id="6-Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ä¸¤ç§å®ç°æ–¹å¼"><a href="#6-Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ä¸¤ç§å®ç°æ–¹å¼" class="headerlink" title="6.Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ä¸¤ç§å®ç°æ–¹å¼"></a>6.Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ä¸¤ç§å®ç°æ–¹å¼</h3><p>Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼Œä¸€ç§æ˜¯åŸºäºXMLçš„æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯åŸºäºæ³¨è§£ï¼ˆAnnotationï¼‰çš„æ–¹å¼ã€‚</p><p>Spring2.0ä»¥åï¼Œåœ¨åŸºäºXMLæ–‡ä»¶çš„æ–¹å¼ä¸­ï¼Œæä¾›äº†txå‘½åç©ºé—´æ¥é…ç½®äº‹åŠ¡ï¼Œtxå‘½åç©ºé—´ä¸‹æä¾›äº†<a href="tx:advice">tx:advice</a>å…ƒç´ æ¥é…ç½®äº‹åŠ¡çš„é€šçŸ¥ï¼ˆå¢å¼ºå¤„ç†ï¼‰ã€‚</p><h2 id="å››ã€Springæ•´åˆMybatis"><a href="#å››ã€Springæ•´åˆMybatis" class="headerlink" title="å››ã€Springæ•´åˆMybatis"></a>å››ã€Springæ•´åˆMybatis</h2><h3 id="6-1-Springæ•´åˆMybatisæ€è·¯åˆ†æ"><a href="#6-1-Springæ•´åˆMybatisæ€è·¯åˆ†æ" class="headerlink" title="6.1 Springæ•´åˆMybatisæ€è·¯åˆ†æ"></a>6.1 Springæ•´åˆMybatisæ€è·¯åˆ†æ</h3><h4 id="6-1-1-ç¯å¢ƒå‡†å¤‡"><a href="#6-1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="6.1.1 ç¯å¢ƒå‡†å¤‡"></a>6.1.1 ç¯å¢ƒå‡†å¤‡</h4><p>åœ¨å‡†å¤‡ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å›é¡¾ä¸‹Mybatiså¼€å‘çš„ç›¸å…³å†…å®¹:</p><h5 id="æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨"><a href="#æ­¥éª¤1-å‡†å¤‡æ•°æ®åº“è¡¨" class="headerlink" title="æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨"></a>æ­¥éª¤1:å‡†å¤‡æ•°æ®åº“è¡¨</h5><p>Mybatisæ˜¯æ¥æ“ä½œæ•°æ®åº“è¡¨ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“åŠè¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database spring_db <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line">use spring_db;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">35</span>),</span><br><span class="line">    money <span class="keyword">double</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"><a href="#æ­¥éª¤2-åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…"></a>æ­¥éª¤2:åˆ›å»ºé¡¹ç›®å¯¼å…¥jaråŒ…</h5><p>é¡¹ç›®çš„pom.xmlæ·»åŠ ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"><a href="#æ­¥éª¤3-æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»" class="headerlink" title="æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»"></a>æ­¥éª¤3:æ ¹æ®è¡¨åˆ›å»ºæ¨¡å‹ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"><span class="comment">//setter...getter...toString...æ–¹æ³•ç•¥    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤4-åˆ›å»ºDaoæ¥å£"><a href="#æ­¥éª¤4-åˆ›å»ºDaoæ¥å£" class="headerlink" title="æ­¥éª¤4:åˆ›å»ºDaoæ¥å£"></a>æ­¥éª¤4:åˆ›å»ºDaoæ¥å£</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tbl_account(name,money)values(#&#123;name&#125;,#&#123;money&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update tbl_account set name = #&#123;name&#125; , money = #&#123;money&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account&quot;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_account where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"><a href="#æ­¥éª¤5-åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»"></a>æ­¥éª¤5:åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Account <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span>&#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶"><a href="#æ­¥éª¤6-æ·»åŠ jdbc-propertiesæ–‡ä»¶" class="headerlink" title="æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶"></a>æ­¥éª¤6:æ·»åŠ jdbc.propertiesæ–‡ä»¶</h5><p>resourcesç›®å½•ä¸‹æ·»åŠ ï¼Œç”¨äºé…ç½®æ•°æ®åº“è¿æ¥å››è¦ç´ </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>useSSL:å…³é—­MySQLçš„SSLè¿æ¥</p><h5 id="æ­¥éª¤7-æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#æ­¥éª¤7-æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="æ­¥éª¤7:æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>æ­¥éª¤7:æ·»åŠ Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åˆ«åæ‰«æçš„åŒ…è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜ å°„æ–‡ä»¶æ‰«æåŒ…è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤8-ç¼–å†™åº”ç”¨ç¨‹åº"><a href="#æ­¥éª¤8-ç¼–å†™åº”ç”¨ç¨‹åº" class="headerlink" title="æ­¥éª¤8:ç¼–å†™åº”ç”¨ç¨‹åº"></a>æ­¥éª¤8:ç¼–å†™åº”ç”¨ç¨‹åº</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 2. åŠ è½½SqlMapConfig.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml.bak&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(inputStream);</span><br><span class="line">        <span class="comment">// 4. è·å–SqlSession</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">// 5. æ‰§è¡ŒSqlSessionå¯¹è±¡æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–ç»“æœUser</span></span><br><span class="line">        <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> sqlSession.getMapper(AccountDao.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountDao.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ­¥éª¤9-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤9-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤9:è¿è¡Œç¨‹åº"></a>æ­¥éª¤9:è¿è¡Œç¨‹åº</h5><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630136904087.png" alt="1630136904087"></p><h4 id="6-1-2-æ•´åˆæ€è·¯åˆ†æ"><a href="#6-1-2-æ•´åˆæ€è·¯åˆ†æ" class="headerlink" title="6.1.2 æ•´åˆæ€è·¯åˆ†æ"></a>6.1.2 æ•´åˆæ€è·¯åˆ†æ</h4><p>Mybatisçš„åŸºç¡€ç¯å¢ƒæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±å¾—åˆ†æä¸‹åœ¨ä¸Šè¿°çš„å†…å®¹ä¸­ï¼Œå“ªäº›å¯¹è±¡å¯ä»¥äº¤ç»™Springæ¥ç®¡ç†?</p><ul><li><p>Mybatisç¨‹åºæ ¸å¿ƒå¯¹è±¡åˆ†æ</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630137189480.png" alt="1630137189480"></p><p>ä»å›¾ä¸­å¯ä»¥è·å–åˆ°ï¼ŒçœŸæ­£éœ€è¦äº¤ç»™Springç®¡ç†çš„æ˜¯&#x3D;&#x3D;SqlSessionFactory&#x3D;&#x3D;</p></li><li><p>æ•´åˆMybatisï¼Œå°±æ˜¯å°†Mybatisç”¨åˆ°çš„å†…å®¹äº¤ç»™Springç®¡ç†ï¼Œåˆ†æä¸‹é…ç½®æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630137388717.png" alt="1630137388717"></p><p><strong>è¯´æ˜:</strong></p><ul><li>ç¬¬ä¸€è¡Œè¯»å–å¤–éƒ¨propertiesé…ç½®æ–‡ä»¶ï¼ŒSpringæœ‰æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆ<code>@PropertySource</code>,éœ€è¦äº¤ç»™Spring</li><li>ç¬¬äºŒè¡Œèµ·åˆ«ååŒ…æ‰«æï¼Œä¸ºSqlSessionFactoryæœåŠ¡çš„ï¼Œéœ€è¦äº¤ç»™Spring</li><li>ç¬¬ä¸‰è¡Œä¸»è¦ç”¨äºåšè¿æ¥æ± ï¼ŒSpringä¹‹å‰æˆ‘ä»¬å·²ç»æ•´åˆäº†Druidè¿æ¥æ± ï¼Œè¿™å—ä¹Ÿéœ€è¦äº¤ç»™Spring</li><li>å‰é¢ä¸‰è¡Œä¸€èµ·éƒ½æ˜¯ä¸ºäº†åˆ›å»ºSqlSessionå¯¹è±¡ç”¨çš„ï¼Œé‚£ä¹ˆç”¨Springç®¡ç†SqlSessionå¯¹è±¡å—?å›å¿†ä¸‹SqlSessionæ˜¯ç”±SqlSessionFactoryåˆ›å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥åªéœ€è¦å°†SqlSessionFactoryäº¤ç»™Springç®¡ç†å³å¯ã€‚</li><li>ç¬¬å››è¡Œæ˜¯Mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶[å¦‚æœä½¿ç”¨æ³¨è§£å°±æ²¡æœ‰è¯¥æ˜ å°„æ–‡ä»¶]ï¼Œè¿™ä¸ªæ˜¯åœ¨è·å–åˆ°SqlSessionä»¥åæ‰§è¡Œå…·ä½“æ“ä½œçš„æ—¶å€™ç”¨ï¼Œæ‰€ä»¥å®ƒå’ŒSqlSessionFactoryåˆ›å»ºçš„æ—¶æœºéƒ½ä¸åœ¨åŒä¸€ä¸ªæ—¶é—´ï¼Œå¯èƒ½éœ€è¦å•ç‹¬ç®¡ç†ã€‚</li></ul></li></ul><h3 id="6-2-Springæ•´åˆMybatis"><a href="#6-2-Springæ•´åˆMybatis" class="headerlink" title="6.2 Springæ•´åˆMybatis"></a>6.2 Springæ•´åˆMybatis</h3><p>å‰é¢æˆ‘ä»¬å·²ç»åˆ†æäº†Springä¸Mybatisçš„æ•´åˆï¼Œå¤§ä½“éœ€è¦åšä¸¤ä»¶äº‹ï¼Œ</p><p>ç¬¬ä¸€ä»¶äº‹æ˜¯:Springè¦ç®¡ç†MyBatisä¸­çš„SqlSessionFactory</p><p>ç¬¬äºŒä»¶äº‹æ˜¯:Springè¦ç®¡ç†Mapperæ¥å£çš„æ‰«æ</p><p>å…·ä½“è¯¥å¦‚ä½•å®ç°ï¼Œå…·ä½“çš„æ­¥éª¤ä¸º:</p><h4 id="æ­¥éª¤1-é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…"><a href="#æ­¥éª¤1-é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…" class="headerlink" title="æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…"></a>æ­¥éª¤1:é¡¹ç›®ä¸­å¯¼å…¥æ•´åˆéœ€è¦çš„jaråŒ…</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Springæ“ä½œæ•°æ®åº“éœ€è¦è¯¥jaråŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Springä¸Mybatisæ•´åˆçš„jaråŒ…</span></span><br><span class="line"><span class="comment">è¿™ä¸ªjaråŒ…mybatisåœ¨å‰é¢ï¼Œæ˜¯Mybatisæä¾›çš„</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤2-åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»"><a href="#æ­¥éª¤2-åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»" class="headerlink" title="æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»"></a>æ­¥éª¤2:åˆ›å»ºSpringçš„ä¸»é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é…ç½®ç±»æ³¨è§£</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//åŒ…æ‰«æï¼Œä¸»è¦æ‰«æçš„æ˜¯é¡¹ç›®ä¸­çš„AccountServiceImplç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3-åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»"><a href="#æ­¥éª¤3-åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»" class="headerlink" title="æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»"></a>æ­¥éª¤3:åˆ›å»ºæ•°æ®æºçš„é…ç½®ç±»</h4><p>åœ¨é…ç½®ç±»ä¸­å®Œæˆæ•°æ®æºçš„åˆ›å»º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤4-ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»"><a href="#æ­¥éª¤4-ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»" class="headerlink" title="æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»"></a>æ­¥éª¤4:ä¸»é…ç½®ç±»ä¸­è¯»propertieså¹¶å¼•å…¥æ•°æ®æºé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(JdbcConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤5-åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory"><a href="#æ­¥éª¤5-åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory" class="headerlink" title="æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory"></a>æ­¥éª¤5:åˆ›å»ºMybatisé…ç½®ç±»å¹¶é…ç½®SqlSessionFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰beanï¼ŒSqlSessionFactoryBeanï¼Œç”¨äºäº§ç”ŸSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">ssfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®æ¨¡å‹ç±»çš„åˆ«åæ‰«æ</span></span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">&quot;com.itheima.domain&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ•°æ®æº</span></span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰beanï¼Œè¿”å›MapperScannerConfigurerå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">&quot;com.itheima.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong></p><ul><li><p>ä½¿ç”¨SqlSessionFactoryBeanå°è£…SqlSessionFactoryéœ€è¦çš„ç¯å¢ƒä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630138835057.png" alt="1630138835057"></p><ul><li>SqlSessionFactoryBeanæ˜¯å‰é¢æˆ‘ä»¬è®²è§£FactoryBeançš„ä¸€ä¸ªå­ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å°†SqlSessionFactoryçš„åˆ›å»ºè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–å¯¹è±¡çš„åˆ›å»ºï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶éœ€è¦çš„å†…å®¹è®¾ç½®å³å¯ã€‚</li><li>æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå‚æ•°ä¸ºdataSource,å½“å‰Springå®¹å™¨ä¸­å·²ç»åˆ›å»ºäº†Druidæ•°æ®æºï¼Œç±»å‹åˆšå¥½æ˜¯DataSourceç±»å‹ï¼Œæ­¤æ—¶åœ¨åˆå§‹åŒ–SqlSessionFactoryBeanè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå‘ç°éœ€è¦ä½¿ç”¨DataSourceå¯¹è±¡ï¼Œè€Œå®¹å™¨ä¸­åˆšå¥½æœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼Œå°±è‡ªåŠ¨åŠ è½½äº†DruidDataSourceå¯¹è±¡ã€‚</li></ul></li><li><p>ä½¿ç”¨MapperScannerConfigureråŠ è½½Daoæ¥å£ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ä¿å­˜åˆ°IOCå®¹å™¨ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630138916939.png" alt="1630138916939"></p><ul><li>è¿™ä¸ªMapperScannerConfigurerå¯¹è±¡ä¹Ÿæ˜¯MyBatisæä¾›çš„ä¸“ç”¨äºæ•´åˆçš„jaråŒ…ä¸­çš„ç±»ï¼Œç”¨æ¥å¤„ç†åŸå§‹é…ç½®æ–‡ä»¶ä¸­çš„mappersç›¸å…³é…ç½®ï¼ŒåŠ è½½æ•°æ®å±‚çš„Mapperæ¥å£ç±»</li><li>MapperScannerConfigureræœ‰ä¸€ä¸ªæ ¸å¿ƒå±æ€§basePackageï¼Œå°±æ˜¯ç”¨æ¥è®¾ç½®æ‰€æ‰«æçš„åŒ…è·¯å¾„</li></ul></li></ul><h4 id="æ­¥éª¤6-ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»"><a href="#æ­¥éª¤6-ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»" class="headerlink" title="æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»"></a>æ­¥éª¤6:ä¸»é…ç½®ç±»ä¸­å¼•å…¥Mybatisé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤7-ç¼–å†™è¿è¡Œç±»"><a href="#æ­¥éª¤7-ç¼–å†™è¿è¡Œç±»" class="headerlink" title="æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»"></a>æ­¥éª¤7:ç¼–å†™è¿è¡Œç±»</h4><p>åœ¨è¿è¡Œç±»ä¸­ï¼Œä»IOCå®¹å™¨ä¸­è·å–Serviceå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•è·å–ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">AccountService</span> <span class="variable">accountService</span> <span class="operator">=</span> ctx.getBean(AccountService.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Account</span> <span class="variable">ac</span> <span class="operator">=</span> accountService.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(ac);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤8-è¿è¡Œç¨‹åº"><a href="#æ­¥éª¤8-è¿è¡Œç¨‹åº" class="headerlink" title="æ­¥éª¤8:è¿è¡Œç¨‹åº"></a>æ­¥éª¤8:è¿è¡Œç¨‹åº</h4><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1630139036627.png" alt="1630139036627"></p><p>æ”¯æŒSpringä¸Mybatisçš„æ•´åˆå°±å·²ç»å®Œæˆäº†ï¼Œå…¶ä¸­ä¸»è¦ç”¨åˆ°çš„ä¸¤ä¸ªç±»åˆ†åˆ«æ˜¯:</p><ul><li>&#x3D;&#x3D;SqlSessionFactoryBean&#x3D;&#x3D;</li><li>&#x3D;&#x3D;MapperScannerConfigurer&#x3D;&#x3D;</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;a href=&quot;#ä¸€ã€Springæ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;/a&gt;ä¸€ã€Springæ¡†æ¶&lt;/h2&gt;&lt;h3 id=&quot;1-ä¸‰å±‚ä½“ç³»æ¶æ„&quot;&gt;&lt;a href=&quot;#1-ä¸‰å±‚ä½“ç³»æ¶æ„&quot; cla</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>åç«¯å¼€å‘é…ç½®</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/05/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%9D%97/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/05/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%9D%97/</id>
    <published>2023-11-04T18:30:34.000Z</published>
    <updated>2024-03-05T09:47:14.294Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Javaå®ç°è·¨åŸŸæ–¹å¼"><a href="#Javaå®ç°è·¨åŸŸæ–¹å¼" class="headerlink" title="Javaå®ç°è·¨åŸŸæ–¹å¼"></a>Javaå®ç°è·¨åŸŸæ–¹å¼</h2><p>ä¸€ã€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸ</p><ul><li><p>å®šä¹‰</p><ul><li>è·¨åŸŸï¼ˆCORSï¼‰æ˜¯æŒ‡ä¸åŒåŸŸåä¹‹é—´ç›¸äº’è®¿é—®ã€‚è·¨åŸŸï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬ï¼Œå®ƒæ˜¯ç”±æµè§ˆå™¨çš„åŒæºç­–ç•¥æ‰€é€ æˆçš„ï¼Œæ˜¯æµè§ˆå™¨å¯¹äºJavaScriptæ‰€å®šä¹‰çš„å®‰å…¨é™åˆ¶ç­–ç•¥ã€‚<br>å½“ä¸€ä¸ªè¯·æ±‚urlçš„åè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢urlä¸åŒå³ä¸ºè·¨åŸŸã€‚</li></ul></li><li><p>åŸå› </p><ul><li>åœ¨å‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ä¸‹ï¼Œå‰åç«¯çš„åŸŸåæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿè·¨åŸŸè®¿é—®é—®é¢˜ã€‚åœ¨è¯·æ±‚çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬è¦æƒ³å›å»æ•°æ®ä¸€èˆ¬éƒ½æ˜¯post&#x2F;getè¯·æ±‚ï¼Œæ‰€ä»¥â€¦<a href="https://so.csdn.net/so/search?q=%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98&spm=1001.2101.3001.7020">è·¨åŸŸé—®é¢˜</a>å‡ºç°ã€‚</li><li>è·¨åŸŸé—®é¢˜æ¥æºäºJavaScriptçš„åŒæºç­–ç•¥ï¼Œå³åªæœ‰ åè®®+ä¸»æœºå+ç«¯å£å·(å¦‚å­˜åœ¨)ç›¸åŒï¼Œåˆ™å…è®¸ç›¸äº’è®¿é—®ã€‚ä¹Ÿå°±æ˜¯è¯´JavaScriptåªèƒ½è®¿é—®å’Œæ“ä½œè‡ªå·±åŸŸä¸‹çš„èµ„æºï¼Œä¸èƒ½è®¿é—®å’Œæ“ä½œå…¶ä»–åŸŸä¸‹çš„èµ„æºã€‚è·¨åŸŸé—®é¢˜æ˜¯é’ˆå¯¹JSå’Œajaxçš„ï¼Œhtmlæœ¬èº«æ²¡æœ‰è·¨åŸŸé—®é¢˜ï¼Œæ¯”å¦‚aæ ‡ç­¾ã€scriptæ ‡ç­¾ã€ç”šè‡³formæ ‡ç­¾ï¼ˆå¯ä»¥ç›´æ¥è·¨åŸŸå‘é€æ•°æ®å¹¶æ¥æ”¶æ•°æ®ï¼‰ç­‰</li></ul></li><li><p>ä»€ä¹ˆæƒ…å†µä¼šè·¨åŸŸ</p><ul><li>åŒä¸€åè®®ï¼Œ å¦‚httpæˆ–https</li><li>åŒä¸€IPåœ°å€, å¦‚127.0.0.1</li><li>åŒä¸€ç«¯å£, å¦‚8080<br>ä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªæ¡ä»¶ä¸åŒå°±ä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜ã€‚</li></ul></li></ul><h3 id="è·¨åŸŸä¹‹CorsFilter"><a href="#è·¨åŸŸä¹‹CorsFilter" class="headerlink" title="è·¨åŸŸä¹‹CorsFilter"></a>è·¨åŸŸä¹‹CorsFilter</h3><p><code>CorsFilter</code> æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç”¨äºå¤„ç†<a href="https://so.csdn.net/so/search?q=%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82&spm=1001.2101.3001.7020">è·¨åŸŸè¯·æ±‚</a>çš„è¿‡æ»¤å™¨ã€‚åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¤„ç†å‰ç«¯å‘æ¥çš„è·¨åŸŸè¯·æ±‚ï¼Œ<code>CorsFilter</code> å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€åŠŸèƒ½ã€‚</p><p><code>CorsFilter</code> ä¸»è¦ç”¨äºè®¾ç½®è·¨åŸŸè¯·æ±‚çš„å“åº”å¤´ï¼Œä»¥å…è®¸è·¨åŸŸè¯·æ±‚èƒ½å¤Ÿè¢«æˆåŠŸå¤„ç†ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>CorsFilter</code> å¯ä»¥è®¾ç½®ä»¥ä¸‹å“åº”å¤´ï¼š</p><ul><li>Access-Control-Allow-Originï¼šå…è®¸è®¿é—®çš„æºåœ°å€ï¼›</li><li>Access-Control-Allow-Methodsï¼šå…è®¸è®¿é—®çš„è¯·æ±‚æ–¹æ³•ï¼›</li><li>Access-Control-Allow-Headersï¼šå…è®¸è®¿é—®çš„è¯·æ±‚å¤´ï¼›</li><li>Access-Control-Allow-Credentialsï¼šæ˜¯å¦å…è®¸å‘é€ Cookie ç­‰èº«ä»½å‡­è¯ï¼›</li><li>Access-Control-Max-Ageï¼šç¼“å­˜é¢„æ£€è¯·æ±‚çš„æ—¶é—´ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>); <span class="comment">// 1 è®¾ç½®è®¿é—®æºåœ°å€</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>); <span class="comment">// 2 è®¾ç½®è®¿é—®æºè¯·æ±‚å¤´</span></span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>); <span class="comment">// 3 è®¾ç½®è®¿é—®æºè¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration); <span class="comment">// 4 å¯¹æ¥å£é…ç½®è·¨åŸŸè®¾ç½®</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Javaå®ç°Result"><a href="#Javaå®ç°Result" class="headerlink" title="Javaå®ç°Result"></a>Javaå®ç°Result</h2><p>Result: Resultç±»çš„ç¼–å†™æ–¹å¼ï¼Œæœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯ä¸ºäº†å‘å‰ç«¯å‘é€æ•°æ®çš„æ—¶å€™èƒ½å¤Ÿæ›´é«˜æ•ˆå¿«æ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.commen.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span> <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span> <span class="comment">//å…¨å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;success&quot;</span>,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data,String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,message,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">201</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(Integer code)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(Integer code,String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">fail</span><span class="params">(String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">201</span>,message,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å®ç°è‡ªåŠ¨å¡«è£…åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´-å·¥å…·ç±»"><a href="#å®ç°è‡ªåŠ¨å¡«è£…åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´-å·¥å…·ç±»" class="headerlink" title="å®ç°è‡ªåŠ¨å¡«è£…åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´(å·¥å…·ç±»)"></a>å®ç°è‡ªåŠ¨å¡«è£…åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´(å·¥å…·ç±»)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span> <span class="comment">//æ—¥å¿—</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//ä»¥ç»„ä»¶çš„å½¢å¼æŠŠè¿™ä¸ªå¤„ç†å™¨æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’å…¥æ—¶å¯åŠ¨  ç¬¬ä¸‰ä¸ªå‚æ•° LocalDateTime ä¸€å®šè¦å’Œ createTimeæˆå‘˜å˜é‡çš„å€¼çš„ç±»å‹ä¸€è‡´ï¼Œä¸ç„¶æ˜¯null å¦‚æœæ˜¯dateå°±éƒ½è®¾ç½®date</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨èä½¿ç”¨)</span></span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨è)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°æ—¶å€™å¯åŠ¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now()); <span class="comment">// èµ·å§‹ç‰ˆæœ¬ 3.3.0(æ¨è)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> owc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-11-03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;o_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value = &quot;userId&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT ,value = &quot;create_time&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE ,value = &quot;update_time&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨æœåŠ¡ WEB è®¿é—®ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8888</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">123qwe</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test1?characterEncoding=UTF-8&amp;useSSL=false&amp;useUnicode=true</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.ouwen:</span> <span class="string">info</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">o_</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h2 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--setttings:æ§åˆ¶mybatiså…¨å±€é…ç½®è¡Œä¸º--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®mybatisè¾“å‡ºæ—¥å¿—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼€å¯é©¼å³°å‘½åè½¬æ¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç¯å¢ƒé…ç½®ï¼šæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--defaultï¼šä¸­é…ç½®çš„å€¼éœ€è¦å’ŒæŸä¸ªenvironmenté…ç½®çš„idç›¸åŒï¼Œ</span></span><br><span class="line"><span class="comment">        é€šçŸ¥mybatisä½¿ç”¨å…·ä½“å“ªä¸€ä¸ªæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼Œå³å…·ä½“è®¿é—®å¯¹åº”çš„æ•°æ®åº“--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--environment:ä¸€ä¸ªæ•°æ®åº“ä¿¡æ¯çš„é…ç½®ï¼Œç¯å¢ƒ--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--idå±æ€§ï¼šä¸€ä¸ªå”¯ä¸€å€¼ï¼Œè‡ªå®šä¹‰ï¼Œè¡¨ç¤ºç¯å¢ƒçš„åç§°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--transactionManagerå±æ€§ï¼šmybatisçš„äº‹åŠ¡ç±»å‹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--dataSoureå±æ€§ï¼šä»£è¡¨æ•°æ®æºï¼Œè¿æ¥æ•°æ®åº“--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--typeå±æ€§:JDBC è¡¨ç¤ºä½¿ç”¨çš„æ˜¯ä½¿ç”¨è¿æ¥æ± çš„æ•°æ®æº--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--é…ç½®é©±åŠ¨--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--é…ç½®è¿æ¥æ•°æ®åº“çš„urlå­—ç¬¦ä¸²--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--é…ç½®è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--é…ç½®è¿æ¥æ•°æ®åº“çš„å¯†ç --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123qwe&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--sqlæ˜ å°„æ–‡ä»¶æ ‡ç­¾--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--reourceï¼šä»ç±»è·¯å¾„å¼€å§‹çš„è·¯å¾„ä¿¡æ¯ï¼štarget/clasess(ç±»è·¯å¾„)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/**.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="CodeGenerator"><a href="#CodeGenerator" class="headerlink" title="CodeGenerator"></a>CodeGenerator</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springmvc.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.OutputFile;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DbColumnType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Types;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql:///test1&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123qwe&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">moduleName</span> <span class="operator">=</span> <span class="string">&quot;demo&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mapperLocation</span> <span class="operator">=</span> <span class="string">&quot;C:\\Users\\DIO\\Desktop\\å¤§å­¦\\å¤§ä¸‰ä¸Š\\é¢å‘å¯¹è±¡\\Spring MVC\\demo\\src\\main\\resources\\mapper\\&quot;</span> + moduleName;</span><br><span class="line">        <span class="type">String</span> <span class="variable">tables</span> <span class="operator">=</span> <span class="string">&quot;o_user&quot;</span>;</span><br><span class="line">        FastAutoGenerator.create(url, username, password)</span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.author(<span class="string">&quot;owc&quot;</span>) <span class="comment">// è®¾ç½®ä½œè€…</span></span><br><span class="line">                            <span class="comment">//.enableSwagger() // å¼€å¯ swagger æ¨¡å¼</span></span><br><span class="line">                            <span class="comment">//.fileOverride() // è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">                            .outputDir(<span class="string">&quot;C:\\Users\\DIO\\Desktop\\å¤§å­¦\\å¤§ä¸‰ä¸Š\\é¢å‘å¯¹è±¡\\Spring MVC\\demo\\src\\main\\java&quot;</span>); <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .dataSourceConfig(builder -&gt; builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">typeCode</span> <span class="operator">=</span> metaInfo.getJdbcType().TYPE_CODE;</span><br><span class="line">                    <span class="keyword">if</span> (typeCode == Types.SMALLINT) &#123;</span><br><span class="line">                        <span class="comment">// è‡ªå®šä¹‰ç±»å‹è½¬æ¢</span></span><br><span class="line">                        <span class="keyword">return</span> DbColumnType.INTEGER;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> typeRegistry.getColumnType(metaInfo);</span><br><span class="line"></span><br><span class="line">                &#125;))</span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.springmvc&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                            .moduleName(moduleName) <span class="comment">// è®¾ç½®çˆ¶åŒ…æ¨¡å—å</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.xml, mapperLocation)); <span class="comment">// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.addInclude(tables) <span class="comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å</span></span><br><span class="line">                            .addTablePrefix(<span class="string">&quot;o_&quot;</span>); <span class="comment">// è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .templateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>()) <span class="comment">// ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¾·é²ä¼Š è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatisplus--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ  æ¨¡æ¿å¼•æ“ ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.microsoft.sqlserver<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mssql-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- springbootæµ‹è¯•ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Javaå®ç°è·¨åŸŸæ–¹å¼&quot;&gt;&lt;a href=&quot;#Javaå®ç°è·¨åŸŸæ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;Javaå®ç°è·¨åŸŸæ–¹å¼&quot;&gt;&lt;/a&gt;Javaå®ç°è·¨åŸŸæ–¹å¼&lt;/h2&gt;&lt;p&gt;ä¸€ã€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å®šä¹‰&lt;/p</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Mybatis" scheme="https://dont-sleep-so-late.github.io/tags/Mybatis/"/>
    
    <category term="SpringBoot" scheme="https://dont-sleep-so-late.github.io/tags/SpringBoot/"/>
    
    <category term="SpringMVC" scheme="https://dont-sleep-so-late.github.io/tags/SpringMVC/"/>
    
    <category term="MybatisPlus" scheme="https://dont-sleep-so-late.github.io/tags/MybatisPlus/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/05/SpringBoot%E7%AC%94%E8%AE%B0/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/05/SpringBoot%E7%AC%94%E8%AE%B0/</id>
    <published>2023-11-04T18:00:34.000Z</published>
    <updated>2023-11-13T15:09:27.281Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Spring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•"><a href="#Spring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•" class="headerlink" title="Spring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•"></a>Spring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•</h2><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ System.out.println() æ¥æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œä½†æ˜¯è¿™æ ·ä¸å¥½ï¼Œå› ä¸ºå¤§é‡çš„ä½¿ç”¨ System.out ä¼šå¢åŠ èµ„æºçš„æ¶ˆè€—ã€‚æˆ‘ä»¬å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ slf4j çš„ logback æ¥è¾“å‡ºæ—¥å¿—ï¼Œæ•ˆç‡æŒºé«˜çš„ï¼ŒSpring Boot æä¾›äº†ä¸€å¥—æ—¥å¿—ç³»ç»Ÿï¼Œlogback æ˜¯æœ€ä¼˜çš„é€‰æ‹©ã€‚</p><p><strong>1.ç®€ä»‹</strong><br>å®˜ç½‘ï¼š<a href="https://www.slf4j.org/manual.html">https://www.slf4j.org/manual.html</a><br>(1)ç®€å•æ—¥è®°é—¨é¢(simple logging Facade for Java)SLF4Jæ˜¯ä¸ºå„ç§loging APIsæä¾›ä¸€ä¸ªç®€å•ç»Ÿä¸€çš„æ¥å£ã€‚</p><p>(2)slf4jå¹¶ä¸æ˜¯ä¸€ç§å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿï¼Œè€Œæ˜¯ä¸€ä¸ªç”¨æˆ·æ—¥å¿—ç³»ç»Ÿçš„facadeã€‚</p><p>(3)åœ¨éƒ¨ç½²æ—¶ï¼Œé€‰æ‹©ä¸åŒçš„æ—¥å¿—ç³»ç»ŸåŒ…ï¼Œå³å¯è‡ªåŠ¨è½¬æ¢åˆ°ä¸åŒçš„æ—¥å¿—ç³»ç»Ÿä¸Šã€‚<br>å¦‚ï¼šé€‰æ‹©JDKè‡ªå¸¦çš„æ—¥å¿—ç³»ç»Ÿï¼Œåˆ™åªéœ€è¦å°†slf4j-api-XXX.jarå’Œslf4j-jdkXXX.jaræ”¾ç½®åˆ°classpathä¸­å³å¯ï¼Œè‹¥æƒ³æ¢æˆlog4jçš„æ—¥å¿—ç³»ç»Ÿï¼Œä»…éœ€è¦ç”¨slf4j-log4jXXx.jaræ›¿æ¢slf4j-jdkXXX.jarå³å¯</p><p>(4)slf4jå’Œlog4jæ¯”è¾ƒ:<br>â‘ log4jçœ‹æˆæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ—¥å¿—åº“ï¼›è€Œslf4jæ˜¯ä¸€ä¸ªæ—¥å¿—åº“çš„è§„èŒƒæ¥å£,å¯ä»¥æ ¹æ®ä¸åŒçš„æ—¥å¿—åŒ…ä½¿ç”¨ä¸åŒçš„æ—¥å¿—åº“ã€‚<br>â‘¡æ—¥å¿—ä¸­éœ€è¦ä¼ å…¥å‚æ•°æ—¶ï¼Œlog4jä¸€èˆ¬æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥çš„æ–¹å¼;<br>slf4jä½¿ç”¨å ä½ç¬¦ï¼Œæ¯”å­—ç¬¦ä¸²æ‹¼æ¥æ›´åŠ é«˜æ•ˆã€‚å¦‚logger.error(â€œsqlä¸º {} â€œ,sql)ã€‚</p><p>(5)slf4jæ—¥å¿—çº§åˆ«<br>Slf4jæ—¥å¿—çº§åˆ«,çº§åˆ«ç”±ä½åˆ°é«˜ï¼Œè®¾ç½®çš„çº§åˆ«çº¦ä½ï¼Œæ‰“å°çš„æ—¥å¿—è¶Šå¤š<br>â‘ trace: ä¸€èˆ¬ä¸ä¼šä½¿ç”¨ï¼Œåœ¨æ—¥å¿—é‡Œè¾¹ä¹Ÿä¸ä¼šæ‰“å°å‡ºæ¥ï¼Œæœ€ä½çš„ä¸€ä¸ªæ—¥å¿—çº§åˆ«ã€‚<br>â‘¡debug: ä¸€èˆ¬æ”¾äºç¨‹åºçš„æŸä¸ªå…³é”®ç‚¹çš„åœ°æ–¹ï¼Œç”¨äºæ‰“å°ä¸€ä¸ªå˜é‡å€¼æˆ–è€…ä¸€ä¸ªæ–¹æ³•è¿”å›çš„ä¿¡æ¯ä¹‹ç±»çš„ä¿¡æ¯<br>â‘¢info ä¸€èˆ¬å¤„ç†ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ä½¿ç”¨ï¼Œå°±è·Ÿ system.erræ‰“å°ä¸€æ ·ï¼Œç”¨äºè¯´æ˜æ­¤å¤„æ˜¯å¹²ä»€ä¹ˆçš„ã€‚<br>â‘£warnï¼šè­¦å‘Šï¼Œä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„ã€‚<br>â‘¤errorï¼š ç”¨æˆ·ç¨‹åºæŠ¥é”™ï¼Œå¿…é¡»è§£å†³çš„æ—¶å€™ä½¿ç”¨æ­¤çº§åˆ«æ‰“å°æ—¥å¿—ã€‚</p><h3 id="2-ä½¿ç”¨æ•™ç¨‹"><a href="#2-ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="2.ä½¿ç”¨æ•™ç¨‹"></a>2.ä½¿ç”¨æ•™ç¨‹</h3><p>å®˜ç½‘ä¸Šæœ€æ–°ç¨³å®šç‰ˆæ˜¯1.7.32ï¼Œå‰é˜µå­log4jå‡ºé‡å¤§æ¼æ´äº†ï¼Œè¿™é‡Œæˆ‘ä»¬é…åˆlogbackï¼ˆlog4jçš„æ”¹è‰¯ç‰ˆï¼Œæ€§èƒ½æ›´å¥½ï¼‰ä½¿ç”¨ã€‚<br><strong>(1)åœ¨pom.xmlå¼•å…¥ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--slf4jä¾èµ–--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- logback ä¾èµ– --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>(2)åœ¨springBooté¡¹ç›®ä¸­æ·»åŠ ä¸€æ®µcontrollerä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springtest.controller;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VisualController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(VisualController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/test&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;fucking good&quot;</span>;</span><br><span class="line">        logger.info(<span class="string">&quot;slf4j print info msg:&#123;&#125;&quot;</span>,msg);</span><br><span class="line">        logger.debug(<span class="string">&quot;slf4j print debug msg:&#123;&#125;&quot;</span>,msg);</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé€šè¿‡<a href="http://localhost:8080/test%E8%AE%BF%E9%97%AE%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E5%A6%82%E4%B8%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0info%E7%9A%84%E8%BE%93%E5%87%BA%E4%BA%86%EF%BC%8Cdebug%E6%B2%A1%E6%9C%89%EF%BC%8C%E5%9B%A0%E4%B8%BAspringboot%E5%86%85%E9%83%A8%E9%9B%86%E6%88%90%E4%BA%86slf4j%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AFinfo%E7%BA%A7%E5%88%AB%EF%BC%9A">http://localhost:8080/testè®¿é—®å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°infoçš„è¾“å‡ºäº†ï¼Œdebugæ²¡æœ‰ï¼Œå› ä¸ºspringbootå†…éƒ¨é›†æˆäº†slf4jï¼Œé»˜è®¤æ˜¯infoçº§åˆ«ï¼š</a></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105020845.png"></p><p><strong>(3)åªåœ¨æ§åˆ¶å°æ‰“å°ï¼Œapplication.ymlæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># slf4jæ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="comment"># é…ç½®çº§åˆ«</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">info</span></span><br><span class="line">    <span class="comment">#åˆ†åŒ…é…ç½®çº§åˆ«ï¼Œå³ä¸åŒçš„ç›®å½•ä¸‹å¯ä»¥ä½¿ç”¨ä¸åŒçš„çº§åˆ«</span></span><br><span class="line">    <span class="attr">com.example.springtest.controller:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><p>æ”¹å®Œä¹‹åå‘ç°è¾“å‡ºå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021025.png"></p><p>åœ¨resourceä¸‹æ–°å»ºlogback.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--infoæ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO_FILE&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ç›¸å¯¹è·¯å¾„å’Œåç§°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">file</span>&gt;</span>./apilogs/info/xxxx_-$&#123;HOSTNAME&#125;.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å¤§å°æ¥æ»šåŠ¨ï¼ˆå³åˆ›å»ºæ–°çš„ï¼‰æ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>./apilogs/info/archive/xxxx_-$&#123;HOSTNAME&#125;-%d.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åªä¿ç•™æœ€è¿‘30å¤©çš„æ—¥å¿—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¶…è¿‡10MBä¾¿ä¼šæ»šåŠ¨æ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼‚æ­¥å¤„ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC_INFO_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--debugæ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG_FILE&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ç›¸å¯¹è·¯å¾„å’Œåç§°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">file</span>&gt;</span>./apilogs/debug/xxxx_-$&#123;HOSTNAME&#125;.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å¤§å°æ¥æ»šåŠ¨ï¼ˆå³åˆ›å»ºæ–°çš„ï¼‰æ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>./apilogs/debug/archive/xxxx_-$&#123;HOSTNAME&#125;-%d.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åªä¿ç•™æœ€è¿‘30å¤©çš„æ—¥å¿—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¶…è¿‡10MBä¾¿ä¼šæ»šåŠ¨æ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼‚æ­¥å¤„ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC_DEBUG_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ§åˆ¶å°è¾“å‡º--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%date %level [%thread] %logger&#123;10&#125; [%file:%line] %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼‚æ­¥å¤„ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--åœ¨infoçº§åˆ«ä¸‹ï¼Œå°†åŒ…åæ‰€åœ¨org.springframeworkçš„æ—¥å¿—å…¨éƒ¨æ‰“å°åˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--additivityè¢«è®¾ç½®ä¸º&#x27;false&#x27;ï¼Œè¿™æ„å‘³ç€æ—¥å¿—äº‹ä»¶ä¸ä¼šä¼ é€’ç»™çˆ¶çº§è®°å½•å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--åœ¨debugçº§åˆ«ä¸‹ï¼Œä¼šæ‰“å°è®°å½•sqlçš„ç›¸å…³æ—¥å¿—ï¼Œå°†åŒ…åä¸ºorg.apache.ibatisä¸‹çš„æ—¥å¿—è¾“å‡ºåˆ°debugæ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC_DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ‰€æœ‰ä¸šåŠ¡ç›¸å…³çš„infoæ—¥å¿—ï¼Œæ‰“å°åˆ°æ§åˆ¶å°ï¼Œå¹¶è¾“å‡ºåˆ°infoæ—¥å¿—æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC-STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ASYNC_INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ§åˆ¶å°å’Œæ—¥å¿—æ–‡ä»¶éƒ½æˆåŠŸè¾“å‡ºäº†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021058.png"></p><h3 id="3-å¸¸è§æŠ¥é”™è§£å†³ï¼ˆæŒç»­æ›´æ–°ï¼‰"><a href="#3-å¸¸è§æŠ¥é”™è§£å†³ï¼ˆæŒç»­æ›´æ–°ï¼‰" class="headerlink" title="3.å¸¸è§æŠ¥é”™è§£å†³ï¼ˆæŒç»­æ›´æ–°ï¼‰"></a>3.å¸¸è§æŠ¥é”™è§£å†³ï¼ˆæŒç»­æ›´æ–°ï¼‰</h3><p>(1)ymlé…ç½®æŠ¥é”™å¦‚ï¼š<br>â€œFailed to bind properties under â€˜logging.levelâ€™â€<br>å¯èƒ½è·Ÿç‰ˆæœ¬æœ‰å…³ï¼Œå‚è€ƒymlé…ç½®ä¸Šé¢çš„ä½¿ç”¨æ•™ç¨‹çš„ç¬¬(3)æ­¥</p><p>(2)å¯åŠ¨æ—¶æŠ¥é”™ï¼š<br>â€œclass path contains multiple slf4j bindings<br>found binding in â€¦â€<br>ä¸è¦å¿½è§†è¿™ç§è­¦å‘Šï¼Œè‹¥æœ‰å¤šä¸ªjaråŒ…ç±»å†²çªï¼Œéœ€è¦æŠŠåŠ è½½jaråŒ…é¡ºåºè°ƒæ•´ï¼Œæ­£ç¡®çš„é‚£ä¸ªï¼Œæ¯”å¦‚slf4j-log4j12jaråŒ…æ”¾åœ¨æœ€ä¸Šé¢ã€‚</p><hr><h2 id="Spring-Bootä¸­çš„MVCæ”¯æŒ"><a href="#Spring-Bootä¸­çš„MVCæ”¯æŒ" class="headerlink" title="Spring Bootä¸­çš„MVCæ”¯æŒ"></a>Spring Bootä¸­çš„MVCæ”¯æŒ</h2><p>Spring Boot çš„ MVC æ”¯æŒä¸»è¦æ¥ä»‹ç»å®é™…é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£ï¼ŒåŒ…æ‹¬ <code>@RestController</code>ã€ <code>@RequestMapping</code>ã€<code>@PathVariable</code>ã€<code>@RequestParam</code> ä»¥åŠ <code>@RequestBody</code>ã€‚</p><h3 id="1-RestController"><a href="#1-RestController" class="headerlink" title="1. @RestController"></a>1. @RestController</h3><p><code>@RestController</code> æ˜¯ Spring Boot æ–°å¢çš„ä¸€ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯¥æ³¨è§£éƒ½åŒ…å«äº†å“ªäº›ä¸œè¥¿ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RestController &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œ <code>@RestController</code> æ³¨è§£åŒ…å«äº†åŸæ¥çš„ <code>@Controller</code> å’Œ <code>@ResponseBody</code> æ³¨è§£ï¼Œä½¿ç”¨è¿‡ Spring çš„æœ‹å‹å¯¹ <code>@Controller</code> æ³¨è§£å·²ç»éå¸¸äº†è§£äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œ <code>@ResponseBody</code> æ³¨è§£æ˜¯å°†è¿”å›çš„æ•°æ®ç»“æ„è½¬æ¢ä¸º Json æ ¼å¼ã€‚æ‰€ä»¥ <code>@RestController</code> å¯ä»¥çœ‹ä½œæ˜¯ <code>@Controller</code> å’Œ <code>@ResponseBody</code> çš„ç»“åˆä½“ï¼Œç›¸å½“äºå·ä¸ªæ‡’ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@RestController</code> ä¹‹åå°±ä¸ç”¨å†ä½¿ç”¨ <code>@Controller</code> äº†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæ˜¯å‰åç«¯åˆ†ç¦»ï¼Œä¸ç”¨æ¨¡æ¿æ¸²æŸ“çš„è¯ï¼Œæ¯”å¦‚ Thymeleafï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨<code>@RestController</code> å°†æ•°æ®ä»¥ json æ ¼å¼ä¼ ç»™å‰ç«¯ï¼Œå‰ç«¯æ‹¿åˆ°ä¹‹åè§£æï¼›ä½†å¦‚æœä¸æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œéœ€è¦ä½¿ç”¨æ¨¡æ¿æ¥æ¸²æŸ“çš„è¯ï¼Œä¸€èˆ¬ Controller ä¸­éƒ½ä¼šè¿”å›åˆ°å…·ä½“çš„é¡µé¢ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¸èƒ½ä½¿ç”¨<code>@RestController</code>äº†ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;user&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®æ˜¯éœ€è¦è¿”å›åˆ° user.html é¡µé¢çš„ï¼Œå¦‚æœä½¿ç”¨ <code>@RestController</code> çš„è¯ï¼Œä¼šå°† user ä½œä¸ºå­—ç¬¦ä¸²è¿”å›çš„ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>@Controller</code> æ³¨è§£ã€‚è¿™åœ¨ä¸‹ä¸€èŠ‚ Spring Boot é›†æˆ Thymeleaf æ¨¡æ¿å¼•æ“ä¸­ä¼šå†è¯´æ˜ã€‚</p><h3 id="2-RequestMapping"><a href="#2-RequestMapping" class="headerlink" title="2. @RequestMapping"></a>2. @RequestMapping</h3><p><code>@RequestMapping</code> æ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå®ƒå¯ä»¥ç”¨äºç±»ä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨äºæ–¹æ³•ä¸Šã€‚åœ¨ç±»çš„çº§åˆ«ä¸Šçš„æ³¨è§£ä¼šå°†ä¸€ä¸ªç‰¹å®šè¯·æ±‚æˆ–è€…è¯·æ±‚æ¨¡å¼æ˜ å°„åˆ°ä¸€ä¸ªæ§åˆ¶å™¨ä¹‹ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ï¼›åœ¨æ–¹æ³•çš„çº§åˆ«è¡¨ç¤ºè¿›ä¸€æ­¥æŒ‡å®šåˆ°å¤„ç†æ–¹æ³•çš„æ˜ å°„å…³ç³»ã€‚</p><p>è¯¥æ³¨è§£æœ‰6ä¸ªå±æ€§ï¼Œä¸€èˆ¬åœ¨é¡¹ç›®ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€method å’Œ producesã€‚</p><ul><li><p>value å±æ€§ï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼Œvalue å¯ä»¥çœç•¥ä¸å†™</p></li><li><p>method å±æ€§ï¼šæŒ‡å®šè¯·æ±‚çš„ç±»å‹ï¼Œä¸»è¦æœ‰ GETã€PUTã€POSTã€DELETEï¼Œé»˜è®¤ä¸º GET</p></li><li><p>produceså±æ€§ï¼šæŒ‡å®šè¿”å›å†…å®¹ç±»å‹ï¼Œå¦‚ produces &#x3D; â€œapplication&#x2F;json; charset&#x3D;UTF-8â€</p></li></ul><p><code>@RequestMapping</code> æ³¨è§£æ¯”è¾ƒç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/test&quot;, produces = &quot;application/json; charset=UTF-8&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/get&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¾ˆç®€å•ï¼Œå¯åŠ¨é¡¹ç›®åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/test/get</code> æµ‹è¯•ä¸€ä¸‹å³å¯ã€‚</p><p>é’ˆå¯¹å››ç§ä¸åŒçš„è¯·æ±‚æ–¹å¼ï¼Œæ˜¯æœ‰ç›¸åº”æ³¨è§£çš„ï¼Œä¸ç”¨æ¯æ¬¡åœ¨ <code>@RequestMapping</code> æ³¨è§£ä¸­åŠ  method å±æ€§æ¥æŒ‡å®šï¼Œä¸Šé¢çš„ GET æ–¹å¼è¯·æ±‚å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>@GetMapping(&quot;/get&quot;)</code> æ³¨è§£ï¼Œæ•ˆæœä¸€æ ·ã€‚ç›¸åº”åœ°ï¼ŒPUT æ–¹å¼ã€POST æ–¹å¼å’Œ DELETE æ–¹å¼å¯¹åº”çš„æ³¨è§£åˆ†åˆ«ä¸º <code>@PutMapping</code>ã€<code>@PostMapping</code> å’Œ <code>DeleteMapping</code>ã€‚</p><h3 id="3-PathVariable"><a href="#3-PathVariable" class="headerlink" title="3. @PathVariable"></a>3. @PathVariable</h3><p><code>@PathVariable</code> æ³¨è§£ä¸»è¦æ˜¯ç”¨æ¥è·å– url å‚æ•°ï¼ŒSpring Boot æ”¯æŒ restfull é£æ ¼çš„ urlï¼Œæ¯”å¦‚ä¸€ä¸ª GET è¯·æ±‚æºå¸¦ä¸€ä¸ªå‚æ•° id è¿‡æ¥ï¼Œæˆ‘ä»¬å°† id ä½œä¸ºå‚æ•°æ¥æ”¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@PathVariable</code> æ³¨è§£ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„idä¸ºï¼š&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæƒ³è¦ url ä¸­å ä½ç¬¦ä¸­çš„ id å€¼ç›´æ¥èµ‹å€¼åˆ°å‚æ•° id ä¸­ï¼Œéœ€è¦ä¿è¯ url ä¸­çš„å‚æ•°å’Œæ–¹æ³•æ¥æ”¶å‚æ•°ä¸€è‡´ï¼Œå¦åˆ™å°±æ— æ³•æ¥æ”¶ã€‚å¦‚æœä¸ä¸€è‡´çš„è¯ï¼Œå…¶å®ä¹Ÿå¯ä»¥è§£å†³ï¼Œéœ€è¦ç”¨ <code>@PathVariable</code> ä¸­çš„ value å±æ€§æ¥æŒ‡å®šå¯¹åº”å…³ç³»ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user/&#123;idd&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(value = &quot;idd&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„idä¸ºï¼š&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºè®¿é—®çš„ urlï¼Œå ä½ç¬¦çš„ä½ç½®å¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼Œä¸ä¸€å®šéè¦åœ¨æœ€åï¼Œæ¯”å¦‚è¿™æ ·ä¹Ÿè¡Œï¼š<code>/xxx/&#123;id&#125;/user</code>ã€‚å¦å¤–ï¼Œurl ä¹Ÿæ”¯æŒå¤šä¸ªå ä½ç¬¦ï¼Œæ–¹æ³•å‚æ•°ä½¿ç”¨åŒæ ·æ•°é‡çš„å‚æ•°æ¥æ¥æ”¶ï¼ŒåŸç†å’Œä¸€ä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user/&#123;idd&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(value = &quot;idd&quot;)</span> Integer id, <span class="meta">@PathVariable</span> String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„idä¸ºï¼š&quot;</span> + id);</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„nameä¸ºï¼š&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œé¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ <code>localhost:8080/test/user/2/zhangsan</code> å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å–åˆ°çš„idä¸ºï¼š2</span><br><span class="line">è·å–åˆ°çš„nameä¸ºï¼šzhangsan</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ”¯æŒå¤šä¸ªå‚æ•°çš„æ¥æ”¶ã€‚åŒæ ·åœ°ï¼Œå¦‚æœ url ä¸­çš„å‚æ•°å’Œæ–¹æ³•ä¸­çš„å‚æ•°åç§°ä¸åŒçš„è¯ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ value å±æ€§æ¥ç»‘å®šä¸¤ä¸ªå‚æ•°ã€‚</p><h3 id="4-RequestParam"><a href="#4-RequestParam" class="headerlink" title="4. @RequestParam"></a>4. @RequestParam</h3><p><code>@RequestParam</code> æ³¨è§£é¡¾åæ€ä¹‰ï¼Œä¹Ÿæ˜¯è·å–è¯·æ±‚å‚æ•°çš„ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† <code>@PathValiable</code> æ³¨è§£ä¹Ÿæ˜¯è·å–è¯·æ±‚å‚æ•°çš„ï¼Œé‚£ä¹ˆ <code>@RequestParam</code> å’Œ <code>@PathVariable</code> æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿä¸»è¦åŒºåˆ«åœ¨äºï¼š <code>@PathValiable</code> æ˜¯ä» url æ¨¡æ¿ä¸­è·å–å‚æ•°å€¼ï¼Œ å³è¿™ç§é£æ ¼çš„ urlï¼š<code>http://localhost:8080/user/&#123;id&#125;</code> ï¼›è€Œ <code>@RequestParam</code> æ˜¯ä» request é‡Œé¢è·å–å‚æ•°å€¼ï¼Œå³è¿™ç§é£æ ¼çš„ urlï¼š<code>http://localhost:8080/user?id=1</code> ã€‚æˆ‘ä»¬ä½¿ç”¨è¯¥ url å¸¦ä¸Šå‚æ•° id æ¥æµ‹è¯•ä¸€ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„idä¸ºï¼š&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ­£å¸¸ä»æ§åˆ¶å°æ‰“å°å‡º id ä¿¡æ¯ã€‚åŒæ ·åœ°ï¼Œurl ä¸Šé¢çš„å‚æ•°å’Œæ–¹æ³•çš„å‚æ•°éœ€è¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ value å±æ€§æ¥è¯´æ˜ï¼Œæ¯”å¦‚ url ä¸ºï¼š<code>http://localhost:8080/user?idd=1</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;idd&quot;, required = false)</span> Integer id)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„idä¸ºï¼š&quot;</span> + id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº† value å±æ€§å¤–ï¼Œè¿˜æœ‰ä¸ªä¸¤ä¸ªå±æ€§æ¯”è¾ƒå¸¸ç”¨ï¼š</p><ul><li><p>required å±æ€§ï¼štrue è¡¨ç¤ºè¯¥å‚æ•°å¿…é¡»è¦ä¼ ï¼Œå¦åˆ™å°±ä¼šæŠ¥ 404 é”™è¯¯ï¼Œfalse è¡¨ç¤ºå¯æœ‰å¯æ— ã€‚</p></li><li><p>defaultValue å±æ€§ï¼šé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰åŒåå‚æ•°æ—¶çš„é»˜è®¤å€¼ã€‚</p></li></ul><p>ä» url ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>@RequestParam</code> æ³¨è§£ç”¨äº GET è¯·æ±‚ä¸Šæ—¶ï¼Œæ¥æ”¶æ‹¼æ¥åœ¨ url ä¸­çš„å‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ³¨è§£è¿˜å¯ä»¥ç”¨äº POST è¯·æ±‚ï¼Œæ¥æ”¶å‰ç«¯è¡¨å•æäº¤çš„å‚æ•°ï¼Œå‡å¦‚å‰ç«¯é€šè¿‡è¡¨å•æäº¤ username å’Œ password ä¸¤ä¸ªå‚æ•°ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@RequestParam</code> æ¥æ¥æ”¶ï¼Œç”¨æ³•å’Œä¸Šé¢ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/form1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForm</span><span class="params">(<span class="meta">@RequestParam</span> String username, <span class="meta">@RequestParam</span> String password)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„usernameä¸ºï¼š&quot;</span> + username);</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„passwordä¸ºï¼š&quot;</span> + password);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨ postman æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¡¨å•æäº¤ï¼Œæµ‹è¯•ä¸€ä¸‹æ¥å£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021854.png"></p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœè¡¨å•æ•°æ®å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨åå°æ–¹æ³•ä¸­å†™ä¸Šå¾ˆå¤šå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°è¿˜è¦ <code>@RequestParam</code> æ³¨è§£ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªå®ä½“ç±»æ¥æ¥æ”¶è¿™äº›å‚æ•°ï¼Œå®ä½“ä¸­çš„å±æ€§åå’Œè¡¨å•ä¸­çš„å‚æ•°åä¸€è‡´å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å®ä½“æ¥æ”¶çš„è¯ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å‰é¢åŠ  <code>@RequestParam</code> æ³¨è§£äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/form2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForm</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„usernameä¸ºï¼š&quot;</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">&quot;è·å–åˆ°çš„passwordä¸ºï¼š&quot;</span> + user.getPassword());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ postman å†æ¬¡æµ‹è¯•ä¸€ä¸‹è¡¨å•æäº¤ï¼Œè§‚å¯Ÿä¸€ä¸‹è¿”å›å€¼å’Œæ§åˆ¶å°æ‰“å°å‡ºçš„æ—¥å¿—å³å¯ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯å°è£…ä¸€ä¸ªå®ä½“ç±»æ¥æ¥æ”¶è¡¨å•æ•°æ®ï¼Œå› ä¸ºå®é™…é¡¹ç›®ä¸­è¡¨å•æ•°æ®ä¸€èˆ¬éƒ½å¾ˆå¤šã€‚</p><h3 id="5-RequestBody"><a href="#5-RequestBody" class="headerlink" title="5. @RequestBody"></a>5. @RequestBody</h3><p><code>@RequestBody</code> æ³¨è§£ç”¨äºæ¥æ”¶å‰ç«¯ä¼ æ¥çš„å®ä½“ï¼Œæ¥æ”¶å‚æ•°ä¹Ÿæ˜¯å¯¹åº”çš„å®ä½“ï¼Œæ¯”å¦‚å‰ç«¯é€šè¿‡ json æäº¤ä¼ æ¥ä¸¤ä¸ªå‚æ•° username å’Œ passwordï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨åç«¯å°è£…ä¸€ä¸ªå®ä½“æ¥æ¥æ”¶ã€‚åœ¨ä¼ é€’çš„å‚æ•°æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>@RequestBody</code> æ¥æ”¶ä¼šéå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„usernameä¸ºï¼š&quot;</span> + user.getUsername());</span><br><span class="line">System.out.println(<span class="string">&quot;è·å–åˆ°çš„passwordä¸ºï¼š&quot;</span> + user.getPassword());</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨ postman å·¥å…·æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼Œæ‰“å¼€ postmanï¼Œç„¶åè¾“å…¥è¯·æ±‚åœ°å€å’Œå‚æ•°ï¼Œå‚æ•°æˆ‘ä»¬ç”¨ json æ¥æ¨¡æ‹Ÿï¼Œå¦‚ä¸‹å›¾æ‰€æœ‰ï¼Œè°ƒç”¨ä¹‹åè¿”å› successã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231105021959.png"></p><p>åŒæ—¶çœ‹ä¸€ä¸‹åå°æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å–åˆ°çš„usernameä¸ºï¼šå€ªå‡æ­¦</span><br><span class="line">è·å–åˆ°çš„passwordä¸ºï¼š123456</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œ<code>@RequestBody</code> æ³¨è§£ç”¨äº POST è¯·æ±‚ä¸Šï¼Œæ¥æ”¶ json å®ä½“å‚æ•°ã€‚å®ƒå’Œä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„è¡¨å•æäº¤æœ‰ç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡å‚æ•°çš„æ ¼å¼ä¸åŒï¼Œä¸€ä¸ªæ˜¯ json å®ä½“ï¼Œä¸€ä¸ªæ˜¯è¡¨å•æäº¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ³¨è§£å³å¯ã€‚</p><h3 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h3><p>æœ¬èŠ‚è¯¾ä¸»è¦è®²è§£äº† Spring Boot ä¸­å¯¹ MVC çš„æ”¯æŒï¼Œåˆ†æäº† <code>@RestController</code>ã€ <code>@RequestMapping</code>ã€<code>@PathVariable</code>ã€ <code>@RequestParam</code> å’Œ <code>@RequestBody</code> å››ä¸ªæ³¨è§£çš„ä½¿ç”¨æ–¹å¼ï¼Œç”±äº <code>@RestController</code> ä¸­é›†æˆäº† <code>@ResponseBody</code> æ‰€ä»¥å¯¹è¿”å› json çš„æ³¨è§£ä¸å†èµ˜è¿°ã€‚ä»¥ä¸Šå››ä¸ªæ³¨è§£æ˜¯ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„æ³¨è§£ï¼Œåœ¨æ‰€æœ‰çš„å®é™…é¡¹ç›®ä¸­åŸºæœ¬éƒ½ä¼šé‡åˆ°ï¼Œè¦ç†Ÿç»ƒæŒæ¡ã€‚</p><hr><p>Spring Boot ä¸­é›†æˆRedis</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Spring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•&quot;&gt;&lt;a href=&quot;#Spring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•&quot; class=&quot;headerlink&quot; title=&quot;Spring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•&quot;&gt;&lt;/a&gt;Spring Bootä½¿ç”¨s</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>å¯Œæ–‡æœ¬ç»„ä»¶(mavon-editor)</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/22/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/22/%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6/</id>
    <published>2023-10-22T14:08:42.000Z</published>
    <updated>2023-11-04T18:51:49.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>mavon-editoræ˜¯ä¸€æ¬¾åŸºäºvueçš„markdownç¼–è¾‘å™¨ï¼Œå¯ä»¥ç”¨æ¥åšæ–‡æœ¬çš„ç¼–è¾‘ï¼Œæ¯”å¦‚æ˜¯æŸç§ä¸šåŠ¡éœ€è¦å‘é€å…¬å‘Šã€ä¸ªäººåšå®¢ç­‰ï¼Œéƒ½å¯ä»¥ç”¨åˆ°ï¼Œæ“ä½œä¹Ÿååˆ†ç®€å•ã€‚</p><p>å®˜æ–¹åœ°å€ï¼š<a href="http://www.mavoneditor.com/?spm=a2c6h.12873639.article-detail.9.aaad62afIvVZGC">http://www.mavoneditor.com/</a></p><p>githubï¼š<a href="https://github.com/hinesboy/mavonEditor">https://github.com/hinesboy/mavonEditor</a></p><h2 id="å®‰è£…-mavon-editor"><a href="#å®‰è£…-mavon-editor" class="headerlink" title="å®‰è£… mavon-editor"></a>å®‰è£… mavon-editor</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mavon-editor --save</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½äº†ä¹‹åå°±éœ€è¦è¿›è¡Œæ³¨å†Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„ä»¶æ³¨å†Œ</span></span><br><span class="line"><span class="keyword">import</span> mavonEditor <span class="keyword">from</span> <span class="string">&quot;mavon-editor&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;mavon-editor/dist/css/index.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// eslint-disable-next-line vue/multi-word-component-names</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;EditorComponent&quot;</span>,</span><br><span class="line"><span class="attr">components</span>: &#123; mavonEditor &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®‰è£…ã€æ³¨å†Œåå°±è¦æ¥ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨è¿™ä¸ªç»„ä»¶ï¼Œä»¥ä¸‹æˆ‘å°†ä½¿ç”¨æˆ‘ä¹‹å‰åœ¨å­¦ä¹ åšåå°ç®¡ç†ç³»ç»Ÿæ¥ä½œä¸ºæ¡ˆä¾‹ã€‚</p><h2 id="ä½¿ç”¨-mavon-editor"><a href="#ä½¿ç”¨-mavon-editor" class="headerlink" title="ä½¿ç”¨ mavon-editor"></a>ä½¿ç”¨ mavon-editor</h2><p>é¦–å…ˆï¼Œæ³¨å†Œå¥½äº†å°±èƒ½å¤Ÿç›´æ¥ä½¿ç”¨æ ‡ç­¾è¿›è¡Œå¼•ç”¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">save</span>=<span class="string">&quot;saveDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">change</span>=<span class="string">&quot;updateDoc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;doc&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•´ä½“çš„å½¢æˆå°±å¦‚ä¸‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222049.png"></p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222121.png"></p><p>è¿™æ˜¯å¸¦æœ‰é¢„è§ˆæ¨¡å¼ï¼Œåœ¨ä¸Šé¢çš„å·¥å…·æ éƒ¨åˆ†æ˜¯ç»„ä»¶å·²ç»å®Œæˆçš„åŠŸèƒ½ï¼Œå…¶ä¸­æœ‰äº›éœ€è¦è‡ªå·±çš„å®ç°ï¼Œæ¯”å¦‚æ˜¯å›¾ç‰‡çš„ä¸Šä¼ ï¼Œè¿™ä¸ªç»„ä»¶ä¹Ÿèƒ½å¤Ÿæ”¯æŒæ‰©å±•ï¼Œå¯ä»¥å»æ‰©å±•æ›´å¤šçš„ä¾¿æ·å¼åŠŸèƒ½ï¼Œå…·ä½“è¯¦æƒ…åœ¨å®˜ç½‘ä¸Šéƒ½æœ‰ã€‚</p><h2 id="å›¾ç‰‡ä¸Šä¼ "><a href="#å›¾ç‰‡ä¸Šä¼ " class="headerlink" title="å›¾ç‰‡ä¸Šä¼ "></a>å›¾ç‰‡ä¸Šä¼ </h2><p>æ¥ä¸‹æ¥ä»‹ç»å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œå›¾ç‰‡ä¸Šä¼ åŒ…æ‹¬ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç›´æ¥æ·»åŠ å°±åˆ°æœåŠ¡å™¨ä¸Š(è¿™é‡Œé‡‡ç”¨é˜¿é‡Œäº‘OSSå­˜å‚¨)ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æ¯æ¬¡æ·»åŠ å›¾ç‰‡éƒ½ä¿å­˜èµ·æ¥ï¼Œç„¶åä¸€åŒä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·çš„ä½œæ³•æ˜¯èƒ½å¤Ÿç¡®ä¿åœ¨ä¸æƒ³è¦å‘å¸ƒçš„æ—¶å€™ï¼Œå›¾ç‰‡ä¸ä¼šè¢«ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ï¼Œä½†æ˜¯æœ€å¸¸è§çš„è¿˜æ˜¯ç›´æ¥ä¸Šä¼ çš„é‚£ç§ã€‚</p><h3 id="å•å›¾ä¸Šä¼ "><a href="#å•å›¾ä¸Šä¼ " class="headerlink" title="å•å›¾ä¸Šä¼ "></a>å•å›¾ä¸Šä¼ </h3><p>å°±æ˜¯æ”¾ç½®å›¾ç‰‡çš„åŒæ—¶ç›´æ¥å°†å›¾ç‰‡ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSS</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">save</span>=<span class="string">&quot;saveDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">change</span>=<span class="string">&quot;updateDoc&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">imgAdd</span>=<span class="string">&quot;$imgAdd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ref</span>=<span class="string">&quot;editor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;doc&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶æ ‡ç­¾ä¸­å¼•å…¥@imagAddäº‹ä»¶ï¼Œè¿™æ˜¯ç»„ä»¶çš„æ—¶é—´ç»‘å®šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$imgAdd(pos, file)&#123; <span class="comment">//åªè¦æ”¾ä¸Šå»å°±ä¸Šä¼ åˆ°oss</span></span><br><span class="line">  <span class="comment">//å•å›¾ä¸Šä¼ </span></span><br><span class="line">  <span class="comment">// ç¬¬ä¸€æ­¥.å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨.</span></span><br><span class="line">  <span class="keyword">let</span> imgData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">  imgData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>,file);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$axios</span>.<span class="title function_">post</span>(<span class="string">&quot;/files/image/upload&quot;</span>, imgData).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç¬¬äºŒæ­¥.å°†è¿”å›çš„urlæ›¿æ¢åˆ°æ–‡æœ¬åŸä½ç½®![...](0) -&gt; ![...](url)</span></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * $vm æŒ‡ä¸ºmavonEditorå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ç§æ–¹å¼è·å–</span></span><br><span class="line"><span class="comment">     * 1. é€šè¿‡å¼•å…¥å¯¹è±¡è·å–: `import &#123;mavonEditor&#125; from ...` ç­‰æ–¹å¼å¼•å…¥åï¼Œ`$vm`ä¸º`mavonEditor`</span></span><br><span class="line"><span class="comment">     * 2. é€šè¿‡$refsè·å–: htmlå£°æ˜ref : `&lt;mavon-editor ref=md &gt;&lt;/mavon-editor&gt;ï¼Œ`$vm`ä¸º `this.$refs.md`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">mdedit</span>.$img2Url(pos, res.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•´ä½“çš„é€»è¾‘å°±æ˜¯å°†æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨ä¸­ï¼Œåœ¨å°†è¿”å›çš„urlæ›¿æ¢åˆ°æ–‡æ¡£çš„åŸä½ç½®ï¼Œ<code>this.$refs.mdedit.$img2Url(pos, res.data.data)</code>è¿›è¡Œå›æ˜¾ä¿å­˜è·¯å¾„ã€‚é»˜è®¤å¤§å°æ ·å¼ä¸º min-height: 300px , min-width: 300pxï¼Œå¹¶ä¸”æ˜¯å¯è‡ªè¡Œè¦†ç›–ã€‚</p><p>ç»“æœå¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231022222559.png"></p><h3 id="å¤šå›¾ä¸Šä¼ "><a href="#å¤šå›¾ä¸Šä¼ " class="headerlink" title="å¤šå›¾ä¸Šä¼ "></a>å¤šå›¾ä¸Šä¼ </h3><p>å¤šå›¾ä¸Šä¼ ç®€å•ç†è§£å°±æ˜¯å¾ªç¯æ‰€æœ‰æ–‡ä»¶ï¼Œä¸€ä¸€ä¸Šä¼ ä¿å­˜ï¼Œé€‚åˆå¯ä»¥å°†ä¸è¦çš„å›¾ç‰‡ç»è¡Œå»é™¤ï¼Œå°±ä¸ä¼šå…¨éƒ¨éƒ½ä¸Šä¼ ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span> <span class="attr">ref</span>=<span class="string">&quot;mdedit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.content&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 80vh&quot;</span> @<span class="attr">imgAdd</span>=<span class="string">&quot;$imgAdd&quot;</span> @<span class="attr">imgDel</span>=<span class="string">&quot;$imgDel&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡å®šä¹‰ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦åˆ äº‹ä»¶ï¼Œå›¾ç‰‡åˆ é™¤ä¹‹åå°±éœ€è¦å»é™¤ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$imgAdd(pos, $file)&#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜å›¾ç‰‡ä¿¡æ¯</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">img_file</span>[pos] = $file;</span><br><span class="line">&#125;,</span><br><span class="line">$imgDel(pos)&#123;</span><br><span class="line">  <span class="keyword">delete</span> <span class="variable language_">this</span>.<span class="property">img_file</span>[pos];</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯å°†ä¿å­˜å¥½çš„å›¾ç‰‡ä¸€ä¸€ä¸Šä¼ ä¿å­˜ï¼Œåœ¨å›æ˜¾æ›¿æ¢åˆ°åŸæ¥çš„ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">uploadimg</span>(<span class="params">$e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> _img <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">img_file</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> imgData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥.å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨.</span></span><br><span class="line">        imgData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, <span class="variable language_">this</span>.<span class="property">img_file</span>[_img]);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$axios</span>.<span class="title function_">post</span>(<span class="string">&quot;/files/image/upload&quot;</span>, imgData).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * ä¾‹å¦‚ï¼šè¿”å›æ•°æ®ä¸º res = [[pos, url], [pos, url]...]</span></span><br><span class="line"><span class="comment">             * pos ä¸ºåŸå›¾ç‰‡æ ‡å¿—ï¼ˆ0ï¼‰</span></span><br><span class="line"><span class="comment">             * url ä¸ºä¸Šä¼ åå›¾ç‰‡çš„urlåœ°å€</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">             <span class="comment">// ç¬¬äºŒæ­¥.å°†è¿”å›çš„urlæ›¿æ¢åˆ°æ–‡æœ¬åŸä½ç½®![...](0) -&gt; ![...](url)</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">mdedit</span>.$img2Url(i, res.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç²˜è´´ä¸€ä¸ªåç«¯ä»£ç ï¼Œæœ¬æ¬¡æ˜¯ä½¿ç”¨é˜¿é‡Œäº‘OSSå­˜å‚¨ï¼Œéœ€è¦åšä¸€äº›é…ç½®ï¼Œè¯¦æƒ…å¯ä»¥å»çœ‹ä¸€ä¸‹é˜¿é‡Œäº‘å®˜ç½‘å…³äºOSSè¿™ä¸€å—çš„å†…å®¹ã€‚åç«¯æ–¹æ³•çš„å„ç§é€»è¾‘ä¹Ÿéƒ½åŠ äº†æ³¨é‡Šï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/image/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">uploadImage</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">    <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> FileUtil.extName(originalFilename); <span class="comment">//æ–‡ä»¶ç±»å‹</span></span><br><span class="line">    <span class="type">double</span> <span class="variable">size</span> <span class="operator">=</span> file.getSize(); <span class="comment">//æ–‡ä»¶å¤§å°</span></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå”¯ä¸€æ–‡ä»¶è¯†åˆ«ç  ---</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> IdUtil.fastSimpleUUID();</span><br><span class="line">    <span class="type">String</span> <span class="variable">uploadFile</span> <span class="operator">=</span>  uuid + StrUtil.DOT + type;</span><br><span class="line">    <span class="comment">//è·å–æ–‡ä»¶çš„url</span></span><br><span class="line">    String url;</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ–‡ä»¶çš„MD5</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> SecureUtil.md5(file.getInputStream());</span><br><span class="line">    <span class="comment">//ä»æ•°æ®åº“é‡ŒæŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç›¸åŒçš„è®°å½•...é€šè¿‡æ–‡ä»¶çš„md5æŸ¥è¯¢æ–‡ä»¶</span></span><br><span class="line">    <span class="type">Files</span> <span class="variable">dbFile</span> <span class="operator">=</span> filesService.getFileByMd5(md5);</span><br><span class="line">    <span class="keyword">if</span> (dbFile != <span class="literal">null</span>) &#123; <span class="comment">//å­˜åœ¨</span></span><br><span class="line">        url = dbFile.getUrl();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//ä¸å­˜åœ¨ï¼Œå°±å­˜åˆ°ossä¸­ï¼Œå¹¶è·å–è·¯å¾„</span></span><br><span class="line">        <span class="comment">//OSSä¸Šä¼ </span></span><br><span class="line">        ossUtil.upload(file.getInputStream(), <span class="string">&quot;images/&quot;</span> + uploadFile); <span class="comment">//è·¯å¾„è‚¯å®šæœ‰ï¼Œæ•…ä¸éœ€è¦åˆ¤å®šï¼Œossåªèƒ½å­˜ä¸€ä¸ªåå­—ç›¸åŒçš„</span></span><br><span class="line">        url = ossUtil.getURL(<span class="string">&quot;images/&quot;</span> + uploadFile); <span class="comment">//è¿”å›url</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å­˜å‚¨åˆ°æ•°æ®åº“ -- è¿˜éœ€è®¾ç½®æ˜¯è°ä¸Šä¼ çš„ï¼Œè¦ä¼ æ¥å‚æ•°ï¼Œåé¢æ</span></span><br><span class="line">    <span class="type">Files</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Files</span>();</span><br><span class="line">    saveFile.setName(originalFilename);</span><br><span class="line">    saveFile.setType(type);</span><br><span class="line">    saveFile.setSize(size/<span class="number">1024</span>);<span class="comment">//è¿™æ˜¯bè¦è£…æˆkå°±é™¤ä»¥1024</span></span><br><span class="line">    saveFile.setUrl(url);</span><br><span class="line">    saveFile.setMd5(md5);</span><br><span class="line">    saveFile.setCreateTime(LocalDateTime.now());</span><br><span class="line">    filesService.save(saveFile);</span><br><span class="line">    <span class="keyword">return</span> Result.succ(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OSSUtil: å‚ç…§é˜¿é‡Œäº‘å®˜ç½‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OSSUtil</span> &#123;</span><br><span class="line">    <span class="comment">/*ä¸Šä¼ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">upload</span><span class="params">(InputStream inputStream, String target)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(Const.ENDPOINT, Const.ACCESS_KEYID, Const.ACCESSKEY_SECRET);</span><br><span class="line">        ossClient.putObject(Const.BUCKET_NAME, target, inputStream);</span><br><span class="line">        <span class="comment">// å…³é—­OSSClientã€‚</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*è·å–url*/</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getURL</span><span class="params">(String objectName)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(Const.ENDPOINT, Const.ACCESS_KEYID, Const.ACCESSKEY_SECRET);</span><br><span class="line">        <span class="comment">// è®¾ç½®URLè¿‡æœŸæ—¶é—´ä¸º100å¤©ã€‚</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalDateTime.now().plusDays(<span class="number">100</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">expiration</span> <span class="operator">=</span> Date.from(time.atZone( ZoneId.systemDefault()).toInstant());</span><br><span class="line">        <span class="comment">// ç”Ÿæˆä»¥GETæ–¹æ³•è®¿é—®çš„ç­¾åURLï¼Œè®¿å®¢å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®ç›¸å…³å†…å®¹ã€‚</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> ossClient.generatePresignedUrl(Const.BUCKET_NAME, objectName, expiration);</span><br><span class="line">        <span class="comment">// å…³é—­OSSClientã€‚</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šä¸Šä¼ ç›¸å…³å¯ä»¥æŸ¥çœ‹:<a href="https://github.com/hinesboy/mavonEditor/blob/master/doc/cn/upload-images.md">https://github.com/hinesboy/mavonEditor/blob/master/doc/cn/upload-images.md</a></p><h2 id="å…¶ä»–åŠŸèƒ½"><a href="#å…¶ä»–åŠŸèƒ½" class="headerlink" title="å…¶ä»–åŠŸèƒ½"></a>å…¶ä»–åŠŸèƒ½</h2><p>mavon-editoræä¾›äº†è®¸å¤šçš„APIï¼Œå°±åŒ…æ‹¬è¯­è¨€é€‰æ‹©ã€å·¥å…·æ ã€å·¥å…·æ èƒŒæ™¯ç­‰ç­‰ã€‚</p><h4 id="toolbars"><a href="#toolbars" class="headerlink" title="toolbars"></a>toolbars</h4><p>é»˜è®¤å·¥å…·æ æŒ‰é’®å…¨éƒ¨å¼€å¯, ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡ï¼Œå¯ä»¥é€‰æ‹©å¯ç”¨éƒ¨åˆ†æŒ‰é’®ï¼ŒåŠŸèƒ½å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ä¾‹å¦‚: &#123;</span></span><br><span class="line"><span class="comment">      bold: true, // ç²—ä½“</span></span><br><span class="line"><span class="comment">      italic: true,// æ–œä½“</span></span><br><span class="line"><span class="comment">      header: true,// æ ‡é¢˜</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  æ­¤æ—¶, ä»…ä»…æ˜¾ç¤ºæ­¤ä¸‰ä¸ªåŠŸèƒ½é”®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="attr">toolbars</span>: &#123;</span><br><span class="line">    <span class="attr">bold</span>: <span class="literal">true</span>, <span class="comment">// ç²—ä½“</span></span><br><span class="line">    <span class="attr">italic</span>: <span class="literal">true</span>, <span class="comment">// æ–œä½“</span></span><br><span class="line">    <span class="attr">header</span>: <span class="literal">true</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">    <span class="attr">underline</span>: <span class="literal">true</span>, <span class="comment">// ä¸‹åˆ’çº¿</span></span><br><span class="line">    <span class="attr">strikethrough</span>: <span class="literal">true</span>, <span class="comment">// ä¸­åˆ’çº¿</span></span><br><span class="line">    <span class="attr">mark</span>: <span class="literal">true</span>, <span class="comment">// æ ‡è®°</span></span><br><span class="line">    <span class="attr">superscript</span>: <span class="literal">true</span>, <span class="comment">// ä¸Šè§’æ ‡</span></span><br><span class="line">    <span class="attr">subscript</span>: <span class="literal">true</span>, <span class="comment">// ä¸‹è§’æ ‡</span></span><br><span class="line">    <span class="attr">quote</span>: <span class="literal">true</span>, <span class="comment">// å¼•ç”¨</span></span><br><span class="line">    <span class="attr">ol</span>: <span class="literal">true</span>, <span class="comment">// æœ‰åºåˆ—è¡¨</span></span><br><span class="line">    <span class="attr">ul</span>: <span class="literal">true</span>, <span class="comment">// æ— åºåˆ—è¡¨</span></span><br><span class="line">    <span class="attr">link</span>: <span class="literal">true</span>, <span class="comment">// é“¾æ¥</span></span><br><span class="line">    <span class="attr">imagelink</span>: <span class="literal">true</span>, <span class="comment">// å›¾ç‰‡é“¾æ¥</span></span><br><span class="line">    <span class="attr">code</span>: <span class="literal">true</span>, <span class="comment">// code</span></span><br><span class="line">    <span class="attr">table</span>: <span class="literal">true</span>, <span class="comment">// è¡¨æ ¼</span></span><br><span class="line">    <span class="attr">fullscreen</span>: <span class="literal">true</span>, <span class="comment">// å…¨å±ç¼–è¾‘</span></span><br><span class="line">    <span class="attr">readmodel</span>: <span class="literal">true</span>, <span class="comment">// æ²‰æµ¸å¼é˜…è¯»</span></span><br><span class="line">    <span class="attr">htmlcode</span>: <span class="literal">true</span>, <span class="comment">// å±•ç¤ºhtmlæºç </span></span><br><span class="line">    <span class="attr">help</span>: <span class="literal">true</span>, <span class="comment">// å¸®åŠ©</span></span><br><span class="line">    <span class="comment">/* 1.3.5 */</span></span><br><span class="line">    <span class="attr">undo</span>: <span class="literal">true</span>, <span class="comment">// ä¸Šä¸€æ­¥</span></span><br><span class="line">    <span class="attr">redo</span>: <span class="literal">true</span>, <span class="comment">// ä¸‹ä¸€æ­¥</span></span><br><span class="line">    <span class="attr">trash</span>: <span class="literal">true</span>, <span class="comment">// æ¸…ç©º</span></span><br><span class="line">    <span class="attr">save</span>: <span class="literal">true</span>, <span class="comment">// ä¿å­˜ï¼ˆè§¦å‘eventsä¸­çš„saveäº‹ä»¶ï¼‰</span></span><br><span class="line">    <span class="comment">/* 1.4.2 */</span></span><br><span class="line">    <span class="attr">navigation</span>: <span class="literal">true</span>, <span class="comment">// å¯¼èˆªç›®å½•</span></span><br><span class="line">    <span class="comment">/* 2.1.8 */</span></span><br><span class="line">    <span class="attr">alignleft</span>: <span class="literal">true</span>, <span class="comment">// å·¦å¯¹é½</span></span><br><span class="line">    <span class="attr">aligncenter</span>: <span class="literal">true</span>, <span class="comment">// å±…ä¸­</span></span><br><span class="line">    <span class="attr">alignright</span>: <span class="literal">true</span>, <span class="comment">// å³å¯¹é½</span></span><br><span class="line">    <span class="comment">/* 2.2.1 */</span></span><br><span class="line">    <span class="attr">subfield</span>: <span class="literal">true</span>, <span class="comment">// å•åŒæ æ¨¡å¼</span></span><br><span class="line">    <span class="attr">preview</span>: <span class="literal">true</span>, <span class="comment">// é¢„è§ˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”è¿˜èƒ½é€šè¿‡è‡ªå®šä¹‰å·¥å…·</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å·¦å·¥å…·æ å‰åŠ å…¥è‡ªå®šä¹‰æŒ‰é’® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;left-toolbar-before&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;è‡ªå®šä¹‰&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å·¦å·¥å…·æ ååŠ å…¥è‡ªå®šä¹‰æŒ‰é’®  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;left-toolbar-after&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;è‡ªå®šä¹‰&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å³å·¥å…·æ å‰åŠ å…¥è‡ªå®šä¹‰æŒ‰é’®  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;right-toolbar-before&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;è‡ªå®šä¹‰&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å³å·¥å…·æ ååŠ å…¥è‡ªå®šä¹‰æŒ‰é’®  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;right-toolbar-after&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;$click(&#x27;test&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;op-icon fa fa-mavon-align-left&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;è‡ªå®šä¹‰&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mavon-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶ç»‘å®š"><a href="#äº‹ä»¶ç»‘å®š" class="headerlink" title="äº‹ä»¶ç»‘å®š"></a>äº‹ä»¶ç»‘å®š</h3><p>ç»„ä»¶ä¹Ÿæä¾›äº†è®¸å¤šçš„äº‹ä»¶ç»‘å®šï¼Œè¿™é‡Œä¸åŠ ä»¥èµ˜è¿°ï¼Œå®˜ç½‘éƒ½æœ‰ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/325740871671512526552-3b249f95-1437-4a15-8e72-2bc169574667.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;mavon-editoræ˜¯ä¸€æ¬¾åŸºäºvueçš„markdownç¼–è¾‘å™¨ï¼Œå¯ä»¥ç”¨æ¥åšæ–‡æœ¬çš„ç¼–è¾‘ï¼Œæ¯”å¦‚æ˜¯æŸç§ä¸šåŠ¡éœ€è¦å‘é€å…¬å‘Šã€ä¸ªäººåšå®¢ç­‰ï¼Œéƒ½å¯ä»¥ç”¨åˆ°ï¼Œ</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vueæ’ä»¶" scheme="https://dont-sleep-so-late.github.io/tags/Vue%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Sassè¯¦è§£</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/18/Sass%E8%AF%A6%E8%A7%A3/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/18/Sass%E8%AF%A6%E8%A7%A3/</id>
    <published>2023-10-17T16:22:19.000Z</published>
    <updated>2023-10-17T16:30:01.270Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯Sass"><a href="#1-ä»€ä¹ˆæ˜¯Sass" class="headerlink" title="1. ä»€ä¹ˆæ˜¯Sass?"></a>1. ä»€ä¹ˆæ˜¯Sass?</h3><p>Sass(Syntactically Awesome Stylesheets)æ˜¯ä¸€ä¸ª <a href="https://so.csdn.net/so/search?q=CSS&spm=1001.2101.3001.7020">CSS</a> é¢„å¤„ç†å™¨ï¼Œæ˜¯ CSS æ‰©å±•è¯­è¨€ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°‘ CSS é‡å¤çš„ä»£ç ï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ã€‚</p><h3 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨Sassï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆä½¿ç”¨Sassï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆä½¿ç”¨Sassï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆä½¿ç”¨Sassï¼Ÿ</h3><ol><li>å®ƒèƒ½å¤Ÿå¸®æˆ‘ä»¬æ›´å¿«æ›´é«˜æ•ˆçš„ç¼–å†™æ›´å¥½ç»´æŠ¤çš„ cssï¼›</li><li>Sass å¼•å…¥åˆç†çš„æ ·å¼å¤ç”¨æœºåˆ¶ï¼Œå¯ä»¥èŠ‚çº¦å¾ˆå¤šæ—¶é—´æ¥é‡å¤ã€‚</li></ol><p>Sassçš„å¥½å¤„å½“ç„¶ä¸ä»…äºæ­¤ï¼Œå½“ä½ ä½¿ç”¨ä¹‹åä¾¿ä¼šå‘ç°å…¶ä¸­çš„å¦™å¤„ã€‚</p><h3 id="3-Sassè¯­æ³•"><a href="#3-Sassè¯­æ³•" class="headerlink" title="3. Sassè¯­æ³•"></a>3. Sassè¯­æ³•</h3><h5 id="3-1-å˜é‡"><a href="#3-1-å˜é‡" class="headerlink" title="3.1 å˜é‡"></a>3.1 å˜é‡</h5><blockquote><p>å˜é‡å¯ä»¥å­˜å‚¨æ ·å¼ä¿¡æ¯ï¼Œä»¥ä¾¿åé¢ä½¿ç”¨ã€‚<br>æ¯”å¦‚ä¸€ä¸ªæ ·å¼åœ¨é¡µé¢çš„å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œå°±å¯ä»¥å…ˆå°†è¯¥æ ·å¼çš„å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œåé¢ç›´æ¥ä½¿ç”¨å˜é‡å³å¯ã€‚</p></blockquote><p><strong>è¯­æ³•ï¼š</strong> $å˜é‡åï¼šæ ·å¼å€¼ï¼›<br><strong>ä½¿ç”¨ï¼š</strong> $å˜é‡åï¼›<br><strong>æ³¨æ„ç‚¹</strong>ï¼š</p><ol><li>ä»¥$ç¬¦å·å¼€å¤´ï¼Œåè·Ÿå˜é‡å</li><li>å¤šä¸ªå•è¯ï¼Œå˜é‡åä»¥-åˆ†å‰²ï¼Œå¦‚ï¼š$theme-color</li><li>å˜é‡å†™åœ¨#{}ä¸­ä»¥é•¶åµŒå…¥å­—ç¬¦ä¸²</li></ol><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶  Sassåç¼€åä¸ºscss</span><br><span class="line">$dark: <span class="number">#000</span>;</span><br><span class="line">$side: left;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: $dark;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: $dark;</span><br><span class="line"><span class="attribute">border</span>-#&#123;$side&#125;-radius: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">border-left</span>-radius: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-2-åµŒå¥—"><a href="#3-2-åµŒå¥—" class="headerlink" title="3.2 åµŒå¥—"></a>3.2 åµŒå¥—</h5><h6 id="1-é€‰æ‹©å™¨åµŒå¥—"><a href="#1-é€‰æ‹©å™¨åµŒå¥—" class="headerlink" title="1. é€‰æ‹©å™¨åµŒå¥—"></a>1. é€‰æ‹©å™¨åµŒå¥—</h6><blockquote><p>å­å…ƒç´ åœ¨çˆ¶å…ƒç´ æ ·å¼çš„ä¸€å¯¹å¤§æ‹¬å·{}å†… å¦‚ï¼šul { li { } }</p></blockquote><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">çˆ·çˆ· &#123;</span><br><span class="line">çˆ¸çˆ¸ &#123;</span><br><span class="line">å„¿å­ &#123;</span><br><span class="line">å­™å­ &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-tag">html</span>ç»“æ„</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;grandpa&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;father&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;son&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.grandpa</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.father</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.son</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.grandpa</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grandpa</span> <span class="selector-class">.father</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grandpa</span> <span class="selector-class">.father</span> <span class="selector-class">.son</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="2-ä¼ªç±»åµŒå¥—"><a href="#2-ä¼ªç±»åµŒå¥—" class="headerlink" title="2. ä¼ªç±»åµŒå¥—"></a>2. ä¼ªç±»åµŒå¥—</h6><blockquote><p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé€‰æ‹©å™¨åµŒå¥—å¾—å‡ºçš„cssæ ·å¼ç›¸å½“äºåä»£é€‰æ‹©å™¨ä¸€æ ·ï¼Œä¸­é—´éƒ½æœ‰ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œé‚£å¦‚æœæƒ³ç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ :hoverè¦æ€ä¹ˆåšå‘¢?</p></blockquote><p>&amp;ç¬¦å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚<br><strong>è¯­æ³•:</strong> &amp;:hover { }<br><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-tag">html</span>ç»“æ„</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">a</span> href=&quot;javascript:;&quot;&gt;hello&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line">// è¿™é‡Œæˆ‘ä»¬å¸Œæœ›é¼ æ ‡æ‚¬åœ<span class="selector-tag">a</span>çš„æ–‡æœ¬é¢œè‰²æ”¹å˜</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œ&amp;å°±è¡¨ç¤ºç›´æ¥è°ƒç”¨çˆ¶é€‰æ‹©å™¨ï¼Œæ‹¿ä¸Šè¾¹çš„ä¾‹å­ä½ å¯ä»¥æŠŠ&amp;ç†è§£ä¸ºå®ƒæ˜¯&amp;å¤–é¢çš„æ‰€æœ‰çˆ¶é€‰æ‹©å™¨ï¼Œ&amp; &#x3D;&gt; .box aã€‚</p><h5 id="3-3-æ··åˆ-mixin"><a href="#3-3-æ··åˆ-mixin" class="headerlink" title="3.3 æ··åˆ mixin"></a>3.3 æ··åˆ mixin</h5><blockquote><p>mixinç›¸å½“äºå·²ç»å®šä¹‰å¥½äº†ä¸€ç±»æ ·å¼ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é‡å¤çš„ä½¿ç”¨å®ƒï¼Œå°±è·Ÿjsä¸­çš„å‡½æ•°ä¸€æ ·ã€‚</p></blockquote><p><strong>è¯­æ³•1-ä¸å«å‚æ•°ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> name &#123;</span><br><span class="line">cssæ ·å¼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨:</strong> @include nameï¼›<br><strong>ç¤ºä¾‹å¦‚ä¸‹:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line">// å®šä¹‰ä¸€ä¸ªmixin</span><br><span class="line"><span class="keyword">@mixin</span> box-style &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line">// ä½¿ç”¨</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="keyword">@include</span> box-style;</span><br><span class="line">// å½“ç„¶ä¹Ÿå¯ä»¥ç»§ç»­åœ¨è¿™é‡Œæ·»åŠ æ ·å¼</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯­æ³•2-å«å‚æ•°:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> name ($param1ï¼Œ$param2ï¼Œ ...) &#123;</span><br><span class="line">cssæ ·å¼</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨:</strong> @include name(æ ·å¼1ï¼Œæ ·å¼2ï¼Œâ€¦)ï¼›<br><strong>æ³¨æ„ï¼š</strong><br>å®šä¹‰çš„æ—¶å€™å‚æ•°è¦ä»¥$ç¬¦å¼€å¤´ï¼Œå’Œå˜é‡å‘½åæ˜¯ä¸€æ ·çš„<br><strong>ç¤ºä¾‹å¦‚ä¸‹:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line">$box-<span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">$box-<span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"></span><br><span class="line">// å®šä¹‰ä¸€ä¸ªmixin</span><br><span class="line"><span class="keyword">@mixin</span> box ($<span class="attribute">width</span>, $<span class="attribute">height</span>) &#123;</span><br><span class="line"><span class="attribute">width</span>: $width;</span><br><span class="line"><span class="attribute">height</span>: $height;</span><br><span class="line">&#125;</span><br><span class="line">// ä½¿ç”¨</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">// <span class="number">1</span>. ç¬¬ä¸€ç§ç”¨æ³•, ç›´æ¥å°†cssæ ·å¼å†™å…¥</span><br><span class="line"><span class="keyword">@include</span> box(<span class="number">200px</span>, <span class="number">200px</span>);</span><br><span class="line"></span><br><span class="line">// <span class="number">2</span>. ç¬¬äºŒç§, å°†å®šä¹‰å¥½çš„å˜é‡å†™å…¥</span><br><span class="line"><span class="keyword">@include</span> box($box-width, $box-height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-4-ç»§æ‰¿-extend"><a href="#3-4-ç»§æ‰¿-extend" class="headerlink" title="3.4 ç»§æ‰¿ extend"></a>3.4 ç»§æ‰¿ extend</h5><blockquote><p>å¦‚æœä¸€ä¸ªå…ƒç´ çš„æ ·å¼å’Œå¦ä¸€ä¸ªå…ƒç´ çš„æ ·å¼å®Œå…¨ä¸€æ ·ï¼Œè¿™ä¸ªå…ƒç´ æ— éœ€å†å†™ä¸€éé‡å¤çš„æ ·å¼ï¼Œåªéœ€è¦ä½¿ç”¨@extend å°±å¯ä»¥æŠŠå¦ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ ·å¼å…¨éƒ¨ç»§æ‰¿è¿‡æ¥ã€‚</p></blockquote><p><strong>è¯­æ³•:</strong> @extend å…ƒç´ é€‰æ‹©å™¨ï¼›<br><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// box2 ç»§æ‰¿ box1çš„æ ·å¼</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="keyword">@extend</span> .box1;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box1</span>, <span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸è¿‡ç»§æ‰¿è¦æ…ç”¨ï¼Œè¢«ç»§æ‰¿ç›¸å…³çš„å…ƒç´ çš„æ ·å¼ä¹Ÿä¼šç»§æ‰¿è¿‡å»ï¼Œæ‚¨çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box1</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// box2 ç»§æ‰¿ box1çš„æ ·å¼</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line"><span class="keyword">@extend</span> .box1;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box1</span>, <span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> <span class="selector-tag">div</span>, <span class="selector-class">.box2</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æƒ³ä¸è¢«ç»§æ‰¿å…ƒç´ çš„ç›¸å…³å…ƒç´ ç‰µæ‰¯ï¼Œè¿˜æ˜¯æ³¨æ„é€‰æ‹©å™¨çš„ä¹¦å†™ã€‚</p><h5 id="3-5-å¯¼å…¥-import"><a href="#3-5-å¯¼å…¥-import" class="headerlink" title="3.5 å¯¼å…¥ import"></a>3.5 å¯¼å…¥ import</h5><blockquote><p>å¦‚æœä¸€ä¸ªé¡µé¢éœ€è¦ä½¿ç”¨å…¶ä»–é¡µé¢çš„æ ·å¼ï¼Œsasså¯ä»¥å¯¼å…¥å…¶ä»–çš„scssæ–‡ä»¶ï¼Œscssä¼šæŠŠä»–ä»¬ç¼–è¯‘æˆä¸€ä¸ªcssæ–‡ä»¶ã€‚<br>è¿™æ ·åœ¨å¼€å‘ä¸­å¯ä»¥æŠŠä¸€ä¸ªé¡µé¢çš„æ ·å¼åˆ†å‰²æˆå¤šä¸ªscssæ–‡ä»¶ï¼Œç„¶ååœ¨é¡µé¢çš„scssæ–‡ä»¶ä¸­å¯¼å…¥å…¶ä»–scssï¼Œå¯ä»¥å®ç°cssçš„æ¨¡å—åŒ–å¼€å‘ã€‚</p></blockquote><p><strong>è¯­æ³•ï¼š</strong> @import â€œæ–‡ä»¶åâ€<br><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// è¿™é‡Œå‡è®¾åŒçº§ç›®å½•ä¸‹æœ‰ä¸€ä¸ªbox1<span class="selector-class">.scss</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// åœ¨box2<span class="selector-class">.scss</span>æ–‡ä»¶é‡Œå¼•å…¥box1<span class="selector-class">.scss</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;box1&quot;</span></span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line">div &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-6-æ³¨é‡Š"><a href="#3-6-æ³¨é‡Š" class="headerlink" title="3.6 æ³¨é‡Š"></a>3.6 æ³¨é‡Š</h5><ol><li>å•è¡Œæ³¨é‡Šï¼š &#x2F; &#x2F; cssæ–‡ä»¶é‡Œä¸ä¼šæ˜¾ç¤º å‹ç¼©æ–¹å¼çš„cssä¸ä¼šæ˜¾ç¤º</li><li>å¤šè¡Œæ³¨é‡Šï¼š &#x2F;**&#x2F; cssæ–‡ä»¶é‡Œä¼šæ˜¾ç¤º å‹ç¼©æ–¹å¼çš„cssä¸ä¼šæ˜¾ç¤º</li><li>å¼ºåˆ¶æ³¨é‡Šï¼š&#x2F;* ! *&#x2F; cssæ–‡ä»¶é‡Œä¼šæ˜¾ç¤º å‹ç¼©æ–¹å¼çš„cssä¼šæ˜¾ç¤º</li></ol><h5 id="3-7-æ•°å­¦è¿ç®—"><a href="#3-7-æ•°å­¦è¿ç®—" class="headerlink" title="3.7 æ•°å­¦è¿ç®—"></a>3.7 æ•°å­¦è¿ç®—</h5><blockquote><p>åŒ…å«+ã€-ã€*ã€&#x2F;(åŠ å‡ä¹˜é™¤)</p></blockquote><p><strong>ç¤ºä¾‹å¦‚ä¸‹:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> + <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100px</span> - <span class="number">50px</span>;</span><br><span class="line">// è¿™é‡Œä¸èƒ½ä¸¤ä¸ªéƒ½å¸¦å•ä½ï¼Œå¦åˆ™æ˜¯<span class="number">100px</span>*pxè¿™ç§ä¸åˆæ³•çš„å€¼</span><br><span class="line"><span class="attribute">margin-top</span>: <span class="number">10px</span> * <span class="number">10</span>; </span><br><span class="line">// cssä¼šå°†/è®¤ä¸ºæ˜¯åˆæ³•çš„ï¼Œæ‰€ä»¥éœ€è¦åŠ æ‹¬å·</span><br><span class="line"><span class="attribute">padding-top</span>: (<span class="number">100px</span> / <span class="number">2</span>) ;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-8-ifæ¡ä»¶è¯­å¥"><a href="#3-8-ifæ¡ä»¶è¯­å¥" class="headerlink" title="3.8 ifæ¡ä»¶è¯­å¥"></a>3.8 ifæ¡ä»¶è¯­å¥</h5><blockquote><p>Sasså¯ä»¥æ ¹æ®æ¡ä»¶åˆ¤æ–­ç»™å‡ºç‰¹å®šçš„æ ·å¼</p></blockquote><p><strong>è¯­æ³•:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@if</span> æ¡ä»¶è¯­å¥ &#123;</span><br><span class="line">&#125; @ else if æ¡ä»¶è¯­å¥ &#123;</span><br><span class="line">&#125; <span class="keyword">@else</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="keyword">@if</span> <span class="number">1</span>+<span class="number">1</span> == <span class="number">2</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: red;</span><br><span class="line">&#125; <span class="keyword">@else</span> if <span class="number">1</span>+<span class="number">1</span> == <span class="number">3</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: blud;</span><br><span class="line">&#125; <span class="keyword">@else</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-9-forå¾ªç¯"><a href="#3-9-forå¾ªç¯" class="headerlink" title="3.9 forå¾ªç¯"></a>3.9 forå¾ªç¯</h5><blockquote><p>Sassä¹Ÿæ”¯æŒforå¾ªç¯ï¼Œæœ‰ä¸¤ç§è¯­æ³•ã€‚</p></blockquote><p><strong>è¯­æ³•1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@for $index from å¼€å§‹å€¼ through ç»“æŸå€¼ &#123;</span><br><span class="line">&#125;</span><br><span class="line">ä»å¼€å§‹å€¼å¼€å§‹ï¼Œåˆ°ç»“æŸå€¼ç»“æŸï¼ŒåŒ…å«ç»“æŸå€¼  indexè¡¨ç¤º 1ï¼Œ 2ï¼Œ...ç»“æŸå€¼</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-class">.scss</span>æ–‡ä»¶</span><br><span class="line"><span class="keyword">@for</span> $i from <span class="number">1</span> through <span class="number">5</span> &#123;</span><br><span class="line"><span class="selector-class">.col-</span>#&#123;$<span class="selector-tag">i</span>&#125; &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> * $i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆçš„cssä»£ç </span><br><span class="line"><span class="selector-class">.col-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.col-5</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-10-eachå¾ªç¯"><a href="#3-10-eachå¾ªç¯" class="headerlink" title="3.10 eachå¾ªç¯"></a>3.10 eachå¾ªç¯</h5><blockquote><p>éå†ä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åä»åˆ—è¡¨ä¸­å–å‡ºå¯¹åº”å€¼ã€‚<br>åƒborder: 1px solied redï¼› 1px solid red è¿™ç§ç”¨ç©ºæ ¼éš”å¼€çš„å¤åˆå±æ€§ä¾¿æ˜¯åˆ—è¡¨ã€‚</p></blockquote><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@each</span> $index in $list &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scssæ–‡ä»¶</span></span><br><span class="line"><span class="variable">$icons</span>: success fail warning;</span><br><span class="line"><span class="keyword">@each</span> <span class="variable">$i</span> in <span class="variable">$icons</span> &#123;</span><br><span class="line"><span class="selector-class">.icon-</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/#&#123;<span class="variable">$i</span>&#125;<span class="selector-class">.png</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆçš„cssä»£ç </span></span><br><span class="line"><span class="selector-class">.icon-success</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/success.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-error</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/error.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-warning</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icons/warning.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-11-whileå¾ªç¯"><a href="#3-11-whileå¾ªç¯" class="headerlink" title="3.11 whileå¾ªç¯"></a>3.11 whileå¾ªç¯</h5><blockquote><p>åªè¦æ¡ä»¶ä¸ºçœŸï¼Œå°±æ‰§è¡Œè¯­å¥ä½“ã€‚</p></blockquote><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@while</span> æ¡ä»¶ &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scssæ–‡ä»¶</span></span><br><span class="line"><span class="variable">$index</span>: <span class="number">6</span>;</span><br><span class="line"><span class="keyword">@while</span> <span class="variable">$index</span>&gt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="selector-class">.box-</span>#&#123;<span class="variable">$index</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">5px</span> * <span class="variable">$index</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$index</span>: <span class="variable">$index</span> - <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆçš„cssä»£ç </span></span><br><span class="line"><span class="selector-class">.box-6</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-12-ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°"><a href="#3-12-ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="3.12 ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°"></a>3.12 ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</h5><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> name(<span class="variable">$param1</span>ï¼Œ<span class="variable">$param2</span>ï¼Œ...) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .scssæ–‡ä»¶</span></span><br><span class="line"><span class="variable">$index</span>: <span class="number">6</span>;</span><br><span class="line"><span class="keyword">@function</span> get-color(<span class="variable">$key</span>) &#123;</span><br><span class="line"><span class="keyword">@if</span> <span class="variable">$key</span> &gt; <span class="number">5</span> &#123;</span><br><span class="line"><span class="keyword">@return</span> <span class="number">#000</span>;</span><br><span class="line">&#125; <span class="keyword">@else</span> &#123;</span><br><span class="line"><span class="keyword">@return</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">get-color</span>(<span class="variable">$index</span>);</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆçš„cssä»£ç </span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ä»€ä¹ˆæ˜¯Sass&quot;&gt;&lt;a href=&quot;#1-ä»€ä¹ˆæ˜¯Sass&quot; class=&quot;headerlink&quot; title=&quot;1. ä»€ä¹ˆæ˜¯Sass?&quot;&gt;&lt;/a&gt;1. ä»€ä¹ˆæ˜¯Sass?&lt;/h3&gt;&lt;p&gt;Sass(Syntactically Awesome Stylesheets</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="css" scheme="https://dont-sleep-so-late.github.io/tags/css/"/>
    
    <category term="sass" scheme="https://dont-sleep-so-late.github.io/tags/sass/"/>
    
  </entry>
  
  <entry>
    <title>mockä½¿ç”¨æ–¹æ³•</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/13/mock%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/13/mock%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</id>
    <published>2023-10-13T03:40:32.000Z</published>
    <updated>2023-10-13T06:59:29.596Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ"><a href="#å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ"></a>å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ</h1><blockquote><p>å‰è¨€ï¼š</p><p>åœ¨é¡¹ç›®å¼€å‘æµç¨‹ä¸­ï¼Œåœ¨å¼€å‘å·¥ä½œå¼€å§‹ä¹‹å‰ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªæ¥å£æ–‡æ¡£äº§å‡ºçš„è¿‡ç¨‹ï¼šä¹Ÿå°±æ˜¯ä¾æ®è®¾è®¡æ–‡æ¡£ç»™å‡ºå“åº”çš„æ¥å£ç»†èŠ‚ï¼Œæ–¹ä¾¿å‰ç«¯mockæ•°æ®ï¼›é‚£å¦‚ä½•æ›´å¥½çš„ä½¿ç”¨Mockæ¥æ¨¡æ‹Ÿæ•°æ®ï¼Œæ˜¯ä¸€ä¸ªä¼˜ç§€çš„å‰ç«¯å¿…é¡»è¦æŒæ¡çš„æŠ€èƒ½ï¼ˆPSï¼šé¿å…æˆä¸ºèƒŒé”…ä¾ ï¼‰ï¼</p></blockquote><h2 id="1-ä»€ä¹ˆæ˜¯è”è°ƒï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯è”è°ƒï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯è”è°ƒï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯è”è°ƒï¼Ÿ</h2><blockquote><p><strong>é¦–å…ˆï¼Œä½ è¦äº†è§£ä»€ä¹ˆæ˜¯è”è°ƒï¼Ÿåœ¨å¼€å‘ä¸­èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p></blockquote><p>ç°åœ¨çš„å¼€å‘åŸºæœ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œå½“åç«¯è¿˜æ²¡æœ‰æä¾›æ¥å£çš„æ—¶å€™ï¼Œå‰ç«¯éœ€è¦çš„æ•°æ®ä»å“ªé‡Œæ¥å‘¢ï¼Œå°±åªèƒ½è‡ªå·±é€ å‡æ•°æ®å†™æ­»äº†ã€‚å½“åç«¯æ¥å£åšå¥½åï¼Œå‰ç«¯æ‰€éœ€è¦çš„æ•°æ®å°±éœ€è¦æ›¿æ¢æˆåç«¯æä¾›çš„æ•°æ®äº†ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦è¿›è¡Œä¸€ä¸ªå‰åç«¯çš„è°ƒè¯•ï¼Œæˆ‘ä»¬ä¼šæŠŠ<strong>è¿™ä¸ªè¿‡ç¨‹å«åšå‰åç«¯æ¥å£è”è°ƒ</strong>ã€‚</p><blockquote><p><strong>åœºæ™¯ï¼š</strong></p></blockquote><p>åœ¨ä¸€èˆ¬çš„å¼€å‘åœºæ™¯ä¸­ï¼Œåç«¯è´Ÿè´£å†™æ¥å£ï¼Œå‰ç«¯è´Ÿè´£è°ƒç”¨æ¥å£ã€‚ç„¶è€Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå‰ç«¯å¼€å‘é¡µé¢æ—¶ï¼Œåç«¯è¿˜æœªå†™å¥½æ¥å£ï¼Œå‰ç«¯å¯ä»¥å…ˆè‡ªå·±â€æ¨¡æ‹Ÿâ€œæ¥å£ï¼Œç­‰åˆ°åç«¯å†™å¥½æ¥å£æ—¶ï¼Œå‰ç«¯æ‰èƒ½çœŸæ­£çš„å»è°ƒç”¨åç«¯çš„æ¥å£ã€‚è¿™æ—¶å€™éœ€è¦éªŒè¯è°ƒè¯•å†…å®¹ï¼Œä¾‹å¦‚:æ¥å£ä¸­URLæ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠå‰ç«¯ä¼ çš„å‚æ•°å’Œåç«¯è¿”å›çš„æ•°æ®æ˜¯å¦æ­£ç¡®ç­‰ï¼Œè¿™ä¸ªéªŒè¯æ•°æ®å’ŒåŠŸèƒ½æœ‰æ²¡æœ‰è¯¯çš„è¿‡ç¨‹å°±æ˜¯è”è°ƒã€‚</p><blockquote><p><strong>ä½œç”¨ï¼š</strong></p></blockquote><p>å‰ç«¯ç•Œé¢çš„å±•ç¤ºï¼Œéœ€è¦æœåŠ¡ç«¯ä»æ•°æ®åº“æŸ¥æ‰¾æ•°æ®å¹¶é€šè¿‡æ¥å£è¿”å›ç»™å‰ç«¯ï¼Œè”è°ƒçš„<strong>ç›®çš„æ˜¯æµ‹è¯•å‰åç«¯çš„æ•°æ®æ ¼å¼ &#x2F; æ•°æ®æµ &#x2F;å‚æ•°å€¼æ˜¯å¦æ­£ç¡®</strong>ï¼Œä¿è¯æ¥å£èƒ½æ­£å¸¸è·å–å’Œè¿”å›æ­£ç¡®çš„æ•°æ®ï¼Œæ”¯æŒå¯¹åº”äº§å“åŠŸèƒ½çš„å®ç°ã€‚</p><ul><li>è”è°ƒæ˜¯å‰åç«¯ä¸€èµ·è§è¯é è°±çš„æµ‹è¯•ç»“æœ</li><li>ç»™éœ€æ±‚æ–¹æä¾›ä¸€ä¸ªæ­£ç¡®çš„éœ€æ±‚éªŒè¯ç¯å¢ƒ</li><li>å°½æ—©æš´éœ²å‰åç«¯å®ç°çš„é—®é¢˜</li></ul><h2 id="2-ä»€ä¹ˆæ˜¯Mock"><a href="#2-ä»€ä¹ˆæ˜¯Mock" class="headerlink" title="2.ä»€ä¹ˆæ˜¯Mock?"></a>2.ä»€ä¹ˆæ˜¯Mock?</h2><p>é€šå¸¸æ„ä¹‰çš„mockæŒ‡çš„å°±æ˜¯mock serverï¼Œæ¨¡æ‹ŸæœåŠ¡ç«¯è¿”å›çš„æ¥å£æ•°æ®ï¼Œç”¨äºå‰ç«¯å¼€å‘ï¼Œç¬¬ä¸‰æ–¹æ¥å£è”è°ƒã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯ä½¿ç”¨mockjsç”¨æ¥æ¨¡æ‹Ÿäº§ç”Ÿä¸€äº›è™šæ‹Ÿçš„æ•°æ®ï¼Œå¯ä»¥è®©å‰ç«¯åœ¨åç«¯æ¥å£è¿˜æ²¡æœ‰å¼€å‘å‡ºæ¥æ—¶ç‹¬ç«‹å¼€å‘ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çœŸå®çš„urlï¼Œmockjså¯ä»¥æ‹¦æˆªajaxè¯·æ±‚ï¼Œè¿”å›è®¾å®šå¥½çš„æ•°æ®ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/28377699-080aa3ec7ee0b609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</p><p><strong>åœºæ™¯ï¼š</strong></p><ul><li>å‰åç«¯å¼€å‘è¿›åº¦ä¸ä¸€è‡´ï¼Œå‰ç«¯å¼€å‘é€Ÿåº¦å¿«äºåç«¯ï¼Œéœ€è¦ä¸€ä¸ªå‡çš„æ¥å£ç”¨äºæ¨¡æ‹Ÿåç«¯è¿”å›ã€‚</li><li>é¡¹ç›®éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹æ¥å£ï¼Œå¦‚æœç¬¬ä¸‰æ–¹æ¥å£æœªå¼€å‘å¥½ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹æ¥å£æ²¡æœ‰æµ‹è¯•ç¯å¢ƒï¼Œä¸ºäº†ä¿è¯è¿›åº¦ï¼Œæ‰€ä»¥éœ€è¦æ¨¡æ‹Ÿæ¥å£ç”¨äºè°ƒè¯•ã€‚</li></ul><h2 id="4-æ€ä¹ˆä½¿ç”¨Mock"><a href="#4-æ€ä¹ˆä½¿ç”¨Mock" class="headerlink" title="4.æ€ä¹ˆä½¿ç”¨Mock?"></a>4.æ€ä¹ˆä½¿ç”¨Mock?</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®˜ç½‘åœ°å€ï¼šhttp:<span class="comment">//mockjs.com/</span></span><br></pre></td></tr></table></figure><h3 id="3-1-ä½¿ç”¨æ–¹å¼"><a href="#3-1-ä½¿ç”¨æ–¹å¼" class="headerlink" title="3.1 ä½¿ç”¨æ–¹å¼"></a>3.1 ä½¿ç”¨æ–¹å¼</h3><p>1ï¼‰åœ¨vue-cli&#x2F;viteé¡¹ç›®æ­å»ºåï¼Œå®‰è£…axioså’Œmockjs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -S axios</span><br><span class="line">npm install -D mockjs</span><br></pre></td></tr></table></figure><ol><li>åœ¨utilæ–‡ä»¶(é€šå¸¸æƒ…å†µä¸‹)é…ç½®axioså’Œmock</li></ol><ul><li>axiosé…ç½®ï¼Œå¹¶åœ¨main.jsä¸­å¼•å…¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http.jsæ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="property">data</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></table></figure><ul><li>mocké…ç½®ï¼Œå¹¶åœ¨main.jsä¸­æ‰§è¡Œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥åœ¨mock.jsæ–‡ä»¶ä¸­æ¨¡æ‹Ÿæ•°æ®</span></span><br><span class="line"><span class="comment">//å¦‚æœå¼•å…¥å‡ºç°... æ‰§è¡Œnpm i --save-dev @types/mockjs </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥mockjs</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Mock</span> <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mockæ–¹æ³•--ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line">  <span class="comment">// 1. æ‹¦æˆªè¯·æ±‚åœ°å€</span></span><br><span class="line">  <span class="comment">// 2. è¯·æ±‚æ–¹å¼</span></span><br><span class="line">  <span class="comment">// 3. è¿”å›æ•°æ®</span></span><br><span class="line">    <span class="comment">// å½¢å¼ï¼š1ç›´æ¥è¿”å›æ•°æ®  2å‡½æ•°è¿”å›æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å…¨å±€æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> arr =[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°-ç”Ÿæˆæ•°æ®</span></span><br><span class="line"><span class="comment">// å‡½æ•°è¿”å›æ•°æ®--æ–¹ä¾¿è¿›è¡Œå¢åˆ æ”¹æŸ¥</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createNews</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  <span class="keyword">let</span> newlist = []</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">    newlist.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="comment">// ç”Ÿæˆçš„æ•°æ®</span></span><br><span class="line">      <span class="attr">cname</span>:<span class="title class_">Mock</span>.<span class="property">Random</span>.<span class="title function_">cname</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newlist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr = <span class="title function_">createNews</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°-å¤„ç†æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleAddName</span> = (<span class="params">opt</span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// postä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  <span class="comment">// console.log(opt.body) //jsonå­—ç¬¦ä¸² éœ€è¦è½¬æˆå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> &#123;keyWords&#125; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(opt.<span class="property">body</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(keyWords)</span><br><span class="line">  arr.<span class="title function_">push</span>(&#123;<span class="attr">cname</span>:keyWords&#125;)</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°-åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleDeleteName</span> =(<span class="params">opt</span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡opt.urlæˆªå–å­—ç¬¦ä¸²ä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  <span class="comment">// console.log(opt.url)</span></span><br><span class="line">  <span class="keyword">let</span> index = opt.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="comment">// console.log(index)</span></span><br><span class="line">  arr.<span class="title function_">splice</span>(index,<span class="number">1</span>)</span><br><span class="line">  <span class="comment">// console.log(arr)</span></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ¥å£--get</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="string">&#x27;/mock/news&#x27;</span>,<span class="string">&#x27;get&#x27;</span>,arr)</span><br><span class="line"><span class="comment">// æ–°å¢æ¥å£--post</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="string">&#x27;/mock/addNews&#x27;</span>,<span class="string">&#x27;post&#x27;</span>,handleAddName)</span><br><span class="line"><span class="comment">// åˆ é™¤æ¥å£--delete(è¯·æ±‚çš„æŸ¥è¯¢å‚æ•°æ‹¼æ¥åœ¨è¯·æ±‚è·¯å¾„ä¸­çš„ï¼Œéœ€è¦å¯¹è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œä½¿ç”¨æ­£åˆ™ï¼Œåªè¦æ˜¯ç¬¦åˆæ ¡éªŒçš„è¿›æ¥è¿›è¡Œæ“ä½œ)</span></span><br><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="regexp">/^\/mock\/deleteNews/</span>,<span class="string">&#x27;delete&#x27;</span>,handleDeleteName)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥è¿”å›æ•°æ®</span></span><br><span class="line"><span class="comment">// Mock.mock(&#x27;/mock/news&#x27;,&#x27;put&#x27;,&#123;</span></span><br><span class="line"><span class="comment">// å±æ€§ list çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å«æœ‰ 1 åˆ° 10 ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">//   &quot;list|10&quot;:[</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//       &quot;fname&quot;:&quot;@cfirst()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;lname&quot;:&quot;@clast()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;avatar&quot;:&quot;@image(&#x27;100x100&#x27;,&#x27;pink&#x27;,&#x27;#fff&#x27;,&#x27;png&#x27;,&#x27;Hello&#x27;)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;info&quot;:&quot;@cparagraph()&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;age&quot;:&quot;@integer(0,100)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;address&quot;:&quot;@county(true)&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;yzm&quot;:&quot;@string(&#x27;number&#x27;,6)&quot;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   ]</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure><ul><li>main.jsæ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.jsæ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;./util/http.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œmockjsæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./util/mock.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€æä¾›</span></span><br><span class="line">app.<span class="title function_">provide</span>(<span class="string">&#x27;$axios&#x27;</span>,axios)</span><br><span class="line"></span><br><span class="line">app</span><br><span class="line">.<span class="title function_">use</span>(router)</span><br><span class="line">.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>æ¨¡æ‹Ÿè·å–åˆ°çš„æ•°æ®å¦‚ä¸‹å›¾(å…·ä½“å¯æ ¹æ®å®˜ç½‘æä¾›çš„ç¤ºä¾‹ï¼ŒæŒ‰éœ€ä½¿ç”¨)ï¼š</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/28377699-720630119b0e5c54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1138/format/webp" alt="img"></p><p>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</p><ol><li>è°ƒç”¨æ¥å£è¯·æ±‚æ•°æ®ï¼Œæ¸²æŸ“æ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Mockæ¨¡æ‹Ÿæ•°æ®<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item,index in list&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">      &lt;h4&gt;&#123;&#123;item.fname&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;h4&gt;&#123;&#123;item.cname&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;åˆ é™¤Name&quot; @click=&quot;deleteName(index)&quot;&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;addNameInp&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;æ–°å¢Name&quot; @click=&quot;addNameBtn&quot;&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// å¼•å…¥</span><br><span class="line">import &#123;ref,reactive,toRefs,inject,onMounted&#125; from &#x27;vue&#x27;</span><br><span class="line">// ä½¿ç”¨axios</span><br><span class="line">const $axios = inject(&#x27;$axios&#x27;)</span><br><span class="line">// æ•°æ®</span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">  list:[]</span><br><span class="line">&#125;)</span><br><span class="line">// è§£æ„list --ä½¿ç”¨toRefså˜æˆå“åº”å¼</span><br><span class="line">const &#123;list&#125; = toRefs(data)</span><br><span class="line">// æ–°å¢çš„åå­—çš„value</span><br><span class="line">const addNameInp = ref(&#x27;&#x27;)</span><br><span class="line">// æ–°å¢æŒ‰é’®</span><br><span class="line">const addNameBtn = async()=&gt;&#123;</span><br><span class="line">  // è¯·æ±‚æ•°æ®</span><br><span class="line">  let res = await $axios.post(&#x27;/mock/addNews&#x27;,&#123;</span><br><span class="line">    keyWords:addNameInp.value</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ¸…ç©ºè¾“å…¥æ¡†</span><br><span class="line">  addNameInp.value=&#x27;&#x27;</span><br><span class="line">  data.list = res</span><br><span class="line">&#125;</span><br><span class="line">// åˆ é™¤æŒ‰é’®</span><br><span class="line">const deleteName =async(index)=&gt;&#123;</span><br><span class="line">  let res = await $axios.delete(&#x27;/mock/deleteNews&#x27;,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">      index:index</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  data.list=res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(async()=&gt;&#123;</span><br><span class="line">  // è¯·æ±‚æ•°æ®</span><br><span class="line">  let res = await  $axios.get(&#x27;/mock/news&#x27;)</span><br><span class="line">  console.log(res)</span><br><span class="line">  // data.list  = res.list</span><br><span class="line">  data.list= res</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/28377699-749479bf0ce9c5bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ&quot;&gt;&lt;a href=&quot;#å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ&quot;&gt;&lt;/a&gt;å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨Mockæ¨¡æ‹Ÿæ•°æ®ï¼Ÿ&lt;/h1&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>2åˆ†é’Ÿè§„åˆ™</title>
    <link href="https://dont-sleep-so-late.github.io/2023/10/13/2%E5%88%86%E9%92%9F%E8%A7%84%E5%88%99/"/>
    <id>https://dont-sleep-so-late.github.io/2023/10/13/2%E5%88%86%E9%92%9F%E8%A7%84%E5%88%99/</id>
    <published>2023-10-12T17:44:25.000Z</published>
    <updated>2023-10-12T17:45:23.359Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2åˆ†é’Ÿè§„åˆ™"><a href="#2åˆ†é’Ÿè§„åˆ™" class="headerlink" title="2åˆ†é’Ÿè§„åˆ™"></a><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==" alt="img">2åˆ†é’Ÿè§„åˆ™</h1><p>å®ç”¨æŠ€å·§æ–‡æ‘˜</p><p>æ¯å½“ä½ å‘ç°å¾ˆéš¾å¼€å§‹æ‰§è¡ŒæŸé¡¹ä»»åŠ¡æ—¶ï¼Œå¯ä»¥è¯•è¯•å°†å…¶ç¼©å‡æˆ2åˆ†é’Ÿçš„ç‰ˆæœ¬ã€‚</p><ul><li>çœ‹ä¸€æœ¬ä¹¦ â†’ çœ‹ä¸€é¡µä¹¦</li><li>å†™ä¸€ç¯‡æ–‡ç«  â†’ å†™ä¸€å¥è¯</li><li>è·‘10å…¬é‡Œ â†’ ç©¿ä¸Šè·‘é‹</li><li>åš100æ¬¡ä¿¯å§æ’‘ â†’ åš1æ¬¡ä¿¯å§æ’‘</li><li>å¤šåƒè”¬èœæ°´æœ â†’ åƒä¸€ä¸ªæ°´æœ</li><li>ç¼–å†™ä¸€ä¸ªç¨‹åº â†’ ç¼–å†™ä¸€ä¸ªå‡½æ•° â†’ ç¼–å†™ä¸€è¡Œä»£ç </li></ul><p>è¿™æ ·åšçš„ç›®çš„æ˜¯ä½¿ä¸Šæ‰‹å˜å¾—è¶…çº§å®¹æ˜“ï¼Œè®©ä½ å…ˆä¸Šæ‰‹å†è¯´ã€‚ä¸€æ—¦å¼€å§‹åšäº†ï¼ˆè¿™å¯èƒ½æ˜¯æœ€è‰°éš¾çš„ä¸€æ­¥ï¼‰ï¼Œä½ å°±ä¼šå¼€å§‹æœ‰åŠ¨åŠ›ï¼Œå¯èƒ½ä¼šç»§ç»­åšä¸‹å»ã€‚</p><ul><li>é˜…è¯»ä¸€é¡µ â†’ é˜…è¯»10é¡µ â†’ è¯»å®Œç¬¬ä¸€ç« </li><li>å†™ä¸€ä¸ªå¥å­ â†’ å†™æ–‡ç« çš„å¼€å¤´ â†’ å†™å‡ºæ­£æ–‡</li><li>ç©¿ä¸Šè·‘é‹ â†’ æ­¥è¡Œ5åˆ†é’Ÿ â†’ è·‘æ­¥5åˆ†é’Ÿ</li></ul><p>ä¸€æ—¦å¼€å§‹ï¼Œç»§ç»­åšä¸‹å»å°±ä¼šå®¹æ˜“å¾—å¤šã€‚æœ‰æ—¶ï¼Œä½ ç”šè‡³ä¼šå‘ç°ï¼Œè‡ªå·±åœ¨ä¸çŸ¥ä¸è§‰é—´å·²ç»å®Œæˆäº†ä»»åŠ¡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2åˆ†é’Ÿè§„åˆ™&quot;&gt;&lt;a href=&quot;#2åˆ†é’Ÿè§„åˆ™&quot; class=&quot;headerlink&quot; title=&quot;2åˆ†é’Ÿè§„åˆ™&quot;&gt;&lt;/a&gt;&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA</summary>
      
    
    
    
    
    <category term="å®ç”¨æŠ€å·§" scheme="https://dont-sleep-so-late.github.io/tags/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
</feed>
