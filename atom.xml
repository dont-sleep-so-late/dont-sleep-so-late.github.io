<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä½ åˆ«ç¡è¿™ä¹ˆæ™šï¼</title>
  
  <subtitle>æˆ‘æœ‰ä¸€åªå°å…”å…”ğŸ‡</subtitle>
  <link href="https://dont-sleep-so-late.github.io/atom.xml" rel="self"/>
  
  <link href="https://dont-sleep-so-late.github.io/"/>
  <updated>2024-04-07T12:26:41.469Z</updated>
  <id>https://dont-sleep-so-late.github.io/</id>
  
  <author>
    <name>ä½ åˆ«ç¡è¿™ä¹ˆæ™š</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/02/js/%E8%AF%AD%E9%9F%B3%E6%96%87%E5%AD%97%E4%BA%92%E8%BD%AC/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/02/js/%E8%AF%AD%E9%9F%B3%E6%96%87%E5%AD%97%E4%BA%92%E8%BD%AC/</id>
    <published>2024-04-02T14:31:15.000Z</published>
    <updated>2024-04-07T12:26:41.469Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°"><a href="#å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°" class="headerlink" title="å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°"></a>å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°</h1><h2 id="webkitSpeechRecognitionï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰"><a href="#webkitSpeechRecognitionï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰" class="headerlink" title="webkitSpeechRecognitionï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰"></a>webkitSpeechRecognitionï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªwebkitSpeechRecognitionå®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> newRecognition = <span class="keyword">new</span> <span class="title function_">webkitSpeechRecognition</span>();</span><br><span class="line"><span class="comment">// è®¾ç½®è¯†åˆ«åˆ°å£°éŸ³å°±å…³é—­è¿˜æ˜¯ä¸€ç›´è¯†åˆ«</span></span><br><span class="line">newRecognition.<span class="property">continuous</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// å¼€å¯å½•éŸ³</span></span><br><span class="line">newRecognition.<span class="title function_">start</span>();</span><br><span class="line"><span class="comment">// å…³é—­å½•éŸ³</span></span><br><span class="line">newRecognition.<span class="title function_">stop</span>();</span><br><span class="line"><span class="comment">// è¯†åˆ«åˆ°ç»“æœå³è§¦å‘ï¼Œæ‰€ä»¥è®²è¯è¿‡ç¨‹å¤šæ¬¡åœé¡¿çš„æƒ…å†µä¸‹ä¼šè§¦å‘å¤šæ¬¡</span></span><br><span class="line">newRecognition.<span class="property">onresult</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åŸºæœ¬ä»¥ä¸Šå°±å·²ç»è¾¾åˆ°äº†è¯­éŸ³è½¬æ–‡å­—çš„åŠŸèƒ½ï¼Œä¸‹é¢æ˜¯ä¸€äº›å…¶ä»–äº‹ä»¶</span></span><br><span class="line"><span class="comment">//åªè¦å¼€å§‹è®²è¯äº†ï¼Œå°±ä¼šè§¦å‘onsoundstartå’Œonspeechstartäº‹ä»¶</span></span><br><span class="line">newRecognition.<span class="property">onsoundstart</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¼€å§‹æ”¶å¬äº†&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br><span class="line">newRecognition.<span class="property">onspeechstart</span> = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¼€å§‹è®²è¯äº†&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// onspeechendäº‹ä»¶åº”è¯¥æ˜¯ç›‘æµ‹åˆ°æ‰§è¡Œäº†stopæ–¹æ³•æ—¶è§¦å‘çš„ã€‚è€Œå¦‚æœä¸€æ®µæ—¶é—´æ²¡æœ‰å½•å…¥ä¿¡æ¯ï¼Œåˆ™ä¼šè‡ªåŠ¨æ‰§è¡Œstopæ–¹æ³•åœæ­¢å½•éŸ³ï¼ŒåŒæ ·ä¹Ÿä¼šè§¦å‘onspeechendäº‹ä»¶</span></span><br><span class="line">newRecognition.<span class="property">onspeechend</span> = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®²è¯å®Œæ¯•&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// onerrorå¾ˆæ˜æ˜¾æ˜¯æœ‰å¼‚å¸¸æ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œæµ‹è¯•å‘ç°å½“é•¿æ—¶é—´æ²¡æœ‰å½•å…¥å¯¼è‡´è‡ªåŠ¨å…³é—­å½•éŸ³çš„æ—¶å€™å°±ä¼šè§¦å‘è¯¥äº‹ä»¶</span></span><br><span class="line">newRecognition.<span class="property">onerror</span> = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vue3demo </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;è¯­éŸ³è½¬æ–‡å­—å†…å®¹åŒº&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">id</span>=<span class="string">&quot;area&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">&quot;è¯´ç‚¹ä»€ä¹ˆå§...&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">ref</span>=<span class="string">&quot;areaRef&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">&quot;textInp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;speek&quot;</span>&gt;</span>ğŸ¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;addText&quot;</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">v-show</span>=<span class="string">&quot;list.length &gt; 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, toRefs, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    setup () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> areaRef = <span class="title function_">ref</span>(<span class="literal">null</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">textInp</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isGoing</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> recognition = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title function_">webkitSpeechRecognition</span>();</span></span><br><span class="line"><span class="language-javascript">        recognition.<span class="property">continuous</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        recognition.<span class="property">interimResults</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        recognition.<span class="property">lang</span> = <span class="string">&#x27;zh-CN&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        recognition.<span class="property">onresult</span>=<span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i &lt;= event.<span class="property">resultIndex</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                result += event.<span class="property">results</span>[i][<span class="number">0</span>].<span class="property">transcript</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            state.<span class="property">textInp</span> = result</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">/** å¼€å§‹ / ç»“æŸ å½•éŸ³ */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">speek</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(state.<span class="property">isGoing</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                recognition.<span class="title function_">stop</span>();</span></span><br><span class="line"><span class="language-javascript">                state.<span class="property">isGoing</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                recognition.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">                state.<span class="property">isGoing</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">/** å‘å¸ƒ */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">addText</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            state.<span class="property">list</span>.<span class="title function_">push</span>(state.<span class="property">textInp</span>);</span></span><br><span class="line"><span class="language-javascript">            state.<span class="property">textInp</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            ...<span class="title function_">toRefs</span>(state),</span></span><br><span class="line"><span class="language-javascript">            areaRef,</span></span><br><span class="line"><span class="language-javascript">            addText,</span></span><br><span class="line"><span class="language-javascript">            speek</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="SpeechSynthesisUtteranceï¼ˆè¯­éŸ³åˆæˆï¼‰"><a href="#SpeechSynthesisUtteranceï¼ˆè¯­éŸ³åˆæˆï¼‰" class="headerlink" title="SpeechSynthesisUtteranceï¼ˆè¯­éŸ³åˆæˆï¼‰"></a>SpeechSynthesisUtteranceï¼ˆè¯­éŸ³åˆæˆï¼‰</h2><p>åŸºç¡€æµ‹è¯•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ssu = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">SpeechSynthesisUtterance</span>(<span class="string">&#x27;Hiï¼Œgirlï¼&#x27;</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">speechSynthesis</span>.<span class="title function_">speak</span>(ssu);</span><br></pre></td></tr></table></figure><p><strong>SpeechSynthesisUtteranceå¯¹è±¡æä¾›äº†ä¸€äº›å…¶ä»–å±æ€§ä¾›è®¾ç½®ï¼š</strong></p><ul><li><p>langï¼šä½¿ç”¨çš„è¯­è¨€ï¼Œå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ï¼šâ€œzh-cnâ€ï¼‰</p></li><li><p>volumeï¼šéŸ³é‡ï¼Œå€¼åœ¨0-1ä¹‹é—´ï¼ˆé»˜è®¤æ˜¯1ï¼‰</p></li><li><p>rateï¼šè¯­é€Ÿçš„å€æ•°ï¼Œå€¼åœ¨0.1-10ä¹‹é—´ï¼ˆé»˜è®¤1å€ï¼‰</p></li><li><p>pitchï¼šéŸ³é«˜ï¼Œå€¼åœ¨0-2ä¹‹é—´ï¼Œï¼ˆé»˜è®¤æ˜¯1ï¼‰</p></li><li><p>voiceURIï¼šæŒ‡å®šå¸Œæœ›ä½¿ç”¨çš„å£°éŸ³ï¼Œå­—ç¬¦ä¸²</p></li><li><p>onstartï¼šè¯­éŸ³å¼€å§‹åˆæˆæ—¶è§¦å‘</p></li><li><p>onpauseï¼šè¯­éŸ³æš‚åœæ—¶è§¦å‘</p></li><li><p>onresumeï¼šè¯­éŸ³åˆæˆé‡æ–°å¼€å§‹æ—¶è§¦å‘</p></li><li><p>onendï¼šè¯­éŸ³ç»“æŸæ—¶è§¦å‘</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ssu = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">SpeechSynthesisUtterance</span>();</span><br><span class="line">ssu.<span class="property">text</span> = <span class="string">&#x27;Hiï¼Œgirlï¼&#x27;</span>;</span><br><span class="line">ssu.<span class="property">volume</span> = <span class="number">0.5</span>;</span><br><span class="line">ssu.<span class="property">rate</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>speechSynthesiså¯¹è±¡</strong><br>åˆ›å»ºå®ŒSpeechSynthesisUtteranceå¯¹è±¡ä¹‹åï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡ä¼ é€’ç»™speechSynthesiså¯¹è±¡çš„speakæ–¹æ³•ä¸­ã€‚</p><ul><li><p>stop()ï¼šåœæ­¢åˆæˆ</p></li><li><p>pause()ï¼šæš‚åœåˆæˆ</p></li><li><p>resume()ï¼šé‡æ–°å¼€å§‹åˆæˆ</p></li><li><p>getVoices()ï¼šè¿”å›æµè§ˆå™¨æ”¯æŒçš„è¯­éŸ³åŒ…æ•°ç»„</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">speechSynthesis</span>.<span class="title function_">pause</span>(); <span class="comment">// ç‚¹å‡»æš‚åœ</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">speechSynthesis</span>.<span class="title function_">getVoices</span>()); <span class="comment">//æˆ‘çš„chromeæµè§ˆå™¨ä¸‹ç«Ÿç„¶æ˜¯ç©ºæ•°ç»„ã€‚ã€‚wtf</span></span><br></pre></td></tr></table></figure><p>demo:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¯­éŸ³è½¬æ–‡å­—<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">textarea</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">shape</span>=<span class="string">&quot;&quot;</span> <span class="attr">coords</span>=<span class="string">&quot;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;area&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¯´ç‚¹ä»€ä¹ˆ...&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;speek&quot;</span>&gt;</span>éº¦å…‹é£<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;addBtn&quot;</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;é¡µé¢åŠ è½½å®Œæ¯•&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> area = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#area&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> speek = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#speek&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> addBtn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#addBtn&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> text = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#text&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> recognition = <span class="keyword">new</span> <span class="title function_">webkitSpeechRecognition</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> isSpeek = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            recognition.<span class="property">continuous</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            recognition.<span class="property">interimResults</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            recognition.<span class="property">lang</span> = <span class="string">&#x27;zh-CN&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            recognition.<span class="property">onresult</span>=<span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span>(<span class="keyword">let</span> i = event.<span class="property">resultIndex</span>;i &lt;= event.<span class="property">resultIndex</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (event.<span class="property">results</span>[i].<span class="property">isFinal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        result += event.<span class="property">results</span>[i][<span class="number">0</span>].<span class="property">transcript</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                area.<span class="property">value</span> = result</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            speek.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(isSpeek) &#123;</span></span><br><span class="line"><span class="language-javascript">                    recognition.<span class="title function_">stop</span>();</span></span><br><span class="line"><span class="language-javascript">                    isSpeek = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                recognition.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">                isSpeek = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            addBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">textContent</span> = area.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                text.<span class="title function_">appendChild</span>(li);</span></span><br><span class="line"><span class="language-javascript">                area.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="edge-ttsè¯­éŸ³åˆæˆ-webå‰ç«¯å®ç°"><a href="#edge-ttsè¯­éŸ³åˆæˆ-webå‰ç«¯å®ç°" class="headerlink" title="edge-ttsè¯­éŸ³åˆæˆ webå‰ç«¯å®ç°"></a>edge-ttsè¯­éŸ³åˆæˆ webå‰ç«¯å®ç°</h1><h2 id="1ã€ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#1ã€ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="1ã€ä½¿ç”¨æ–¹æ³•ï¼š"></a>1ã€ä½¿ç”¨æ–¹æ³•ï¼š</h2><p>åœ¨éœ€è¦çš„åœ°æ–¹å¯¼å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> voiceList = [&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-XiaoxiaoNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Xiaoxiao&quot;</span>&#125;,&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-XiaoyiNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Xiaoyi&quot;</span>&#125;,&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-YunjianNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Yunjian&quot;</span>&#125;,&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-YunxiNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Yunxi&quot;</span>&#125;,&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-YunxiaNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Yunxia&quot;</span>&#125;,&#123;<span class="string">&quot;ShortName&quot;</span>:<span class="string">&quot;zh-CN-YunyangNeural&quot;</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;Yunyang&quot;</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> ws = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> blobs = [];</span><br><span class="line"><span class="keyword">let</span> audioElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;audio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendReq</span>(<span class="params">ssml, format,connectionId</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> configData = &#123;</span><br><span class="line">    <span class="attr">context</span>: &#123;</span><br><span class="line">      <span class="attr">synthesis</span>: &#123;</span><br><span class="line">        <span class="attr">audio</span>: &#123;</span><br><span class="line">          <span class="attr">metadataoptions</span>: &#123;</span><br><span class="line">            <span class="attr">sentenceBoundaryEnabled</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">            <span class="attr">wordBoundaryEnabled</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">outputFormat</span>: format,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> configMessage =</span><br><span class="line">    <span class="string">`X-Timestamp:<span class="subst">$&#123;<span class="built_in">Date</span>()&#125;</span>\r\n`</span> +</span><br><span class="line">    <span class="string">&quot;Content-Type:application/json; charset=utf-8\r\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;Path:speech.config\r\n\r\n&quot;</span> +</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(configData);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`é…ç½®è¯·æ±‚å‘é€ï¼š<span class="subst">$&#123;configMessage&#125;</span>\n`</span>);</span><br><span class="line">  <span class="keyword">let</span> ssmlMessage =</span><br><span class="line">    <span class="string">`X-Timestamp:<span class="subst">$&#123;<span class="built_in">Date</span>()&#125;</span>\r\n`</span> +</span><br><span class="line">    <span class="string">`X-RequestId:<span class="subst">$&#123;connectionId&#125;</span>\r\n`</span> +</span><br><span class="line">    <span class="string">`Content-Type:application/ssml+xml\r\n`</span> +</span><br><span class="line">    <span class="string">`Path:ssml\r\n\r\n`</span> +</span><br><span class="line">    ssml;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`SSMLæ¶ˆæ¯å‘é€ï¼š<span class="subst">$&#123;ssmlMessage&#125;</span>\n`</span>);</span><br><span class="line">  ws.<span class="title function_">send</span>(configMessage, <span class="function">(<span class="params">configError</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (configError) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`é…ç½®è¯·æ±‚å‘é€å¤±è´¥ï¼š<span class="subst">$&#123;connectionId&#125;</span>\n`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ws.<span class="title function_">send</span>(ssmlMessage, <span class="function">(<span class="params">ssmlError</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ssmlError) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`SSMLæ¶ˆæ¯å‘é€å¤±è´¥ï¼š<span class="subst">$&#123;connectionId&#125;</span>\n`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generateRandomHex</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 16 å­—èŠ‚çš„ Uint8Array</span></span><br><span class="line">  <span class="keyword">const</span> randomBytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="number">16</span>);</span><br><span class="line">  <span class="comment">// å¡«å……æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªéšæœºçš„ 0-255 ä¹‹é—´çš„æ•´æ•°</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">crypto</span>.<span class="title function_">getRandomValues</span>(randomBytes);</span><br><span class="line">  <span class="comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¹¶å°†å­—æ¯è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line">  <span class="keyword">const</span> hexString = <span class="title class_">Array</span>.<span class="title function_">from</span>(randomBytes)</span><br><span class="line">    .<span class="title function_">map</span>(<span class="function"><span class="params">byte</span> =&gt;</span> byte.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">return</span> hexString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">ssml, format,autpPlay</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> connectionId = <span class="title function_">generateRandomHex</span>();</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=6A5AA1D4EAFF4E9FB37E23D68491D6F4&amp;ConnectionId=<span class="subst">$&#123;connectionId&#125;</span>`</span>;</span><br><span class="line">    ws = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">WebSocket</span>(url);</span><br><span class="line">    ws.<span class="property">onopen</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;wsOpen&quot;</span>);</span><br><span class="line">      <span class="title function_">sendReq</span>(ssml, format,connectionId)</span><br><span class="line">    &#125;;</span><br><span class="line">    ws.<span class="property">onclose</span> = <span class="function">(<span class="params">code, reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ–­å¼€ç©ºé—²è¶…è¿‡30ç§’çš„è¿æ¥</span></span><br><span class="line">      ws = <span class="literal">null</span>;</span><br><span class="line">      blobs = [];</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è¿æ¥å·²å…³é—­ï¼š <span class="subst">$&#123;reason&#125;</span> <span class="subst">$&#123;code&#125;</span>`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    ws.<span class="property">onmessage</span> = <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(message.<span class="property">data</span> <span class="keyword">instanceof</span> <span class="title class_">Blob</span>)) &#123;</span><br><span class="line">        <span class="keyword">let</span> data = message.<span class="property">data</span>.<span class="title function_">toString</span>();</span><br><span class="line">        <span class="keyword">if</span> (data.<span class="title function_">includes</span>(<span class="string">&quot;Path:turn.start&quot;</span>)) &#123;</span><br><span class="line">          <span class="comment">// å¼€å§‹ä¼ è¾“</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="title function_">includes</span>(<span class="string">&quot;Path:turn.end&quot;</span>)) &#123;</span><br><span class="line">          <span class="comment">// ç»“æŸä¼ è¾“</span></span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;blobs.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">let</span> contentIndex = <span class="number">130</span>;</span><br><span class="line">            <span class="keyword">if</span>(i == blobs.<span class="property">length</span>-<span class="number">1</span>)&#123;</span><br><span class="line">              contentIndex = <span class="number">105</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            blobs[i] = blobs[i].<span class="title function_">slice</span>(contentIndex)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">let</span> result = <span class="keyword">new</span> <span class="title class_">Blob</span>(blobs);</span><br><span class="line">          <span class="keyword">let</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(result);</span><br><span class="line">          <span class="keyword">if</span>(autpPlay)&#123;</span><br><span class="line">            audioElement.<span class="title function_">pause</span>();</span><br><span class="line">            audioElement.<span class="property">src</span> = url;</span><br><span class="line">            audioElement.<span class="title function_">play</span>();</span><br><span class="line">          &#125;</span><br><span class="line">          blobs = [];</span><br><span class="line">          ws.<span class="title function_">close</span>();</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ä¼ è¾“å®Œæˆï¼š<span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">          <span class="title function_">resolve</span>(url);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="property">data</span> <span class="keyword">instanceof</span> <span class="title class_">Blob</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¶åˆ°ä¿¡å·äº†b......&quot;</span>,message.<span class="property">data</span>)</span><br><span class="line">        blobs.<span class="title function_">push</span>(message.<span class="property">data</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    ws.<span class="property">onerror</span> = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è¿æ¥å¤±è´¥ï¼š <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">start</span>(<span class="params">text,voice=<span class="number">1</span>,rate = <span class="number">0</span>,pitch=<span class="number">0</span>,autpPlay=<span class="literal">true</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(text)&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable constant_">SSML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;text&quot;</span>,text);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;voice&quot;</span>,voiceList[voice].<span class="property">ShortName</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;rate&quot;</span>,rate);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pitch&quot;</span>,pitch);</span><br><span class="line">    <span class="variable constant_">SSML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;speak xmlns=&quot;http://www.w3.org/2001/10/synthesis&quot; xmlns:mstts=&quot;http://www.w3.org/2001/mstts&quot; xmlns:emo=&quot;http://www.w3.org/2009/10/emotionml&quot; version=&quot;1.0&quot; xml:lang=&quot;en-US&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;voice name=&quot;<span class="subst">$&#123;voiceList[voice].ShortName&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;prosody rate=&quot;<span class="subst">$&#123;rate&#125;</span>%&quot; pitch=&quot;<span class="subst">$&#123;pitch&#125;</span>%&quot;&gt;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;text&#125;</span></span></span><br><span class="line"><span class="string">            &lt;/prosody&gt;</span></span><br><span class="line"><span class="string">        &lt;/voice&gt;</span></span><br><span class="line"><span class="string">    &lt;/speak&gt;`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">SSML</span>);</span><br><span class="line">    <span class="keyword">let</span> format = <span class="string">&quot;audio-24khz-48kbitrate-mono-mp3&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">connect</span>(<span class="variable constant_">SSML</span>, format,autpPlay).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Received result:&#x27;</span>, result);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2ã€æ–¹æ³•è¯´æ˜"><a href="#2ã€æ–¹æ³•è¯´æ˜" class="headerlink" title="2ã€æ–¹æ³•è¯´æ˜"></a>2ã€æ–¹æ³•è¯´æ˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">startæ–¹æ³•ï¼šä¼ é€’æ–‡æœ¬åŠè¯­éŸ³é…ç½®ä¿¡æ¯</span><br><span class="line">è°ƒç”¨ç¤ºä¾‹</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">startSpeak</span> = <span class="keyword">async</span>(<span class="params"></span>) =&gt;&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="keyword">await</span> <span class="title function_">start</span>(<span class="string">&#x27;æ¬¢è¿æ¥åˆ°ä¸­å›½è”é€šæ™ºæ…§å¤§è„‘å±•å…,æ¥ä¸‹æ¥ä¸ºå„ä½æ¥å®¾ä»‹ç»æ”¿ä¼å¤§å±ï¼›&#x27;</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">è¿”å›ç¤ºä¾‹ï¼š</span><br><span class="line"><span class="attr">blob</span>:<span class="attr">http</span>:<span class="comment">//localhost:8080/f0cf900d-81ed-4e0f-bade-058726453781</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>å…¥å‚å­—æ®µ</th><th>æè¿°</th></tr></thead><tbody><tr><td>text</td><td>éœ€è¦è½¬ä¸ºè¯­éŸ³çš„æ–‡å­—(å¿…ä¼ )</td></tr><tr><td>voice</td><td>è½¬æ¢ä¸ºä¸­æ–‡çš„äººç‰©(éŸ³è‰²ï¼Œä¼ <strong>ç¬¬ä¸‰éƒ¨åˆ†è§’è‰²è¯´æ˜</strong>ShortNameå¯¹åº”å¯¹è±¡çš„keyå€¼)</td></tr><tr><td>rate</td><td>è¯­é€Ÿï¼Œé»˜è®¤å€¼ä¸º0</td></tr><tr><td>pitch</td><td>éŸ³è°ƒï¼Œé»˜è®¤å€¼ä¸º0</td></tr><tr><td>autoPlay</td><td>æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œé»˜è®¤å€¼true</td></tr></tbody></table><h2 id="3ã€è§’è‰²è¯´æ˜"><a href="#3ã€è§’è‰²è¯´æ˜" class="headerlink" title="3ã€è§’è‰²è¯´æ˜"></a>3ã€è§’è‰²è¯´æ˜</h2><p>voiceï¼šå£°éŸ³ ã€0-5ã€‘</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ShortName</span>: äººç‰©å£°éŸ³</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-XiaoxiaoNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Xiaoxiao&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-XiaoyiNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Xiaoyi&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-YunjianNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Yunjian&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-YunxiNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Yunxi&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-YunxiaNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Yunxia&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;ShortName&quot;</span>: <span class="string">&quot;zh-CN-YunyangNeural&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Yunyang&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°&quot;&gt;&lt;a href=&quot;#å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°&quot;&gt;&lt;/a&gt;å‰ç«¯AIè¯­éŸ³æ–¹é¢çš„å®ç°&lt;/h1&gt;&lt;h2 id=&quot;webkitSpeechRecognitionï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="JavaSciprt" scheme="https://dont-sleep-so-late.github.io/tags/JavaSciprt/"/>
    
    <category term="AIè¯­éŸ³" scheme="https://dont-sleep-so-late.github.io/tags/AI%E8%AF%AD%E9%9F%B3/"/>
    
  </entry>
  
  <entry>
    <title>å¼‚æ­¥ç›¸å…³</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/02/%E5%85%AB%E8%82%A1%E6%96%87/%E5%BC%82%E6%AD%A5%E7%9B%B8%E5%85%B3/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/02/%E5%85%AB%E8%82%A1%E6%96%87/%E5%BC%82%E6%AD%A5%E7%9B%B8%E5%85%B3/</id>
    <published>2024-04-02T03:31:36.000Z</published>
    <updated>2024-04-03T03:48:46.815Z</updated>
    
    <content type="html"><![CDATA[<h4 id="3-1-promiseå’Œ-async-await-åŒºåˆ«"><a href="#3-1-promiseå’Œ-async-await-åŒºåˆ«" class="headerlink" title="3.1 promiseå’Œ async await åŒºåˆ«"></a>3.1 promiseå’Œ async await åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ul><li><p><strong>æ¦‚å¿µ</strong><br><strong>Promise</strong> æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ï¼Œç®€å•åœ°è¯´ï¼ŒPromiseå¥½æ¯”å®¹å™¨ï¼Œé‡Œé¢å­˜æ”¾ç€ä¸€äº›æœªæ¥æ‰ä¼šæ‰§è¡Œå®Œæ¯•ï¼ˆå¼‚æ­¥ï¼‰çš„äº‹ä»¶çš„ç»“æœï¼Œè€Œè¿™äº›ç»“æœä¸€æ—¦ç”Ÿæˆæ˜¯æ— æ³•æ”¹å˜çš„</p><p><strong>async await</strong>ä¹Ÿæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä»–éµå¾ªçš„æ˜¯Generator å‡½æ•°çš„è¯­æ³•ç³–ï¼Œä»–æ‹¥æœ‰å†…ç½®æ‰§è¡Œå™¨ï¼Œä¸éœ€è¦é¢å¤–çš„è°ƒç”¨ç›´æ¥ä¼šè‡ªåŠ¨æ‰§è¡Œå¹¶è¾“å‡ºç»“æœï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p></li><li><h5 id="ä¸¤è€…çš„åŒºåˆ«"><a href="#ä¸¤è€…çš„åŒºåˆ«" class="headerlink" title="ä¸¤è€…çš„åŒºåˆ«"></a>ä¸¤è€…çš„åŒºåˆ«</h5><ol><li>Promiseçš„å‡ºç°è§£å†³äº†ä¼ ç»Ÿcallbackå‡½æ•°å¯¼è‡´çš„â€œåœ°åŸŸå›è°ƒâ€é—®é¢˜ï¼Œä½†å®ƒçš„è¯­æ³•å¯¼è‡´äº†å®ƒå‘çºµå‘å‘å±•è¡Œæˆäº†ä¸€ä¸ªå›è°ƒé“¾ï¼Œé‡åˆ°å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¿™æ ·çš„è¯­æ³•æ˜¾ç„¶ä¹Ÿæ˜¯ä¸ç¾è§‚çš„ã€‚è€Œasync awaitä»£ç çœ‹èµ·æ¥ä¼šç®€æ´äº›ï¼Œä½¿å¾—å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œawaitçš„æœ¬è´¨æ˜¯å¯ä»¥æä¾›ç­‰åŒäºâ€åŒæ­¥æ•ˆæœâ€œçš„ç­‰å¾…å¼‚æ­¥è¿”å›èƒ½åŠ›çš„è¯­æ³•ç³–ï¼Œåªæœ‰è¿™ä¸€å¥ä»£ç æ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€å¥ã€‚</li><li>async awaitä¸Promiseä¸€æ ·ï¼Œæ˜¯éé˜»å¡çš„ã€‚</li><li>async awaitæ˜¯åŸºäºPromiseå®ç°çš„ï¼Œå¯ä»¥è¯´æ˜¯æ”¹è‰¯ç‰ˆçš„Promiseï¼Œå®ƒä¸èƒ½ç”¨äºæ™®é€šçš„å›è°ƒå‡½æ•°ã€‚</li></ol></li></ul><h4 id="3-2-deferå’ŒasyncåŒºåˆ«"><a href="#3-2-deferå’ŒasyncåŒºåˆ«" class="headerlink" title="3.2 deferå’ŒasyncåŒºåˆ«"></a>3.2 deferå’ŒasyncåŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åŒºåˆ«ä¸»è¦åœ¨äºä¸€ä¸ªæ‰§è¡Œæ—¶é—´,deferä¼šåœ¨æ–‡æ¡£è§£æå®Œä¹‹åæ‰§è¡Œ,å¹¶ä¸”å¤šä¸ªdeferä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œ,è€Œasyncåˆ™æ˜¯åœ¨jsåŠ è½½å¥½ä¹‹åå°±ä¼šæ‰§è¡Œ,å¹¶ä¸”å¤šä¸ªasync,å“ªä¸ªåŠ è½½å¥½å°±æ‰§è¡Œå“ªä¸ª</p><p><strong>è§£æï¼š</strong></p><p>åœ¨æ²¡æœ‰deferæˆ–è€…asyncçš„æƒ…å†µä¸‹ï¼šä¼šç«‹å³æ‰§è¡Œè„šæœ¬,æ‰€ä»¥é€šå¸¸å»ºè®®æŠŠscriptæ”¾åœ¨bodyæœ€å</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>asyncï¼šæœ‰asyncçš„è¯,åŠ è½½å’Œæ¸²æŸ“åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½ä¸æ‰§è¡Œå¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ã€‚<br>ä½†æ˜¯å¤šä¸ªjsæ–‡ä»¶çš„åŠ è½½é¡ºåºä¸ä¼šæŒ‰ç…§ä¹¦å†™é¡ºåºè¿›è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>dererï¼šæœ‰dererçš„è¯,åŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹å°†å’Œ script.js çš„åŠ è½½å¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ï¼Œä½†æ˜¯ script.js çš„æ‰§è¡Œè¦åœ¨æ‰€æœ‰å…ƒç´ è§£æå®Œæˆä¹‹åï¼ŒDOMContentLoaded äº‹ä»¶è§¦å‘ä¹‹å‰å®Œæˆ,å¹¶ä¸”å¤šä¸ªdeferä¼šæŒ‰ç…§é¡ºåºè¿›è¡ŒåŠ è½½ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-3-åŒæ­¥å’Œå¼‚æ­¥"><a href="#3-3-åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="3.3. åŒæ­¥å’Œå¼‚æ­¥"></a>3.3. åŒæ­¥å’Œå¼‚æ­¥</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åŒæ­¥</p><ul><li>æŒ‡åœ¨ <strong>ä¸»çº¿ç¨‹</strong>ä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</li><li>ä¹Ÿå°±æ˜¯è°ƒç”¨ä¸€æ—¦å¼€å§‹ï¼Œå¿…é¡»è¿™ä¸ªè°ƒç”¨ <strong>è¿”å›ç»“æœ</strong>(åˆ’é‡ç‚¹â€”â€”ï¼‰æ‰èƒ½ç»§ç»­å¾€åæ‰§è¡Œã€‚ç¨‹åºçš„æ‰§è¡Œé¡ºåºå’Œä»»åŠ¡æ’åˆ—é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚</li></ul><p>å¼‚æ­¥</p><ul><li>å¼‚æ­¥ä»»åŠ¡æ˜¯æŒ‡ä¸è¿›å…¥ä¸»çº¿ç¨‹ï¼Œè€Œè¿›å…¥ <strong>ä»»åŠ¡é˜Ÿåˆ—</strong>çš„ä»»åŠ¡ï¼Œåªæœ‰ä»»åŠ¡é˜Ÿåˆ—é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œè¯¥ä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹ã€‚</li><li>æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª <strong>å›è°ƒå‡½æ•°</strong>ã€‚å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡,è€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œã€‚</li><li>ç¨‹åºçš„æ‰§è¡Œé¡ºåºå’Œä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯<strong>ä¸ä¸€è‡´</strong>çš„ï¼Œå¼‚æ­¥çš„ã€‚</li><li>æˆ‘ä»¬å¸¸ç”¨çš„setTimeoutå’ŒsetIntervalå‡½æ•°ï¼ŒAjaxéƒ½æ˜¯å¼‚æ­¥æ“ä½œã€‚</li></ul><h4 id="3-4-å®ç°å¼‚æ­¥çš„æ–¹æ³•"><a href="#3-4-å®ç°å¼‚æ­¥çš„æ–¹æ³•" class="headerlink" title="3.4 å®ç°å¼‚æ­¥çš„æ–¹æ³•"></a>3.4 å®ç°å¼‚æ­¥çš„æ–¹æ³•</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰ã€äº‹ä»¶ç›‘å¬ã€å‘å¸ƒè®¢é˜…ã€Promise&#x2F;A+ã€ç”Ÿæˆå™¨Generators&#x2F; yieldã€async&#x2F;await</p><ol><li><p>JS å¼‚æ­¥ç¼–ç¨‹è¿›åŒ–å²ï¼šcallback -&gt; promise -&gt; generator -&gt; async + await</p></li><li><p>async&#x2F;await å‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p></li><li><p>async&#x2F;awaitå¯ä»¥è¯´æ˜¯å¼‚æ­¥ç»ˆæè§£å†³æ–¹æ¡ˆäº†ã€‚</p><p>(1) async&#x2F;awaitå‡½æ•°ç›¸å¯¹äºPromiseï¼Œä¼˜åŠ¿ä½“ç°åœ¨ï¼š</p><ul><li>å¤„ç† then çš„è°ƒç”¨é“¾ï¼Œèƒ½å¤Ÿæ›´æ¸…æ™°å‡†ç¡®çš„å†™å‡ºä»£ç </li><li>å¹¶ä¸”ä¹Ÿèƒ½ä¼˜é›…åœ°è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ã€‚</li></ul><p>å½“ç„¶async&#x2F;awaitå‡½æ•°ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œå› ä¸º await å°†å¼‚æ­¥ä»£ç æ”¹é€ æˆäº†åŒæ­¥ä»£ç ï¼Œå¦‚æœå¤šä¸ªå¼‚æ­¥ä»£ç æ²¡æœ‰ä¾èµ–æ€§å´ä½¿ç”¨äº† await ä¼šå¯¼è‡´æ€§èƒ½ä¸Šçš„é™ä½ï¼Œä»£ç æ²¡æœ‰ä¾èµ–æ€§çš„è¯ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ Promise.all çš„æ–¹å¼ã€‚</p><p>(2) async&#x2F;awaitå‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>å†…ç½®æ‰§è¡Œå™¨ã€‚ Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº† co å‡½æ•°åº“ï¼Œè€Œ async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>async å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œ</strong>ã€‚</li><li>æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚ co å‡½æ•°åº“çº¦å®šï¼Œyield å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ <strong>async å‡½æ•°çš„ await å‘½ä»¤åé¢ï¼Œå¯ä»¥è·Ÿ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ç­‰åŒäºåŒæ­¥æ“ä½œï¼‰</strong>ã€‚</li><li>æ›´å¥½çš„è¯­ä¹‰ã€‚ async å’Œ awaitï¼Œæ¯”èµ·æ˜Ÿå·å’Œ yieldï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚async è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</li></ul></li></ol><p><strong>è§£æï¼š</strong></p><ol><li><p>å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰</p><p>å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥æ“ä½œæœ€åŸºæœ¬çš„æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç å°±æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ajax</span>(url, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å›è°ƒå‡½æ•°æœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹ï¼Œå°±æ˜¯å®¹æ˜“å†™å‡º<strong>å›è°ƒåœ°ç‹±ï¼ˆCallback hellï¼‰</strong>ã€‚å‡è®¾å¤šä¸ªè¯·æ±‚å­˜åœ¨ä¾èµ–æ€§ï¼Œä½ å¯èƒ½å°±ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ajax</span>(url, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="title function_">ajax</span>(url1, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">        <span class="title function_">ajax</span>(url2, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°çš„ä¼˜ç‚¹æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œå®ç°ï¼Œç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´é«˜åº¦è€¦åˆï¼Œä½¿å¾—ç¨‹åºç»“æ„æ··ä¹±ã€æµç¨‹éš¾ä»¥è¿½è¸ªï¼ˆå°¤å…¶æ˜¯å¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—çš„æƒ…å†µï¼‰ï¼Œè€Œä¸”æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚æ­¤å¤–å®ƒä¸èƒ½ä½¿ç”¨ try catch æ•è·é”™è¯¯ï¼Œä¸èƒ½ç›´æ¥ returnã€‚</p></li><li><p>äº‹ä»¶ç›‘å¬</p><p>è¿™ç§æ–¹å¼ä¸‹ï¼Œ<strong>å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œä¸å–å†³äºä»£ç çš„é¡ºåºï¼Œè€Œå–å†³äºæŸä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿ</strong>ã€‚</p><p>ä¸‹é¢æ˜¯ä¸¤ä¸ªå‡½æ•°f1å’Œf2ï¼Œç¼–ç¨‹çš„æ„å›¾æ˜¯f2å¿…é¡»ç­‰åˆ°f1æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œã€‚é¦–å…ˆï¼Œä¸ºf1ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼ˆè¿™é‡Œé‡‡ç”¨çš„jQueryçš„å†™æ³•ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1.<span class="title function_">on</span>(<span class="string">&#x27;done&#x27;</span>, f2);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™è¡Œä»£ç çš„æ„æ€æ˜¯ï¼Œå½“f1å‘ç”Ÿdoneäº‹ä»¶ï¼Œå°±æ‰§è¡Œf2ã€‚ç„¶åï¼Œå¯¹f1è¿›è¡Œæ”¹å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    f1.<span class="title function_">trigger</span>(<span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œf1.trigger(â€˜doneâ€™)è¡¨ç¤ºï¼Œæ‰§è¡Œå®Œæˆåï¼Œç«‹å³è§¦å‘doneäº‹ä»¶ï¼Œä»è€Œå¼€å§‹æ‰§è¡Œf2ã€‚</p><p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå¯ä»¥ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶å¯ä»¥æŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œä¸”å¯ä»¥â€å»è€¦åˆâ€ï¼Œæœ‰åˆ©äºå®ç°æ¨¡å—åŒ–ã€‚ç¼ºç‚¹æ˜¯æ•´ä¸ªç¨‹åºéƒ½è¦å˜æˆäº‹ä»¶é©±åŠ¨å‹ï¼Œè¿è¡Œæµç¨‹ä¼šå˜å¾—å¾ˆä¸æ¸…æ™°ã€‚é˜…è¯»ä»£ç çš„æ—¶å€™ï¼Œå¾ˆéš¾çœ‹å‡ºä¸»æµç¨‹ã€‚</p></li><li><p>å‘å¸ƒè®¢é˜…</p><p>æˆ‘ä»¬å‡å®šï¼Œå­˜åœ¨ä¸€ä¸ªâ€ä¿¡å·ä¸­å¿ƒâ€ï¼ŒæŸä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå°±å‘ä¿¡å·ä¸­å¿ƒâ€å‘å¸ƒâ€ï¼ˆpublishï¼‰ä¸€ä¸ªä¿¡å·ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥å‘ä¿¡å·ä¸­å¿ƒâ€è®¢é˜…â€ï¼ˆsubscribeï¼‰è¿™ä¸ªä¿¡å·ï¼Œä»è€ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è‡ªå·±å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚è¿™å°±å«åšâ€å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼â€ï¼ˆpublish-subscribe patternï¼‰ï¼Œåˆç§°â€è§‚å¯Ÿè€…æ¨¡å¼â€ï¼ˆobserver patternï¼‰ã€‚</p><p>é¦–å…ˆï¼Œf2å‘ä¿¡å·ä¸­å¿ƒjQueryè®¢é˜…doneä¿¡å·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery.<span class="title function_">subscribe</span>(<span class="string">&#x27;done&#x27;</span>, f2);</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œf1è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    jQuery.<span class="title function_">publish</span>(<span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒjQuery.publish(â€˜doneâ€™)çš„æ„æ€æ˜¯ï¼Œf1æ‰§è¡Œå®Œæˆåï¼Œå‘ä¿¡å·ä¸­å¿ƒjQueryå‘å¸ƒdoneä¿¡å·ï¼Œä»è€Œå¼•å‘f2çš„æ‰§è¡Œã€‚ f2å®Œæˆæ‰§è¡Œåï¼Œå¯ä»¥å–æ¶ˆè®¢é˜…ï¼ˆunsubscribeï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery.<span class="title function_">unsubscribe</span>(<span class="string">&#x27;done&#x27;</span>, f2);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•çš„æ€§è´¨ä¸â€œäº‹ä»¶ç›‘å¬â€ç±»ä¼¼ï¼Œä½†æ˜¯æ˜æ˜¾ä¼˜äºåè€…ã€‚å› ä¸ºå¯ä»¥é€šè¿‡æŸ¥çœ‹â€œæ¶ˆæ¯ä¸­å¿ƒâ€ï¼Œäº†è§£å­˜åœ¨å¤šå°‘ä¿¡å·ã€æ¯ä¸ªä¿¡å·æœ‰å¤šå°‘è®¢é˜…è€…ï¼Œä»è€Œç›‘æ§ç¨‹åºçš„è¿è¡Œã€‚</p></li><li><p>Promise&#x2F;A+</p><p>Promiseæœ¬æ„æ˜¯æ‰¿è¯ºï¼Œåœ¨ç¨‹åºä¸­çš„æ„æ€å°±æ˜¯æ‰¿è¯ºæˆ‘è¿‡ä¸€æ®µæ—¶é—´åä¼šç»™ä½ ä¸€ä¸ªç»“æœã€‚ ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°è¿‡ä¸€æ®µæ—¶é—´ï¼Ÿç­”æ¡ˆæ˜¯å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ˜¯æŒ‡å¯èƒ½æ¯”è¾ƒé•¿æ—¶é—´æ‰æœ‰ç»“æœçš„æ‰åšï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€è¯»å–æœ¬åœ°æ–‡ä»¶ç­‰</p><p>4.1 Promiseçš„ä¸‰ç§çŠ¶æ€</p><ul><li>Pendingâ€”-Promiseå¯¹è±¡å®ä¾‹åˆ›å»ºæ—¶å€™çš„åˆå§‹çŠ¶æ€</li><li>Fulfilledâ€”-å¯ä»¥ç†è§£ä¸ºæˆåŠŸçš„çŠ¶æ€</li><li>Rejectedâ€”-å¯ä»¥ç†è§£ä¸ºå¤±è´¥çš„çŠ¶æ€</li></ul><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121826353/AE8F5B0E5132A5E6C19BCE0A3065045C" alt="img"></p><p><strong>è¿™ä¸ªæ‰¿è¯ºä¸€æ—¦ä»ç­‰å¾…çŠ¶æ€å˜æˆä¸ºå…¶ä»–çŠ¶æ€å°±æ°¸è¿œä¸èƒ½æ›´æ”¹çŠ¶æ€äº†</strong>ï¼Œæ¯”å¦‚è¯´ä¸€æ—¦çŠ¶æ€å˜ä¸º resolved åï¼Œå°±ä¸èƒ½ å†æ¬¡æ”¹å˜ä¸ºFulfilled</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="string">&#x27;reject&#x27;</span>)</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&#x27;success&#x27;</span>)<span class="comment">//æ— æ•ˆä»£ç ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;)</span><br><span class="line">p.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason)<span class="comment">//reject</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨æ„é€  Promise çš„æ—¶å€™ï¼Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;new Promise&#x27;</span>)</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line"><span class="comment">// new Promise =&gt; end</span></span><br></pre></td></tr></table></figure></li></ol><p>4.2 promiseçš„é“¾å¼è°ƒç”¨</p><ul><li><p>æ¯æ¬¡è°ƒç”¨è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹(è¿™å°±æ˜¯thenå¯ç”¨é“¾å¼è°ƒç”¨çš„åŸå› )</p></li><li><p>å¦‚æœthenä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœçš„è¯ä¼šæŠŠè¿™ä¸ªç»“æœä¼ é€’ä¸‹ä¸€æ¬¡thenä¸­çš„æˆåŠŸå›è°ƒ</p></li><li><p>å¦‚æœthenä¸­å‡ºç°å¼‚å¸¸,ä¼šèµ°ä¸‹ä¸€ä¸ªthençš„å¤±è´¥å›è°ƒ</p></li><li><p>åœ¨ thenä¸­ä½¿ç”¨äº†returnï¼Œé‚£ä¹ˆ return çš„å€¼ä¼šè¢«Promise.resolve() åŒ…è£…(è§ä¾‹1ï¼Œ2)</p></li><li><p>thenä¸­å¯ä»¥ä¸ä¼ é€’å‚æ•°ï¼Œå¦‚æœä¸ä¼ é€’ä¼šé€åˆ°ä¸‹ä¸€ä¸ªthenä¸­(è§ä¾‹3)</p></li><li><p>catch ä¼šæ•è·åˆ°æ²¡æœ‰æ•è·çš„å¼‚å¸¸</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹1</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> <span class="comment">//åŒ…è£…æˆ Promise.resolve(2)</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="number">3</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line"><span class="comment">// ä¾‹2</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;My Error&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">() =&gt;</span> <span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">x</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(x)) <span class="comment">//2</span></span><br><span class="line">.<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line"><span class="comment">// ä¾‹3</span></span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">read</span>(<span class="params">url</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  fs.<span class="title function_">readFile</span>(url, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err)</span><br><span class="line">    <span class="title function_">resolve</span>(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">read</span>(<span class="string">&#x27;./name.txt&#x27;</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>() <span class="comment">//thenä¸­å‡ºç°å¼‚å¸¸,ä¼šèµ°ä¸‹ä¸€ä¸ªthençš„å¤±è´¥å›è°ƒ</span></span><br><span class="line">&#125;) <span class="comment">//ç”±äºä¸‹ä¸€ä¸ªthenæ²¡æœ‰å¤±è´¥å›è°ƒï¼Œå°±ä¼šç»§ç»­å¾€ä¸‹æ‰¾ï¼Œå¦‚æœéƒ½æ²¡æœ‰ï¼Œå°±ä¼šè¢«catchæ•è·åˆ°</span></span><br><span class="line">.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>()</span><br><span class="line">.<span class="title function_">then</span>(<span class="literal">null</span>, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;then&#x27;</span>, err)<span class="comment">// then error</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Promiseä¸ä»…èƒ½å¤Ÿæ•è·é”™è¯¯ï¼Œè€Œä¸”ä¹Ÿå¾ˆå¥½åœ°è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œå¯ä»¥æŠŠä¹‹å‰çš„å›è°ƒåœ°ç‹±ä¾‹å­æ”¹å†™ä¸ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ajax</span>(url)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">ajax</span>(url1)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">ajax</span>(url2)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br></pre></td></tr></table></figure><p>å®ƒä¹Ÿæ˜¯å­˜åœ¨ä¸€äº›ç¼ºç‚¹çš„ï¼Œæ¯”å¦‚æ— æ³•å–æ¶ˆ Promiseï¼Œé”™è¯¯éœ€è¦é€šè¿‡å›è°ƒå‡½æ•°æ•è·ã€‚</p></li></ul><ol><li><p>ç”Ÿæˆå™¨Generators&#x2F; yield</p><p>Generator å‡½æ•°æ˜¯ ES6 æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒï¼ŒGenerator æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚</p><ul><li><p>è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚</p></li><li><p><strong>Generator å‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°</strong>ã€‚</p></li><li><p><strong>å¯æš‚åœå‡½æ•°, yieldå¯æš‚åœï¼Œnextæ–¹æ³•å¯å¯åŠ¨ï¼Œæ¯æ¬¡è¿”å›çš„æ˜¯yieldåçš„è¡¨è¾¾å¼ç»“æœ</strong>ã€‚</p></li><li><p>yieldè¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedã€‚<strong>nextæ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼</strong>ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> *<span class="title function_">foo</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="number">2</span> * (<span class="keyword">yield</span> (x + <span class="number">1</span>))</span><br><span class="line">  <span class="keyword">let</span> z = <span class="keyword">yield</span> (y / <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">return</span> (x + y + z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = <span class="title function_">foo</span>(<span class="number">5</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>())   <span class="comment">// =&gt; &#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>(<span class="number">12</span>)) <span class="comment">// =&gt; &#123;value: 8, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>(<span class="number">13</span>)) <span class="comment">// =&gt; &#123;value: 42, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>å¯èƒ½ç»“æœè·Ÿä½ æƒ³è±¡ä¸ä¸€è‡´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€è¡Œä»£ç åˆ†æï¼š</p><ul><li><p>é¦–å…ˆ Generator å‡½æ•°è°ƒç”¨å’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</p></li><li><p>å½“æ‰§è¡Œç¬¬ä¸€æ¬¡ next æ—¶ï¼Œä¼ å‚ä¼šè¢«å¿½ç•¥ï¼Œå¹¶ä¸”å‡½æ•°æš‚åœåœ¨ yield (x + 1) å¤„ï¼Œæ‰€ä»¥è¿”å› 5 + 1 &#x3D; 6</p></li><li><p>å½“æ‰§è¡Œç¬¬äºŒæ¬¡ next æ—¶ï¼Œä¼ å…¥çš„å‚æ•°12å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå¦‚æœä½ ä¸ä¼ å‚ï¼Œyield æ°¸è¿œè¿”å› undefinedã€‚æ­¤æ—¶ let y &#x3D; 2 * 12ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ª yield ç­‰äº 2 * 12 &#x2F; 3 &#x3D; 8</p></li><li><p>å½“æ‰§è¡Œç¬¬ä¸‰æ¬¡ next æ—¶ï¼Œä¼ å…¥çš„å‚æ•°13å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ z &#x3D; 13, x &#x3D; 5, y &#x3D; 24ï¼Œç›¸åŠ ç­‰äº 42</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸ªä¾‹å­ï¼šæœ‰ä¸‰ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œåˆ†åˆ«1.txt,2.txtå’Œ3.txtï¼Œå†…å®¹éƒ½åªæœ‰ä¸€å¥è¯ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚ä¾èµ–ä¸Šä¸€ä¸ªè¯·æ±‚çš„ç»“æœï¼Œæƒ³é€šè¿‡Generatorå‡½æ•°ä¾æ¬¡è°ƒç”¨ä¸‰ä¸ªæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.txt</span><br><span class="line">//1.txtæ–‡ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2.txt</span><br><span class="line">//2.txtæ–‡ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3.txt</span><br><span class="line">//3.txtæ–‡ä»¶</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">read</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(file, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err)</span><br><span class="line">      <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">r</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> r1 = <span class="keyword">yield</span> <span class="title function_">read</span>(<span class="string">&#x27;./1.txt&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> r2 = <span class="keyword">yield</span> <span class="title function_">read</span>(r1)</span><br><span class="line">  <span class="keyword">let</span> r3 = <span class="keyword">yield</span> <span class="title function_">read</span>(r2)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r2)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r3)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = <span class="title function_">r</span>()</span><br><span class="line"><span class="keyword">let</span> &#123; value, done &#125; = it.<span class="title function_">next</span>()</span><br><span class="line">value.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123; <span class="comment">// valueæ˜¯ä¸ªpromise</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data) <span class="comment">//data=&gt;2.txt</span></span><br><span class="line">  <span class="keyword">let</span> &#123; value, done &#125; = it.<span class="title function_">next</span>(data)</span><br><span class="line">  value.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data) <span class="comment">//data=&gt;3.txt</span></span><br><span class="line">    <span class="keyword">let</span> &#123; value, done &#125; = it.<span class="title function_">next</span>(data)</span><br><span class="line">    value.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data) <span class="comment">//data=&gt;ç»“æŸ</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>ä»ä¸Šä¾‹ä¸­æˆ‘ä»¬çœ‹å‡ºæ‰‹åŠ¨è¿­ä»£Generatorå‡½æ•°å¾ˆéº»çƒ¦ï¼Œå®ç°é€»è¾‘æœ‰ç‚¹ç»•ï¼Œè€Œå®é™…å¼€å‘ä¸€èˆ¬ä¼šé…åˆcoåº“å»ä½¿ç”¨ã€‚<strong>coæ˜¯ä¸€ä¸ªä¸ºNode.jså’Œæµè§ˆå™¨æ‰“é€ çš„åŸºäºç”Ÿæˆå™¨çš„æµç¨‹æ§åˆ¶å·¥å…·ï¼Œå€ŸåŠ©äºPromiseï¼Œä½ å¯ä»¥ä½¿ç”¨æ›´åŠ ä¼˜é›…çš„æ–¹å¼ç¼–å†™éé˜»å¡ä»£ç </strong>ã€‚</p><p>å®‰è£…coåº“åªéœ€ï¼šnpm install co</p><p>ä¸Šé¢ä¾‹å­åªéœ€ä¸¤å¥è¯å°±å¯ä»¥è½»æ¾å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">r</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> r1 = <span class="keyword">yield</span> <span class="title function_">read</span>(<span class="string">&#x27;./1.txt&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> r2 = <span class="keyword">yield</span> <span class="title function_">read</span>(r1)</span><br><span class="line">  <span class="keyword">let</span> r3 = <span class="keyword">yield</span> <span class="title function_">read</span>(r2)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r2)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r3)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> co = <span class="built_in">require</span>(<span class="string">&#x27;co&#x27;</span>)</span><br><span class="line"><span class="title function_">co</span>(<span class="title function_">r</span>()).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2.txt=&gt;3.txt=&gt;ç»“æŸ=&gt;undefined</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Generator å‡½æ•°è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œå¯ä»¥æŠŠä¹‹å‰çš„å›è°ƒåœ°ç‹±ä¾‹å­æ”¹å†™ä¸ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> *<span class="title function_">fetch</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">ajax</span>(url, <span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">ajax</span>(url1, <span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">ajax</span>(url2, <span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = <span class="title function_">fetch</span>()</span><br><span class="line"><span class="keyword">let</span> result1 = it.<span class="title function_">next</span>()</span><br><span class="line"><span class="keyword">let</span> result2 = it.<span class="title function_">next</span>()</span><br><span class="line"><span class="keyword">let</span> result3 = it.<span class="title function_">next</span>()</span><br></pre></td></tr></table></figure></li><li><p>async&#x2F;await</p><p>5.1 Async&#x2F;Awaitç®€ä»‹</p><p>ä½¿ç”¨async&#x2F;awaitï¼Œä½ å¯ä»¥è½»æ¾åœ°è¾¾æˆä¹‹å‰ä½¿ç”¨ç”Ÿæˆå™¨å’Œcoå‡½æ•°æ‰€åšåˆ°çš„å·¥ä½œ,å®ƒæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><p>\1. async&#x2F;awaitæ˜¯åŸºäºPromiseå®ç°çš„ï¼Œå®ƒä¸èƒ½ç”¨äºæ™®é€šçš„å›è°ƒå‡½æ•°ã€‚</p><p>\2. async&#x2F;awaitä¸Promiseä¸€æ ·ï¼Œæ˜¯éé˜»å¡çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. async/awaitä½¿å¾—å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œè¿™æ­£æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚</span><br></pre></td></tr></table></figure></li></ol><p><strong>ä¸€ä¸ªå‡½æ•°å¦‚æœåŠ ä¸Š async ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°å°±ä¼šè¿”å›ä¸€ä¸ª Promise</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">async1</span>()) <span class="comment">// -&gt; Promise &#123;&lt;resolved&gt;: &quot;1&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>Generatorå‡½æ•°ä¾æ¬¡è°ƒç”¨ä¸‰ä¸ªæ–‡ä»¶é‚£ä¸ªä¾‹å­ç”¨async&#x2F;awaitå†™æ³•ï¼Œåªéœ€å‡ å¥è¯ä¾¿å¯å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">read</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(file, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err)</span><br><span class="line">      <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">readResult</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> p1 = <span class="keyword">await</span> <span class="title function_">read</span>(params, <span class="string">&#x27;utf8&#x27;</span>)<span class="comment">//awaitåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªPromiseå®ä¾‹</span></span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="keyword">await</span> <span class="title function_">read</span>(p1, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> p3 = <span class="keyword">await</span> <span class="title function_">read</span>(p2, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p1&#x27;</span>, p1)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p2&#x27;</span>, p2)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p3&#x27;</span>, p3)</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">readResult</span>(<span class="string">&#x27;1.txt&#x27;</span>).<span class="title function_">then</span>( <span class="comment">// asyncå‡½æ•°è¿”å›çš„ä¹Ÿæ˜¯ä¸ªpromise</span></span><br><span class="line">  <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">)</span><br><span class="line"><span class="comment">// p1 2.txt</span></span><br><span class="line"><span class="comment">// p2 3.txt</span></span><br><span class="line"><span class="comment">// p3 ç»“æŸ</span></span><br><span class="line"><span class="comment">// ç»“æŸ</span></span><br></pre></td></tr></table></figure><p>5.2 Async&#x2F;Awaitå¹¶å‘è¯·æ±‚</p><p>å¦‚æœè¯·æ±‚ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ¯«æ— å…³ç³»ï¼Œå¯ä»¥é€šè¿‡å¹¶å‘è¯·æ±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">read</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(file, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err)</span><br><span class="line">      <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">read1</span>()</span><br><span class="line">  <span class="title function_">read2</span>()<span class="comment">//è¿™ä¸ªå‡½æ•°åŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">read1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> r = <span class="keyword">await</span> <span class="title function_">read</span>(<span class="string">&#x27;1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">read2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> r = <span class="keyword">await</span> <span class="title function_">read</span>(<span class="string">&#x27;2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">readAll</span>() <span class="comment">// 2.txt 3.txt</span></span><br></pre></td></tr></table></figure><h4 id="3-5-æ€ä¹ˆè§£å†³callbackå¤šå±‚åµŒå¥—"><a href="#3-5-æ€ä¹ˆè§£å†³callbackå¤šå±‚åµŒå¥—" class="headerlink" title="3.5 æ€ä¹ˆè§£å†³callbackå¤šå±‚åµŒå¥—"></a>3.5 æ€ä¹ˆè§£å†³callbackå¤šå±‚åµŒå¥—</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>å›è°ƒåœ°ç‹±æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>Promises</li><li>Async&#x2F;await</li></ol><h4 id="3-6-promiseçš„ä»‹ç»ä¸ä½¿ç”¨"><a href="#3-6-promiseçš„ä»‹ç»ä¸ä½¿ç”¨" class="headerlink" title="3.6 promiseçš„ä»‹ç»ä¸ä½¿ç”¨"></a>3.6 promiseçš„ä»‹ç»ä¸ä½¿ç”¨</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>Promise ä»‹ç»ï¼š</strong></p><p>ES6ä¸­çš„Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§æ–¹æ¡ˆã€‚ä»è¯­æ³•ä¸Šè®²ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p><p>Promiseå¯¹è±¡, å¯ä»¥<strong>å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥çš„æµç¨‹è¡¨è¾¾å‡ºæ¥</strong>ã€‚ä½¿ç”¨ Promise ä¸»è¦æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>å¯ä»¥å¾ˆå¥½åœ°è§£å†³<strong>å›è°ƒåœ°ç‹±</strong>çš„é—®é¢˜ï¼ˆé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ï¼‰ã€‚</li><li>è¯­æ³•éå¸¸ç®€æ´ã€‚Promise å¯¹è±¡æä¾›äº†ç®€æ´çš„APIï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</li></ul><p><strong>Promise ä½¿ç”¨ï¼š</strong></p><p><strong>è¯­æ³•</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;<span class="comment">/* executorå‡½æ•° */</span></span><br><span class="line">    <span class="comment">// ... some code</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//success</span></span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//failure</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol><li>å‚æ•°<br>executorå‡½æ•°åœ¨Promiseæ„é€ å‡½æ•°æ‰§è¡Œæ—¶åŒæ­¥æ‰§è¡Œï¼Œè¢«ä¼ é€’resolveå’Œrejectå‡½æ•°ï¼ˆexecutorå‡½æ•°åœ¨Promiseæ„é€ å‡½æ•°è¿”å›æ–°å»ºå¯¹è±¡å‰è¢«è°ƒç”¨ï¼‰ã€‚<br>executorå†…éƒ¨é€šå¸¸ä¼šæ‰§è¡Œä¸€äº›å¼‚æ­¥æ“ä½œï¼Œä¸€æ—¦å®Œæˆï¼Œå¯ä»¥è°ƒç”¨resolveå‡½æ•°æ¥å°†promiseçŠ¶æ€æ”¹æˆfulfilled(å®Œæˆ)ï¼Œæˆ–è€…å°†promiseçš„çŠ¶æ€æ”¹ä¸ºrejected(å¤±è´¥)ã€‚<br>å¦‚æœåœ¨executorå‡½æ•°ä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆè¯¥promiseçŠ¶æ€ä¸ºrejectedã€‚executorå‡½æ•°çš„è¿”å›å€¼è¢«å¿½ç•¥ã€‚</li><li>ç®€å•ä½¿ç”¨</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">timeout</span>(<span class="params">ms</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(resolve, ms, <span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">timeout</span>(<span class="number">2000</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//done</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>åŸå‹æ–¹æ³•</strong></p><p>Promise.prototype.then(onFulfilled, onRejected)</p><ol><li><p>è¯­æ³•<br>p.then(onFulfilled, onRejected);<br>p.then((value) &#x3D;&gt; {&#x2F;&#x2F; fulfillment}, (reason) &#x3D;&gt; {&#x2F;&#x2F; rejection});</p></li><li><p>å«ä¹‰<br>ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚thenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯resolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p></li><li><p>é“¾å¼æ“ä½œ<br>thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„promiseï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)) <span class="comment">//1</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result);              <span class="comment">//undefined</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result);             <span class="comment">//2</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;err&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result);            </span><br><span class="line">    &#125;, <span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);                <span class="comment">//Error: err</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result);            <span class="comment">//3</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šâ‘ ä¸ç®¡æ˜¯thenæ–¹æ³•çš„onfulfilledå‡½æ•°å‚æ•°æ‰§è¡Œè¿˜æ˜¯onrejectedï¼ˆå¯é€‰å‚æ•°ï¼‰å‡½æ•°å‚æ•°æ‰§è¡Œï¼Œthenæ–¹æ³•è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œéƒ½å¯ä»¥ç»§ç»­é‡‡ç”¨é“¾å¼å†™æ³•è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚â‘¡Promise.prototype.catch()æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚thenæ–¹æ³•å’Œcatchæ–¹æ³•å¯ä»¥é“¾å¼æ“ä½œã€‚</p></li><li><p>è¿”å›å€¼<br>thenæ–¹æ³•è¿”å›ä¸€ä¸ªPromiseï¼Œè€Œå®ƒçš„è¡Œä¸ºä¸thenä¸­çš„è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°(onfulfilledå‡½æ•°&#x2F;onrejectedå‡½æ•°)çš„è¿”å›å€¼æœ‰å…³ã€‚<br>(1) å¦‚æœthenä¸­çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆthenè¿”å›çš„Promiseå°†ä¼šæˆä¸ºæ¥å—çŠ¶æ€ï¼Œå¹¶ä¸”å°†è¿”å›çš„å€¼ä½œä¸ºæ¥å—çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>( <span class="function">() =&gt;</span> <span class="number">99</span>, <span class="function">() =&gt;</span> <span class="number">42</span> )</span><br><span class="line">.<span class="title function_">then</span>( <span class="function"><span class="params">result</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><p>(2) å¦‚æœthenä¸­çš„å›è°ƒå‡½æ•°æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆthenè¿”å›çš„Promiseå°†ä¼šæˆä¸ºæ‹’ç»çŠ¶æ€ï¼Œå¹¶ä¸”å°†æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºæ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;err&#x27;</span>)&#125;, <span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err)&#125;); <span class="comment">//Error: err</span></span><br></pre></td></tr></table></figure><p>(3) å¦‚æœthenä¸­çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå·²ç»æ˜¯æ¥å—çŠ¶æ€çš„Promiseï¼Œé‚£ä¹ˆthenè¿”å›çš„Promiseä¹Ÿä¼šæˆä¸ºæ¥å—çŠ¶æ€ï¼Œå¹¶ä¸”å°†é‚£ä¸ªPromiseçš„æ¥å—çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ä½œä¸ºè¯¥è¢«è¿”å›çš„Promiseçš„æ¥å—çŠ¶æ€å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&#x27;ok&#x27;</span>));</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(result)&#125;); <span class="comment">//ok</span></span><br></pre></td></tr></table></figure><p>(4) å¦‚æœthenä¸­çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå·²ç»æ˜¯æ‹’ç»çŠ¶æ€çš„Promiseï¼Œé‚£ä¹ˆthenè¿”å›çš„Promiseä¹Ÿä¼šæˆä¸ºæ‹’ç»çŠ¶æ€ï¼Œå¹¶ä¸”å°†é‚£ä¸ªPromiseçš„æ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ä½œä¸ºè¯¥è¢«è¿”å›çš„Promiseçš„æ‹’ç»çŠ¶æ€å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;err&#x27;</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err)&#125;); <span class="comment">//Error: err</span></span><br></pre></td></tr></table></figure><p>(5) å¦‚æœthenä¸­çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªæœªå®šçŠ¶æ€ï¼ˆpendingï¼‰çš„Promiseï¼Œé‚£ä¹ˆthenè¿”å›Promiseçš„çŠ¶æ€ä¹Ÿæ˜¯æœªå®šçš„ï¼Œå¹¶ä¸”å®ƒçš„ç»ˆæ€ä¸é‚£ä¸ªPromiseçš„ç»ˆæ€ç›¸åŒï¼›åŒæ—¶ï¼Œå®ƒå˜ä¸ºç»ˆæ€æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°å‚æ•°ä¸é‚£ä¸ªPromiseå˜ä¸ºç»ˆæ€æ—¶çš„å›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ç›¸åŒçš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(resolve, <span class="number">2000</span>, <span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>( <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(result)&#125;); <span class="comment">//ok</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯thenæ–¹æ³•ä¸­è¢«è°ƒç”¨å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸thenæ–¹æ³•è¿”å›çš„Promiseå¯¹è±¡çŠ¶æ€ä¹‹é—´çš„å…³ç³»ã€‚</p></li></ol><p><strong>Promise.prototype.catch(onRejected)</strong></p><ol><li><p>è¯­æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">catch</span>(onRejected);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="comment">// æ‹’ç»</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>å«ä¹‰<br>Promise.prototype.catchæ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡ã€‚</p></li><li><p>ç”¨æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;err&#x27;</span>)); <span class="comment">//rejectæ–¹æ³•çš„ä½œç”¨ï¼Œç­‰åŒäºæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="comment">//throw new Error(&#x27;err&#x27;);</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="literal">null</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);  <span class="comment">//Err: err</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//--------ç­‰ä»·å†™æ³•---------</span></span><br><span class="line">p.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">//Err: err</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šç”±äº.catchæ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œæ•….thenä¸­çš„é“¾å¼æ“ä½œ(3)ã€è¿”å›å€¼(4)ç­‰è¯­æ³•åœ¨.catchä¸­éƒ½é€‚ç”¨ã€‚</p></li><li><p>ä¸€èˆ¬æ€»æ˜¯å»ºè®®ï¼ŒPromiseå¯¹è±¡åé¢è¦è·Ÿcatchæ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥å¤„ç†Promiseå†…éƒ¨å‘ç”Ÿçš„é”™è¯¯ã€‚catchæ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨thenæ–¹æ³•ã€‚</p></li><li><p>Promiseå¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ªcatchè¯­å¥æ•è·ã€‚ å³ï¼šå½“å‰catchæ–¹æ³•å¯ä»¥æ•è·ä¸Šä¸€ä¸ªcatchæ–¹æ³•(åŒ…æ‹¬ä¸Šä¸€ä¸ªcatch)åˆ°å½“å‰catch(ä¸åŒ…æ‹¬å½“å‰catch)æ–¹æ³•ä¹‹é—´æ‰€æœ‰çš„é”™è¯¯ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™å½“å‰catchæ–¹æ³•ä¸æ‰§è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">new Promise(() =&gt; &#123;</span><br><span class="line">    throw new Error(&#x27;err1&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">    .then(() =&gt; &#123;console.log(1);&#125;)</span><br><span class="line">    .then(() =&gt; &#123;console.log(2);&#125;)</span><br><span class="line">    .catch((err) =&gt; &#123;</span><br><span class="line">        console.log(err); //Err: err1</span><br><span class="line">        throw  new Error(&#x27;err2&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch((err) =&gt; &#123;console.log(err);&#125;)//Err: err2</span><br></pre></td></tr></table></figure></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰RejectçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;<span class="comment">/* success */</span> &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;<span class="comment">/* error */</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123; <span class="comment">/* success */</span> &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;<span class="comment">/* error */</span> &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒç§å†™æ³•è¦å¥½äºç¬¬ä¸€ç§å†™æ³•ï¼Œç†ç”±æ˜¯ç¬¬äºŒç§å†™æ³•å¯ä»¥æ•è·å‰é¢thenæ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯ï¼Œä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•ã€‚</p></li><li><p>ä¸ä¼ ç»Ÿçš„try&#x2F;catchä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå³ä½¿æ²¡æœ‰ä½¿ç”¨catchæ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromiseå¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¹Ÿä¸ä¼šä¸­æ­¢å¤–éƒ¨è„šæœ¬è¿è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜</span></span><br><span class="line">    <span class="title function_">resolve</span>(x + <span class="number">2</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;over&#x27;</span>)&#125;);</span><br><span class="line"><span class="comment">//Uncaught (in promise) ReferenceError: x is not defined</span></span><br><span class="line"><span class="comment">//over</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šè¢«catchæ•è·åˆ°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        throw &#x27;Uncaught Exception!&#x27;;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">&#125;).catch(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;err&#x27;); //ä¸ä¼šæ‰§è¡Œ</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        reject();</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">&#125;).catch(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;err&#x27;); //err</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>åœ¨resolve()åé¢æŠ›å‡ºçš„é”™è¯¯ä¼šè¢«å¿½ç•¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&#x27;Silenced Exception!&#x27;</span>;</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e); <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><p><strong>Promise.all(iterable)</strong></p><ol><li><p>è¯­æ³•<br>var p &#x3D; Promise.all([p1, p2, p3]);</p></li><li><p>å«ä¹‰<br>Promise.allæ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1ã€p2ã€p3éƒ½æ˜¯Promiseå®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸ºPromiseå®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ï¼ˆPromise.allæ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰Iteratoræ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯Promiseå®ä¾‹ã€‚ï¼‰<br>pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚<br>(1) åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚<br>(2) åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</p></li><li><p>ç”¨æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="string">&#x27;p1-ok&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;p2-ok&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">3000</span>, <span class="string">&#x27;p3-ok&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;p4-err&#x27;</span>);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">resolves</span>) =&gt;</span> &#123;</span><br><span class="line">      resolves.<span class="title function_">forEach</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(resolve); <span class="comment">//p1-ok   p2-ok  p3-ok</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3, p4])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(err); <span class="comment">//p4-err</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></li></ol><p><strong>Promise.race(iterable)</strong></p><ol><li><p>è¯­æ³•<br>var p &#x3D; Promise.race([p1, p2, p3]);</p></li><li><p>å«ä¹‰<br>Promise.raceæ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„Promiseå®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚<br>Promise.raceæ–¹æ³•çš„å‚æ•°ä¸Promise.allæ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœä¸æ˜¯Promiseå®ä¾‹ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸ºPromiseå®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;<span class="built_in">setTimeout</span>(resolve, <span class="number">500</span>, <span class="string">&quot;one&quot;</span>);&#125;);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;<span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&quot;two&quot;</span>);&#125;);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([p1, p2])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// &quot;two&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;<span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&quot;three&quot;</span>);&#125;);</span><br><span class="line"><span class="keyword">var</span> p4 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;<span class="built_in">setTimeout</span>(reject, <span class="number">500</span>, <span class="string">&quot;four&quot;</span>);&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([p3, p4])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// &quot;three&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æœªè¢«è°ƒç”¨  </span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p5 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;<span class="built_in">setTimeout</span>(resolve, <span class="number">500</span>, <span class="string">&quot;five&quot;</span>);&#125;);</span><br><span class="line"><span class="keyword">var</span> p6 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(reject, <span class="number">100</span>, <span class="string">&quot;six&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([p5, p6])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æœªè¢«è°ƒç”¨             </span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(reason); <span class="comment">// &quot;six&quot;</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></li></ol><p><strong>Promise.resolve(value)</strong></p><ol><li><p>è¯­æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(value);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(promise);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable);</span><br></pre></td></tr></table></figure><p>Promise.resolveç­‰ä»·äºä¸‹é¢çš„å†™æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(value) ;</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="title function_">resolve</span>(value));</span><br></pre></td></tr></table></figure></li><li><p>å«ä¹‰<br>è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®švalueå†³å®šçš„Promiseå®ä¾‹ã€‚</p></li><li><p>ç”¨æ³•<br>(1) å¦‚æœè¯¥å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;<span class="title function_">resolve</span>()&#125;);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(p);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p === p2); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>(2) å¦‚æœå‚æ•°æ˜¯thenableå¯¹è±¡(å³å¸¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡)ï¼Œåˆ™è¿”å›çš„Promiseå¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€ç”±thenæ–¹æ³•çš„æ‰§è¡Œå†³å®šï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">    <span class="title function_">then</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);  <span class="comment">// 42</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>(3) å¦‚æœå‚æ•°æ˜¯ä¸å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡æˆ–åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¿”å›çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºfulfilledï¼Œå¹¶ä¸”å°†è¯¥å‚æ•°ä¼ é€’ç»™thenæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(s); <span class="comment">//Hello</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>(4) å¦‚æœä¸å¸¦æœ‰ä»»ä½•å‚æ•°ï¼Œåˆ™è¿”å›çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºfulfilledï¼Œå¹¶ä¸”å°†undefinedä½œä¸ºå‚æ•°ä¼ é€’ç»™thenæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(s); <span class="comment">//undefined</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></li><li><p>é€šå¸¸è€Œè¨€ï¼Œå¦‚æœä½ ä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯Promiseå¯¹è±¡ï¼Œä½¿ç”¨Promise.resolve(value)æ¥è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡,è¿™æ ·å°±èƒ½å°†è¯¥valueä»¥Promiseå¯¹è±¡å½¢å¼ä½¿ç”¨ã€‚</p></li><li><p>ç«‹å³resolveçš„Promiseå¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;three&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;two&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;one&#x27;</span>);</span><br><span class="line"><span class="comment">// one </span></span><br><span class="line"><span class="comment">// two</span></span><br><span class="line"><span class="comment">// three</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>Promise.reject(reason)</strong></p><ol><li><p>è¯­æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(reason);</span><br></pre></td></tr></table></figure><p>Promise.rejectç­‰ä»·äºä¸‹é¢çš„å†™æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(reason);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="title function_">reject</span>(reason));</span><br></pre></td></tr></table></figure></li><li><p>å«ä¹‰<br>è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºrejectedçš„Promiseå¯¹è±¡ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚</p></li></ol><blockquote><p><strong>æ³¨æ„ï¼šPromise.resolve(value)æ–¹æ³•è¿”å›çš„Promiseå®ä¾‹çš„çŠ¶æ€ç”±valueå†³å®šï¼Œå¯èƒ½æ˜¯fulfilledï¼Œä¹Ÿå¯èƒ½æ˜¯rejectedã€‚Promise.reject(reason)æ–¹æ³•è¿”å›çš„Promiseå®ä¾‹çš„çŠ¶æ€ä¸€å®šæ˜¯rejectedã€‚</strong></p></blockquote><ol><li><p>ç”¨æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;Testing static reject&quot;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æœªè¢«è°ƒç”¨</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(reason); <span class="comment">// Testing static reject</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;fail&quot;</span>))</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æœªè¢«è°ƒç”¨</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error); <span class="comment">// Error: fail</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></li><li><p>Promise.reject()æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸ºrejectçš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°ã€‚è¿™ä¸€ç‚¹ä¸Promise.resolveæ–¹æ³•ä¸ä¸€è‡´ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">    <span class="title function_">then</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e === <span class="string">&#x27;ok&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(thenable)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e === thenable); <span class="comment">// true</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id="3-7-Promise-all"><a href="#3-7-Promise-all" class="headerlink" title="3.7 Promise.all"></a>3.7 Promise.all</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Promise.all(iterable)æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨iterableå‚æ•°å†…æ‰€æœ‰çš„promiseéƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å«promiseæ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­promiseæœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥çš„åŸå› æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥promiseçš„ç»“æœã€‚</p><p><strong>è§£æï¼š</strong></p><p>è¯­æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise.all(iterable);</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><ul><li><p>iterable</p><p>ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚Arrayæˆ–String</p></li></ul><p>è¿”å›å€¼</p><ul><li>å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªç©ºçš„å¯è¿­ä»£å¯¹è±¡ï¼Œåˆ™è¿”å›ä¸€ä¸ª<strong>å·²å®Œæˆï¼ˆalready resolvedï¼‰</strong>çŠ¶æ€çš„Promise</li><li>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸åŒ…å«ä»»ä½•promiseï¼Œåˆ™è¿”å›ä¸€ä¸ª<strong>å¼‚æ­¥å®Œæˆï¼ˆasynchronously resolvedï¼‰</strong> Promiseã€‚æ³¨æ„ï¼šGoogle Chrome 58 åœ¨è¿™ç§æƒ…å†µä¸‹è¿”å›ä¸€ä¸ª<strong>å·²å®Œæˆï¼ˆalready resolvedï¼‰</strong>çŠ¶æ€çš„Promiseã€‚</li><li>å…¶å®ƒæƒ…å†µä¸‹è¿”å›ä¸€ä¸ª<strong>å¤„ç†ä¸­ï¼ˆpendingï¼‰</strong>çš„Promiseã€‚è¿™ä¸ªè¿”å›çš„promiseä¹‹åä¼šåœ¨æ‰€æœ‰çš„promiseéƒ½å®Œæˆæˆ–æœ‰ä¸€ä¸ªpromiseå¤±è´¥æ—¶<strong>å¼‚æ­¥</strong>åœ°å˜ä¸ºå®Œæˆæˆ–å¤±è´¥ã€‚ è§ä¸‹æ–¹å…³äºâ€œPromise.all çš„å¼‚æ­¥æˆ–åŒæ­¥â€ç¤ºä¾‹ã€‚è¿”å›å€¼å°†ä¼šæŒ‰ç…§å‚æ•°å†…çš„promiseé¡ºåºæ’åˆ—ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨promiseçš„å®Œæˆé¡ºåºå†³å®šã€‚</li></ul><h4 id="3-8-ä¸promise-allç›¸åçš„æ˜¯å“ªä¸€ä¸ª"><a href="#3-8-ä¸promise-allç›¸åçš„æ˜¯å“ªä¸€ä¸ª" class="headerlink" title="3.8 ä¸promise.allç›¸åçš„æ˜¯å“ªä¸€ä¸ª"></a>3.8 ä¸promise.allç›¸åçš„æ˜¯å“ªä¸€ä¸ª</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Promse.raceå°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼ŒPromise.race([p1, p2, p3])é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p><p><strong>æ‰©å±•ï¼š</strong></p><p>è¯­æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise.race(iterable);</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><ul><li><p>iterable</p><p>å¯è¿­ä»£å¯¹è±¡ï¼Œç±»ä¼¼Array</p></li></ul><p>è¿”å›å€¼</p><p>ä¸€ä¸ª<strong>å¾…å®šçš„</strong> Promise]åªè¦ç»™å®šçš„è¿­ä»£ä¸­çš„ä¸€ä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œå°±é‡‡ç”¨ç¬¬ä¸€ä¸ªpromiseçš„å€¼ä½œä¸ºå®ƒçš„å€¼ï¼Œ ä»è€Œ<strong>å¼‚æ­¥</strong>åœ°è§£ææˆ–æ‹’ç»ï¼ˆä¸€æ—¦å †æ ˆä¸ºç©ºï¼‰ã€‚</p><h4 id="3-9-promiseå®ç°æ–‡ä»¶è¯»å–"><a href="#3-9-promiseå®ç°æ–‡ä»¶è¯»å–" class="headerlink" title="3.9 promiseå®ç°æ–‡ä»¶è¯»å–"></a>3.9 promiseå®ç°æ–‡ä»¶è¯»å–</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>å°è£…å¼‚æ­¥è¯»å–æ–‡ä»¶æ“ä½œ</strong></p><ul><li>fs.readFile()æ–¹æ³•ç”¨äºå¼‚æ­¥è¯»å–æ–‡ä»¶(nodeæ ¸å¿ƒæ¨¡å—)</li><li>å°†Promiseçš„å®ä¾‹å¯¹è±¡ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼è¿”å›</li><li>è¿™æ ·å‡½æ•°æ‰§è¡Œå®Œæ¯•åå°±å¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡çš„å®ä¾‹,å¯ä»¥é€šè¿‡.thenæ–¹æ³•ä¼ å…¥æˆåŠŸçš„å›è°ƒå’Œå¤±è´¥çš„å›è°ƒ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">asyncGetFileByPath</span>(<span class="params">p</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Promiseå¯¹è±¡é‡Œé¢çš„å‚æ•°,ä¼šç«‹å³æ‰§è¡Œ(å‰é¢è¯´è¿‡)</span></span><br><span class="line">        fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname, p), <span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="title function_">reject</span>(err);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">asyncGetFileByPath</span>(<span class="string">&#x27;./files/1.txt&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">data</span>) =&gt;</span> &#123; <span class="comment">// æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">err</span>) =&gt;</span> &#123; <span class="comment">// å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>**<img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121881244/1B3A5FDCE74EDAD823C9F50C3DA78DF3" alt="img"><br>**</p><p><strong>è§£å†³å›è°ƒåœ°ç‹±</strong></p><ul><li>å‰é¢å·²ç»æˆåŠŸçš„å°è£…äº†ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„å‡½æ•°</li><li>ä¸‹é¢ç”¨å®ƒæ¥ä½“éªŒä¸€ä¸‹è¯»å–å¤šä¸ªæ–‡ä»¶</li><li>æˆ‘ä»¬åœ¨.then()æ–¹æ³•ä¸­,ç¬¬ä¸€ä¸ªå‚æ•°resolve()æ–¹æ³•ä¸­,è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡B.</li><li>é‚£ä¹ˆåœ¨æ‰§è¡Œ.then()çš„resolve()æ–¹æ³•å®Œæ¯•å,æ­¤æ—¶çš„æ‰§è¡Œç¯å¢ƒæ˜¯è¿™ä¸ªPromiseçš„å®ä¾‹b</li><li>å¯ä»¥é€šè¿‡bçš„.then()æ–¹æ³•ç»§ç»­ä¼ å…¥resolveå–æ¶ˆå›è°ƒåœ°ç‹±,è®©ä»£ç è¶‹äºæ‰å¹³åŒ–</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">asyncGetFileByPath</span>(<span class="params">p</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Promiseå¯¹è±¡é‡Œé¢çš„å‚æ•°,ä¼šç«‹å³æ‰§è¡Œ(å‰é¢è¯´è¿‡)</span></span><br><span class="line">        fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname, p), <span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="title function_">reject</span>(err);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">asyncGetFileByPath</span>(<span class="string">&#x27;./files/1.txt&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">data</span>) =&gt;</span> &#123; <span class="comment">// æˆåŠŸçš„å›è°ƒ    &#x27;1.txt&#x27;</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// æ‰“å°å‡º 1.txt æ•°æ®</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">asyncGetFileByPath</span>(<span class="string">&#x27;./files/2.txt&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">err</span>) =&gt;</span> &#123; <span class="comment">// å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">then</span>( <span class="comment">// æˆåŠŸçš„å›è°ƒ  &#x27;2.txt&#x27;</span></span><br><span class="line">        <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// æ‰“å°å‡º 2.txt ä¸­çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">asyncGetFileByPath</span>(<span class="string">&#x27;./files/3.txt&#x27;</span>) <span class="comment">// ç»§ç»­è¿”å›Promiseå¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">data</span>) =&gt;</span> &#123; <span class="comment">// æˆåŠŸçš„å›è°ƒ &#x27;3.txt&#x27;</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// æ‰“å°å‡º 3.txt ä¸­çš„æ•°æ®</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h4 id="3-10-ç”¨jså®ç°sleepï¼Œç”¨promise"><a href="#3-10-ç”¨jså®ç°sleepï¼Œç”¨promise" class="headerlink" title="3.10 ç”¨jså®ç°sleepï¼Œç”¨promise"></a>3.10 ç”¨jså®ç°sleepï¼Œç”¨promise</h4><p><strong>å‚è€ƒç­”æ¡ˆ:</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sleep</span>(<span class="params">time</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, time))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> t1 = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">3000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> t2 = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(t2 - t1)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šè¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯ç”¨äº† setTimeoutï¼Œæ²¡æœ‰å½¢æˆè¿›ç¨‹é˜»å¡ï¼Œä¸ä¼šé€ æˆæ€§èƒ½å’Œè´Ÿè½½é—®é¢˜ã€‚</p><p>ç¼ºç‚¹ï¼šè™½ç„¶ä¸åƒ callback å¥—é‚£ä¹ˆå¤šå±‚ï¼Œä½†ä»ä¸æ€ä¹ˆç¾è§‚ï¼Œè€Œä¸”å½“æˆ‘ä»¬éœ€è¦åœ¨æŸè¿‡ç¨‹ä¸­éœ€è¦åœæ­¢æ‰§è¡Œï¼ˆæˆ–è€…åœ¨ä¸­é€”è¿”å›äº†é”™è¯¯çš„å€¼ï¼‰ï¼Œè¿˜å¿…é¡»å¾—å±‚å±‚åˆ¤æ–­åè·³å‡ºï¼Œéå¸¸éº»çƒ¦ï¼Œè€Œä¸”è¿™ç§å¼‚æ­¥å¹¶ä¸æ˜¯é‚£ä¹ˆå½»åº•ï¼Œè¿˜æ˜¯çœ‹èµ·æ¥åˆ«æ‰­</p><h4 id="3-11-å®ç°ä¸€ä¸ª-Scheduler-ç±»ï¼Œå®Œæˆå¯¹Promiseçš„å¹¶å‘å¤„ç†ï¼Œæœ€å¤šåŒæ—¶æ‰§è¡Œ2ä¸ªä»»åŠ¡"><a href="#3-11-å®ç°ä¸€ä¸ª-Scheduler-ç±»ï¼Œå®Œæˆå¯¹Promiseçš„å¹¶å‘å¤„ç†ï¼Œæœ€å¤šåŒæ—¶æ‰§è¡Œ2ä¸ªä»»åŠ¡" class="headerlink" title="3.11 å®ç°ä¸€ä¸ª Scheduler ç±»ï¼Œå®Œæˆå¯¹Promiseçš„å¹¶å‘å¤„ç†ï¼Œæœ€å¤šåŒæ—¶æ‰§è¡Œ2ä¸ªä»»åŠ¡"></a>3.11 å®ç°ä¸€ä¸ª Scheduler ç±»ï¼Œå®Œæˆå¯¹Promiseçš„å¹¶å‘å¤„ç†ï¼Œæœ€å¤šåŒæ—¶æ‰§è¡Œ2ä¸ªä»»åŠ¡</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Scheduler</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span> = [], <span class="comment">// å¾…è¿è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">usingTask</span> = [] <span class="comment">// æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// promiseCreator æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œreturn Promise</span></span><br><span class="line">    <span class="title function_">add</span>(<span class="params">promiseCreator</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            promiseCreator.<span class="property">resolve</span> = resolve</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">usingTask</span>.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">usingRun</span>(promiseCreator)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">push</span>(promiseCreator)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">usingRun</span>(<span class="params">promiseCreator</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">usingTask</span>.<span class="title function_">push</span>(promiseCreator)</span><br><span class="line">        <span class="title function_">promiseCreator</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            promiseCreator.<span class="title function_">resolve</span>()</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">usingMove</span>(promiseCreator)</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">usingRun</span>(<span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">shift</span>())</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">usingMove</span>(<span class="params">promiseCreator</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="variable language_">this</span>.<span class="property">usingTask</span>.<span class="title function_">findIndex</span>(promiseCreator)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">usingTask</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">timeout</span> = (<span class="params">time</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, time)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scheduler = <span class="keyword">new</span> <span class="title class_">Scheduler</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addTask</span> = (<span class="params">time, order</span>) =&gt; &#123;</span><br><span class="line">    scheduler.<span class="title function_">add</span>(<span class="function">() =&gt;</span> <span class="title function_">timeout</span>(time)).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(order))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addTask</span>(<span class="number">400</span>, <span class="number">4</span>) </span><br><span class="line"><span class="title function_">addTask</span>(<span class="number">200</span>, <span class="number">2</span>) </span><br><span class="line"><span class="title function_">addTask</span>(<span class="number">300</span>, <span class="number">3</span>) </span><br></pre></td></tr></table></figure><h4 id="3-12-å¾ªç¯iï¼ŒsetTimeout-ä¸­è¾“å‡ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼ˆå—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸï¼‰"><a href="#3-12-å¾ªç¯iï¼ŒsetTimeout-ä¸­è¾“å‡ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼ˆå—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸï¼‰" class="headerlink" title="3.12 å¾ªç¯iï¼ŒsetTimeout ä¸­è¾“å‡ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼ˆå—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸï¼‰"></a>3.12 å¾ªç¯iï¼ŒsetTimeout ä¸­è¾“å‡ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼ˆå—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸï¼‰</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>forå¾ªç¯setTimeoutè¾“å‡º1-10è§£å†³æ–¹å¼é—®é¢˜æ¥æº</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">   <span class="built_in">setTimeout</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">   &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœŸæœ›ï¼šè¾“å‡º1åˆ°10</p><p>ä¸ºä»€ä¹ˆæ— æ³•è¾“å‡º1åˆ°å</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œforå¾ªç¯æ˜¯åŒæ­¥ä»£ç ï¼ŒsetTimeoutæ˜¯å¼‚æ­¥ä»£ç ã€‚é‡åˆ°è¿™ç§æ—¢åŒ…å«åŒæ­¥åˆåŒ…å«å¼‚æ­¥çš„æƒ…å†µï¼ŒJavaScriptä¾æ—§æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¹¶å°†å¼‚æ­¥ä»£ç æ’å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚setTimeoutçš„ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯æŠŠæ‰§è¡Œä»£ç ï¼ˆconsole.log(i)ï¼‰æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—éœ€ç­‰å¾…çš„æ¯«ç§’æ•°ï¼Œä½†ç­‰å¾…çš„æ—¶é—´æ˜¯ç›¸å¯¹ä¸»ç¨‹åºå®Œæ¯•çš„æ—¶é—´è®¡ç®—çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œåˆ°setTimeoutå‡½æ•°æ—¶ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå†å°†å½“å‰ä»»åŠ¡æ’å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>æœ€åï¼Œå½“æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ï¼Œjså¼•æ“å°±ä¼šå»æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»£ç ã€‚è¿™æ—¶å€™ä»»åŠ¡é˜Ÿåˆ—ä¸­å°±ä¼šæœ‰åä¸ªconsole.log(i)ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ¯æ¬¡å¾ªç¯ä¸­å°†setTimeouté‡Œé¢çš„ä»£ç â€œconsole.log(i)â€æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—æ—¶ï¼Œiçš„å€¼éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚ä½†JavaScriptå¼•æ“å¼€å§‹æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç æ—¶ï¼Œä¼šå¼€å§‹åœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­å¼€å§‹æ‰¾å˜é‡iï¼Œä½†æ˜¯å½“å‰ä½œç”¨åŸŸä¸­å¹¶æ²¡æœ‰å¯¹å˜é‡iè¿›è¡Œå®šä¹‰ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šåœ¨åˆ›é€ è¯¥å‡½æ•°çš„ä½œç”¨åŸŸä¸­å¯»æ‰¾iã€‚åˆ›å»ºè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå°±æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œè¿™ä¸ªæ—¶å€™å°±æ‰¾åˆ°äº†forå¾ªç¯ä¸­çš„å˜é‡iï¼Œè¿™æ—¶çš„iæ˜¯å…¨å±€å˜é‡ï¼Œå¹¶ä¸”å€¼å·²ç»ç¡®å®šï¼š10ã€‚åä¸ªconsole.logâ€œå…±äº«â€içš„å€¼ã€‚è¿™å°±æ˜¯ä½œç”¨åŸŸé“¾çš„é—®é¢˜ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong></p><ul><li>æ–¹æ³•ä¸€</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">   <span class="built_in">setTimeout</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">   &#125;, <span class="number">1000</span>,i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ€ç²¾ç®€è§£å†³æ–¹æ¡ˆ</p></blockquote><ul><li>æ–¹æ³•äºŒ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">   <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i) </span><br><span class="line">   &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ€ä¼˜è§£å†³æ–¹æ¡ˆï¼Œåˆ©ç”¨letå½¢æˆå—çº§ä½œç”¨åŸŸ</p></blockquote><ul><li>æ–¹æ³•ä¸‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  (<span class="function">(<span class="params">i</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>IIFE(ç«‹å³æ‰§è¡Œå‡½æ•°)ï¼Œç±»ä¼¼äºletç”Ÿæˆäº†å—çº§ä½œç”¨åŸŸã€‚</p></blockquote><ul><li>æ–¹æ³•å››</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">   <span class="built_in">setTimeout</span>(<span class="variable language_">console</span>.<span class="title function_">log</span>(i),<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç›´æ¥è¾“å‡ºï¼Œæ²¡æœ‰å»¶è¿Ÿ</p></blockquote><ul><li>æ–¹æ³•äº”</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">   <span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(i))(),<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åŒä¸Š</p></blockquote><ul><li>æ–¹æ³•å…­</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> i</span><br><span class="line">      &#125;<span class="keyword">catch</span>(i)&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setImmediate</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>);</span><br></pre></td></tr></table></figure><h4 id="3-13-jsæ‰§è¡Œé¡ºåºçš„é¢˜ç›®ï¼Œæ¶‰åŠåˆ°settimeoutã€consoleã€process-nextTickã€promise-then"><a href="#3-13-jsæ‰§è¡Œé¡ºåºçš„é¢˜ç›®ï¼Œæ¶‰åŠåˆ°settimeoutã€consoleã€process-nextTickã€promise-then" class="headerlink" title="3.13 jsæ‰§è¡Œé¡ºåºçš„é¢˜ç›®ï¼Œæ¶‰åŠåˆ°settimeoutã€consoleã€process.nextTickã€promise.then"></a>3.13 jsæ‰§è¡Œé¡ºåºçš„é¢˜ç›®ï¼Œæ¶‰åŠåˆ°settimeoutã€consoleã€process.nextTickã€promise.then</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setImmediate</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>);</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ç»¼åˆçš„æ‰§è¡Œé¡ºåºå°±æ˜¯ï¼š3â€”â€”&gt;4â€”â€”&gt;6â€”â€”&gt;8â€”â€”&gt;7â€”â€”&gt;5â€”â€”&gt;start: 7.009msâ€”â€”&gt;1â€”â€”&gt;2</p><p><strong>è§£æï¼š</strong></p><p>æœ¬é¢˜ç›®ï¼Œè€ƒå¯Ÿçš„å°±æ˜¯ node äº‹ä»¶å¾ªç¯ Event Loop æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£Event Loopå¦‚ä¸‹ï¼š</p><ol><li>æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ(Execution Context Stack)</li><li>åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–è¿˜å­˜åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—(Task Queen),ç³»ç»ŸæŠŠå¼‚æ­¥ä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œåç»­çš„ä»»åŠ¡</li><li>ä¸€æ—¦æ‰§è¡Œæ ˆä¸­æ‰€æœ‰çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ã€‚å¦‚æœè¿™æ—¶å¼‚æ­¥ä»»åŠ¡å·²ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œå°±ä¼šä»ä»»åŠ¡é˜Ÿåˆ—è¿›å…¥æ‰§è¡Œæ ˆï¼Œæ¢å¤æ‰§è¡Œ</li><li>ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥</li></ol><p>åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜ç™½é¦–å…ˆæ‰§è¡Œä¸»çº¿ç¨‹ä¸­çš„åŒæ­¥ä»»åŠ¡ï¼Œå› æ­¤ä¾æ¬¡è¾“å‡º3ã€4ã€6ã€8ã€‚å½“ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†ä»Event Loopä¸­è¯»å–ä»»åŠ¡ã€‚</p><p>Event Loopè¯»å–ä»»åŠ¡çš„å…ˆåé¡ºåºï¼Œå–å†³äºä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob queueï¼‰ä¸­å¯¹äºä¸åŒä»»åŠ¡è¯»å–è§„åˆ™çš„é™å®šã€‚</p><p>åœ¨Job queueä¸­çš„é˜Ÿåˆ—åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><p>å®ä»»åŠ¡ Macrotaskå®ä»»åŠ¡æ˜¯æŒ‡Event Loopåœ¨<strong>æ¯ä¸ªé˜¶æ®µ</strong>æ‰§è¡Œçš„ä»»åŠ¡</p><p>å¾®ä»»åŠ¡ Microtaskå¾®ä»»åŠ¡æ˜¯æŒ‡Event Loopåœ¨<strong>æ¯ä¸ªé˜¶æ®µä¹‹é—´</strong>æ‰§è¡Œçš„ä»»åŠ¡</p><p>æˆ‘ä»¬ä¸¾ä¾‹æ¥çœ‹æ‰§è¡Œé¡ºåºçš„è§„å®šï¼Œæˆ‘ä»¬å‡è®¾</p><p>å®ä»»åŠ¡é˜Ÿåˆ—åŒ…å«ä»»åŠ¡: A1, A2 , A3</p><p>å¾®ä»»åŠ¡é˜Ÿåˆ—åŒ…å«ä»»åŠ¡: B1, B2 , B3</p><p>æ‰§è¡Œé¡ºåºä¸ºï¼Œé¦–å…ˆæ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—å¼€å¤´çš„ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ A1 ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œåœ¨æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„æ‰€æœ‰ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ä¾æ¬¡æ‰§è¡ŒB1, B2 , B3ï¼Œæ‰§è¡Œå®Œåæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿä¸­çš„ä»»åŠ¡ï¼Œæ¥ç€æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬äºŒä¸ªä»»åŠ¡A2ï¼Œä¾æ¬¡å¾ªç¯ã€‚</p><p>äº†è§£å®Œäº†å®ä»»åŠ¡ Macrotaskå’Œå¾®ä»»åŠ¡ Microtaskä¸¤ç§é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºä¹‹åï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹ï¼ŒçœŸå®åœºæ™¯ä¸‹è¿™ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—é‡ŒçœŸæ­£åŒ…å«çš„ä»»åŠ¡ï¼ˆæˆ‘ä»¬ä»¥node V8å¼•æ“ä¸ºä¾‹ï¼‰ï¼Œåœ¨node V8ä¸­ï¼Œè¿™ä¸¤ç§ç±»å‹çš„çœŸå®ä»»åŠ¡é¡ºåºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>å®ä»»åŠ¡ Macrotaské˜Ÿåˆ—çœŸå®åŒ…å«ä»»åŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script(ä¸»ç¨‹åºä»£ç ),setTimeout, setInterval, setImmediate, I/O, UI rendering</span><br></pre></td></tr></table></figure><p>å¾®ä»»åŠ¡ Microtaské˜Ÿåˆ—çœŸå®åŒ…å«ä»»åŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">process.nextTick, Promises, Object.observe, MutationObserver</span><br></pre></td></tr></table></figure><p>ç”±æ­¤æˆ‘ä»¬å¾—åˆ°çš„æ‰§è¡Œé¡ºåºåº”è¯¥ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script(ä¸»ç¨‹åºä»£ç )â€”&gt;process.nextTickâ€”&gt;Promises...â€”â€”&gt;setTimeoutâ€”â€”&gt;setIntervalâ€”â€”&gt;setImmediateâ€”â€”&gt; I/Oâ€”â€”&gt;UI rendering</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ES6ä¸­å®ä»»åŠ¡ Macrotaské˜Ÿåˆ—åˆç§°ä¸ºScriptJobsï¼Œè€Œå¾®ä»»åŠ¡ Microtaskåˆç§°PromiseJobs</p></blockquote><p>æˆ‘ä»¬çš„é¢˜ç›®ç›¸å¯¹å¤æ‚ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰promiseçš„æ—¶å€™ï¼Œpromiseæ„é€ éƒ¨åˆ†æ˜¯åŒæ­¥æ‰§è¡Œçš„</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†ææˆ‘ä»¬çš„é¢˜ç›®ï¼Œé¦–å…ˆåˆ†æJob queueçš„æ‰§è¡Œé¡ºåºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script(ä¸»ç¨‹åºä»£ç )â€”â€”&gt;process.nextTickâ€”â€”&gt;promiseâ€”â€”&gt;setTimeoutâ€”â€”&gt;setImmediate</span><br></pre></td></tr></table></figure><ul><li>ä¸»ä½“éƒ¨åˆ†ï¼š å®šä¹‰promiseçš„æ„é€ éƒ¨åˆ†æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å…ˆè¾“å‡º3ã€4 ï¼Œä¸»ä½“éƒ¨åˆ†å†è¾“å‡º6ã€8ï¼ˆåŒæ­¥æƒ…å†µä¸‹ï¼Œå°±æ˜¯ä¸¥æ ¼æŒ‰ç…§å®šä¹‰çš„å…ˆåé¡ºåºï¼‰</li><li>process.nextTick: è¾“å‡º7</li><li>promiseï¼š è¿™é‡Œçš„promiseéƒ¨åˆ†ï¼Œä¸¥æ ¼çš„è¯´å…¶å®æ˜¯promise.thenéƒ¨åˆ†ï¼Œè¾“å‡ºçš„æ˜¯5ã€ä»¥åŠ timeEnd(â€˜startâ€™)</li><li>setImmediateï¼šè¾“å‡º1ï¼Œä¾æ®ä¸Šé¢ä¼˜å…ˆçº§ï¼Œåº”è¯¥å…ˆsetTimeoutï¼Œä½†æ˜¯æ³¨æ„ï¼ŒsetTimeout è®¾ç½® 10ms å»¶æ—¶</li><li>setTimeout ï¼š è¾“å‡º2</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;3-1-promiseå’Œ-async-await-åŒºåˆ«&quot;&gt;&lt;a href=&quot;#3-1-promiseå’Œ-async-await-åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;3.1 promiseå’Œ async await åŒºåˆ«&quot;&gt;&lt;/a&gt;3.1 p</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="JavaScript" scheme="https://dont-sleep-so-late.github.io/tags/JavaScript/"/>
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>HTMLå…«è‚¡æ–‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/HTMl%E5%85%AB%E8%82%A1%E6%96%87/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/HTMl%E5%85%AB%E8%82%A1%E6%96%87/</id>
    <published>2024-04-01T15:31:36.000Z</published>
    <updated>2024-04-03T03:46:40.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><h2 id="1-1-htmlæ ‡ç­¾çš„ç±»å‹ï¼ˆheadï¼Œ-bodyï¼Œï¼Doctypeï¼‰-ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"><a href="#1-1-htmlæ ‡ç­¾çš„ç±»å‹ï¼ˆheadï¼Œ-bodyï¼Œï¼Doctypeï¼‰-ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 htmlæ ‡ç­¾çš„ç±»å‹ï¼ˆheadï¼Œ bodyï¼Œï¼Doctypeï¼‰ ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"></a>1.1 htmlæ ‡ç­¾çš„ç±»å‹ï¼ˆheadï¼Œ bodyï¼Œï¼Doctypeï¼‰ ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ</h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>!DOCTYPE æ ‡ç­¾ï¼š</p><ul><li>å®ƒæ˜¯æŒ‡ç¤º web æµè§ˆå™¨å…³äºé¡µé¢ä½¿ç”¨å“ªä¸ª HTML ç‰ˆæœ¬è¿›è¡Œç¼–å†™çš„æŒ‡ä»¤.</li></ul><p>headï¼š</p><ul><li>æ˜¯æ‰€æœ‰å¤´éƒ¨å…ƒç´ çš„å®¹å™¨, ç»å¤§å¤šæ•°å¤´éƒ¨æ ‡ç­¾çš„å†…å®¹ä¸ä¼šæ˜¾ç¤ºç»™è¯»è€…</li><li>è¯¥æ ‡ç­¾ä¸‹æ‰€åŒ…å«çš„éƒ¨åˆ†å¯åŠ å…¥çš„æ ‡ç­¾æœ‰,,,,å’Œ</li></ul><p>body :</p><ul><li>ç”¨äºå®šä¹‰æ–‡æ¡£çš„ä¸»ä½“, åŒ…å«äº†æ–‡æ¡£çš„æ‰€æœ‰å†…å®¹</li><li>è¯¥æ ‡ç­¾æ”¯æŒ html çš„å…¨å±€å±æ€§å’Œäº‹ä»¶å±æ€§.</li></ul><h2 id="1-2-h5æ–°ç‰¹æ€§"><a href="#1-2-h5æ–°ç‰¹æ€§" class="headerlink" title="1.2 h5æ–°ç‰¹æ€§"></a>1.2 h5æ–°ç‰¹æ€§</h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ul><li>æ–°å¢é€‰æ‹©å™¨ document.querySelectorã€document.querySelectorAll</li><li>æ‹–æ‹½é‡Šæ”¾(Drag and drop) API</li><li>åª’ä½“æ’­æ”¾çš„ video å’Œ audio</li><li>æœ¬åœ°å­˜å‚¨ localStorage å’Œ sessionStorage</li><li>ç¦»çº¿åº”ç”¨ manifest</li><li>æ¡Œé¢é€šçŸ¥ Notifications</li><li>è¯­æ„åŒ–æ ‡ç­¾ articleã€footerã€headerã€navã€section</li><li>å¢å¼ºè¡¨å•æ§ä»¶ calendarã€dateã€timeã€emailã€urlã€search</li><li>åœ°ç†ä½ç½® Geolocation</li><li>å¤šä»»åŠ¡ webworker</li><li>å…¨åŒå·¥é€šä¿¡åè®® websocket</li><li>å†å²ç®¡ç† history</li><li>è·¨åŸŸèµ„æºå…±äº«(CORS) Access-Control-Allow-Origin</li><li>é¡µé¢å¯è§æ€§æ”¹å˜äº‹ä»¶ visibilitychange</li><li>è·¨çª—å£é€šä¿¡ PostMessage</li><li>Form Data å¯¹è±¡</li><li>ç»˜ç”» canvas</li></ul><p>H5ç§»é™¤çš„å…ƒç´ ï¼š</p><ul><li>çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontã€bigã€centerã€fontã€sã€strikeã€ttã€u</li><li>å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeã€framesetã€noframes</li></ul><h2 id="1-3-ä¼ªç±»å’Œä¼ªå…ƒç´ "><a href="#1-3-ä¼ªç±»å’Œä¼ªå…ƒç´ " class="headerlink" title="1.3 ä¼ªç±»å’Œä¼ªå…ƒç´ "></a>1.3 ä¼ªç±»å’Œä¼ªå…ƒç´ </h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ä¼ªç±»ï¼šç”¨äºå·²æœ‰å…ƒç´ å¤„äºæŸç§çŠ¶æ€æ—¶ä¸ºå…¶æ·»åŠ å¯¹åº”çš„æ ·å¼ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯æ ¹æ®ç”¨æˆ·è¡Œä¸ºè€ŒåŠ¨æ€å˜åŒ–çš„ã€‚</p><p>ä¾‹å¦‚ï¼šå½“ç”¨æˆ·æ‚¬åœåœ¨æŒ‡å®šå…ƒç´ æ—¶ï¼Œå¯ä»¥é€šè¿‡:hoveræ¥æè¿°è¿™ä¸ªå…ƒç´ çš„çŠ¶æ€ï¼Œè™½ç„¶å®ƒå’Œä¸€èˆ¬cssç›¸ä¼¼ï¼Œå¯ä»¥ä¸º å·²æœ‰å…ƒç´ æ·»åŠ æ ·å¼ï¼Œä½†æ˜¯å®ƒåªæœ‰å¤„äºDOMæ ‘æ— æ³•æè¿°çš„çŠ¶æ€ä¸‹æ‰èƒ½ä¸ºå…ƒç´ æ·»åŠ æ ·å¼ï¼Œæ‰€ä»¥ç§°ä¸ºä¼ªç±»ã€‚</p><p>ä¼ªå…ƒç´ ï¼šç”¨äºåˆ›å»ºä¸€äº›ä¸åœ¨DOMæ ‘ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ ·å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡:beforeæ¥åœ¨ä¸€ä¸ªå…ƒç´ ä¹‹å‰æ·»åŠ ä¸€äº›æ–‡æœ¬ï¼Œå¹¶ä¸ºè¿™äº›æ–‡æœ¬æ·»åŠ æ ·å¼ï¼Œè™½ç„¶ç”¨æˆ·å¯ä»¥çœ‹è§ è¿™äº›æ–‡æœ¬ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šå¹¶ä¸åœ¨DOMæ–‡æ¡£ä¸­ã€‚</p><h2 id="1-4-html5è¯­ä¹‰åŒ–"><a href="#1-4-html5è¯­ä¹‰åŒ–" class="headerlink" title="1.4 html5è¯­ä¹‰åŒ–"></a>1.4 html5è¯­ä¹‰åŒ–</h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åœ¨HTML5å‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹ æƒ¯äºç”¨divæ¥è¡¨ç¤ºé¡µé¢çš„ç« èŠ‚æˆ–è€…ä¸åŒæ¨¡å—ï¼Œä½†æ˜¯divæœ¬èº«æ˜¯æ²¡æœ‰è¯­ä¹‰çš„ã€‚ä½†æ˜¯ç°åœ¨ï¼ŒHTML5ä¸­åŠ å…¥äº†ä¸€äº›è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œæ¥æ›´æ¸…æ™°çš„è¡¨è¾¾æ–‡æ¡£ç»“æ„ã€‚</p><p>æ ‡ç­¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121492395/44B73F2E744FF268279D16601DB2CBC8" alt="img"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>      <span class="comment">&lt;!--ï¼šé¡µé¢ä¸»ä½“å†…å®¹ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hn</span>&gt;</span>         <span class="comment">&lt;!--ï¼šh1~h6ï¼Œåˆ†çº§æ ‡é¢˜ï¼Œ&lt;h1&gt; ä¸ &lt;title&gt; åè°ƒæœ‰åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>         <span class="comment">&lt;!--ï¼šæ— åºåˆ—è¡¨ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>         <span class="comment">&lt;!--ï¼šæœ‰åºåˆ—è¡¨ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>     <span class="comment">&lt;!--ï¼šé¡µçœ‰é€šå¸¸åŒ…æ‹¬ç½‘ç«™æ ‡å¿—ã€ä¸»å¯¼èˆªã€å…¨ç«™é“¾æ¥ä»¥åŠæœç´¢æ¡†ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span>         <span class="comment">&lt;!--ï¼šæ ‡è®°å¯¼èˆªï¼Œä»…å¯¹æ–‡æ¡£ä¸­é‡è¦çš„é“¾æ¥ç¾¤ä½¿ç”¨ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>         <span class="comment">&lt;!--ï¼šé¡µé¢ä¸»è¦å†…å®¹ï¼Œä¸€ä¸ªé¡µé¢åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚å¦‚æœæ˜¯webåº”ç”¨ï¼Œåˆ™åŒ…å›´å…¶ä¸»è¦åŠŸèƒ½ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span>    <span class="comment">&lt;!--ï¼šå®šä¹‰å¤–éƒ¨çš„å†…å®¹ï¼Œå…¶ä¸­çš„å†…å®¹ç‹¬ç«‹äºæ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span>    <span class="comment">&lt;!--ï¼šå®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚ï¼ˆsectionã€åŒºæ®µï¼‰ã€‚æ¯”å¦‚ç« èŠ‚ã€é¡µçœ‰ã€é¡µè„šæˆ–æ–‡æ¡£ä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>         <span class="comment">&lt;!--ï¼šå®šä¹‰å…¶æ‰€å¤„å†…å®¹ä¹‹å¤–çš„å†…å®¹ã€‚å¦‚ä¾§æ ã€æ–‡ç« çš„ä¸€ç»„é“¾æ¥ã€å¹¿å‘Šã€å‹æƒ…é“¾æ¥ã€ç›¸å…³äº§å“åˆ—è¡¨ç­‰ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>     <span class="comment">&lt;!--ï¼šé¡µè„šï¼Œåªæœ‰å½“çˆ¶çº§æ˜¯bodyæ—¶ï¼Œæ‰æ˜¯æ•´ä¸ªé¡µé¢çš„é¡µè„šã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">small</span>&gt;</span>      <span class="comment">&lt;!--ï¼šå‘ˆç°å°å·å­—ä½“æ•ˆæœï¼ŒæŒ‡å®šç»†åˆ™ï¼Œè¾“å…¥å…è´£å£°æ˜ã€æ³¨è§£ã€ç½²åã€ç‰ˆæƒã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>     <span class="comment">&lt;!--ï¼šå’Œ em æ ‡ç­¾ä¸€æ ·ï¼Œç”¨äºå¼ºè°ƒæ–‡æœ¬ï¼Œä½†å®ƒå¼ºè°ƒçš„ç¨‹åº¦æ›´å¼ºä¸€äº›ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>         <span class="comment">&lt;!--ï¼šå°†å…¶ä¸­çš„æ–‡æœ¬è¡¨ç¤ºä¸ºå¼ºè°ƒçš„å†…å®¹ï¼Œè¡¨ç°ä¸ºæ–œä½“ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mark</span>&gt;</span>       <span class="comment">&lt;!--ï¼šä½¿ç”¨é»„è‰²çªå‡ºæ˜¾ç¤ºéƒ¨åˆ†æ–‡æœ¬ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span>     <span class="comment">&lt;!--ï¼šè§„å®šç‹¬ç«‹çš„æµå†…å®¹ï¼ˆå›¾åƒã€å›¾è¡¨ã€ç…§ç‰‡ã€ä»£ç ç­‰ç­‰ï¼‰ï¼ˆé»˜è®¤æœ‰40pxå·¦å³marginï¼‰ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">figcaption</span>&gt;</span><span class="comment">&lt;!--ï¼šå®šä¹‰ figure å…ƒç´ çš„æ ‡é¢˜ï¼Œåº”è¯¥è¢«ç½®äº figure å…ƒç´ çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå­å…ƒç´ çš„ä½ç½®ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cite</span>&gt;</span>       <span class="comment">&lt;!--ï¼šè¡¨ç¤ºæ‰€åŒ…å«çš„æ–‡æœ¬å¯¹æŸä¸ªå‚è€ƒæ–‡çŒ®çš„å¼•ç”¨ï¼Œæ¯”å¦‚ä¹¦ç±æˆ–è€…æ‚å¿—çš„æ ‡é¢˜ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquoto</span>&gt;</span><span class="comment">&lt;!--ï¼šå®šä¹‰å—å¼•ç”¨ï¼Œå—å¼•ç”¨æ‹¥æœ‰å®ƒä»¬è‡ªå·±çš„ç©ºé—´ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">q</span>&gt;</span>          <span class="comment">&lt;!--ï¼šçŸ­çš„å¼•è¿°ï¼ˆè·¨æµè§ˆå™¨é—®é¢˜ï¼Œå°½é‡é¿å…ä½¿ç”¨ï¼‰ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span>&gt;</span>       <span class="comment">&lt;!--ï¼šdatetimeå±æ€§éµå¾ªç‰¹å®šæ ¼å¼ï¼Œå¦‚æœå¿½ç•¥æ­¤å±æ€§ï¼Œæ–‡æœ¬å†…å®¹å¿…é¡»æ˜¯åˆæ³•çš„æ—¥æœŸæˆ–è€…æ—¶é—´æ ¼å¼ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">abbr</span>&gt;</span>       <span class="comment">&lt;!--ï¼šç®€ç§°æˆ–ç¼©å†™ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dfn</span>&gt;</span>       <span class="comment">&lt;!--ï¼šå®šä¹‰æœ¯è¯­å…ƒç´ ï¼Œä¸å®šä¹‰å¿…é¡»ç´§æŒ¨ç€ï¼Œå¯ä»¥åœ¨æè¿°åˆ—è¡¨dlå…ƒç´ ä¸­ä½¿ç”¨ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span>    <span class="comment">&lt;!--ï¼šä½œè€…ã€ç›¸å…³äººå£«æˆ–ç»„ç»‡çš„è”ç³»ä¿¡æ¯ï¼ˆç”µå­é‚®ä»¶åœ°å€ã€æŒ‡å‘è”ç³»ä¿¡æ¯é¡µçš„é“¾æ¥ï¼‰ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span>        <span class="comment">&lt;!--ï¼šç§»é™¤çš„å†…å®¹ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span>&gt;</span>        <span class="comment">&lt;!--ï¼šæ·»åŠ çš„å†…å®¹ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span>       <span class="comment">&lt;!--ï¼šæ ‡è®°ä»£ç ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meter</span>&gt;</span>      <span class="comment">&lt;!--ï¼šå®šä¹‰å·²çŸ¥èŒƒå›´æˆ–åˆ†æ•°å€¼å†…çš„æ ‡é‡æµ‹é‡ã€‚ï¼ˆInternet Explorer ä¸æ”¯æŒ meter æ ‡ç­¾ï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>&gt;</span>    <span class="comment">&lt;!--ï¼šå®šä¹‰è¿è¡Œä¸­çš„è¿›åº¦ï¼ˆè¿›ç¨‹ï¼‰ã€‚--&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•ï¼š</strong></p><p>è¯­ä¹‰åŒ–ä¼˜ç‚¹ï¼š</p><ul><li>æ˜“äºç”¨æˆ·é˜…è¯»ï¼Œæ ·å¼ä¸¢å¤±çš„æ—¶å€™èƒ½è®©é¡µé¢å‘ˆç°æ¸…æ™°çš„ç»“æ„ã€‚</li><li>æœ‰åˆ©äºSEOï¼Œæœç´¢å¼•æ“æ ¹æ®æ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ã€‚</li><li>æ–¹ä¾¿å±å¹•é˜…è¯»å™¨è§£æï¼Œå¦‚ç›²äººé˜…è¯»å™¨æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µ</li><li>æœ‰åˆ©äºå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œä»£ç æ›´å¥½ç»´æŠ¤ï¼Œä¸CSS3å…³ç³»æ›´å’Œè°ã€‚</li></ul><h2 id="1-5-audio-æ ‡ç­¾çš„api"><a href="#1-5-audio-æ ‡ç­¾çš„api" class="headerlink" title="1.5 audio æ ‡ç­¾çš„api"></a>1.5 audio æ ‡ç­¾çš„api</h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>audioå¸¸ç”¨å±æ€§</p><table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>å±æ€§å€¼</strong></th><th><strong>æ³¨é‡Š</strong></th></tr></thead><tbody><tr><td>src</td><td>url</td><td>æ’­æ”¾çš„éŸ³ä¹çš„urlåœ°å€ï¼ˆç«ç‹åªæ”¯æŒoggçš„éŸ³ä¹ï¼Œè€ŒIE9åªæ”¯æŒMP3æ ¼å¼çš„éŸ³ä¹ã€‚chromeè²Œä¼¼å…¨æ”¯æŒï¼‰</td></tr><tr><td>preload</td><td>preload</td><td>é¢„åŠ è½½ï¼ˆåœ¨é¡µé¢è¢«åŠ è½½æ—¶è¿›è¡ŒåŠ è½½æˆ–è€…è¯´ç¼“å†²éŸ³é¢‘ï¼‰ï¼Œå¦‚æœä½¿ç”¨äº†autoplayçš„è¯é‚£ä¹ˆè¯¥å±æ€§å¤±æ•ˆã€‚</td></tr><tr><td>loop</td><td>loop</td><td>å¾ªç¯æ’­æ”¾</td></tr><tr><td>controls</td><td>controls</td><td>æ˜¯å¦æ˜¾ç¤ºé»˜è®¤æ§åˆ¶æ¡ï¼ˆæ§åˆ¶æŒ‰é’®ï¼‰</td></tr><tr><td>autoplay</td><td>autoplay</td><td>è‡ªåŠ¨æ’­æ”¾</td></tr></tbody></table><p>audioéŸ³ä¹æ ¼å¼çš„æ”¯æŒ</p><table><thead><tr><th><strong>éŸ³é¢‘æ ¼å¼</strong></th><th><strong>Chrome</strong></th><th><strong>Firefox</strong></th><th><strong>IE9</strong></th><th><strong>Opera</strong></th><th><strong>Safari</strong></th></tr></thead><tbody><tr><td>OGG</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>Ã—</td><td>Ã—</td></tr><tr><td>MP3</td><td>âˆš</td><td>Ã—</td><td>âˆš</td><td>Ã—</td><td>âˆš</td></tr><tr><td>WAV</td><td>Ã—</td><td>âˆš</td><td>Ã—</td><td>âˆš</td><td>Ã—</td></tr></tbody></table><p>audioå±æ€§</p><table><thead><tr><th>å±æ€§</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>duration</td><td>è·å–åª’ä½“æ–‡ä»¶çš„æ€»æ—¶é•¿ï¼Œä»¥sä¸ºå•ä½ï¼Œå¦‚æœæ— æ³•è·å–ï¼Œè¿”å›NaN</td></tr><tr><td>paused</td><td>å¦‚æœåª’ä½“æ–‡ä»¶è¢«æš‚åœï¼Œé‚£ä¹ˆpausedå±æ€§è¿”å›trueï¼Œåä¹‹åˆ™è¿”å›false</td></tr><tr><td>ended</td><td>å¦‚æœåª’ä½“æ–‡ä»¶æ’­æ”¾å®Œæ¯•è¿”å›true</td></tr><tr><td>muted</td><td>ç”¨æ¥è·å–æˆ–è®¾ç½®é™éŸ³çŠ¶æ€ã€‚å€¼ä¸ºboolean</td></tr><tr><td>volume</td><td>æ§åˆ¶éŸ³é‡çš„å±æ€§å€¼ä¸º0-1;0ä¸ºéŸ³é‡æœ€å°ï¼Œ1ä¸ºéŸ³é‡æœ€å¤§</td></tr><tr><td>startTime</td><td>è¿”å›èµ·å§‹æ’­æ”¾æ—¶é—´</td></tr><tr><td>error</td><td>è¿”å›é”™è¯¯ä»£ç ï¼Œä¸ºuullçš„æ—¶å€™ä¸ºæ­£å¸¸ã€‚å¦åˆ™å¯ä»¥é€šè¿‡Music.error.codeæ¥è·å–å…·ä½“çš„é”™è¯¯ä»£ç ï¼š 1.ç”¨æˆ·ç»ˆæ­¢ 2.ç½‘ç»œé”™è¯¯ 3.è§£ç é”™è¯¯ 4.URLæ— æ•ˆ</td></tr><tr><td>currentTime</td><td>ç”¨æ¥è·å–æˆ–æ§åˆ¶å½“å‰æ’­æ”¾çš„æ—¶é—´ï¼Œå•ä½ä¸ºsã€‚</td></tr><tr><td>currentSrc</td><td>ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æ­£åœ¨æ’­æ”¾æˆ–å·²åŠ è½½çš„æ–‡ä»¶</td></tr></tbody></table><p>å¸¸ç”¨çš„æ§åˆ¶ç”¨çš„å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>load()</td><td>åŠ è½½éŸ³é¢‘ã€è§†é¢‘è½¯ä»¶</td></tr><tr><td>play()</td><td>åŠ è½½å¹¶æ’­æ”¾éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶æˆ–é‡æ–°æ’­æ”¾æš‚åœçš„çš„éŸ³é¢‘ã€è§†é¢‘</td></tr><tr><td>pause()</td><td>æš‚åœå‡ºäºæ’­æ”¾çŠ¶æ€çš„éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶</td></tr><tr><td>canPlayType(obj)</td><td>æµ‹è¯•æ˜¯å¦æ”¯æŒç»™å®šçš„Miniç±»å‹çš„æ–‡ä»¶</td></tr></tbody></table><p>å¸¸ç”¨audioçš„äº‹ä»¶ï¼š</p><table><thead><tr><th>äº‹ä»¶åç§°</th><th>äº‹ä»¶ä½œç”¨</th></tr></thead><tbody><tr><td>loadstart</td><td>å®¢æˆ·ç«¯å¼€å§‹è¯·æ±‚æ•°æ®</td></tr><tr><td>progress</td><td>å®¢æˆ·ç«¯æ­£åœ¨è¯·æ±‚æ•°æ®ï¼ˆæˆ–è€…è¯´æ­£åœ¨ç¼“å†²ï¼‰</td></tr><tr><td>play</td><td>play()å’Œautoplayæ’­æ”¾æ—¶</td></tr><tr><td>pause</td><td>pause()æ–¹æ³•ä¿ƒå‘æ—¶</td></tr><tr><td>ended</td><td>å½“å‰æ’­æ”¾ç»“æŸ</td></tr><tr><td>timeupdate</td><td>å½“å‰æ’­æ”¾æ—¶é—´å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ã€‚æ’­æ”¾ä¸­å¸¸ç”¨çš„æ—¶é—´å¤„ç†å“¦</td></tr><tr><td>canplaythrough</td><td>æ­Œæ›²å·²ç»è½½å…¥å®Œå…¨å®Œæˆ</td></tr><tr><td>canplay</td><td>ç¼“å†²è‡³ç›®å‰å¯æ’­æ”¾çŠ¶æ€ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;html&quot;&gt;&lt;a href=&quot;#html&quot; class=&quot;headerlink&quot; title=&quot;html&quot;&gt;&lt;/a&gt;html&lt;/h1&gt;&lt;h2 id=&quot;1-1-htmlæ ‡ç­¾çš„ç±»å‹ï¼ˆheadï¼Œ-bodyï¼Œï¼Doctypeï¼‰-ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#1-</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="HTML" scheme="https://dont-sleep-so-late.github.io/tags/HTML/"/>
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>webpack</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/%E6%89%93%E5%8C%85/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/%E6%89%93%E5%8C%85/</id>
    <published>2024-04-01T15:31:36.000Z</published>
    <updated>2024-04-03T03:51:01.536Z</updated>
    
    <content type="html"><![CDATA[<h4 id="2-1-æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«"><a href="#2-1-æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«" class="headerlink" title="2.1 æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«"></a>2.1 æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>Gulpï¼š</strong></p><p>Gulpæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»º<strong>å·¥å…·</strong>ï¼Œå¼ºè°ƒçš„æ˜¯å‰ç«¯å¼€å‘çš„æµç¨‹ï¼Œé€šè¿‡é…ç½®ä¸€ç³»åˆ—çš„taskï¼Œå®šä¹‰taskå¤„ç†çš„äº‹ç‰©ï¼Œç„¶åå®šä¹‰æ‰§è¡Œé¡ºåºï¼Œæ¥è®©Gulpæ‰§è¡Œtaskï¼Œä»è€Œæ„å»ºå‰ç«¯é¡¹ç›®çš„æµç¨‹ï¼Œè¯´ç™½äº†å°±æ˜¯ç”¨æ¥æ‰“åŒ…é¡¹ç›®ã€‚</p><p>ä¸ç®¡åšä»€ä¹ˆåŠŸèƒ½ï¼Œéƒ½æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£è¿›è¡Œç®¡ç†ï¼Œå¿…é¡»å»æ³¨å†Œä¸€ä¸ªä»»åŠ¡ï¼Œç„¶åå»æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯å®ƒçš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œå³â€œä»»åŠ¡åŒ–â€ã€‚</p><p><strong>WebPackï¼š</strong></p><p>WebPackæ˜¯ä¸€ä¸ªå‰ç«¯æ¨¡å—åŒ–<strong>æ–¹æ¡ˆ</strong>ï¼Œä¾§é‡æ¨¡å—æ‰“åŒ…ï¼ŒæŠŠå¼€å‘ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ã€jsæ–‡ä»¶ã€cssæ–‡ä»¶ç­‰ï¼‰éƒ½çœ‹æˆæ¨¡å—ï¼Œé€šè¿‡loaderï¼ˆåŠ è½½å™¨ï¼‰å’Œpluginsï¼ˆæ’ä»¶ï¼‰å¯¹èµ„æºè¿›è¡Œå¤„ç†ï¼Œæ‰“åŒ…æˆç¬¦åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„å‰ç«¯èµ„æºï¼ŒGulpä¹Ÿå¯ä»¥é…ç½®seajsã€requirejsç”šè‡³webpackçš„æ’ä»¶ã€‚</p><p>å®ƒä¼šåˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JSæ¨¡å—ä»¥åŠé‚£äº›æµè§ˆå™¨ä¸èƒ½å¤Ÿç›´æ¥è¿è¡Œçš„æ‰©å±•è¯­è¨€ï¼ˆå¦‚ï¼šTypeScriptç­‰ï¼‰ï¼Œç„¶åå°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚<strong>å®ƒæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯â€œæ¨¡å—åŒ–â€ï¼ˆä¸‡ç‰©çš†æ¨¡å—ï¼‰ã€‚</strong><br>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œåˆå¹¶ä¸å‹ç¼©ï¼ˆJSã€CSSï¼‰ã€‚</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>Gulpæ˜¯æ„å»ºå·¥å…·ï¼Œå¯ä»¥é…åˆå„ç§æ’ä»¶åšcss.å‹ç¼©ç­‰ï¼Œè§£æ”¾äº†åŒæ‰‹ï¼Œå®ç°äº†è‡ªåŠ¨åŒ–ã€‚</li><li>Gulpä¸¥æ ¼ä¸Šè®²ï¼Œå®ƒæ—¨åœ¨è§„èŒƒå‰ç«¯å¼€å‘æµç¨‹ï¼Œä¸åŒ…æ‹¬æ¨¡å—åŒ–åŠŸèƒ½ã€‚</li><li>WebPackæ˜¯æ–‡ä»¶æ‰“åŒ…å·¥å…·ï¼Œå¯æŠŠå„ä¸ªé¡¹ç›®çš„css.å‹ç¼©æ–‡ä»¶ç­‰æ‰“åŒ…åˆå¹¶æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œä¸»è¦å°±æ˜¯åº”ç”¨äºæ¨¡å—åŒ–æ“ä½œã€‚</li><li>WebPackæ›´æ˜¯æ˜æ˜¾å¼ºè°ƒæ¨¡å—åŒ–å¼€å‘ï¼Œè€Œé‚£äº›æ–‡ä»¶å‹ç¼©åˆå¹¶ã€é¢„å¤„ç†ç­‰åŠŸèƒ½ï¼Œåªæ˜¯ä»–é™„å¸¦çš„åŠŸèƒ½ã€‚</li><li>WebPackæ•´åˆäº†Gulpçš„ä¼˜ç‚¹ï¼Œå½“æˆ‘ä»¬æƒ³è¦ä¸€æ­¥ä¸€æ­¥æ¥é…ç½®è‡ªå·±çš„ç¯å¢ƒæ—¶ï¼Œé‚£ä¹ˆgulpå°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³ä¸€ä¸‹å°±é…å¤‡å¤§éƒ¨åˆ†æˆ‘ä»¬æ‰€éœ€è¦çš„ç¯å¢ƒï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥é€‰ç”¨WebPackï¼Œå‰ææ˜¯å†™å¥½package.jsonã€‚</li><li>gulpä¸webpackä¸Šæ˜¯äº’è¡¥çš„ï¼Œè¿˜æ˜¯å¯æ›¿æ¢çš„ï¼Œå–å†³äºä½ é¡¹ç›®çš„éœ€æ±‚ï¼Œå®ƒä»¬å¯ä¸å­˜åœ¨å†²çªçš„å…³ç³»å“ˆã€‚</li><li>Gulpä¸WebPackå¯ä»¥ç»„åˆèµ·æ¥ä½¿ç”¨ï¼Œä»¥ä¾¿å¿«é€Ÿç¼–è¯‘ï¼ˆä¾é Gulpä¸°å¯Œçš„ç»„ä»¶å¯ä»¥è®©JSä¸HTMLå®ç°è”åŠ¨ï¼Œä»è€Œæ§åˆ¶WebPackåº”ç”¨ç¨‹åºï¼Œè¾¾åˆ°é«˜è‡ªåŠ¨åŒ–ï¼‰</li></ul><h4 id="2-2-webpackçš„æ‰“åŒ…æµç¨‹"><a href="#2-2-webpackçš„æ‰“åŒ…æµç¨‹" class="headerlink" title="2.2 webpackçš„æ‰“åŒ…æµç¨‹"></a>2.2 webpackçš„æ‰“åŒ…æµç¨‹</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>Webpackçš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p><ol><li>åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½ Pluginï¼Œå®ä¾‹åŒ– Compilerã€‚</li><li>ç¼–è¯‘ï¼šä» Entry å‘å‡ºï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ Loader å»ç¿»è¯‘æ–‡ä»¶å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†ã€‚</li><li>è¾“å‡ºï¼šå¯¹ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼ŒæŠŠ Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li></ol><p>å¦‚æœåªæ‰§è¡Œä¸€æ¬¡æ„å»ºï¼Œä»¥ä¸Šé˜¶æ®µå°†ä¼šæŒ‰ç…§é¡ºåºå„æ‰§è¡Œä¸€æ¬¡ã€‚ä½†åœ¨å¼€å¯ç›‘å¬æ¨¡å¼ä¸‹ï¼Œæµç¨‹å°†å˜ä¸ºå¦‚ä¸‹ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646129282955/9B823AC99AF889118D34D0CB72E7A28E" alt="img"></p><p>ä¸‹é¢å…·ä½“ä»‹ç»ä¸€ä¸‹webpackçš„ä¸‰ä¸ªå¤§é˜¶æ®µå…·ä½“çš„å°æ­¥ã€‚</p><p>åˆå§‹åŒ–é˜¶æ®µ</p><p>åˆå§‹åŒ–é˜¶æ®µå¤§è‡´åˆ†ä¸ºï¼š</p><ul><li>åˆå¹¶shellå’Œ<strong>é…ç½®æ–‡ä»¶æ–‡ä»¶</strong>çš„å‚æ•°å¹¶ä¸”<strong>å®ä¾‹åŒ–Complierå¯¹è±¡</strong>ã€‚</li><li><strong>åŠ è½½æ’ä»¶</strong></li><li><strong>å¤„ç†å…¥å£</strong></li></ul><table><thead><tr><th>äº‹ä»¶å</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–å‚æ•°</td><td>ä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜ä¼šæ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶å®ä¾‹åŒ–è¯­å¥ new Plugin()ã€‚</td></tr><tr><td>å®ä¾‹åŒ– Compiler</td><td>ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ–Compilerå®ä¾‹ï¼ŒCompilerè´Ÿè´£æ–‡ä»¶ç›‘å¬å’Œå¯åŠ¨ç¼–è¯‘ã€‚Compilerå®ä¾‹ä¸­åŒ…å«äº†å®Œæ•´çš„Webpacké…ç½®ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ªCompilerå®ä¾‹ã€‚</td></tr><tr><td>åŠ è½½æ’ä»¶</td><td>ä¾æ¬¡è°ƒç”¨æ’ä»¶çš„applyæ–¹æ³•ï¼Œè®©æ’ä»¶å¯ä»¥ç›‘å¬åç»­çš„æ‰€æœ‰äº‹ä»¶èŠ‚ç‚¹ã€‚åŒæ—¶ç»™æ’ä»¶ä¼ å…¥compilerå®ä¾‹çš„å¼•ç”¨ï¼Œä»¥æ–¹ä¾¿æ’ä»¶é€šè¿‡compilerè°ƒç”¨Webpackæä¾›çš„APIã€‚</td></tr><tr><td>environment</td><td>å¼€å§‹åº”ç”¨Node.jsé£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿåˆ°compilerå¯¹è±¡ï¼Œä»¥æ–¹ä¾¿åç»­çš„æ–‡ä»¶å¯»æ‰¾å’Œè¯»å–ã€‚</td></tr><tr><td>entry-option</td><td>è¯»å–é…ç½®çš„Entrysï¼Œä¸ºæ¯ä¸ªEntryå®ä¾‹åŒ–ä¸€ä¸ªå¯¹åº”çš„EntryPluginï¼Œä¸ºåé¢è¯¥Entryçš„é€’å½’è§£æå·¥ä½œåšå‡†å¤‡ã€‚</td></tr><tr><td>after-plugins</td><td>è°ƒç”¨å®Œæ‰€æœ‰å†…ç½®çš„å’Œé…ç½®çš„æ’ä»¶çš„applyæ–¹æ³•ã€‚</td></tr><tr><td>after-resolvers</td><td>æ ¹æ®é…ç½®åˆå§‹åŒ–å®Œresolverï¼Œresolverè´Ÿè´£åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¯»æ‰¾æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ã€‚</td></tr></tbody></table><p>ç¼–è¯‘é˜¶æ®µ</p><table><thead><tr><th>äº‹ä»¶å</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>before-run</td><td>æ¸…é™¤ç¼“å­˜</td></tr><tr><td>run</td><td>å¯åŠ¨ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚</td></tr><tr><td>watch-run</td><td>å’Œrunç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå®ƒæ˜¯åœ¨ç›‘å¬æ¨¡å¼ä¸‹å¯åŠ¨çš„ç¼–è¯‘ï¼Œåœ¨è¿™ä¸ªäº‹ä»¶ä¸­å¯ä»¥è·å–åˆ°æ˜¯å“ªäº›æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–å¯¼è‡´<strong>é‡æ–°å¯åŠ¨</strong>ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚</td></tr><tr><td>compile</td><td>è¯¥äº‹ä»¶æ˜¯ä¸ºäº†å‘Šè¯‰æ’ä»¶ä¸€æ¬¡<strong>æ–°çš„</strong>ç¼–è¯‘å°†è¦å¯åŠ¨ï¼ŒåŒæ—¶ä¼šç»™æ’ä»¶å¸¦ä¸Šcompilerå¯¹è±¡ã€‚</td></tr><tr><td>compilation</td><td>å½“Webpackä»¥å¼€å‘æ¨¡å¼è¿è¡Œæ—¶ï¼Œæ¯å½“æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–ï¼Œä¸€æ¬¡æ–°çš„Compilationå°†è¢«åˆ›å»ºã€‚ä¸€ä¸ªCompilationå¯¹è±¡åŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ç­‰ã€‚Compilationå¯¹è±¡ä¹Ÿæä¾›äº†å¾ˆå¤šäº‹ä»¶å›è°ƒä¾›æ’ä»¶åšæ‰©å±•ã€‚</td></tr><tr><td>make</td><td>ä¸€ä¸ªæ–°çš„Compilationåˆ›å»ºå®Œæ¯•ï¼Œå³å°†ä»Entryå¼€å§‹è¯»å–æ–‡ä»¶ï¼Œæ ¹æ®æ–‡ä»¶ç±»å‹å’Œé…ç½®çš„Loaderå¯¹æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œåå†æ‰¾å‡ºè¯¥æ–‡ä»¶ä¾èµ–çš„æ–‡ä»¶ï¼Œé€’å½’çš„ç¼–è¯‘å’Œè§£æã€‚</td></tr><tr><td>after-compile</td><td>ä¸€æ¬¡Compilationæ‰§è¡Œå®Œæˆã€‚è¿™é‡Œä¼šæ ¹æ®ç¼–è¯‘ç»“æœ åˆå¹¶å‡ºæˆ‘ä»¬æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹ã€‚</td></tr><tr><td>invalid</td><td>å½“é‡åˆ°æ–‡ä»¶ä¸å­˜åœ¨ã€æ–‡ä»¶ç¼–è¯‘é”™è¯¯ç­‰å¼‚å¸¸æ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¸ä¼šå¯¼è‡´Webpacké€€å‡ºã€‚</td></tr></tbody></table><p>è¿™é‡Œä¸»è¦æœ€é‡è¦çš„å°±æ˜¯compilationè¿‡ç¨‹ï¼Œcompilationå®é™…ä¸Šå°±æ˜¯è°ƒç”¨ç›¸åº”çš„loaderå¤„ç†æ–‡ä»¶ç”Ÿæˆchunkså¹¶å¯¹è¿™äº›chunksåšä¼˜åŒ–çš„è¿‡ç¨‹ã€‚å‡ ä¸ªå…³é”®çš„äº‹ä»¶ï¼ˆCompilationå¯¹è±¡this.hooksä¸­ï¼‰ï¼š</p><table><thead><tr><th>äº‹ä»¶å</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>build-module</td><td>ä½¿ç”¨å¯¹åº”çš„Loaderå»è½¬æ¢ä¸€ä¸ªæ¨¡å—ã€‚</td></tr><tr><td>normal-module-loader</td><td>åœ¨ç”¨Loaderå¯¹ä¸€ä¸ªæ¨¡å—è½¬æ¢å®Œåï¼Œä½¿ç”¨acornè§£æè½¬æ¢åçš„å†…å®¹ï¼Œè¾“å‡ºå¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä»¥æ–¹ä¾¿Webpackåé¢å¯¹ä»£ç çš„åˆ†æã€‚</td></tr><tr><td>program</td><td>ä»é…ç½®çš„å…¥å£æ¨¡å—å¼€å§‹ï¼Œåˆ†æå…¶ASTï¼Œå½“é‡åˆ°requireç­‰å¯¼å…¥å…¶å®ƒæ¨¡å—è¯­å¥æ—¶ï¼Œä¾¿å°†å…¶åŠ å…¥åˆ°<strong>ä¾èµ–çš„æ¨¡å—åˆ—è¡¨</strong>ï¼ŒåŒæ—¶å¯¹æ–°æ‰¾å‡ºçš„<strong>ä¾èµ–æ¨¡å—é€’å½’åˆ†æ</strong>ï¼Œæœ€ç»ˆææ¸…æ‰€æœ‰æ¨¡å—çš„<strong>ä¾èµ–å…³ç³»</strong>ã€‚</td></tr><tr><td>seal</td><td>æ‰€æœ‰æ¨¡å—åŠå…¶<strong>ä¾èµ–</strong>çš„æ¨¡å—éƒ½é€šè¿‡Loaderè½¬æ¢å®Œæˆåï¼Œæ ¹æ®ä¾èµ–å…³ç³»å¼€å§‹ç”ŸæˆChunkã€‚</td></tr></tbody></table><p>è¾“å‡ºé˜¶æ®µ</p><table><thead><tr><th>äº‹ä»¶å</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>should-emit</td><td>æ‰€æœ‰éœ€è¦è¾“å‡ºçš„æ–‡ä»¶å·²ç»ç”Ÿæˆå¥½ï¼Œè¯¢é—®æ’ä»¶å“ªäº›æ–‡ä»¶éœ€è¦è¾“å‡ºï¼Œå“ªäº›ä¸éœ€è¦ã€‚</td></tr><tr><td>emit</td><td>ç¡®å®šå¥½è¦è¾“å‡ºå“ªäº›æ–‡ä»¶åï¼Œæ‰§è¡Œæ–‡ä»¶è¾“å‡ºï¼Œå¯ä»¥åœ¨è¿™é‡Œè·å–å’Œä¿®æ”¹è¾“å‡ºå†…å®¹ã€‚</td></tr><tr><td>after-emit</td><td>æ–‡ä»¶è¾“å‡ºå®Œæ¯•ã€‚</td></tr><tr><td>done</td><td>æˆåŠŸå®Œæˆä¸€æ¬¡å®Œæˆçš„ç¼–è¯‘å’Œè¾“å‡ºæµç¨‹ã€‚</td></tr><tr><td>failed</td><td>å¦‚æœåœ¨ç¼–è¯‘å’Œè¾“å‡ºæµç¨‹ä¸­é‡åˆ°å¼‚å¸¸å¯¼è‡´Webpacké€€å‡ºæ—¶ï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°æœ¬æ­¥éª¤ï¼Œæ’ä»¶å¯ä»¥åœ¨æœ¬äº‹ä»¶ä¸­è·å–åˆ°å…·ä½“çš„é”™è¯¯åŸå› ã€‚</td></tr></tbody></table><h4 id="2-3-webpack-æœ‰å“ªäº›é˜¶æ®µ"><a href="#2-3-webpack-æœ‰å“ªäº›é˜¶æ®µ" class="headerlink" title="2.3 webpack æœ‰å“ªäº›é˜¶æ®µ"></a>2.3 webpack æœ‰å“ªäº›é˜¶æ®µ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>webpackçš„å‡†å¤‡é˜¶æ®µ</li><li>moduleså’Œchunksçš„ç”Ÿæˆé˜¶æ®µ</li><li>æ–‡ä»¶ç”Ÿæˆé˜¶æ®µ</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;2-1-æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#2-1-æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;2.1 æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„åŒºåˆ«&quot;&gt;&lt;/a&gt;2.1 æ‰“åŒ…ï¼Œwebpackå’Œgulpçš„</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
    <category term="webpack" scheme="https://dont-sleep-so-late.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>ES5å’ŒES6</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/ES5%E5%92%8CES6/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/01/%E5%85%AB%E8%82%A1%E6%96%87/ES5%E5%92%8CES6/</id>
    <published>2024-04-01T15:22:36.000Z</published>
    <updated>2024-04-03T03:49:42.146Z</updated>
    
    <content type="html"><![CDATA[<h4 id="6-1-es6ä¸­ç®­å¤´å‡½æ•°"><a href="#6-1-es6ä¸­ç®­å¤´å‡½æ•°" class="headerlink" title="6.1 es6ä¸­ç®­å¤´å‡½æ•°"></a>6.1 es6ä¸­ç®­å¤´å‡½æ•°</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ol><li><p>åŸºæœ¬è¯­æ³•</p><p>ES6ä¸­å…è®¸ä½¿ç”¨ç®­å¤´&#x3D;&gt;æ¥å®šä¹‰ç®­å¤´å‡½æ•°ï¼Œå…·ä½“è¯­æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun</span> = (<span class="params">name</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello <span class="subst">$&#123;name&#125;</span> !`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> fun = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello <span class="subst">$&#123;name&#125;</span> !`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œå®šä¹‰ç®­å¤´å‡½åœ¨æ•°è¯­æ³•ä¸Šè¦æ¯”æ™®é€šå‡½æ•°ç®€æ´å¾—å¤šã€‚ç®­å¤´å‡½æ•°çœå»äº†functionå…³é”®å­—ï¼Œé‡‡ç”¨ç®­å¤´&#x3D;&gt;æ¥å®šä¹‰å‡½æ•°ã€‚å‡½æ•°çš„å‚æ•°æ”¾åœ¨&#x3D;&gt;å‰é¢çš„æ‹¬å·ä¸­ï¼Œå‡½æ•°ä½“è·Ÿåœ¨&#x3D;&gt;åçš„èŠ±æ‹¬å·ä¸­ã€‚</p><p>å…³äºç®­å¤´å‡½æ•°çš„å‚æ•°ï¼š</p><p><strong>â‘ </strong> å¦‚æœç®­å¤´å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œç›´æ¥å†™ä¸€ä¸ªç©ºæ‹¬å·å³å¯ã€‚</p><p><strong>â‘¡</strong> å¦‚æœç®­å¤´å‡½æ•°çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥çœå»åŒ…è£¹å‚æ•°çš„æ‹¬å·ã€‚</p><p><strong>â‘¢</strong> å¦‚æœç®­å¤´å‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œå°†å‚æ•°ä¾æ¬¡ç”¨é€—å·(,)åˆ†éš”ï¼ŒåŒ…è£¹åœ¨æ‹¬å·ä¸­å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰å‚æ•°</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœå»å‚æ•°æ‹¬å·</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun2</span> = name =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span> !`</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰å¤šä¸ªå‚æ•°</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun3</span> = (<span class="params">val1, val2, val3</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> [val1, val2, val3];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…³äºç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“ï¼š</p><p><strong>â‘ </strong> å¦‚æœç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“åªæœ‰ä¸€å¥ä»£ç ï¼Œå°±æ˜¯ç®€å•è¿”å›æŸä¸ªå˜é‡æˆ–è€…è¿”å›ä¸€ä¸ªç®€å•çš„JSè¡¨è¾¾å¼ï¼Œå¯ä»¥çœå»å‡½æ•°ä½“çš„å¤§æ‹¬å·{ }ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = val =&gt; val;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="keyword">function</span> (<span class="params">val</span>) &#123; <span class="keyword">return</span> val &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; num1 + num2;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="keyword">function</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>â‘¡</strong> å¦‚æœç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“åªæœ‰ä¸€å¥ä»£ç ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨å°æ‹¬å·åŒ…è£¹è¦è¿”å›çš„å¯¹è±¡ï¼Œä¸æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">getTempItem</span> = id =&gt; (&#123; <span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;Temp&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†ç»ä¸èƒ½è¿™æ ·å†™ï¼Œä¼šæŠ¥é”™ã€‚</span></span><br><span class="line"><span class="comment">// å› ä¸ºå¯¹è±¡çš„å¤§æ‹¬å·ä¼šè¢«è§£é‡Šä¸ºå‡½æ•°ä½“çš„å¤§æ‹¬å·</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">getTempItem</span> = id =&gt; &#123; <span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;Temp&quot;</span> &#125;;</span><br></pre></td></tr></table></figure><p><strong>â‘¢</strong> å¦‚æœç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“åªæœ‰ä¸€æ¡è¯­å¥å¹¶ä¸”ä¸éœ€è¦è¿”å›å€¼ï¼ˆæœ€å¸¸è§æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå¯ä»¥ç»™è¿™æ¡è¯­å¥å‰é¢åŠ ä¸€ä¸ªvoidå…³é”®å­—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; <span class="keyword">void</span> <span class="title function_">doesNotReturn</span>();</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°æœ€å¸¸è§çš„ç”¨å¤„å°±æ˜¯ç®€åŒ–å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹å­ä¸€</span></span><br><span class="line"><span class="comment">// æ­£å¸¸å‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å­äºŒ</span></span><br><span class="line"><span class="comment">// æ­£å¸¸å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> result = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>].<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> result = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>].<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br></pre></td></tr></table></figure></li><li><p>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</p><p>2.1 è¯­æ³•æ›´åŠ ç®€æ´ã€æ¸…æ™°</p><p>ä»ä¸Šé¢çš„åŸºæœ¬è¯­æ³•ç¤ºä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œç®­å¤´å‡½æ•°çš„å®šä¹‰è¦æ¯”æ™®é€šå‡½æ•°å®šä¹‰ç®€æ´ã€æ¸…æ™°å¾—å¤šï¼Œå¾ˆå¿«æ·ã€‚</p><p>2.2 ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„this</p><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒä¼šæ•è·è‡ªå·±åœ¨<strong>å®šä¹‰æ—¶</strong>ï¼ˆæ³¨æ„ï¼Œæ˜¯å®šä¹‰æ—¶ï¼Œä¸æ˜¯è°ƒç”¨æ—¶ï¼‰æ‰€å¤„çš„<strong>å¤–å±‚æ‰§è¡Œç¯å¢ƒçš„this</strong>ï¼Œå¹¶ç»§æ‰¿è¿™ä¸ªthiså€¼ã€‚æ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘åœ¨å®ƒè¢«å®šä¹‰çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ï¼Œä¹‹åæ°¸è¿œä¸ä¼šæ”¹å˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = <span class="string">&#x27;Global&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// setTimeoutä¸­ä½¿ç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// setTimeoutä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun1.<span class="title function_">call</span>(&#123;<span class="attr">id</span>: <span class="string">&#x27;Obj&#x27;</span>&#125;);     <span class="comment">// &#x27;Global&#x27;</span></span><br><span class="line"></span><br><span class="line">fun2.<span class="title function_">call</span>(&#123;<span class="attr">id</span>: <span class="string">&#x27;Obj&#x27;</span>&#125;);     <span class="comment">// &#x27;Obj&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå‡½æ•°fun1ä¸­çš„setTimeoutä¸­ä½¿ç”¨æ™®é€šå‡½æ•°ï¼Œ2ç§’åå‡½æ•°æ‰§è¡Œæ—¶ï¼Œè¿™æ—¶å‡½æ•°å…¶å®æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œçš„ï¼Œæ‰€ä»¥thisæŒ‡å‘Windowå¯¹è±¡ï¼Œthis.idå°±æŒ‡å‘å…¨å±€å˜é‡idï¼Œæ‰€ä»¥è¾“å‡ºâ€™Globalâ€™ã€‚ ä½†æ˜¯å‡½æ•°fun2ä¸­çš„setTimeoutä¸­ä½¿ç”¨çš„æ˜¯ç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°çš„thisåœ¨å®šä¹‰æ—¶å°±ç¡®å®šäº†ï¼Œå®ƒç»§æ‰¿äº†å®ƒå¤–å±‚fun2çš„æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œè€Œfun2è°ƒç”¨æ—¶thisè¢«callæ–¹æ³•æ”¹å˜åˆ°äº†å¯¹è±¡{id: â€˜Objâ€™}ä¸­ï¼Œæ‰€ä»¥è¾“å‡ºâ€™Objâ€™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = <span class="string">&#x27;GLOBAL&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;OBJ&#x27;</span>,</span><br><span class="line">  <span class="attr">a</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">b</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">a</span>();    <span class="comment">// &#x27;OBJ&#x27;</span></span><br><span class="line">obj.<span class="title function_">b</span>();    <span class="comment">// &#x27;GLOBAL&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå¯¹è±¡objçš„æ–¹æ³•aä½¿ç”¨æ™®é€šå‡½æ•°å®šä¹‰çš„ï¼Œ<strong>æ™®é€šå‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘å®ƒæ‰€å±çš„å¯¹è±¡</strong>ã€‚æ‰€ä»¥ï¼Œthis.idå°±æ˜¯obj.idï¼Œæ‰€ä»¥è¾“å‡ºâ€™OBJâ€™ã€‚ ä½†æ˜¯æ–¹æ³•bæ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰çš„ï¼Œç®­å¤´å‡½æ•°ä¸­çš„thiså®é™…æ˜¯ç»§æ‰¿çš„å®ƒå®šä¹‰æ—¶æ‰€å¤„çš„å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œæ‰€ä»¥æŒ‡å‘Windowå¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡ºâ€™GLOBALâ€™ã€‚ï¼ˆ<strong>è¿™é‡Œè¦æ³¨æ„ï¼Œå®šä¹‰å¯¹è±¡çš„å¤§æ‹¬å·{}æ˜¯æ— æ³•å½¢æˆä¸€ä¸ªå•ç‹¬çš„æ‰§è¡Œç¯å¢ƒçš„ï¼Œå®ƒä¾æ—§æ˜¯å¤„äºå…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼ï¼</strong>ï¼‰</p></li><li><p>ç®­å¤´å‡½æ•°ç»§æ‰¿è€Œæ¥çš„thisæŒ‡å‘æ°¸è¿œä¸å˜ï¼ˆé‡è¦ï¼ï¼æ·±å…¥ç†è§£ï¼ï¼ï¼‰</p><p>ä¸Šé¢çš„ä¾‹å­ï¼Œå°±å®Œå…¨å¯ä»¥è¯´æ˜ç®­å¤´å‡½æ•°ç»§æ‰¿è€Œæ¥çš„thisæŒ‡å‘æ°¸è¿œä¸å˜ã€‚å¯¹è±¡objçš„æ–¹æ³•bæ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰çš„ï¼Œè¿™ä¸ªå‡½æ•°ä¸­çš„thiså°±<strong>æ°¸è¿œæŒ‡å‘</strong>å®ƒå®šä¹‰æ—¶æ‰€å¤„çš„å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œå³ä¾¿è¿™ä¸ªå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡objçš„æ–¹æ³•è°ƒç”¨ï¼Œthisä¾æ—§æŒ‡å‘Windowå¯¹è±¡ã€‚</p></li><li><p>.call()&#x2F;.apply()&#x2F;.bind()æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘</p><p>.call()&#x2F;.apply()&#x2F;.bind()æ–¹æ³•å¯ä»¥ç”¨æ¥åŠ¨æ€ä¿®æ”¹å‡½æ•°æ‰§è¡Œæ—¶thisçš„æŒ‡å‘ï¼Œä½†ç”±äºç®­å¤´å‡½æ•°çš„thiså®šä¹‰æ—¶å°±å·²ç»ç¡®å®šä¸”æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚æ‰€ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ°¸è¿œä¹Ÿæ”¹å˜ä¸äº†ç®­å¤´å‡½æ•°thisçš„æŒ‡å‘ï¼Œè™½ç„¶è¿™ä¹ˆåšä»£ç ä¸ä¼šæŠ¥é”™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = <span class="string">&#x27;Global&#x27;</span>;</span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun1</span>();     <span class="comment">// &#x27;Global&#x27;</span></span><br><span class="line"><span class="comment">// thisçš„æŒ‡å‘ä¸ä¼šæ”¹å˜ï¼Œæ°¸è¿œæŒ‡å‘Windowå¯¹è±¡</span></span><br><span class="line">fun1.<span class="title function_">call</span>(&#123;<span class="attr">id</span>: <span class="string">&#x27;Obj&#x27;</span>&#125;);     <span class="comment">// &#x27;Global&#x27;</span></span><br><span class="line">fun1.<span class="title function_">apply</span>(&#123;<span class="attr">id</span>: <span class="string">&#x27;Obj&#x27;</span>&#125;);    <span class="comment">// &#x27;Global&#x27;</span></span><br><span class="line">fun1.<span class="title function_">bind</span>(&#123;<span class="attr">id</span>: <span class="string">&#x27;Obj&#x27;</span>&#125;)();   <span class="comment">// &#x27;Global&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨</p><p>æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹æ„é€ å‡½æ•°çš„newéƒ½åšäº†äº›ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼Œåˆ†ä¸ºå››æ­¥ï¼š â‘  JSå†…éƒ¨é¦–å…ˆä¼šå…ˆç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼› â‘¡ å†æŠŠå‡½æ•°ä¸­çš„thisæŒ‡å‘è¯¥å¯¹è±¡ï¼› â‘¢ ç„¶åæ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„è¯­å¥ï¼› â‘£ æœ€ç»ˆè¿”å›è¯¥å¯¹è±¡å®ä¾‹ã€‚</p><p>ä½†æ˜¯å› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thiså…¶å®æ˜¯ç»§æ‰¿äº†å¤–å±‚æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œä¸”thisæŒ‡å‘æ°¸è¿œä¸ä¼šéšåœ¨å“ªé‡Œè°ƒç”¨ã€è¢«è°è°ƒç”¨è€Œæ”¹å˜ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œæˆ–è€…è¯´æ„é€ å‡½æ•°ä¸èƒ½å®šä¹‰æˆç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ç”¨newè°ƒç”¨æ—¶ä¼šæŠ¥é”™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">Fun</span> = (<span class="params">name, age</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Fun</span>(<span class="string">&#x27;cao&#x27;</span>, <span class="number">24</span>);</span><br></pre></td></tr></table></figure></li><li><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„arguments</p><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„argumentså¯¹è±¡ã€‚åœ¨ç®­å¤´å‡½æ•°ä¸­è®¿é—®argumentså®é™…ä¸Šè·å¾—çš„æ˜¯å¤–å±‚å±€éƒ¨ï¼ˆå‡½æ•°ï¼‰æ‰§è¡Œç¯å¢ƒä¸­çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹å­ä¸€</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun</span> = (<span class="params">val</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(val);   <span class="comment">// 111</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="comment">// Uncaught ReferenceError: arguments is not defined</span></span><br><span class="line">    <span class="comment">// å› ä¸ºå¤–å±‚å…¨å±€ç¯å¢ƒæ²¡æœ‰argumentså¯¹è±¡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>); </span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">fun</span>(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å­äºŒ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params">val1, val2</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> argOut = <span class="variable language_">arguments</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(argOut);    <span class="comment">// â‘ </span></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fun</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> argIn = <span class="variable language_">arguments</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(argIn);     <span class="comment">// â‘¡</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(argOut === argIn);  <span class="comment">// â‘¢</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">fun</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">outer</span>(<span class="number">111</span>, <span class="number">222</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¾‹å­äºŒï¼Œâ‘ â‘¡â‘¢å¤„çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122153287/E7FCE80FDDB9FFE3A2590AE7A84AC3E1" alt="img"></p><p>å¾ˆæ˜æ˜¾ï¼Œæ™®é€šå‡½æ•°outerå†…éƒ¨çš„ç®­å¤´å‡½æ•°funä¸­çš„argumentså¯¹è±¡ï¼Œå…¶å®æ˜¯æ²¿ä½œç”¨åŸŸé“¾å‘ä¸Šè®¿é—®çš„å¤–å±‚outerå‡½æ•°çš„argumentså¯¹è±¡ã€‚</p><p><strong>å¯ä»¥åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨restå‚æ•°ä»£æ›¿argumentså¯¹è±¡ï¼Œæ¥è®¿é—®ç®­å¤´å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼ï¼</strong></p></li><li><p>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹prototype</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">sayHi</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello World !&#x27;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sayHi.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨yeildå…³é”®å­—</p></li></ol><h4 id="6-2-ES6æ–°ç‰¹æ€§"><a href="#6-2-ES6æ–°ç‰¹æ€§" class="headerlink" title="6.2 ES6æ–°ç‰¹æ€§"></a>6.2 ES6æ–°ç‰¹æ€§</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ol><li><p>å˜é‡å’Œä½œç”¨åŸŸ</p><p>1.1 let ã€constã€ å—çº§ä½œç”¨åŸŸå’Œå˜é‡å£°æ˜</p><p>letå£°æ˜çš„å˜é‡<strong>åªåœ¨æ‰€åœ¨å—ä¸­ç”Ÿæ•ˆ</strong>ï¼›</p><p>letå£°æ˜çš„å˜é‡å¯ä»¥è§£å†³varä¸forå¾ªç¯ç»“åˆä½¿ç”¨äº§ç”Ÿçš„æ— æ³•å–å¾—æœ€æ–°å˜é‡å€¼çš„é—®é¢˜ï¼ˆä»¥å¾€éƒ½éœ€è¦é€šè¿‡é—­åŒ…æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰ï¼›</p><p>letå£°æ˜çš„å˜é‡<strong>ä¸å­˜åœ¨å˜é‡æå‡</strong>ï¼ˆä»undefined-&gt;ReferenceErrorï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ç§æš‚æ—¶æ€§æ­»åŒºï¼‰ã€ä¼šé€ æˆ<strong>å˜é‡æš‚æ—¶æ€§æ­»åŒº</strong>(åœ¨å£°æ˜letå˜é‡ä¹‹å‰éƒ½ä¸èƒ½ç”¨å®ƒ)ã€ä¹Ÿä¸å…è®¸é‡å¤å£°æ˜ï¼›</p><p>constå£°æ˜çš„å˜é‡è¡Œä¸ºä¸letç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†<strong>ä¸¤ç‚¹æ›´å¼ºçš„çº¦æŸï¼š1.å£°æ˜æ—¶å¿…é¡»èµ‹å€¼ï¼›2.å£°æ˜çš„å˜é‡å†…å­˜åœ°å€ä¸å¯å˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šå¯¹äºç”¨constå£°æ˜åŸºæœ¬ç±»å‹ï¼Œå€¼å°±ä¿å­˜åœ¨å†…å­˜åœ°å€ä¹‹ä¸­ï¼Œæ„å‘³ç€å˜é‡ä¸å¯é‡æ–°èµ‹å€¼ï¼›å¯¹äºç”¨constå£°æ˜çš„å¯¹è±¡ï¼Œå¯¹è±¡å†…å®¹è¿˜æ˜¯å¯ä»¥æ›´æ”¹çš„ï¼Œåªæ˜¯ä¸èƒ½æ”¹å˜å…¶æŒ‡å‘ã€‚ï¼ˆå†»ç»“å¯¹è±¡åº”è¯¥ç”¨Object.freeze()ï¼‰</p><p>1.2 è§£æ„èµ‹å€¼ï¼ˆæŒ‰ç…§ä¸€å®šçš„ç»“æ„è§£æå‡ºæ¥è¿›è¡Œèµ‹å€¼ï¼‰</p><p>è§£æ„èµ‹å€¼çš„ä½¿ç”¨åœºæ™¯ï¼šå˜é‡å¿«æ·èµ‹å€¼ã€æå–æ•°æ®ã€å‡½æ•°å‚æ•°å®šä¹‰å’Œé»˜è®¤å€¼ã€éå†æŸç»“æ„</p></li><li><p>åŸç”Ÿå¯¹è±¡çš„æ–¹æ³•æ‰©å±•</p><p>2.1 String</p><p>åŠ å¼ºäº†å¯¹unicodeçš„æ”¯æŒã€æ”¯æŒå­—ç¬¦ä¸²éå†ï¼ˆåé¢æœ‰è®²åˆ°å®é™…ä¸Šæ˜¯éƒ¨ç½²äº†iteratoræ¥å£ï¼‰ã€repeat()ç­‰æ–¹æ³•çš„æ”¯æŒã€<strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong></p><p>2.2 RegExp</p><p>æ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼ŒæŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸å†æŠ¥é”™ã€uä¿®é¥°ç¬¦ã€yä¿®é¥°ç¬¦ã€sä¿®é¥°ç¬¦</p><p>2.3 Number</p><p>äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶æ–°å†™æ³•ã€æ–°æ–¹æ³•parseInt()ã€Number.EPSILONæå°å¸¸é‡ã€å®‰å…¨æ•´æ•°ã€Mathæ–°æ–¹æ³•</p><p>2.4 Function</p><p><strong>å‡½æ•°å‚æ•°é»˜è®¤å€¼</strong>ã€restå‚æ•°ã€<strong>å‡½æ•°å†…éƒ¨ä¸¥æ ¼æ¨¡å¼</strong>ã€å‡½æ•°çš„nameå±æ€§ã€<strong>ç®­å¤´å‡½æ•°</strong></p><p>2.5 Array</p><p><strong>æ‰©å±•è¿ç®—ç¬¦â€¦</strong></p><p>2.6 Object å’Œ Symbol</p><p>(1) Objectå¯¹è±¡</p><p>æ”¯æŒ<strong>ç®€å†™</strong>ï¼šåŒåå±æ€§K-Vå¯ä»¥çœç•¥ä¸€ä¸ªã€å‡½æ•°å£°æ˜å¯ä»¥çœç•¥functionï¼›æ”¯æŒ<strong>å±æ€§åè¡¨è¾¾å¼</strong>ã€å‡½æ•°åè¡¨è¾¾ å¼ã€‚ï¼ˆæ³¨æ„ï¼šä»¥ä¸Š2ä¸ªâ€”â€”è¡¨è¾¾å¼å’Œç®€å†™ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼‰ã€‚</p><p>å¯¹è±¡çš„æ–¹æ³•çš„nameå±æ€§è¿”å›æ–¹æ³•åï¼Œä½†æœ‰å‡ ä¸ªä¾‹å¤–æƒ…å†µè¦å°å¿ƒã€‚æ–°å¢äº†Objectæ–¹æ³•</p><p>Object.is()â€”â€”ç”¨äºè§£å†³&#x3D;&#x3D;å’Œ&#x3D;&#x3D;&#x3D;çš„éƒ¨åˆ†å…¼å®¹é—®é¢˜</p><p>Object.assign()â€”â€”å°†srcçš„æ‰€æœ‰å¯æšä¸¾å¯¹è±¡å±æ€§å¤åˆ¶åˆ°destå¯¹è±¡ä¸Šï¼ˆæµ…å¤åˆ¶ï¼‰</p><p>Object.setPrototypeOf()ã€Object.getPrototypeOf() (Object.__protoå±æ€§)</p><p>Object.entries()ã€Object.keys()ã€Object.values()</p><p>ES6ä¸­5ç§éå†å¯¹è±¡å±æ€§çš„æ–¹æ³•</p><p><strong>for-inâ€”â€”è‡ªèº«å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆé™¤Symbolï¼‰</strong></p><p><strong>Object.keys()â€”â€”è‡ªèº«éç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆé™¤Symbolï¼‰</strong></p><p><strong>Object.getOwnPropertyNames()â€”â€”è‡ªèº«æ‰€æœ‰å±æ€§é”®åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾ã€é™¤Symbolï¼‰</strong></p><p><strong>Object.getOwnPropertySymbols()â€”â€”è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„é”®å</strong></p><p><strong>Reflect.ownKeys()â€”â€”è‡ªèº«çš„æ‰€æœ‰é”®å</strong></p><p>ï¼ˆ2ï¼‰Symbolç±»å‹</p><p>ES5ä»¥å‰ï¼Œå¯¹è±¡å±æ€§éƒ½åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®¹æ˜“é€ æˆé‡å‘½åå¯¼è‡´çš„å†²çªã€‚Symbolæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥ä¿å­˜ å±æ€§åæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚Symbolç±»å‹çš„ä½¿ç”¨æ³¨æ„ï¼š1ï¼‰åˆ›å»ºæ˜¯è°ƒç”¨å‡½æ•°ï¼Œè€Œä¸æ˜¯newå…³é”®å­— 2ï¼‰Symbolç±» å‹çš„å±æ€§ä¸ä¼šè¢«for-*ã€Object.keys()ã€Object.getPropertyNames()è¿”å›ï¼Œå¯ä»¥ç”¨åé¢ä¸¤ç§æ–¹æ³•éå†ã€‚</p></li><li><p>æ•°æ®ç»“æ„Setå’ŒMap</p><p>Setæ˜¯ä¸€ç§ç±»ä¼¼æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒåŒºåˆ«åœ¨äºå…¶å­˜å‚¨çš„æˆå‘˜éƒ½æ˜¯ä¸é‡å¤çš„ï¼Œç”±æ­¤å¸¦æ¥äº†å®ƒçš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯ï¼š<strong>å»é‡</strong>ã€‚Seté€šè¿‡newå…³é”®å­—å®ä¾‹åŒ–ï¼Œå…¥å‚å¯ä»¥æ˜¯æ•°ç»„orç±»æ•°ç»„çš„å¯¹è±¡ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šåœ¨Setä¸­ï¼Œåªèƒ½å­˜å‚¨ä¸€ä¸ªNaNï¼Œ<strong>è¿™è¯´æ˜åœ¨Setæ•°æ®ç»“æ„ä¸­ï¼ŒNaNç­‰äºNaN</strong>ã€‚</p><p>Setå®ä¾‹çš„æ–¹æ³•ï¼šæ“ä½œæ–¹æ³•add()ã€delete()ã€has()å’Œclear()ï¼›éå†æ–¹æ³•ï¼škeys()ã€values()ã€entries()å’ŒforEach();æ‰©å±•è¿ç®—ç¬¦â€¦ã€æ•°ç»„æ–¹æ³•map()ã€filter()æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºSetç»“æ„ã€‚ç”±æ­¤å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°æ•°ç»„çš„äº¤ã€å¹¶ã€å·®é›†ã€‚</p><p>WeakSetç±»ä¼¼äºSetï¼Œ<strong>ä¸»è¦åŒºåˆ«åœ¨äº1.æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ç±»å‹ï¼›2.å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨</strong>ï¼ˆå¦‚æœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¯¥å¯¹è±¡æ‰€å çš„å†…å­˜ï¼Œä¸å¯é¢„æµ‹ä½•æ—¶ä¼šå‘ç”Ÿï¼Œæ•…WeakSetä¸å¯è¢«éå†ï¼‰</p><p>JavaScriptå¯¹è±¡Objectéƒ½æ˜¯é”®å€¼K-Vå¯¹çš„é›†åˆï¼Œä½†Kå–å€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²å’ŒSymbolï¼ŒMapä¹Ÿæ˜¯K-Vçš„é›†åˆï¼Œç„¶è€Œå…¶Kå¯ä»¥å–ä»»æ„ç±»å‹ã€‚å¦‚æœéœ€è¦é”®å€¼å¯¹çš„é›†åˆï¼ŒMapæ¯”Objectæ›´é€‚åˆã€‚Mapé€šè¿‡newå…³é”®å­—å®ä¾‹åŒ–ã€‚</p><p>Mapå®ä¾‹çš„æ–¹æ³•ï¼šset()ã€get()ã€has()ã€delete()å’Œclear();éå†æ–¹æ³•åŒSetã€‚</p><p>Mapä¸å…¶å®ƒæ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢ï¼šMap &lt;â€”&gt; æ•°ç»„| Map &lt;â€”&gt; å¯¹è±¡| Map &lt;â€”&gt; JSONã€‚</p><p>WeakMapç±»ä¼¼äºMapï¼Œä¸»è¦åŒºåˆ«åœ¨äºï¼š<strong>1.åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼›2.é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶</strong>ã€‚</p></li><li><p>å…ƒç¼–ç¨‹ç›¸å…³Proxyå’ŒReflect</p><p>4.1 Proxy</p><p>å¯¹ç›®æ ‡å¯¹è±¡åŠ ä¸€å±‚â€œæ‹¦æˆªâ€ï¼ˆâ€œä»£ç†â€ï¼‰ï¼Œå¤–ç•Œå¯¹å¯¹è±¡çš„è®¿é—®ã€ä¿®æ”¹éƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªå±‚ã€‚å› è€Œå®ƒæä¾›äº† ä¸€ä¸ªæœºåˆ¶å¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p><p>ç”¨æ³•ï¼švar proxy &#x3D; new Proxy(p1,p2); p1æ˜¯è¦è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œp2æ˜¯é…ç½®å¯¹è±¡ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š<strong>Proxyä¸æ˜¯å¯¹ç›®æ ‡å¯¹è±¡é€æ˜çš„ä»£ç†</strong>â€”â€”å³ä½¿ä¸åšä»»ä½•æ‹¦æˆªçš„æƒ…å†µä¸‹æ— æ³•ä¿è¯ä»£ç†å¯¹è±¡ä¸ç›® æ ‡å¯¹è±¡è¡Œä¸ºçš„å®Œå…¨ä¸€è‡´ã€‚ï¼ˆä¸»è¦åŸå› åœ¨äºä»£ç†æ—¶ï¼Œç›®æ ‡å¯¹è±¡å†…éƒ¨çš„thisä¼šæŒ‡å‘ä»£ç†å¯¹è±¡ï¼‰</p><p>4.2 Reflect</p><p>ä¸Proxyä¸€æ ·æ˜¯ES6ä¸º<strong>è¯­è¨€å±‚é¢çš„ç”¨äºæ“ä½œå¯¹è±¡æä¾›çš„æ–°API</strong>ï¼Œç›®å‰å®ƒæ‰€æ‹¥æœ‰çš„å¯¹è±¡æ–¹æ³•ä¸Proxyå¯¹è±¡ä¸€ä¸€å¯¹ åº”ï¼Œ<strong>å¼•å…¥ç›®çš„</strong>ï¼š1.å°†Objectå¯¹è±¡ä¸Šä¸€äº›å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•æ”¾åœ¨Reflectä¸Šï¼ˆç›®å‰éƒ½å¯ä»¥æ”¾ï¼‰2.ä¿®æ”¹Objectå¯¹ è±¡ä¸ŠæŸäº›æ–¹æ³•çš„è¿”å›å€¼ï¼Œä½¿å¾—æ›´åŠ åˆç†åŒ–ï¼ˆå¥å£®ï¼‰3.è®©Objectå¯¹è±¡çš„æ“ä½œä»å‘½ä»¤å¼å®Œå…¨è½¬åŒ–ä¸ºå‡½æ•°å¼</p></li><li><p>å¼‚æ­¥ç¼–ç¨‹Promiseã€Generatorå’ŒAsync</p><p>åœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œå¯¹äº<strong>å¼‚æ­¥ç¼–ç¨‹å­˜åœ¨å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆï¼š1.å›è°ƒå‡½æ•°ï¼›2.äº‹ä»¶è§¦å‘ç›‘å¬ï¼›3.å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼›4.Promise</strong>ã€‚é¦–å…ˆä»‹ç»Promiseï¼Œç„¶åä»‹ç»ES6æä¾›çš„ç”Ÿæˆå™¨å‡½æ•°ï¼Œasyncå‡½æ•°ã€‚</p><p>Promiseæ¥æºäºç¤¾åŒºï¼Œä»£è¡¨ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»£è¡¨å¼‚æ­¥æ“ä½œæœªæ¥çš„ä¸€ä¸ªç»“æœï¼ˆæ‰¿è¯ºï¼‰ã€‚å®ƒæ€»å…±æœ‰<strong>ä¸‰ä¸ªçŠ¶æ€</strong>ï¼Œpending\fulfilled\rejectedã€‚å¦å¤–ï¼Œå®ƒçš„çŠ¶æ€<strong>ç¿»è½¬è·¯å¾„åªæœ‰ä¸¤ä¸ª</strong>ï¼špending-&gt;fulfilled or pending-&gt;rejectedï¼Œä¸€æ—¦çŠ¶æ€ç¿»è½¬ï¼Œå°±ä¸å¯å˜äº†ã€‚å®ƒæ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæ”¯æŒé”™è¯¯ä¼ é€’ï¼Œæ”¯æŒä»¥åŒæ­¥ä»£ç çš„æ–¹å¼å†™å¼‚æ­¥æ“ä½œã€‚</p><p>Promiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ›å»ºæ­¤å¯¹è±¡å®ä¾‹çš„æ–¹æ³•å¦‚ä¸‹ï¼ˆå¯ä»¥ç†è§£resolveå’Œrejectæ˜¯å·²è¿”å›çš„æ‰¿è¯ºå¯¹è±¡æœªæ¥å›è°ƒå‡½æ•°çš„å ä½ï¼‰</p><p>Generatorå‡½æ•°æ˜¯ES6æä¾›çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆã€‚å¯¹äºGeneratorå‡½æ•°ï¼Œå¯ä»¥å°†å®ƒ<strong>ç†è§£ä¸ºä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ï¼›æ­¤å¤–å®ƒè¿˜æ˜¯ä¸€ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°</strong>ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥éå†å‡ºçŠ¶æ€æœºçš„æ‰€æœ‰çŠ¶æ€ã€‚</p><p>å‡½æ•°ç‰¹å¾ï¼šå…³é”®å­—functionä¸å‡½æ•°åä¹‹é—´æœ‰*ï¼Œå‡½æ•°ä½“å†…éƒ¨yeildå…³é”®å­—ã€‚</p><p><strong>ç”Ÿæˆå™¨å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</strong>ï¼šå‡½æ•°è°ƒç”¨åä¸æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ˆéå†å™¨å¯¹è±¡ï¼‰ã€‚è°ƒç”¨å¯¹è±¡çš„next()æ–¹æ³•ï¼Œæ‰§è¡Œä¸€æ®µyieldé€»è¾‘ã€‚æ•…å‡½æ•°çš„åˆ†æ®µæ‰§è¡Œçš„ï¼Œ<strong>yieldæ˜¯æš‚åœæ‰§è¡Œçš„æ ‡å¿—ï¼Œnext()å¯ä»¥æ¢å¤æ‰§è¡Œ</strong>ã€‚</p><p><strong>yieldä¸returnçš„åŒºåˆ«</strong>ï¼šyieldæœ‰è®°å¿†åŠŸèƒ½ï¼Œreturnæ²¡æœ‰ï¼›ä¸€ä¸ªå‡½æ•°å¯ä»¥å¤šæ¬¡æ‰§è¡Œyeildï¼Œä½†åªä¼šreturnä¸€æ¬¡</p><p><strong>asyncå‡½æ•°</strong>æ˜¯Generatorå‡½æ•°çš„è¯­æ³•ç³–ï¼Œå®ƒè¿›è¡Œäº†<strong>æ”¹è¿›ï¼š1.è‡ªå¸¦æ‰§è¡Œå™¨ï¼›2.è¿”å›å€¼æ˜¯Promise;</strong></p><p>ä¸‰å®¶å¯¹æ¯”ï¼š<strong>ä½¿ç”¨Promiseçš„å¼‚æ­¥ä»£ç å­˜åœ¨å¤§é‡è‡ªæœ‰APIçš„è°ƒç”¨ï¼Œæ“ä½œæœ¬èº«çš„è¯­ä¹‰å¤¹æ‚å…¶ä¸­ï¼Œä¸æ˜¯å¾ˆæ¸…æ™°ï¼›Generatorå‡½æ•°å®ç°çš„å¼‚æ­¥ä»£ç è¯­ä¹‰æ¯”Promiseæ¸…æ™°ï¼Œä½†éœ€è¦ä¸€ä¸ªæ‰§è¡Œå™¨ï¼›asyncå‡½æ•°çš„å†™æ³•æœ€ç®€æ´ã€ç¬¦åˆè¯­ä¹‰ï¼Œä¸éœ€è¦æ‰§è¡Œå™¨</strong>ã€‚</p></li><li><p>è¯­è¨€å±‚é¢ç±»ã€æ¨¡å—çš„æ”¯æŒ</p><p>6.1 class</p><p>ä» ES6 å¼€å§‹ï¼ŒJavaScript æä¾›äº† class å…³é”®å­—æ¥å®šä¹‰ç±»ï¼Œå°½ç®¡ï¼Œè¿™æ ·çš„æ–¹æ¡ˆä»ç„¶æ˜¯åŸºäºåŸå‹è¿è¡Œæ—¶ç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½ES5å¯ä»¥å®ç°ã€‚</p><p>æ„é€ å‡½æ•°çš„prototypeå±æ€§åœ¨ ES6 çš„â€œç±»â€ä¸Šé¢ç»§ç»­å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œç±»ä¸­æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Šé¢ï¼ˆå› è€Œä¹Ÿæ˜¯ä¸å¯æšä¸¾çš„ï¼‰ã€‚</p><p>constructoræ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡newå‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰constructoræ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„constructoræ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚ï¼ˆé»˜è®¤æ„é€ å‡½æ•°ï¼‰ï¼›constructoræ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³thisï¼‰ï¼Œå®Œå…¨å¯ä»¥æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>æ³¨æ„åŒºåˆ«ï¼š<strong>ç±»å¿…é¡»ä½¿ç”¨</strong>new<strong>è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</strong>ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨newä¹Ÿå¯ä»¥æ‰§è¡Œã€‚</p><p>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Šstaticå…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™å°±ç§°ä¸ºâ€œé™æ€æ–¹æ³•â€ã€‚</p><p>å®ä¾‹å±æ€§é™¤äº†å®šä¹‰åœ¨constructor()æ–¹æ³•é‡Œé¢çš„thisä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»çš„æœ€é¡¶å±‚ã€‚</p><p>ç§æœ‰å±æ€§å’Œæ–¹æ³•å¦‚ä½•å®ç°ï¼Ÿ1.å‘½åä¸ŠåŠ ä»¥åŒºåˆ« 2.å°†ç§æœ‰æ–¹æ³•ç§»å‡ºæ¨¡å—ï¼Œåˆ©ç”¨å…¬æœ‰æ–¹æ³•è°ƒç”¨ï¼›3.Symbolå±æ€§ä¸Šï¼ˆéƒ½ä¸å®Œç¾ï¼‰</p><p>6.2 module</p><p>åœ¨ ES6 ä¹‹å‰ï¼Œç¤¾åŒºåˆ¶å®šäº†ä¸€äº›æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œæœ€ä¸»è¦çš„æœ‰ CommonJS å’Œ AMD ä¸¤ç§ã€‚å‰è€…ç”¨äºæœåŠ¡å™¨ï¼Œåè€…ç”¨äºæµè§ˆå™¨ã€‚ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—<strong>ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š</strong>æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚CommonJS å’Œ AMD æ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨<strong>è¿è¡Œæ—¶ç¡®å®šã€‚</strong></p><p><strong>ç¼–è¯‘æ—¶åŠ è½½VSè¿è¡Œæ—¶åŠ è½½â€”â€”å¯¹è±¡VSä»£ç </strong></p><p>æ¨¡å—å‘½ä»¤ï¼šexportå’Œimportï¼›ä¸€ä¸ªæ–‡ä»¶å³ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé™¤éå¯¼å…¥å¦åˆ™å¤–éƒ¨æ— æ³•è¯»å–æ¨¡å—å±æ€§ï¼›</p><p>exportæ”¯æŒï¼šå˜é‡ã€å‡½æ•°å’Œç±»</p><p>exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä¸‹ä¸€èŠ‚çš„importå‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>è¾“å…¥çš„å˜é‡éƒ½æ˜¯åªè¯»çš„ï¼Œå› ä¸ºå®ƒçš„æœ¬è´¨æ˜¯è¾“å…¥æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å…è®¸åœ¨åŠ è½½æ¨¡å—çš„è„šæœ¬é‡Œé¢ï¼Œæ”¹å†™æ¥å£ã€‚ç”±äºimportæ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„ã€‚</p><p>ä½¿ç”¨importå‘½ä»¤çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“æ‰€è¦åŠ è½½çš„å˜é‡åæˆ–å‡½æ•°åï¼Œå¦åˆ™æ— æ³•åŠ è½½ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·è‚¯å®šå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹ï¼Œæœªå¿…æ„¿æ„é˜…è¯»æ–‡æ¡£ï¼Œå»äº†è§£æ¨¡å—æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚ä¸ºäº†ç»™ç”¨æˆ·æä¾›æ–¹ä¾¿ï¼Œè®©ä»–ä»¬ä¸ç”¨é˜…è¯»æ–‡æ¡£å°±èƒ½åŠ è½½æ¨¡å—ï¼Œå°±è¦ç”¨åˆ°export defaultå‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºã€‚</p><p>æ¨¡å—ä¹‹é—´ä¹Ÿå¯ä»¥ç»§æ‰¿ã€‚</p></li><li><p>JSä¸­å¯¹è±¡åˆ†ç±»ã€åŠå…¶å®ƒåŸç”Ÿå¯¹è±¡</p></li><li><p>Iterator</p><p>ES6ä¹‹å‰åœ¨JSä¸­åªæœ‰Arrayå’Œå¯¹è±¡å¯ä»¥è¡¨ç¤ºâ€œé›†åˆâ€è¿™ç§æ•°æ®ç»“æ„ï¼ŒES6ä¸­å¢åŠ äº†ï¼šSetå’ŒMapã€‚ç”±æ­¤ï¼Œå››ç§ä¹‹é—´äº’ç›¸ç»„åˆåˆå¯ä»¥å®šä¹‰æ–°çš„æ•°æ®ç»“æ„ã€‚è¿™äº›<strong>æ–°å®šä¹‰çš„æ•°æ®ç»“æ„å¦‚ä½•è®¿é—®å‘¢ï¼Ÿéå†å™¨ï¼ˆIteratorï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶</strong>ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œã€‚éå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚</p><p>åªè¦ä¸ºæŸä¸ªæ•°æ®ç»“æ„éƒ¨ç½² äº†Iteratoræ¥å£ï¼Œåˆ™å¯ä»¥ç§°æ­¤æ•°æ®ç»“æ„æ˜¯å¯éå†çš„ã€‚iteratorå±æ€§éƒ¨ç½²åœ¨Symbolä¸Šã€‚å¦‚ä¸‹å¯¹è±¡é»˜è®¤éƒ¨ç½²äº†Iteratorç»“å£ï¼šArray Set Map Stringç­‰ã€‚éƒ¨ç½²iteratorç»“æ„çš„<strong>è¦ç‚¹ï¼š1ï¼‰åœ¨Symbol.iteratorä¸Šéƒ¨ç½²ï¼›2ï¼‰å¿…é¡»åŒ…å«next()å‡½æ•°</strong>ã€‚é»˜è®¤è°ƒç”¨iteratoræ¥å£çš„åœºæ™¯ï¼šè§£æ„èµ‹å€¼ã€â€¦æ‰©å±•è¿ç®—ç¬¦ã€yeild* ã€‚for-ofå¾ªç¯å†…éƒ¨è°ƒç”¨çš„å³æ˜¯è°ƒç”¨æ•°æ®æœºæ„å†…éƒ¨çš„Symbol.iteratoræ–¹æ³•ã€‚</p><p><strong>for-inå’Œfor-ofå¾ªç¯</strong></p><p>for-inç”¨äºéå†å¯¹è±¡å±æ€§ï¼Œå¯¹è±¡è‡ªèº«å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å¯éå†Symbolå±æ€§ï¼‰</p><p>for-ofå¾ªç¯æ˜¯ä¸€ç§éå†æ‰€æœ‰æ•°æ®æœºæ„çš„ç»Ÿä¸€æ–¹æ³•ã€‚å®ç°åŸç†æ˜¯æ•°æ®ç»“æ„ä¸Šéƒ¨ç½²çš„Symbol.iteratorå±æ€§ã€‚</p></li></ol><h4 id="6-3-ES6-ä¸-ES5-ç»§æ‰¿çš„åŒºåˆ«"><a href="#6-3-ES6-ä¸-ES5-ç»§æ‰¿çš„åŒºåˆ«" class="headerlink" title="6.3 ES6 ä¸ ES5 ç»§æ‰¿çš„åŒºåˆ«"></a>6.3 ES6 ä¸ ES5 ç»§æ‰¿çš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ES6 ä¸­æœ‰ç±» class çš„æ¦‚å¿µï¼Œç±» class çš„ç»§æ‰¿æ˜¯é€šè¿‡ extends æ¥å®ç°çš„ï¼ŒES5 ä¸­æ˜¯é€šè¿‡è®¾ç½®æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼Œæ¥å®ç°ç»§æ‰¿çš„ã€‚</p><p>ES6 ä¸ ES5 ä¸­çš„ç»§æ‰¿æœ‰ 2 ä¸ªåŒºåˆ«ï¼Œç¬¬ä¸€ä¸ªæ˜¯ï¼ŒES6 ä¸­å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„å±æ€§ï¼Œç¬¬äºŒä¸ªåŒºåˆ«æ˜¯ï¼Œsuper() ä¸ A.call(this) æ˜¯ä¸åŒçš„ï¼Œåœ¨ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä½“ç°å¾—å¾ˆæ˜æ˜¾ï¼ŒES6 ä¸­çš„å­ç±»å®ä¾‹å¯ä»¥ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°å®ä¾‹çš„å†…éƒ¨å±æ€§ï¼Œè€Œåœ¨ ES5 ä¸­åšä¸åˆ°ã€‚</p><p><strong>è§£æï¼š</strong></p><p>ä¸‹é¢é€šè¿‡ 3 ä¸ª demoï¼Œæ¥åˆ†æå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p><ol><li>ES5 ç»§æ‰¿</li></ol><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">a</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params"></span>) &#123;</span><br><span class="line">  A.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">b</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(A.<span class="property"><span class="keyword">prototype</span></span>, &#123;</span><br><span class="line">  <span class="attr">constructor</span>: &#123; <span class="attr">value</span>: B, <span class="attr">writable</span>: <span class="literal">true</span>, <span class="attr">configurable</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­ï¼Œæ„é€ å‡½æ•° B ç»§æ‰¿æ„é€ å‡½æ•° Aï¼Œé¦–å…ˆè®©æ„é€ å‡½æ•° B çš„ prototype å¯¹è±¡ä¸­çš„ <strong>proto</strong> å±æ€§æŒ‡å‘æ„é€ å‡½æ•° A çš„ prototype å¯¹è±¡ï¼Œå¹¶ä¸”å°†æ„é€ å‡½æ•° B çš„ prototype å¯¹è±¡çš„ constructor å±æ€§èµ‹å€¼ä¸ºæ„é€ å‡½æ•° Bï¼Œè®©æ„é€ å‡½æ•° B çš„å®ä¾‹ç»§æ‰¿æ„é€ å‡½æ•° A çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œç„¶ååœ¨æ„é€ å‡½æ•° B å†…éƒ¨çš„é¦–è¡Œå†™ä¸Š A.call(this)ï¼Œè®©æ„é€ å‡½æ•° B çš„å®ä¾‹ç»§æ‰¿æ„é€ å‡½æ•° A çš„å®ä¾‹å±æ€§ã€‚åœ¨ ES5 ä¸­å®ç°ä¸¤ä¸ªæ„é€ å‡½æ•°ä¹‹é—´çš„ç»§æ‰¿ï¼Œåªéœ€è¦åšè¿™ä¸¤æ­¥å³å¯ã€‚ä¸‹é¢å…­å¹…å›¾åˆ†åˆ«æ˜¯ï¼Œå®ä¾‹ b çš„åŸå‹é“¾åŠéªŒè¯å›¾ï¼Œæ„é€ å‡½æ•° B çš„åŸå‹é“¾åŠéªŒè¯å›¾ï¼Œæ„é€ å‡½æ•° A çš„åŸå‹é“¾åŠéªŒè¯å›¾ã€‚</p><p>å®ä¾‹ b çš„åŸå‹é“¾å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122217808/5EFC2E2CCA7CF0C0ED3AF97C57C347E8" alt="img">å®ä¾‹ b çš„åŸå‹é“¾éªŒè¯å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122220782/6C8BA735DC6D2FB3DA6EF1492C8C8AC9" alt="img">æ„é€ å‡½æ•° B çš„åŸå‹é“¾å›¾ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122228075/C639481859D093429EF31DB41F59479D" alt="img">æ„é€ å‡½æ•° B çš„åŸå‹é“¾éªŒè¯å›¾å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122231723/E8833975C1CE1CF00A9497C875FC5D1C" alt="img">æ„é€ å‡½æ•° A çš„åŸå‹é“¾å›¾ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122234815/8F1CBB5E756E67FF00FA75B75E1198FD" alt="img">æ„é€ å‡½æ•° B çš„åŸå‹é“¾éªŒè¯å›¾å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122238414/AC9C448D0E52381CD7FF458F89369FC3" alt="img">ä»ä¸Šé¢ 6 å¹…å›¾å¯çŸ¥ï¼Œæ„é€ å‡½æ•° B çš„å®ä¾‹ b ç»§æ‰¿äº†æ„é€ å‡½æ•° A çš„å®ä¾‹å±æ€§ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° A çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° Object çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ã€‚æ„é€ å‡½æ•° B æ˜¯æ„é€ å‡½æ•° Function çš„å®ä¾‹ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° Function çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° Object çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ã€‚ æ„é€ å‡½æ•° A æ˜¯æ„é€ å‡½æ•° Function çš„å®ä¾‹ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° Function çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œç»§æ‰¿äº†æ„é€ å‡½æ•° Object çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ã€‚å¯çœ‹å‡ºï¼Œæ„é€ å‡½æ•° A ä¸ æ„é€ å‡½æ•° B å¹¶æ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œå³æ„é€ å‡½æ•° B æ²¡æœ‰ç»§æ‰¿æ„é€ å‡½æ•° A ä¸Šé¢çš„å±æ€§ï¼Œåœ¨ ES6 ä¸­ï¼Œç”¨ extends å®ç°ä¸¤ä¸ªç±»çš„ç»§æ‰¿ï¼Œä¸¤ä¸ªç±»ä¹‹é—´æ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„ï¼Œå³å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿™æ˜¯ ES6 ä¸ ES5 ç»§æ‰¿çš„ç¬¬ä¸€ç‚¹åŒºåˆ«ï¼Œä¸‹é¢é€šè¿‡ ES6 çš„ç»§æ‰¿æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚</p><ol><li>ES6 ç»§æ‰¿</li></ol><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">b</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­ï¼Œç±» B é€šè¿‡ extends å…³é”®å­—ç»§æ‰¿ç±» A çš„å±æ€§åŠå…¶åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œé€šè¿‡åœ¨ç±» B çš„ constructor å‡½æ•°ä¸­æ‰§è¡Œ super() å‡½æ•°ï¼Œè®©ç±» B çš„å®ä¾‹ç»§æ‰¿ç±» A çš„å®ä¾‹å±æ€§ï¼Œsuper() çš„ä½œç”¨ç±»ä¼¼æ„é€ å‡½æ•° B ä¸­çš„ A.call(this)ï¼Œä½†å®ƒä»¬æ˜¯æœ‰åŒºåˆ«çš„ï¼Œè¿™æ˜¯ ES6 ä¸ ES5 ç»§æ‰¿çš„ç¬¬äºŒç‚¹åŒºåˆ«ï¼Œè¿™ä¸ªåŒºåˆ«ä¼šåœ¨æ–‡ç« çš„æœ€åè¯´æ˜ã€‚åœ¨ ES6 ä¸­ï¼Œä¸¤ä¸ªç±»ä¹‹é—´çš„ç»§æ‰¿å°±æ˜¯é€šè¿‡ extends å’Œ super ä¸¤ä¸ªå…³é”®å­—å®ç°çš„ã€‚ä¸‹é¢å››å¹…å›¾åˆ†åˆ«æ˜¯ï¼Œå®ä¾‹ b çš„åŸå‹é“¾åŠéªŒè¯å›¾ï¼Œç±» B çš„åŸå‹é“¾åŠéªŒè¯å›¾ã€‚</p><p>å®ä¾‹ b çš„åŸå‹é“¾å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122309797/9D874024A07AB6BF3720EBE76D8B1B5F" alt="img">å®ä¾‹ b çš„åŸå‹é“¾éªŒè¯å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122312826/B0B23709AD1D39BCF215957AC3BE3D76" alt="img">ç±» B çš„åŸå‹é“¾å›¾ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122317746/A439A948D436C4F8564F01CFC41DA1F6" alt="img">ç±» B çš„åŸå‹é“¾éªŒè¯å›¾å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122320015/0ABB20677FEF4799600D633AA631D9E1" alt="img">é€šè¿‡ä¸Šé¢ 4 å¹…å›¾å¯çŸ¥ï¼Œåœ¨ ES6 ä¸ ES5 ä¸­ï¼Œç±» B çš„å®ä¾‹ b çš„åŸå‹é“¾ä¸æ„é€ å‡½æ•° B çš„å®ä¾‹ b çš„åŸå‹é“¾æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯åœ¨ ES6 ä¸­ç±» B ç»§æ‰¿äº†ç±» A çš„å±æ€§ï¼Œåœ¨ ES5 ä¸­ï¼Œæ„é€ å‡½æ•° B æ²¡æœ‰ç»§æ‰¿æ„é€ å‡½æ•° A çš„å±æ€§ï¼Œè¿™æ˜¯ ES6 ä¸ ES5 ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªåŒºåˆ«ã€‚</p><ol><li>super() ä¸ A.call(this) çš„åŒºåˆ«</li></ol><p>åœ¨ ES5 ä¸­ï¼Œæ„é€ å‡½æ•° B çš„å®ä¾‹ç»§æ‰¿æ„é€ å‡½æ•° A çš„å®ä¾‹å±æ€§æ˜¯é€šè¿‡ A.call(this) æ¥å®ç°çš„ï¼Œåœ¨ ES6 ä¸­ï¼Œç±» B çš„å®ä¾‹ç»§æ‰¿ç±» A çš„å®ä¾‹å±æ€§ï¼Œæ˜¯é€šè¿‡ super() å®ç°çš„ã€‚åœ¨ä¸æ˜¯ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼ŒA.call(this) ä¸ super() åœ¨åŠŸèƒ½ä¸Šæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œç”¨ <a href="https://babeljs.io/repl/#?babili=false&evaluate=true&lineWrap=false&presets=es2015,react,stage-2&targets=&browsers=&builtIns=false&debug=false&code=">babel åœ¨çº¿è½¬æ¢</a> å°†ç±»çš„ç»§æ‰¿è½¬æ¢æˆ ES5 è¯­æ³•ï¼Œbabel ä¹Ÿæ˜¯é€šè¿‡ A.call(this) æ¥æ¨¡æ‹Ÿå®ç° super() çš„ã€‚ä½†æ˜¯åœ¨ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼ŒA.call(this) ä¸ super() åœ¨åŠŸèƒ½ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼ŒES5 ä¸­ A.call(this) ä¸­çš„ this æ˜¯æ„é€ å‡½æ•° B çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯åœ¨å®ç°å®ä¾‹å±æ€§ç»§æ‰¿ä¸Šï¼ŒES5 æ˜¯å…ˆåˆ›é€ æ„é€ å‡½æ•° B çš„å®ä¾‹ï¼Œç„¶ååœ¨è®©è¿™ä¸ªå®ä¾‹é€šè¿‡ A.call(this) å®ç°å®ä¾‹å±æ€§ç»§æ‰¿ï¼Œåœ¨ ES6 ä¸­ï¼Œæ˜¯å…ˆæ–°å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥° thisï¼Œä½¿å¾—çˆ¶ç±»çš„æ‰€æœ‰è¡Œä¸ºéƒ½å¯ä»¥ç»§æ‰¿ã€‚ä¸‹é¢é€šè¿‡ 2 æ®µä»£ç è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä»£ç  1ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ArrFun</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Array</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ArrFun</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>, &#123;</span><br><span class="line">  <span class="attr">constructor</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="title class_">ArrFun</span>,</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="title class_">ArrFun</span>();</span><br><span class="line">colors[<span class="number">0</span>] = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">colors.<span class="property">length</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„æ€è·¯å°±æ˜¯ï¼Œè®©æ„é€ å‡½æ•° MyArray ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•° Arrayï¼Œç„¶åéªŒè¯ MyArray çš„å®ä¾‹æ˜¯å¦å…·æœ‰ Array å®ä¾‹çš„ç‰¹æ€§ã€‚</p><p>ä»£ç  1 æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122344778/E7ADAE3D4C812A6291404B1DD673DFB2" alt="img">ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒMyArray çš„å®ä¾‹å¹¶ä¸å…·æœ‰ Array å®ä¾‹çš„ç‰¹æ€§ï¼Œä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸º MyArray çš„å®ä¾‹æ— æ³•è·å¾—åŸç”Ÿæ„é€ å‡½æ•° Array å®ä¾‹çš„å†…éƒ¨å±æ€§ï¼Œé€šè¿‡ Array.call(this) ä¹Ÿä¸è¡Œã€‚</p><p>ä»£ç  2ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrFun</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">ArrFun</span>();</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line">arr.<span class="property">length</span>;</span><br></pre></td></tr></table></figure><p>ä»£ç  2 æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646122353819/063DA15897F5D57767350A0B04B81839" alt="img"></p><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ super()ï¼ŒMyArray çš„å®ä¾‹å…·æœ‰ Array å®ä¾‹çš„ç‰¹æ€§ã€‚</p><h4 id="6-4-å“ªäº›ç±»å‹èƒ½è¢«æ‰©å±•æ“ä½œç¬¦â€¦æ‰©å±•"><a href="#6-4-å“ªäº›ç±»å‹èƒ½è¢«æ‰©å±•æ“ä½œç¬¦â€¦æ‰©å±•" class="headerlink" title="6.4 å“ªäº›ç±»å‹èƒ½è¢«æ‰©å±•æ“ä½œç¬¦â€¦æ‰©å±•"></a>6.4 å“ªäº›ç±»å‹èƒ½è¢«æ‰©å±•æ“ä½œç¬¦â€¦æ‰©å±•</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>é€‚ç”¨ç±»å‹</strong>ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ã€‚</p><p>å¤æ‚æ•°æ®ç±»å‹éƒ½å¯ä»¥ï¼Œå½“è¦è½¬åŒ–ä¸ºå¯è¿­ä»£æ•°æ®ç»“æ„æ—¶å¯è®¾ç½®å¯¹è±¡çš„è¿­ä»£å™¨å¯¹æ‰©å±•è¿ç®—ç¬¦æ‰©å±•å‡ºæ¥çš„å€¼è¿›è¡Œæ“ä½œã€‚</p><p>åŸºç¡€æ•°æ®åªæœ‰stringå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œnumber,boolean,null,undefinedæ— æ•ˆ</p><h4 id="6-5-äº‹ä»¶æ‰©å±•ç¬¦ç”¨è¿‡å—-â€¦-ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹"><a href="#6-5-äº‹ä»¶æ‰©å±•ç¬¦ç”¨è¿‡å—-â€¦-ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹" class="headerlink" title="6.5 äº‹ä»¶æ‰©å±•ç¬¦ç”¨è¿‡å—(â€¦)ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹"></a>6.5 äº‹ä»¶æ‰©å±•ç¬¦ç”¨è¿‡å—(â€¦)ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨åœºæ™¯</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ã€å‡½æ•°è°ƒç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">add</span>(...[<span class="number">4</span>, <span class="number">38</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">v, w, x, y, z</span>) &#123;  &#125;</span><br><span class="line"><span class="title function_">f</span>(-<span class="number">1</span>, ...[<span class="number">0</span>, <span class="number">1</span>], <span class="number">2</span>, ...[<span class="number">3</span>]);</span><br><span class="line"><span class="comment">// 123456789</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.å¾€æ•°ç»„é‡Œpushå¤šä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr1.<span class="title function_">push</span>(...arr2);  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">//[0,1,2,3,4,5]</span></span><br><span class="line"><span class="comment">//123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.æ›¿ä»£å‡½æ•°çš„applyæ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">x, y, z</span>) &#123;  &#125;  </span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f.<span class="title function_">apply</span>(<span class="literal">null</span>, args); <span class="comment">//ES5 çš„å†™æ³•</span></span><br><span class="line"><span class="title function_">f</span>(...args); <span class="comment">//ES6çš„å†™æ³•</span></span><br><span class="line"><span class="comment">// 123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.æ±‚ä¸€ä¸ªæ•°ç»„çš„æœ€å¤§æ•°ç®€åŒ–</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>])  <span class="comment">//ES5 çš„å†™æ³•</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(...[<span class="number">14</span>, <span class="number">3</span>, <span class="number">77</span>])  <span class="comment">//ES6 çš„å†™æ³•ï¼Œç­‰åŒäºMath.max(14, 3, 77)</span></span><br><span class="line"><span class="comment">//1234</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.æ‰©å±•è¿ç®—ç¬¦åé¢å¯ä»¥æ”¾è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">const</span> arr = [...(<span class="number">5</span> &gt; <span class="number">0</span> ? [<span class="string">&#x27;a&#x27;</span>] : []),<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);  <span class="comment">//[&#x27;a&#x27;,&#x27;b&#x27;] </span></span><br><span class="line"><span class="comment">//1234</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ä¸è§£æ„èµ‹å€¼ç»“åˆï¼Œç”¨äºç”Ÿæˆæ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = [...a1];  <span class="comment">//å†™æ³•1</span></span><br><span class="line"><span class="keyword">const</span> [...a2] = a1;  <span class="comment">//å†™æ³•2</span></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">first  <span class="comment">//1</span></span><br><span class="line">rest  <span class="comment">//[2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [];</span><br><span class="line">first  <span class="comment">//undefined</span></span><br><span class="line">rest  <span class="comment">//[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="string">&quot;foo&quot;</span>];</span><br><span class="line">first  <span class="comment">//&quot;foo&quot;</span></span><br><span class="line">rest   <span class="comment">//[]</span></span><br><span class="line"><span class="comment">//1234567891011121314151617</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//7.åˆå¹¶æ•°ç»„</span></span><br><span class="line">[...arr1, ...arr2, ...arr3]  <span class="comment">//[ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//8.æ•°ç»„çš„å…‹éš†â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç‰¹åˆ«æ³¨æ„</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [...arr1];</span><br><span class="line">arr1[<span class="number">0</span>]=<span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">//[0, 1, 2]  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¹ä¸€çœ‹ï¼Œarr2ä¸arr1ä¸å…±ç”¨å¼•ç”¨åœ°å€ï¼Œarr2ä¸éšç€arr1å˜åŒ–ï¼Œæ¥ç€å¾€ä¸‹çœ‹ */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>, [<span class="number">1</span>,<span class="number">11</span>,<span class="number">111</span>], <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [...arr1];</span><br><span class="line">arr1[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">//[0, [100,11,111], 2]</span></span><br></pre></td></tr></table></figure><h4 id="6-6-è®©ä¸åŒçš„æµè§ˆå™¨å…¼å®¹ES6çš„æ–¹æ³•"><a href="#6-6-è®©ä¸åŒçš„æµè§ˆå™¨å…¼å®¹ES6çš„æ–¹æ³•" class="headerlink" title="6.6 è®©ä¸åŒçš„æµè§ˆå™¨å…¼å®¹ES6çš„æ–¹æ³•"></a>6.6 è®©ä¸åŒçš„æµè§ˆå™¨å…¼å®¹ES6çš„æ–¹æ³•</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>é’ˆå¯¹ ES6 çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¾ˆå¤šå›¢é˜Ÿä¸ºæ­¤å¼€å‘å‡ºäº†å¤šç§è¯­æ³•è§£æè½¬æ¢å·¥å…·ï¼ŒæŠŠæˆ‘ä»¬å†™çš„ ES6 è¯­æ³•è½¬æ¢æˆ ES5ï¼Œç›¸å½“äºåœ¨ ES6 å’Œæµè§ˆå™¨ä¹‹é—´åšäº†ä¸€ä¸ªç¿»è¯‘å®˜ã€‚æ¯”è¾ƒé€šç”¨çš„å·¥å…·æ–¹æ¡ˆæœ‰ babelï¼Œjsxï¼Œtraceurï¼Œes6-shim ç­‰ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;6-1-es6ä¸­ç®­å¤´å‡½æ•°&quot;&gt;&lt;a href=&quot;#6-1-es6ä¸­ç®­å¤´å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;6.1 es6ä¸­ç®­å¤´å‡½æ•°&quot;&gt;&lt;/a&gt;6.1 es6ä¸­ç®­å¤´å‡½æ•°&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;å‚è€ƒç­”æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="JavaScript" scheme="https://dont-sleep-so-late.github.io/tags/JavaScript/"/>
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>æ•°ç»„å»é‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/04/01/js/js%E5%9F%BA%E7%A1%80/"/>
    <id>https://dont-sleep-so-late.github.io/2024/04/01/js/js%E5%9F%BA%E7%A1%80/</id>
    <published>2024-04-01T03:31:15.000Z</published>
    <updated>2024-04-03T04:51:27.519Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h2><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><h3 id="1-åˆ©ç”¨ES6-Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰"><a href="#1-åˆ©ç”¨ES6-Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰" class="headerlink" title="1. åˆ©ç”¨ES6 Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰"></a><strong>1. åˆ©ç”¨ES6 Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span> (arr) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"> <span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;&#125;, &#123;&#125;]</span></span><br></pre></td></tr></table></figure><p>ä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œè¿™ç§å»é‡çš„æ–¹æ³•ä»£ç æœ€å°‘ã€‚è¿™ç§æ–¹æ³•è¿˜æ— æ³•å»æ‰â€œ{}â€ç©ºå¯¹è±¡ï¼Œåé¢çš„é«˜é˜¶æ–¹æ³•ä¼šæ·»åŠ å»æ‰é‡å¤â€œ{}â€çš„æ–¹æ³•ã€‚</p><h3 id="2-åˆ©ç”¨foråµŒå¥—forï¼Œç„¶åspliceå»é‡ï¼ˆES5ä¸­æœ€å¸¸ç”¨ï¼‰"><a href="#2-åˆ©ç”¨foråµŒå¥—forï¼Œç„¶åspliceå»é‡ï¼ˆES5ä¸­æœ€å¸¸ç”¨ï¼‰" class="headerlink" title="2. åˆ©ç”¨foråµŒå¥—forï¼Œç„¶åspliceå»é‡ï¼ˆES5ä¸­æœ€å¸¸ç”¨ï¼‰"></a><strong>2. åˆ©ç”¨foråµŒå¥—forï¼Œç„¶åspliceå»é‡ï¼ˆES5ä¸­æœ€å¸¸ç”¨ï¼‰</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>; j&lt;arr.<span class="property">length</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i]==arr[j])&#123;         <span class="comment">//ç¬¬ä¸€ä¸ªç­‰åŒäºç¬¬äºŒä¸ªï¼Œspliceæ–¹æ³•åˆ é™¤ç¬¬äºŒä¸ª</span></span><br><span class="line">                    arr.<span class="title function_">splice</span>(j,<span class="number">1</span>);</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, 15, false, undefined, NaN, NaN, &quot;NaN&quot;, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]     //NaNå’Œ&#123;&#125;æ²¡æœ‰å»é‡ï¼Œä¸¤ä¸ªnullç›´æ¥æ¶ˆå¤±äº†</span></span><br></pre></td></tr></table></figure><p>åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å…ƒç´ ï¼Œå†…å±‚å¾ªç¯æ—¶æ¯”è¾ƒå€¼ã€‚å€¼ç›¸åŒæ—¶ï¼Œåˆ™åˆ å»è¿™ä¸ªå€¼ã€‚</p><h3 id="3-åˆ©ç”¨indexOfå»é‡"><a href="#3-åˆ©ç”¨indexOfå»é‡" class="headerlink" title="3. åˆ©ç”¨indexOfå»é‡"></a><strong>3. åˆ©ç”¨indexOfå»é‡</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array .<span class="title function_">indexOf</span>(arr[i]) === -<span class="number">1</span>) &#123;</span><br><span class="line">            array .<span class="title function_">push</span>(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">   <span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]  //NaNã€&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç©ºçš„ç»“æœæ•°ç»„ï¼Œfor å¾ªç¯åŸæ•°ç»„ï¼Œåˆ¤æ–­ç»“æœæ•°ç»„æ˜¯å¦å­˜åœ¨å½“å‰å…ƒç´ ï¼Œå¦‚æœæœ‰ç›¸åŒçš„å€¼åˆ™è·³è¿‡ï¼Œä¸ç›¸åŒåˆ™pushè¿›æ•°ç»„ã€‚</p><h3 id="4-åˆ©ç”¨sort"><a href="#4-åˆ©ç”¨sort" class="headerlink" title="4. åˆ©ç”¨sort()"></a><strong>4. åˆ©ç”¨sort()</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    arr = arr.<span class="title function_">sort</span>()</span><br><span class="line">    <span class="keyword">var</span> arrry= [arr[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] !== arr[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">     <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">// [0, 1, 15, &quot;NaN&quot;, NaN, NaN, &#123;â€¦&#125;, &#123;â€¦&#125;, &quot;a&quot;, false, null, true, &quot;true&quot;, undefined]      //NaNã€&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨sort()æ’åºæ–¹æ³•ï¼Œç„¶åæ ¹æ®æ’åºåçš„ç»“æœè¿›è¡Œéå†åŠç›¸é‚»å…ƒç´ æ¯”å¯¹ã€‚</p><h3 id="5-åˆ©ç”¨å¯¹è±¡çš„å±æ€§ä¸èƒ½ç›¸åŒçš„ç‰¹ç‚¹è¿›è¡Œå»é‡ï¼ˆè¿™ç§æ•°ç»„å»é‡çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œä¸å»ºè®®ç”¨ï¼Œæœ‰å¾…æ”¹è¿›ï¼‰"><a href="#5-åˆ©ç”¨å¯¹è±¡çš„å±æ€§ä¸èƒ½ç›¸åŒçš„ç‰¹ç‚¹è¿›è¡Œå»é‡ï¼ˆè¿™ç§æ•°ç»„å»é‡çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œä¸å»ºè®®ç”¨ï¼Œæœ‰å¾…æ”¹è¿›ï¼‰" class="headerlink" title="5. åˆ©ç”¨å¯¹è±¡çš„å±æ€§ä¸èƒ½ç›¸åŒçš„ç‰¹ç‚¹è¿›è¡Œå»é‡ï¼ˆè¿™ç§æ•°ç»„å»é‡çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œä¸å»ºè®®ç”¨ï¼Œæœ‰å¾…æ”¹è¿›ï¼‰"></a><strong>5. åˆ©ç”¨å¯¹è±¡çš„å±æ€§ä¸èƒ½ç›¸åŒçš„ç‰¹ç‚¹è¿›è¡Œå»é‡ï¼ˆè¿™ç§æ•°ç»„å»é‡çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œä¸å»ºè®®ç”¨ï¼Œæœ‰å¾…æ”¹è¿›ï¼‰</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arrry= [];</span><br><span class="line">     <span class="keyword">var</span>  obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj[arr[i]]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i])</span><br><span class="line">            obj[arr[i]] = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            obj[arr[i]]++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, 15, false, undefined, null, NaN, 0, &quot;a&quot;, &#123;â€¦&#125;]    //ä¸¤ä¸ªtrueç›´æ¥å»æ‰äº†ï¼ŒNaNå’Œ&#123;&#125;å»é‡</span></span><br></pre></td></tr></table></figure><h3 id="6-åˆ©ç”¨includes"><a href="#6-åˆ©ç”¨includes" class="headerlink" title="6. åˆ©ç”¨includes"></a><strong>6. åˆ©ç”¨includes</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array =[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>( !array.<span class="title function_">includes</span>( arr[i]) ) &#123;<span class="comment">//includes æ£€æµ‹æ•°ç»„æ˜¯å¦æœ‰æŸä¸ªå€¼</span></span><br><span class="line">                    array.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">              &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]     //&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><h3 id="7-åˆ©ç”¨hasOwnProperty"><a href="#7-åˆ©ç”¨hasOwnProperty" class="headerlink" title="7. åˆ©ç”¨hasOwnProperty"></a><strong>7. åˆ©ç”¨hasOwnProperty</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="title function_">hasOwnProperty</span>(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : (obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;]   //æ‰€æœ‰çš„éƒ½å»é‡äº†</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨hasOwnProperty åˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯¹è±¡å±æ€§</p><h3 id="8-åˆ©ç”¨filter"><a href="#8-åˆ©ç”¨filter" class="headerlink" title="8. åˆ©ç”¨filter"></a><strong>8. åˆ©ç”¨filter</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>) &#123;</span><br><span class="line">    <span class="comment">//å½“å‰å…ƒç´ ï¼Œåœ¨åŸå§‹æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªç´¢å¼•==å½“å‰ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›å½“å‰å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">indexOf</span>(item, <span class="number">0</span>) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="9-åˆ©ç”¨é€’å½’å»é‡"><a href="#9-åˆ©ç”¨é€’å½’å»é‡" class="headerlink" title="9. åˆ©ç”¨é€’å½’å»é‡"></a><strong>9. åˆ©ç”¨é€’å½’å»é‡</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> array= arr;</span><br><span class="line">        <span class="keyword">var</span> len = array.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    array.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;   <span class="comment">//æ’åºåæ›´åŠ æ–¹ä¾¿å»é‡</span></span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">index</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[index] === array[index-<span class="number">1</span>])&#123;</span><br><span class="line">                array.<span class="title function_">splice</span>(index,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">loop</span>(index - <span class="number">1</span>);    <span class="comment">//é€’å½’loopï¼Œç„¶åæ•°ç»„å»é‡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">loop</span>(len-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;â€¦&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, undefined]</span></span><br></pre></td></tr></table></figure><h3 id="10-åˆ©ç”¨Mapæ•°æ®ç»“æ„å»é‡"><a href="#10-åˆ©ç”¨Mapæ•°æ®ç»“æ„å»é‡" class="headerlink" title="10. åˆ©ç”¨Mapæ•°æ®ç»“æ„å»é‡"></a><strong>10. åˆ©ç”¨Mapæ•°æ®ç»“æ„å»é‡</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrayNonRepeatfy</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">let</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>();  <span class="comment">// æ•°ç»„ç”¨äºè¿”å›ç»“æœ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(map .<span class="title function_">has</span>(arr[i])) &#123;  <span class="comment">// å¦‚æœæœ‰è¯¥keyå€¼</span></span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">true</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">false</span>);   <span class="comment">// å¦‚æœæ²¡æœ‰è¯¥keyå€¼</span></span><br><span class="line">      array .<span class="title function_">push</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">return</span> array ;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;â€¦&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, undefined]</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªç©ºMapæ•°æ®ç»“æ„ï¼Œéå†éœ€è¦å»é‡çš„æ•°ç»„ï¼ŒæŠŠæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ä½œä¸ºkeyå­˜åˆ°Mapä¸­ã€‚ç”±äºMapä¸­ä¸ä¼šå‡ºç°ç›¸åŒçš„keyå€¼ï¼Œæ‰€ä»¥æœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯å»é‡åçš„ç»“æœã€‚</p><h3 id="11-åˆ©ç”¨reduce-includes"><a href="#11-åˆ©ç”¨reduce-includes" class="headerlink" title="11. åˆ©ç”¨reduce+includes"></a><strong>11. åˆ©ç”¨reduce+includes</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,cur</span>) =&gt;</span> prev.<span class="title function_">includes</span>(cur) ? prev : [...prev,cur],[]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr));</span><br><span class="line"><span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="12-â€¦new-Set-arr"><a href="#12-â€¦new-Set-arr" class="headerlink" title="12. [â€¦new Set(arr)]"></a><strong>12. [â€¦new Set(arr)]</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)] </span><br><span class="line"><span class="comment">//ä»£ç å°±æ˜¯è¿™ä¹ˆå°‘----ï¼ˆå…¶å®ï¼Œä¸¥æ ¼æ¥è¯´å¹¶ä¸ç®—æ˜¯ä¸€ç§ï¼Œç›¸å¯¹äºç¬¬ä¸€ç§æ–¹æ³•æ¥è¯´åªæ˜¯ç®€åŒ–äº†ä»£ç ï¼‰</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ•°ç»„å»é‡&quot;&gt;&lt;a href=&quot;#æ•°ç»„å»é‡&quot; class=&quot;headerlink&quot; title=&quot;æ•°ç»„å»é‡&quot;&gt;&lt;/a&gt;æ•°ç»„å»é‡&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;å‚è€ƒç­”æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-åˆ©ç”¨ES6-Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="JavaSciprt" scheme="https://dont-sleep-so-late.github.io/tags/JavaSciprt/"/>
    
    <category term="Array" scheme="https://dont-sleep-so-late.github.io/tags/Array/"/>
    
  </entry>
  
  <entry>
    <title>å›¾åºŠ</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/17/%E5%9B%BE%E5%BA%8A/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/17/%E5%9B%BE%E5%BA%8A/</id>
    <published>2024-03-16T18:20:03.000Z</published>
    <updated>2024-04-03T04:49:36.232Z</updated>
    
    <content type="html"><![CDATA[<p>1.è·¯è¿‡å›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://imgse.com/">https://imgse.com/</a></p><p>ä»‹ç»ï¼šå›½å†…æ¯”è¾ƒçŸ¥åçš„å›¾åºŠï¼Œç”¨æˆ·ä½¿ç”¨è¾ƒå¤šçš„å›¾åºŠå·¥å…·ä¹‹ä¸€ï¼Œå…è´¹ï¼Œä½†æ˜¯é¡µé¢æœ‰å°‘é‡å¹¿å‘Šã€‚é«˜é€Ÿç¨³å®šçš„å›¾ç‰‡ä¸Šä¼ å’Œå¤–é“¾æœåŠ¡ï¼Œå…¨çƒCDNåŠ é€Ÿï¼Œæœ€å¤§å•å¼ æ”¯æŒ 10 MBï¼Œæ”¯æŒæ‰¹é‡ä¸Šä¼ ã€‚ä¸è¿‡åœ¨ä¸Šä¼ ä¹‹åï¼Œå±•ç°çš„é¢„è§ˆå’Œç¼–è¾‘ï¼Œéœ€è¦äºŒæ¬¡ç¡®è®¤ä¹‹åæ‰èƒ½ä¸Šä¼ è¿›è¡Œä½¿ç”¨ï¼Œæœ‰ç‚¹ç¹çã€‚</p><p><img src="https://pics2.baidu.com/feed/9f510fb30f2442a735ced61f1aa7be47d31302bc.jpeg@f_auto?token=7780c38bd968c07ca4f8c7aa03f0dc36" alt="img"></p><p>2.èšåˆå›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://www.superbed.cn/">https://www.superbed.cn/</a></p><p>ä»‹ç»ï¼šèšåˆå›¾åºŠä¾æ‰˜äºä¸ƒç‰›è…¾è®¯é˜¿é‡Œäº‘ç­‰ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±é€‰æ‹©ä¸Šä¼ ç­–ç•¥ï¼Œä¸Šä¼ å›¾ç‰‡ï¼šå¯é€‰jpg&#x2F;png&#x2F;bmp&#x2F;webpç­‰æ‰€æœ‰æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼Œå¯æ‰¹é‡ä¸Šä¼ ã€‚æ²¡æœ‰æµé‡é™åˆ¶ã€é€Ÿåº¦ä¹Ÿå¯ä»¥ï¼Œå…³é”®æ˜¯ä¸éœ€è¦å„ç§è®¾ç½®ï¼Œå¾ˆé€‚åˆä¸çˆ±æŠ˜è…¾çš„æœ‹å‹ä½¿ç”¨ï¼Œä¸Šæ‰‹éš¾åº¦å¾ˆä½ï¼Œæ˜¯ç›®å‰å›¾åºŠçš„æ–°åŠ¿åŠ›ã€‚</p><p><img src="https://pics6.baidu.com/feed/4d086e061d950a7b7e38b3a9c03571d5f3d3c9bb.jpeg@f_auto?token=81f7ca2de23cb3240befdbce8cc21c5e" alt="img"></p><p>3.é‡è§å›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://www.hualigs.cn/">https://www.hualigs.cn/</a></p><p>ä»‹ç»ï¼šé‡è§å›¾åºŠæ˜¯ä¸€æ¬¾é›†åˆ31æ¬¾å›¾åºŠå”¯ä¸€ä¸ªçš„å¤šå›¾åºŠå·¥å…·ã€‚æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å›¾ç‰‡æ°´å°ã€è‡ªå®šä¹‰ï¼ŒGithub ç­‰ç¬¬ä¸‰æ–¹ç§äººå‚¨å­˜ï¼Œä¸Šä¼ æ”¯æŒæ–‡å­—æ°´å°ç­‰åŠŸèƒ½ã€‚</p><p><img src="https://pics5.baidu.com/feed/21a4462309f79052ecb79e57c617c4c67acbd524.jpeg@f_auto?token=0fe5a25ab42c26d05cac718dda689309" alt="img"></p><p>4.è€ç‹å›¾åºŠï¼ˆåˆç§°é¸¡éœ¸å›¾åºŠï¼‰</p><p>åœ°å€ï¼š<a href="https://img.gejiba.com/">https://img.gejiba.com/</a></p><p>ä»‹ç»ï¼šæ— éœ€æ³¨å†Œï¼Œå¯ä»¥ä¸Šä¼  JPG PNG BMP GIF WEBP ç­‰æ ¼å¼ï¼Œæ”¯æ˜¯å›½å†…æœåŠ¡å™¨å’Œ CDNï¼Œå›¾ç‰‡åŠ è½½é€Ÿåº¦æ•™å¿«ã€‚</p><p><img src="https://pics3.baidu.com/feed/b151f8198618367ac71b596be49798d8b11ce5e2.jpeg@f_auto?token=204a4bcf94d471233d1870832a7ea69b" alt="img"></p><p>5.å°é¸­å›¾åºŠ</p><p>åœ°å€ï¼š<a href="http://image.kypeople.cn/">http://image.kypeople.cn/</a></p><p>ä»‹ç»ï¼šä¾æ‰˜äºè…¾è®¯äº‘å‚¨å­˜ä¸CDNåŠ é€Ÿï¼Œå›½å†…è®¿é—®é€Ÿåº¦è¿˜å¯ä»¥ï¼Œå•ä¸ªæœ€å¤§ä¸Šä¼ 4Mã€‚</p><p><img src="https://pics0.baidu.com/feed/10dfa9ec8a1363271d01395d5a6bb3e00afac7e5.jpeg@f_auto?token=5a1de9f15638e0f547735c0f451464dd" alt="img"></p><p>6.TGå›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://imgtg.com/">https://imgtg.com/</a></p><p>ä»‹ç»ï¼šå¤šå¹´è€å›¾åºŠï¼Œæœ‰å›½å†…ç™¾åº¦äº‘cdnèŠ‚ç‚¹åŠ é€Ÿï¼Œåœ¨ä¸Šä¼ æµ‹è¯•ä¸­ï¼ŒGIFä¸Šä¼ é€Ÿåº¦çº¦ 2 ç§’ã€‚å›¾ç‰‡ä¸Šä¼ é™åˆ¶ï¼šæ¯ä¸ªå›¾ç‰‡æœ€å¤§5Mã€‚</p><p><img src="https://pics6.baidu.com/feed/4bed2e738bd4b31c965f813c493234739c2ff8c2.jpeg@f_auto?token=5246162d00e6402b2b61bf6008d3b94e" alt="img"></p><p>7.moetoå›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://moetu.org/">https://moetu.org/</a></p><p>ä»‹ç»ï¼šå…è´¹ï¼Œå›¾ç‰‡ä¸Šä¼ é™åˆ¶ï¼šæ¯ä¸ªå›¾ç‰‡æœ€å¤§20Mã€‚moetuå›¾åºŠé™¤äº†è¿æ¥ç¨³å®šä¸Šä¼ å¤–ï¼Œè¿˜æ”¯æŒå›¾ç‰‡åˆ†ç±»ã€æœç´¢ç­‰åŠŸèƒ½ã€‚äº²æµ‹ç½‘ç«™æ‰“å¼€æœ‰ä¸€äº›ç¼“æ…¢ï¼Œã€‚</p><p><img src="https://pics6.baidu.com/feed/6d81800a19d8bc3e79803459496fb512aad3458d.jpeg@f_auto?token=896be0f0ca905f593b181ca64b73a841" alt="img"></p><p>8.ä¸ƒå–œå›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://7up.pics/">https://7up.pics/</a></p><p>ä»‹ç»ï¼šä¸€ä¸ªå°ä¼—å›¾åºŠï¼Œä½¿ç”¨ä½“éªŒè¿˜å¯ä»¥ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œå•ä¸ªæœ€å¤§ä¸Šä¼ 5Mã€‚</p><p><img src="https://pics2.baidu.com/feed/7e3e6709c93d70cf37f449bb3238c20cbba12b6e.jpeg@f_auto?token=89c4034fa268a42f8f0ac8ad3292220b" alt="img"></p><p>9.Z4Aå›¾åºŠ</p><p>åœ°å€ï¼š<a href="https://www.z4a.net/">https://www.z4a.net/</a></p><p>ä»‹ç»ï¼šéœ€è¦æ³¨å†Œæ‰èƒ½ä½¿ç”¨ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œæ”¯æŒ JPG PNG BMP GIF WEBP ç­‰æ ¼å¼ï¼Œç…§ç‰‡æœ€å¤§å¯ä¸Šä¼ 64Mã€‚</p><p><img src="https://pics4.baidu.com/feed/b7fd5266d016092487d746ad1ae326f6e4cd3482.jpeg@f_auto?token=081aff668d129505619dbefe2af2de2e" alt="img"></p><p>10.å›¾ä»“</p><p>åœ°å€ï¼š<a href="https://www.imagehub.cc/">https://www.imagehub.cc/</a></p><p>ä»‹ç»ï¼šå…è´¹å›¾ç‰‡æ‰˜ç®¡,ä¸“ä¸šå›¾ç‰‡å¤–é“¾,å…è´¹å›¾åºŠ,å…¬ç›Šå›¾åºŠ,å…è´¹ç›¸å†Œ,æ”¯æŒç›¸å†ŒåŠ å¯†,æ”¯æŒå›¾ç‰‡æ‰¹é‡ä¸Šä¼ ,åŸå›¾ä¿å­˜,ä¸é™ç©ºé—´,ä¸é™æµé‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1.è·¯è¿‡å›¾åºŠ&lt;/p&gt;
&lt;p&gt;åœ°å€ï¼š&lt;a href=&quot;https://imgse.com/&quot;&gt;https://imgse.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»‹ç»ï¼šå›½å†…æ¯”è¾ƒçŸ¥åçš„å›¾åºŠï¼Œç”¨æˆ·ä½¿ç”¨è¾ƒå¤šçš„å›¾åºŠå·¥å…·ä¹‹ä¸€ï¼Œå…è´¹ï¼Œä½†æ˜¯é¡µé¢æœ‰å°‘é‡å¹¿å‘Šã€‚é«˜é€Ÿç¨³å®šçš„å›¾ç‰‡ä¸Šä¼ å’Œå¤–é“¾æœåŠ¡ï¼Œå…¨çƒCDNåŠ </summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
  </entry>
  
  <entry>
    <title>Vueé‡åˆ°çš„é—®é¢˜</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/10/Vue/vue%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/10/Vue/vue%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2024-03-10T01:17:15.000Z</published>
    <updated>2024-03-16T08:10:44.396Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined"><a href="#vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined" class="headerlink" title="vue router é…ç½® component æŠ¥é”™ TypeError: Cannot use â€˜inâ€™ operator to search for â€˜catchâ€™ in undefined"></a>vue router é…ç½® component æŠ¥é”™ TypeError: Cannot use â€˜inâ€™ operator to search for â€˜catchâ€™ in undefined</h1><h3 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h3><p>åœ¨é…ç½®è·¯ç”±æ–‡ä»¶æ—¶ï¼Œå¼€å§‹æ—¶componentä¸å°å¿ƒå†™æˆä¸‹é¢çš„æ ¼å¼</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240316160919.png"></p><p>æ‰“å¼€é¡µé¢æ§åˆ¶å°æŠ¥é”™å¦‚ä¸‹<br><img src="https://img2024.cnblogs.com/blog/1857566/202401/1857566-20240125155259068-1305464985.png" alt="image"></p><h3 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>å¼•å…¥ç»„ä»¶çš„ç®­å¤´å‡½æ•°å¿˜è®°å†™è¿”å›<br><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1857566-20240125155440938-641076154.png"><br>æˆ–è€…å†™æˆä¸€è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1857566-20240125155334913-156267822.png"></p><blockquote><p>ç›¸å½“ä½çº§çš„é”™è¯¯ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;vue-router-é…ç½®-component-æŠ¥é”™-TypeError-Cannot-use-â€˜inâ€™-operator-to-search-for-â€˜catchâ€™-in-undefined&quot;&gt;&lt;a href=&quot;#vue-router-é…ç½®-component-</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Vue3 å°è£…ä¸€äº›æœ‰ç”¨çš„ç»„åˆ API</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/09/Vue/%E4%BD%BF%E7%94%A8%20Vue3%20%E5%B0%81%E8%A3%85%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E7%BB%84%E5%90%88%20API/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/09/Vue/%E4%BD%BF%E7%94%A8%20Vue3%20%E5%B0%81%E8%A3%85%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E7%BB%84%E5%90%88%20API/</id>
    <published>2024-03-09T08:20:15.000Z</published>
    <updated>2024-03-10T06:02:57.482Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Vue3æ¥å°è£…ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„ç»„åˆAPIï¼Œä¸»è¦åŒ…æ‹¬èƒŒæ™¯ã€å®ç°æ€è·¯ä»¥åŠä¸€äº›æ€è€ƒã€‚</p><p>å°±æˆ‘è‡ªå·±çš„æ„Ÿè§‰è€Œè¨€ï¼Œ<code>Hook</code>ä¸<code>Composition API</code>æ¦‚å¿µæ˜¯å¾ˆç±»ä¼¼çš„ï¼Œäº‹å®ä¸Šåœ¨Reactå¤§éƒ¨åˆ†å¯ç”¨çš„Hookéƒ½å¯ä»¥ä½¿ç”¨Vue3å†å®ç°ä¸€éã€‚</p><p>ä¸ºäº†æ‹¼å†™æ–¹ä¾¿ï¼Œä¸‹æ–‡å†…å®¹å‡ä½¿ç”¨Hookä»£æ›¿<code>Composition API</code>ã€‚</p><h2 id="useRequest"><a href="#useRequest" class="headerlink" title="useRequest"></a>useRequest</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä½¿ç”¨hookæ¥å°è£…ä¸€ç»„æ•°æ®çš„æ“ä½œæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„<code>useBook</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchBookList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useBook</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> list = <span class="title function_">ref</span>([])</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchBookList</span>(&#123;<span class="attr">page</span>: <span class="number">1</span>&#125;)</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        list.<span class="property">value</span> = data</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getList</span>()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        list,</span><br><span class="line">        loading,</span><br><span class="line">        getList</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å°è£…äº†è·å–èµ„æºã€å¤„ç†åŠ è½½çŠ¶æ€ç­‰é€»è¾‘ï¼Œçœ‹èµ·æ¥è²Œä¼¼èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†</p><p>ç¼ºç‚¹åœ¨äºå¯¹åº”å¦å¤–ä¸€ä¸ªèµ„æºè€Œè¨€ï¼Œæˆ‘ä»¬è²Œä¼¼è¿˜éœ€è¦å†™ç±»ä¼¼çš„æ¨¡æ¿ä»£ç ï¼Œå› æ­¤å¯ä»¥å°†è¿™ä¸€å †ä»£ç è¿›è¡ŒæŠ½è±¡ï¼Œå°è£…æˆ<code>useApi</code>æ–¹æ³•</p><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useApi</span>(<span class="params">api</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> error = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fetchResource</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">api</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æŒ‰ç…§çº¦å®šï¼Œapiè¿”å›çš„ç»“æœç›´æ¥å¤åˆ¶ç»™result</span></span><br><span class="line">            result.<span class="property">value</span> = data</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            error.<span class="property">value</span> = e</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        result,</span><br><span class="line">        fetchResource</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ä¸Šé¢çš„<code>useBook</code>æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useBook2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;loading, error, result, fetchResource,&#125; = <span class="title function_">useApi</span>(fetchBookList)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">fetchResource</span>(&#123;<span class="attr">page</span>: <span class="number">1</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        <span class="attr">list</span>: result</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„æ–¹æ³•ï¼Œå‡è®¾ç°åœ¨éœ€æ±‚å°è£…å…¶ä»–çš„è¯·æ±‚ï¼Œå¤„ç†èµ·æ¥ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä¸éœ€è¦å†ä¸€ééåœ°å¤„ç†loadingå’Œerrorç­‰æ ‡å¿—é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchUserList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> payload = &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">                <span class="attr">data</span>: [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>],</span><br><span class="line">                <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">resolve</span>(payload)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;loading, error, result, fetchResource,&#125; = <span class="title function_">useApi</span>(<span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å°è£…è¯·æ±‚è¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetchUserList</span>(params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>å¤„ç†ç½‘ç»œè¯·æ±‚æ˜¯å‰ç«¯å·¥ä½œä¸­ååˆ†å¸¸è§çš„é—®é¢˜ï¼Œå¤„ç†ä¸Šé¢åˆ—ä¸¾åˆ°çš„åŠ è½½ã€é”™è¯¯å¤„ç†ç­‰ï¼Œè¿˜å¯ä»¥åŒ…å«å»æŠ–ã€èŠ‚æµã€è½®è¯¢ç­‰å„ç§æƒ…å†µï¼Œè¿˜æœ‰ç¦»å¼€é¡µé¢æ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥åœ¨<code>useRequest</code>ä¸­è¿›ä¸€æ­¥å°è£…çš„</p><h2 id="useEventBus"><a href="#useEventBus" class="headerlink" title="useEventBus"></a>useEventBus</h2><p>EventBusåœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œäº‹ä»¶é€šçŸ¥çš„åœºæ™¯ä¸‹è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ï¼Œé€šè¿‡ç›‘å¬äº‹ä»¶å’Œè§¦å‘äº‹ä»¶ï¼Œå¯ä»¥åœ¨è®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´è§£è€¦ï¼Œå®ç°ä¸€ä¸ªå¸¸è§„çš„eventBusä¹Ÿæ¯”è¾ƒç®€å•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventBus</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">on</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!handlers) &#123;</span><br><span class="line">            handlers = []</span><br><span class="line">        &#125;</span><br><span class="line">        handlers.<span class="title function_">push</span>(cb)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">off</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!handlers) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">            <span class="keyword">const</span> idx = handlers.<span class="title function_">indexOf</span>(cb)</span><br><span class="line">            idx &gt; -<span class="number">1</span> &amp;&amp; handlers.<span class="title function_">splice</span>(idx, <span class="number">1</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">delete</span>(key)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">once</span>(<span class="params">key, cb</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = [<span class="function">(<span class="params">payload</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">cb</span>(payload)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">off</span>(key)</span><br><span class="line">        &#125;]</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">set</span>(key, handlers)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">emit</span>(<span class="params">key, payload</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handlers = <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">get</span>(key)</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(handlers)) <span class="keyword">return</span></span><br><span class="line">        handlers.<span class="title function_">forEach</span>(<span class="function"><span class="params">handler</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">handler</span>(payload)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ç›‘å¬äº‹ä»¶ï¼Œåœ¨äº¤äº’æ—¶è§¦å‘äº‹ä»¶ï¼Œè¿™äº›æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ï¼›ä½†å¾ˆå®¹æ˜“è¢«é—å¿˜çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆäº‹ä»¶æ³¨å†Œï¼Œé‡Šæ”¾ç›¸å…³çš„èµ„æºã€‚</p><p>å› æ­¤å¯ä»¥å°è£…ä¸€ä¸ª<code>useEventBus</code>æ¥å£ï¼Œç»Ÿä¸€å¤„ç†è¿™äº›é€»è¾‘</p><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>æ—¢ç„¶è¦åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆæ³¨å†Œçš„ç›¸å…³äº‹ä»¶ï¼Œç®€å•çš„å®ç°æ€è·¯æ˜¯ï¼šåªè¦åœ¨æ³¨å†Œæ—¶(<code>on</code>å’Œ<code>once</code>)æ”¶é›†ç›¸å…³çš„äº‹ä»¶å’Œå¤„ç†å‡½æ•°ï¼Œç„¶ååœ¨<code>onUnmounted</code>çš„æ—¶å€™å–æ¶ˆ(<code>off</code>)æ”¶é›†åˆ°çš„è¿™äº›äº‹ä»¶å³å¯</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥åŠ«æŒäº‹ä»¶æ³¨å†Œçš„æ–¹æ³•ï¼ŒåŒæ—¶é¢å¤–åˆ›å»ºä¸€ä¸ª<code>eventMap</code>ç”¨äºæ”¶é›†ä½¿ç”¨å½“å‰æ¥å£æ³¨å†Œçš„äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶æ€»çº¿ï¼Œå…¨å±€å•ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="keyword">new</span> <span class="title class_">EventBus</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useEventBus</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> instance = &#123;</span><br><span class="line">        <span class="attr">eventMap</span>: <span class="keyword">new</span> <span class="title class_">Map</span>(),</span><br><span class="line">        <span class="comment">// å¤ç”¨eventBusäº‹ä»¶æ”¶é›†ç›¸å…³é€»è¾‘</span></span><br><span class="line">        <span class="attr">on</span>: bus.<span class="property">on</span>,</span><br><span class="line">        <span class="attr">once</span>: bus.<span class="property">once</span>,</span><br><span class="line">        <span class="comment">// æ¸…ç©ºeventMap</span></span><br><span class="line">        <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">eventMap</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">list, key</span>) =&gt;</span> &#123;</span><br><span class="line">                list.<span class="title function_">forEach</span>(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">                    bus.<span class="title function_">off</span>(key, cb)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">            eventMap.<span class="title function_">clear</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> eventMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">    <span class="comment">// åŠ«æŒä¸¤ä¸ªç›‘å¬æ–¹æ³•ï¼Œæ”¶é›†å½“å‰ç»„ä»¶å¯¹åº”çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">on</span> = (<span class="params">key, cb</span>) =&gt; &#123;</span><br><span class="line">        instance.<span class="title function_">on</span>(key, cb)</span><br><span class="line">        bus.<span class="title function_">on</span>(key, cb)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">once</span> = (<span class="params">key, cb</span>) =&gt; &#123;</span><br><span class="line">        instance.<span class="title function_">once</span>(key, cb)</span><br><span class="line">        bus.<span class="title function_">once</span>(key, cb)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆç›¸å…³çš„äº‹ä»¶</span></span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        instance.<span class="title function_">clear</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        on,</span><br><span class="line">        once,</span><br><span class="line">        <span class="attr">off</span>: bus.<span class="property">off</span>.<span class="title function_">bind</span>(bus),</span><br><span class="line">        <span class="attr">emit</span>: bus.<span class="property">emit</span>.<span class="title function_">bind</span>(bus)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“ç»„ä»·å¸è½½æ—¶ä¹Ÿä¼šé€šè¿‡<code>instance.clear</code>ç§»é™¤è¯¥ç»„ä»¶æ³¨å†Œçš„ç›¸å…³äº‹ä»¶ï¼Œæ¯”èµ·æ‰‹åŠ¨åœ¨æ¯ä¸ªç»„ä»¶<code>onUnmounted</code>æ—¶æ‰‹åŠ¨å–æ¶ˆè¦æ–¹ä¾¿å¾ˆå¤šã€‚</p><h3 id="æ€è€ƒ-1"><a href="#æ€è€ƒ-1" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>è¿™ä¸ªæ€è·¯å¯ä»¥è¿ç”¨åœ¨å¾ˆå¤šéœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œæ¸…ç†æ“ä½œçš„é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p><ul><li>DOMäº‹ä»¶æ³¨å†Œ<code>addEventListener</code>å’Œ<code>removeEventListener</code></li><li>è®¡æ—¶å™¨<code>setTimeout</code>å’Œ<code>clearTimeout</code></li><li>ç½‘ç»œè¯·æ±‚<code>request</code>å’Œ<code>abort</code></li></ul><p>ä»è¿™ä¸ªå°è£…ä¹Ÿå¯ä»¥çœ‹è§ç»„åˆAPIä¸€ä¸ªéå¸¸æ˜æ˜¾çš„ä¼˜åŠ¿ï¼šå°½å¯èƒ½åœ°æŠ½è±¡å…¬å…±é€»è¾‘ï¼Œè€Œæ— éœ€å…³æ³¨æ¯ä¸ªç»„ä»¶å…·ä½“çš„ç»†èŠ‚</p><h2 id="useModel"><a href="#useModel" class="headerlink" title="useModel"></a>useModel</h2><h3 id="èƒŒæ™¯-1"><a href="#èƒŒæ™¯-1" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å½“æŒæ¡äº†Hookï¼ˆæˆ–è€…Composition APIï¼‰ä¹‹åï¼Œæ„Ÿè§‰ä¸‡ç‰©çš†å¯hookï¼Œæ€»æ˜¯æƒ³æŠŠæ•°æ®å’Œæ“ä½œè¿™å †æ•°æ®çš„æ–¹æ³•å°è£…åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚ä¸‹é¢çš„è®¡æ•°å™¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        count.<span class="property">value</span>--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        count.<span class="property">value</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        decrement,</span><br><span class="line">        increment</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>useCounter</code>æš´éœ²äº†è·å–å½“å‰æ•°å€¼countã€å¢åŠ æ•°å€¼decrementå’Œå‡å°‘æ•°å€¼incrementç­‰æ•°æ®å’Œæ–¹æ³•ï¼Œç„¶åå°±å¯ä»¥åœ¨å„ä¸ªç»„ä»¶ä¸­æ„‰å¿«åœ°å®ç°è®¡æ•°å™¨äº†</p><p>åœ¨æŸäº›åœºæ™¯ä¸‹æˆ‘ä»¬å¸Œæœ›å¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«åŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç»„ä»¶è‡ªå·±ç‹¬ç«‹çš„è®¡æ•°å™¨ã€‚</p><p>ä¸€ç§æƒ…å†µæ˜¯ä½¿ç”¨è¯¸å¦‚vuexç­‰å…¨å±€çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œç„¶åä¿®æ”¹<code>useCounter</code>çš„å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">            state.<span class="property">count</span> = payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°å®ç°<code>useCounter</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> store.<span class="property">state</span>.<span class="property">count</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;setCount&#x27;</span>, count.<span class="property">value</span> + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;setCount&#x27;</span>, count.<span class="property">value</span> + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        decrement,</span><br><span class="line">        increment</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜¾ç„¶ï¼Œç°åœ¨çš„<code>useCounter2</code>ä»…ä»…åªæ˜¯storeçš„<code>state</code>ä¸<code>mutations</code>çš„å°è£…ï¼Œç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨storeä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œå°è£…å°±å˜å¾—æ„ä¹‰ä¸å¤§ï¼›æ­¤å¤–ï¼Œå¦‚æœå•å•åªæ˜¯ä¸ºäº†è¿™ä¸ªåŠŸèƒ½å°±ä¸ºé¡¹ç›®å¢åŠ äº†vuexä¾èµ–ï¼Œæ˜¾å¾—ååˆ†ç¬¨é‡ã€‚</p><p>åŸºäºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<code>useModel</code>æ¥å®ç°å¤ç”¨æŸä¸ªé’©å­çŠ¶æ€çš„éœ€æ±‚</p><h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>æ•´ä¸ªæ€è·¯ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ªMapæ¥ä¿å­˜æŸä¸ªhookçš„çŠ¶æ€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">WeakMap</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useModel</span>(<span class="params">hook</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!map.<span class="title function_">get</span>(hook)) &#123;</span><br><span class="line">        <span class="keyword">let</span> ans = <span class="title function_">hook</span>()</span><br><span class="line">        map.<span class="title function_">set</span>(hook, ans)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> map.<span class="title function_">get</span>(hook)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååŒ…è£…ä¸€ä¸‹<code>useCounter</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useModel</span>(useCounter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å¤šä¸ªç»„ä»¶è°ƒç”¨</span></span><br><span class="line"><span class="keyword">const</span> &#123;count, decrement, increment&#125; = <span class="title function_">useCounter3</span>()</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> &#123;count, decrement, increment&#125; = <span class="title function_">useCounter3</span>()</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>useCounter3</code>æ—¶ï¼Œéƒ½è¿”å›çš„æ˜¯åŒä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±å®ç°äº†å¤šä¸ªç»„ä»¶ä¹‹é—´çš„hookçŠ¶æ€å…±äº«ã€‚</p><h3 id="æ€è€ƒ-2"><a href="#æ€è€ƒ-2" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p><code>userModel</code>æä¾›äº†ä¸€ç§é™¤<code>vuex</code>å’Œ<code>provide()/inject()</code>ä¹‹å¤–å…±äº«æ•°æ®çŠ¶æ€çš„æ€è·¯ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆçµæ´»çš„ç®¡ç†æ•°æ®ä¸æ“ä½œæ•°æ®çš„æ–¹æ¡ˆï¼Œè€Œæ— éœ€å°†æ‰€æœ‰stateæ”¾åœ¨ä¸€èµ·æˆ–è€…æ¨¡å—ä¸‹é¢ã€‚</p><p>ç¼ºç‚¹åœ¨äºï¼Œå½“ä¸ä½¿ç”¨<code>useModel</code>åŒ…è£…æ—¶ï¼Œ<code>useCounter</code>å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„hookï¼ŒåæœŸç»´æŠ¤è€Œè¨€ï¼Œæˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­æŸä¸ªçŠ¶æ€åˆ°åº•æ˜¯å…¨å±€å…±äº«çš„æ•°æ®è¿˜æ˜¯å±€éƒ¨çš„æ•°æ®ã€‚</p><p>å› æ­¤åœ¨ä½¿ç”¨<code>useModel</code>å¤„ç†hookçš„å…±äº«çŠ¶æ€æ—¶ï¼Œè¿˜è¦è¦æ…é‡è€ƒè™‘ä¸€ä¸‹åˆ°åº•åˆä¸åˆé€‚ã€‚</p><h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><p>reduxçš„æ€æƒ³å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸º</p><ul><li>storeç»´æŠ¤å…¨å±€çš„stateæ•°æ®çŠ¶æ€ï¼Œ</li><li>å„ä¸ªç»„ä»¶å¯ä»¥æŒ‰éœ€ä½¿ç”¨stateä¸­çš„æ•°æ®ï¼Œå¹¶ç›‘å¬stateçš„å˜åŒ–</li><li><code>reducer</code>æ¥æ”¶actionå¹¶è¿”å›æ–°çš„stateï¼Œç»„ä»¶å¯ä»¥é€šè¿‡<code>dispatch</code>ä¼ é€’actionè§¦å‘reducer</li><li>stateæ›´æ–°åï¼Œé€šçŸ¥ç›¸å…³ä¾èµ–æ›´æ–°æ•°æ®</li></ul><p>æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†reduxçš„ä½¿ç”¨hookåŒ–ï¼Œç±»ä¼¼äº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>)&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®actionè¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="comment">// è¿”å›æ–°çš„state</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;state, dispatch&#125; = <span class="title function_">useReducer</span>(reducer, initialState);</span><br></pre></td></tr></table></figure><h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å€ŸåŠ©äºVueçš„æ•°æ®å“åº”ç³»ç»Ÿï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦å®ç°ä»»ä½•å‘å¸ƒå’Œè®¢é˜…é€»è¾‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">useReducer</span>(<span class="params">reducer, initialState = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">ref</span>(initialState)</span><br><span class="line">     <span class="comment">// çº¦å®šactionæ ¼å¼ä¸º &#123;type:string, payload: any&#125;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">dispatch</span> = (<span class="params">action</span>) =&gt; &#123;</span><br><span class="line">        state.<span class="property">value</span> = <span class="title function_">reducer</span>(state.<span class="property">value</span>, action)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        state,</span><br><span class="line">        dispatch</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå®ç°ä¸€ä¸ª<code>useRedux</code>è´Ÿè´£ä¼ é€’<code>reducer</code>å’Œ<code>action</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useReducer <span class="keyword">from</span> <span class="string">&#x27;./index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;reset&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> initialState;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useStore</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¸Œæœ›æ˜¯ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„storeï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„<code>useModel</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useRedux</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useModel</span>(useStore);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;dispatch(&#123;type:&#x27;decrement&#x27;&#125;)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; state.count &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;dispatch(&#123;type:&#x27;increment&#x27;&#125;)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;useReducer&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> &#123;state, dispatch&#125; = <span class="title function_">useStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      state,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dispatch</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥è·Ÿæˆ‘ä»¬ä¸Šé¢<code>useModel</code>çš„ä¾‹å­å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸»è¦æ˜¯æš´éœ²äº†é€šç”¨çš„<code>dispatch</code>æ–¹æ³•ï¼Œåœ¨reducerå¤„ç»´æŠ¤çŠ¶æ€å˜åŒ–çš„é€»è¾‘ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªuseCounterä¸­è‡ªå·±ç»´æŠ¤ä¿®æ”¹æ•°æ®çš„é€»è¾‘</p><h3 id="æ€è€ƒ-3"><a href="#æ€è€ƒ-3" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>å½“ç„¶è¿™ä¸ªreduxæ˜¯éå¸¸ç®€é™‹çš„ï¼ŒåŒ…æ‹¬ä¸­é—´ä»¶ã€<code>combineReducers</code>ã€<code>connect</code>ç­‰æ–¹æ³•å‡ä¸ºå®ç°ï¼Œä½†ä¹Ÿä¸ºæˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªæœ€åŸºæœ¬çš„reduxæ•°æ®æµè½¬è¿‡ç¨‹ã€‚</p><h2 id="useDebounceä¸useThrottle"><a href="#useDebounceä¸useThrottle" class="headerlink" title="useDebounceä¸useThrottle"></a>useDebounceä¸useThrottle</h2><h3 id="èƒŒæ™¯-2"><a href="#èƒŒæ™¯-2" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å‰ç«¯å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹éƒ½éœ€è¦å¤„ç†èŠ‚æµæˆ–å»æŠ–çš„åœºæ™¯ï¼ŒèŠ‚æµå‡½æ•°å’Œå»æŠ–å‡½æ•°æœ¬èº«æ²¡æœ‰å‡å°‘äº‹ä»¶çš„è§¦å‘æ¬¡æ•°ï¼Œè€Œæ˜¯æ§åˆ¶äº‹ä»¶å¤„ç†å‡½æ•°çš„æ‰§è¡Œæ¥å‡å°‘å®é™…é€»è¾‘å¤„ç†è¿‡ç¨‹ï¼Œä»è€Œæé«˜æµè§ˆå™¨æ€§èƒ½ã€‚</p><p>ä¸€ä¸ªå»æŠ–çš„åœºæ™¯æ˜¯ï¼šåœ¨æœç´¢æ¡†ä¸­æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æœç´¢å…³è”çš„å†…å®¹å¹¶ä¸‹æ‹‰å±•ç¤ºï¼Œç”±äºinputæ˜¯ä¸€ä¸ªè§¦å‘é¢‘ç‡å¾ˆé«˜çš„äº‹ä»¶ï¼Œä¸€èˆ¬éœ€è¦ç­‰åˆ°ç”¨æˆ·åœæ­¢è¾“å‡ºæ–‡æœ¬ä¸€æ®µæ—¶é—´åæ‰å¼€å§‹è¯·æ±‚æ¥å£æŸ¥è¯¢æ•°æ®ã€‚</p><p>å…ˆæ¥å®ç°æœ€åŸå§‹çš„ä¸šåŠ¡é€»è¾‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, watch&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">cb, delay = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>,</span><br><span class="line">            context = <span class="variable language_">this</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useAssociateSearch</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keyword = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">search</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;search...&#x27;</span>, keyword.<span class="property">value</span>)</span><br><span class="line">        <span class="comment">// mock è¯·æ±‚æ¥å£è·å–æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// watch(keyword, search) // åŸå§‹é€»è¾‘ï¼Œæ¯æ¬¡å˜åŒ–éƒ½è¯·æ±‚</span></span><br><span class="line">    <span class="title function_">watch</span>(keyword, <span class="title function_">debounce</span>(search, <span class="number">1000</span>)) <span class="comment">// å»æŠ–ï¼Œåœæ­¢æ“ä½œ1ç§’åå†è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        keyword</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨è§†å›¾ä¸­å¼•å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;useAssociateSearch&#125; <span class="keyword">from</span> <span class="string">&quot;../useDebounce&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;useDebounce&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123;keyword&#125; = <span class="title function_">useAssociateSearch</span>()</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      keyword</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸<code>useApi</code>åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªdebounceçš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œï¼Œå°è£…æˆä¸€ä¸ªé€šç”¨çš„<code>useDebounce</code></p><h3 id="å®ç°useDebounce"><a href="#å®ç°useDebounce" class="headerlink" title="å®ç°useDebounce"></a>å®ç°useDebounce</h3><p>è²Œä¼¼ä¸éœ€è¦æˆ‘ä»¬å†é¢å¤–ç¼–å†™ä»»ä½•ä»£ç ï¼Œç›´æ¥å°†<code>debounce</code>æ–¹æ³•é‡å‘½åä¸º<code>useDebounce</code>å³å¯ï¼Œä¸ºäº†å‡‘å­—æ•°ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ”¹è£…ä¸€ä¸‹ï¼ŒåŒæ—¶å¢åŠ cancelæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useDebounce</span>(<span class="params">cb, delay = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> handler = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer.<span class="property">value</span>)</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>,</span><br><span class="line">            context = <span class="variable language_">this</span></span><br><span class="line">        timer.<span class="property">value</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">cancel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        handler,</span><br><span class="line">        cancel</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°useThrottle"><a href="#å®ç°useThrottle" class="headerlink" title="å®ç°useThrottle"></a>å®ç°useThrottle</h3><p>èŠ‚æµä¸å»æŠ–çš„å°è£…æ–¹å¼åŸºæœ¬ç›¸åŒï¼Œåªè¦çŸ¥é“<code>throttle</code>çš„å®ç°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useThrottle</span>(<span class="params">cb, duration = <span class="number">100</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> start = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">        <span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">        <span class="keyword">if</span> (now - start &gt;= duration) &#123;</span><br><span class="line">            cb.<span class="title function_">apply</span>(context, args)</span><br><span class="line">            start = now</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒ-4"><a href="#æ€è€ƒ-4" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p>ä»å»æŠ–&#x2F;èŠ‚æµçš„å½¢å¼å¯ä»¥çœ‹å‡ºï¼ŒæŸäº›hookä¸æˆ‘ä»¬ä¹‹å‰çš„å·¥å…·å‡½æ•°å¹¶æ²¡æœ‰ååˆ†æ˜æ˜¾çš„è¾¹ç•Œã€‚æ˜¯å°†æ‰€æœ‰ä»£ç ç»Ÿä¸€hookåŒ–ï¼Œè¿˜æ˜¯ä¿ç•™åŸæ¥å¼•å…¥å·¥å…·å‡½æ•°çš„é£æ ¼ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦æ€è€ƒå’Œå®è·µçš„é—®é¢˜</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>æœ¬æ–‡ä¸»è¦å±•ç¤ºäº†å‡ ç§Hookçš„å°è£…æ€è·¯å’Œç®€å•å®ç°</p><ul><li><code>useRequest</code>ç”¨äºç»Ÿä¸€ç®¡ç†ç½‘ç»œè¯·æ±‚ç›¸å…³çŠ¶æ€ï¼Œè€Œæ— éœ€åœ¨æ¯æ¬¡ç½‘ç»œè¯·æ±‚ä¸­é‡å¤å¤„ç†loadingã€errorç­‰é€»è¾‘</li><li><code>useEventBus</code>å®ç°äº†åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨å–æ¶ˆå½“å‰ç»„ä»¶ç›‘å¬çš„äº‹ä»¶ï¼Œæ— éœ€é‡å¤ç¼–å†™<code>onUnmounted</code>ä»£ç ï¼Œè¿™ä¸ªæ€è·¯ä¹Ÿå¯ä»¥ç”¨äºDOMäº‹ä»¶ã€å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç­‰æ³¨å†Œå’Œå–æ¶ˆ</li><li><code>useModel</code>å®ç°äº†åœ¨å¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä¸ªhookçŠ¶æ€ï¼Œå±•ç¤ºäº†ä¸€ç§é™¤vuexã€<code>provide/inject</code>å‡½æ•°ä¹‹å¤–è·¨ç»„ä»¶å…±äº«æ•°æ®çš„æ–¹æ¡ˆ</li><li><code>useReducer</code>åˆ©ç”¨hookå®ç°äº†ä¸€ä¸ªç®€æ˜“ç‰ˆçš„<code>redux</code>ï¼Œå¹¶ä¸”åˆ©ç”¨<code>useModel</code>å®ç°äº†å…¨å±€çš„store</li><li><code>useDebounce</code>ä¸<code>useThrottle</code>ï¼Œå®ç°äº†å»æŠ–å’ŒèŠ‚æµï¼Œå¹¶æ€è€ƒäº†hookåŒ–çš„ä»£ç é£æ ¼ä¸å¸¸è§„çš„utilä»£ç é£æ ¼ï¼Œä»¥åŠæ˜¯å¦æœ‰å¿…è¦å°†æ‰€æœ‰çš„ä¸œè¥¿éƒ½hookåŒ–</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Vue3æ¥å°è£…ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„ç»„åˆAPIï¼Œä¸»è¦åŒ…æ‹¬èƒŒæ™¯ã€å®ç°æ€è·¯ä»¥åŠä¸€äº›æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;å°±æˆ‘è‡ªå·±çš„æ„Ÿè§‰è€Œè¨€ï¼Œ&lt;code&gt;Hook&lt;/code&gt;ä¸&lt;code&gt;Composition API&lt;/code&gt;æ¦‚å¿µæ˜¯å¾ˆç±»ä¼¼çš„ï¼Œäº‹å®ä¸Šåœ¨Reactå¤§éƒ¨åˆ†å¯ç”¨çš„Hoo</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå…«è‚¡æ–‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/JavaScript%E5%85%AB%E8%82%A1%E6%96%87/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/JavaScript%E5%85%AB%E8%82%A1%E6%96%87/</id>
    <published>2024-03-07T15:31:36.000Z</published>
    <updated>2024-04-03T03:48:22.285Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-å˜é‡"><a href="#JavaScript-å˜é‡" class="headerlink" title="JavaScript å˜é‡"></a>JavaScript å˜é‡</h1><h2 id="varã€letã€const-çš„å·®å¼‚ï¼Ÿ"><a href="#varã€letã€const-çš„å·®å¼‚ï¼Ÿ" class="headerlink" title="varã€letã€const çš„å·®å¼‚ï¼Ÿ"></a>varã€letã€const çš„å·®å¼‚ï¼Ÿ</h2><h3 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h3><p><code>var</code>ã€<code>let</code>ã€<code>const</code> ä¸‰è€…éƒ½å¯ä»¥å£°æ˜å˜é‡ã€‚å˜é‡å¯ä»¥çœ‹ä½œç›’å­ï¼Œå˜é‡åå°±æ˜¯ç›’å­åç§°ï¼Œå€¼æ˜¯æ”¾åœ¨ç›’å­é‡Œçš„ä¸œè¥¿ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var å£°æ˜å˜é‡ï¼Œåˆå§‹å€¼å¯é€‰</span></span><br><span class="line"><span class="keyword">var</span> name;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Lucy&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let å£°æ˜å˜é‡ï¼Œåˆå§‹å€¼å¯é€‰</span></span><br><span class="line"><span class="keyword">let</span> age;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const å£°æ˜å¸¸é‡ï¼Œå¿…é¡»è¦èµ‹åˆå§‹å€¼</span></span><br><span class="line"><span class="keyword">const</span> city = <span class="string">&quot;Beijing&quot;</span>;</span><br><span class="line"><span class="comment">// å¦‚æœç»™å¸¸é‡é‡æ–°èµ‹å€¼ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> city = <span class="string">&quot;Shanghai&quot;</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;city&#x27; has alre ady been declared</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå¸¸é‡çš„å€¼æ˜¯å¯¹è±¡ï¼ˆæ•°ç»„ï¼‰ï¼Œä¸å¯ä»¥ä¿®æ”¹å¸¸é‡æŒ‡å‘çš„å¼•ç”¨ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹å¼•ç”¨çš„å€¼</span></span><br><span class="line"><span class="keyword">const</span> cities = [<span class="string">&quot;Beijing&quot;</span>];</span><br><span class="line">cities[<span class="number">0</span>] = [<span class="string">&quot;Shanghai&quot;</span>]; <span class="comment">// &quot;Shanghai&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å·®å¼‚"><a href="#å·®å¼‚" class="headerlink" title="å·®å¼‚"></a>å·®å¼‚</h3><p><code>var</code>ã€<code>let</code>ã€<code>const</code> ä¸‰è€…çš„å·®å¼‚ï¼š</p><table><thead><tr><th></th><th>å®šä¹‰</th><th>ä½œç”¨åŸŸ</th><th>æš‚æ—¶æ€§æ­»åŒº</th><th>é‡å¤å£°æ˜å˜é‡</th><th>å…¨å±€å±æ€§</th></tr></thead><tbody><tr><td>const</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>let</td><td>å£°æ˜å˜é‡ï¼ˆES6 æ–°å¢ï¼‰</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>var</td><td>å£°æ˜å˜é‡</td><td>å‡½æ•°ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…ï¼‰</td><td>â</td><td>âœ…</td><td>âœ…</td></tr></tbody></table><p>æ³¨ï¼š</p><p>æš‚æ—¶æ€§æ­»åŒºï¼šTemporal dead zoneï¼ˆTDZï¼‰</p><p>å…¨å±€å±æ€§ï¼šæ˜¯å¦ä¼šè¢«æ·»åŠ åˆ° <code>window</code> æˆ– <code>globalThis</code> ç­‰å¯¹è±¡ä¸­</p><h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><p>ä»ä¸€ä¸ªä»£ç å—çš„å¼€å§‹ç›´åˆ°ä»£ç æ‰§è¡Œåˆ°å£°æ˜å˜é‡çš„è¡Œä¹‹å‰ï¼Œ<code>let</code> æˆ– <code>const</code> å£°æ˜çš„å˜é‡éƒ½å¤„äºâ€œæš‚æ—¶æ€§æ­»åŒºä¸­ã€‚ç®€å•ç†è§£ï¼š<code>let</code> æˆ– <code>const</code> åªèƒ½å…ˆå£°æ˜å†è®¿é—®ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¿é—® person å˜é‡</span></span><br><span class="line"><span class="comment">// å˜é‡ person ä½¿ç”¨ let å£°æ˜ï¼Œå£°æ˜ä¸ä¼šæå‡ï¼Œå› æ­¤æ­¤å¤„è®¿é—®ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person);  <span class="comment">// ReferenceError: person is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ person </span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Lucy&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œä½¿ç”¨ <code>const</code> å£°æ˜å˜é‡ï¼Œå¦‚æœåœ¨å£°æ˜å‰ä½¿ç”¨ï¼Œè¡¨ç°ä¸ <code>let</code> ä¸€è‡´ã€‚<code>var</code> å£°æ˜çš„å…¨å±€å˜é‡ä¼šè¿›è¡Œå˜é‡æå‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Lucy&quot;</span></span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><h3 id="å…¨å±€å±æ€§"><a href="#å…¨å±€å±æ€§" class="headerlink" title="å…¨å±€å±æ€§"></a>å…¨å±€å±æ€§</h3><p><code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«æ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>window </code>å’Œ <code>globalThis</code> è®¿é—®ï¼Œ<code>let</code> å’Œ <code>const</code> å£°æ˜çš„å…¨å±€å˜é‡åˆ™ä¸ä¼šæ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Lucy&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">name</span>); <span class="comment">// &quot;Lucy&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">name</span>); <span class="comment">// &quot;Lucy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">12</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">age</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">age</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gender = <span class="string">&quot;female&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">gender</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">gender</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="å°ç»ƒä¹ "><a href="#å°ç»ƒä¹ " class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä»¥ä¸‹ä»£ç è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">prop</span>: <span class="number">0</span> &#125;;</span><br><span class="line">obj.<span class="property">prop</span> = obj.<span class="property">prop</span> + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">prop</span>); <span class="comment">// 1. æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">obj = &#123;&#125;; <span class="comment">// 2. æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š1 å¤„è¾“å‡º 1ï¼Œ 2 å¤„æŠ¥é”™ï¼š â€œUncaught TypeError: Assignment to constant variableâ€ã€‚è¿™ä¸ <code>const</code> çš„ç‰¹æ€§æœ‰å…³ï¼Œ<code>const</code> ä»…ä»…æ„å‘³ç€<strong>å˜é‡åå’Œå€¼çš„ç»‘å®šæ˜¯ä¸å¯å˜çš„</strong>ï¼Œä½†æ˜¯å®ƒçš„å€¼å¯ä»¥æ˜¯å¯å˜çš„ï¼Œå¦‚ 1 å¤„ çš„å€¼ <code>&#123; prop: 0 &#125;</code> å°±å¯ä»¥æ›´æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š1 å¤„ <code>obj</code> çš„å€¼æ˜¯å¯¹è±¡ï¼Œå¯ä»¥æ”¹å˜ <code>obj</code> çš„å±æ€§ï¼Œç„¶è€Œä¸èƒ½é‡æ–°ç»™ <code>obj</code> èµ‹æ–°çš„å€¼ï¼ˆ2 å¤„ï¼‰ã€‚</p><hr><h2 id="è°ˆè°ˆä½œç”¨åŸŸ"><a href="#è°ˆè°ˆä½œç”¨åŸŸ" class="headerlink" title="è°ˆè°ˆä½œç”¨åŸŸ?"></a>è°ˆè°ˆä½œç”¨åŸŸ?</h2><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><blockquote><p>ä½œç”¨åŸŸæ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå€¼å’Œè¡¨è¾¾å¼åœ¨å…¶ä¸­â€œå¯è§â€æˆ–å¯è¢«è®¿é—®ã€‚</p></blockquote><h3 id="é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"><a href="#é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"></a>é™æ€ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸåˆ†ä¸ºé™æ€ä½œç”¨åŸŸï¼ˆåˆç§°ä¸ºè¯æ³•ä½œç”¨åŸŸï¼‰å’ŒåŠ¨æ€ä½œç”¨åŸŸï¼š</p><ul><li>é™æ€æ„å‘³ç€å®ƒä¸ä»£ç çš„ä½ç½®æœ‰å…³ï¼Œä¸æ‰§è¡Œä»£ç æ—¶çš„ç¯å¢ƒæ— å…³ã€‚JavaScript é‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸã€‚</li><li>åŠ¨æ€å³è¿è¡Œæ—¶ï¼Œä»£ç æ‰§è¡Œæ—¶ç¡®å®šçš„ã€‚</li></ul><h3 id="JavaScript-ä½œç”¨åŸŸ"><a href="#JavaScript-ä½œç”¨åŸŸ" class="headerlink" title="JavaScript ä½œç”¨åŸŸ"></a>JavaScript ä½œç”¨åŸŸ</h3><p>JavaScript çš„ä½œç”¨åŸŸå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š</p><ul><li><p>å…¨å±€ä½œç”¨åŸŸï¼šè„šæœ¬æ¨¡å¼è¿è¡Œæ‰€æœ‰ä»£ç çš„é»˜è®¤ä½œç”¨åŸŸ</p></li><li><p>å‡½æ•°ä½œç”¨åŸŸï¼šç”±å‡½æ•°åˆ›å»ºçš„ä½œç”¨åŸŸ</p></li><li><p>å—çº§ä½œç”¨åŸŸï¼šç”¨ä¸€å¯¹èŠ±æ‹¬å·ï¼ˆä¸€ä¸ªä»£ç å—ï¼‰åˆ›å»ºå‡ºæ¥çš„ä½œç”¨åŸŸ</p></li><li><p>æ¨¡å—ä½œç”¨åŸŸï¼šæ¨¡å—æ¨¡å¼ä¸­è¿è¡Œä»£ç çš„ä½œç”¨åŸŸ</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹å„ç§ä½œç”¨åŸŸçš„ç‰¹ç‚¹ã€‚</p><h3 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h3><p>JavaScript å˜é‡ä½œç”¨åŸŸæ˜¯åµŒå¥—çš„ï¼Œå®ƒä»¬å½¢æˆæ ‘ï¼š</p><ul><li><p>æœ€å¤–é¢çš„ä½œç”¨åŸŸæ˜¯æ ‘çš„æ ¹éƒ¨ï¼Œä¹Ÿå«å…¨å±€ä½œç”¨åŸŸã€‚</p></li><li><p>è¢«æœ€å¤–å±‚ä½œç”¨åŸŸåŒ…å«çš„ä½œç”¨åŸŸæ˜¯æ ¹çš„å­å­™ï¼Œå¦‚å„ç§åµŒå¥—çš„ä»£ç å—å½¢æˆçš„ä½œç”¨åŸŸã€‚</p></li></ul><p>å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡ç§°ä¸º<strong>å…¨å±€å˜é‡</strong>ï¼Œå¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸå†…è®¿é—®ã€‚æœ‰ä¸¤ç§å…¨å±€å˜é‡ï¼š</p><ul><li><p><strong>å…¨å±€å£°æ˜å˜é‡</strong>ï¼ˆdeclarative variablesï¼‰æ˜¯æ™®é€šå˜é‡ï¼Œåœ¨æœ€é¡¶çº§ç”± <code>const</code>ã€<code>let</code> å’Œ <code>class</code> å£°æ˜çš„å˜é‡ã€‚</p></li><li><p><strong>å…¨å±€å¯¹è±¡</strong>ï¼ˆobject variablesï¼‰æ˜¯å­˜å‚¨åœ¨å…¨å±€å¯¹è±¡ä¸­çš„å±æ€§ï¼š</p><ul><li>åœ¨æœ€é¡¶çº§ç”± <code>var</code> å’Œ <code>function</code> å£°æ˜ååˆ›å»ºçš„å˜é‡</li><li>å…¨å±€å¯¹è±¡å¯ä»¥é€šè¿‡ <code>globalThis</code> å’Œ <code>window</code> è®¿é—®ï¼Œå®ƒå¯ä»¥å¯¹å…¨å±€å¯¹è±¡å˜é‡è¿›è¡Œå¢åˆ æ”¹æŸ¥</li></ul></li></ul><p>å…¨å±€å±æ€§ <code>globalThis</code> åŒ…å«å…¨å±€çš„ <code>this</code> å€¼ï¼Œç±»ä¼¼äºå…¨å±€å¯¹è±¡ã€‚<code>globalThis</code> æä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼æ¥è·å–ä¸åŒç¯å¢ƒä¸‹çš„å…¨å±€ <code>this</code> å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡è‡ªèº«ï¼‰ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p><p>ä¸‹é¢çš„ä»£ç å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½ç†è§£ <code>globalThis</code> å’Œä¸¤ç§å…¨å±€å˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">const</span> declarativeVariable = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> objectVariable = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ‰€æœ‰è„šæœ¬å…±äº«åŒæ ·çš„é¡¶çº§ä½œç”¨åŸŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(declarativeVariable); <span class="comment">// &#x27;d&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(objectVariable); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ä¸æ˜¯æ‰€æœ‰å˜é‡éƒ½ä¼šåˆ›å»ºä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// æ­¤å¤„æœ€é¡¶å±‚ const åˆ›å»ºçš„æ˜¯å…¨å±€å£°æ˜å˜é‡ï¼Œä¸æ˜¯å…¨å±€å¯¹è±¡ï¼Œå› æ­¤ window å¯¹è±¡ä¸‹è®¿é—®ä¸º undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">declarativeVariable</span>); <span class="comment">// undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">objectVariable</span>); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// globalThis åŒ window è¡¨ç°ä¸€è‡´</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">declarativeVariable</span>); <span class="comment">// undefined  </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalThis.<span class="property">objectVariable</span>); <span class="comment">// &#x27;o&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿä»¥ä¸Šçš„ä»£ç ï¼Œå°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆæœ€é¡¶å±‚ <code>const</code> åˆ›å»ºçš„å˜é‡ï¼Œä½¿ç”¨ <code>window</code> è®¿é—®ä¾ç„¶æ˜¯ <code>undefined</code>ã€‚</p><h3 id="å‡½æ•°ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ</h3><p>å‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°ä½œç”¨åŸŸèŒƒå›´å†…è®¿é—®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">scope</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">var</span> address = <span class="string">&quot;Beijing&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(address); <span class="comment">// Uncaught ReferenceError: address is not defined </span></span><br></pre></td></tr></table></figure><h3 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸå¯¹å˜é‡æ¥è¯´ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºç¨‹åºèƒ½å¤Ÿè®¿é—®åˆ°å˜é‡çš„èŒƒå›´ï¼Œè¶…è¿‡ä½œç”¨åŸŸçš„å°±æ— æ³•è®¿é—®ã€‚</p><h4 id="let-å’Œ-const"><a href="#let-å’Œ-const" class="headerlink" title="let å’Œ const"></a><code>let</code> å’Œ <code>const</code></h4><p><code>let</code>ã€<code>const</code> æ”¯æŒå—çº§ä½œç”¨åŸŸã€‚å¦‚æœåœ¨ä»£ç å— <code>&#123;...&#125;</code> ä¸­ä½¿ç”¨ <code>let</code> æˆ– <code>const</code> å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡åªåœ¨è¯¥ä»£ç å—ä¸­å¯è§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">    <span class="comment">// ä½œç”¨åŸŸ Aï¼Œå¯ä»¥è®¿é—®å˜é‡ x</span></span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">0</span>; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 0</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½œç”¨åŸŸ Bï¼Œå¯ä»¥è®¿é—® xã€y</span></span><br><span class="line">        <span class="keyword">const</span> y  = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 0</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// 1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½œç”¨åŸŸ A å¤–ï¼Œä¸èƒ½è®¿é—® xã€y</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// æŠ¥é”™ï¼šUncaught ReferenceError: x is not defined</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š</p><ul><li>ä½œç”¨åŸŸ A æ˜¯å˜é‡ <code>x</code> çš„ä½œç”¨åŸŸ</li><li>ä½œç”¨åŸŸ B æ˜¯ä½œç”¨åŸŸ A çš„å†…éƒ¨ä½œç”¨åŸŸ</li><li>ä½œç”¨åŸŸ A æ˜¯ä½œç”¨åŸŸ B å¤–éƒ¨ä½œç”¨åŸŸ</li></ul><p>æ¯ä¸ªå˜é‡å¯è®¿é—®çš„èŒƒå›´æ˜¯å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸä»¥åŠè¯¥ä½œç”¨åŸŸæ‰€åµŒå¥—çš„å¤–éƒ¨ä½œç”¨åŸŸã€‚<code>let</code> å’Œ <code>const</code> å£°æ˜çš„å˜é‡æ˜¯å—çº§çš„ï¼Œå› æ­¤å®ƒä»¬ä½œç”¨åŸŸå§‹ç»ˆåœ¨å—ä¸­ã€‚åŒä¸€ä½œç”¨åŸŸå†…ï¼Œä¸å…è®¸å£°æ˜åŒåå˜é‡ã€‚å¦‚ä¸‹ç¤ºä¾‹ä»£ç ç”¨ <code>const</code> å£°æ˜åŒåå˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">2</span>; <span class="comment">// æŠ¥é”™ï¼šUncaught SyntaxError: Identifier &#x27;x&#x27; has already been declared</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸åŒä½œç”¨åŸŸä¸‹å¯ä»¥ä½¿ç”¨åŒåå˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">const</span> x = <span class="number">2</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="class"><a href="#class" class="headerlink" title="class"></a><code>class</code></h4><p><code>class</code> å£°æ˜çš„ç±»ä¹Ÿæ”¯æŒå—çº§ä½œç”¨åŸŸã€‚å¦‚ä¸‹é¢ä»£ç ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜äº† <code>Animal</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Animal</span>); <span class="comment">// class Animal &#123;&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ä»£ç å— <code>&#123;...&#125;</code> ä¸­åˆ›å»º <code>Animal</code>ï¼Œæ­¤æ—¶åœ¨ä»£ç å—å¤–éƒ¨å°±æ— æ³•è®¿é—® <code>Animal</code>äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">class Animal &#123;&#125;</span><br><span class="line">console.log(Animal) // class Animal &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(Animal); // Uncaught ReferenceError: Animal is not defined </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—ä½œç”¨åŸŸ"><a href="#æ¨¡å—ä½œç”¨åŸŸ" class="headerlink" title="æ¨¡å—ä½œç”¨åŸŸ"></a>æ¨¡å—ä½œç”¨åŸŸ</h3><p>æ¯ä¸ª ECMAScript æ¨¡å—ï¼ˆES6 Modulesï¼‰éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå› æ­¤ï¼Œåœ¨é¡¶çº§æ¨¡å—ä¸­å£°æ˜çš„å˜é‡ä¸æ˜¯å…¨å±€çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic.leetcode.cn/1675243681-ITEQCA-image.png#id=Usa3j&originHeight=485&originWidth=815&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä½œç”¨åŸŸæ˜¯å€¼æˆ–è€…è¡¨è¾¾å¼çš„å¯è®¿é—®èŒƒå›´ã€‚åˆ†ä¸ºé™æ€ä½œç”¨åŸŸï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰å’ŒåŠ¨æ€ä½œç”¨åŸŸï¼ŒJavaScript é‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸã€‚å…¶ä¸­ï¼Œåˆ†ä¸ºå››ç§ä¸åŒçš„ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸä»¥åŠæ¨¡å—ä½œç”¨åŸŸã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæ–‡ä¸­è¿˜æåˆ°äº†å„ç§å£°æ˜ä¸ä½œç”¨åŸŸçš„å…³ç³»ï¼Œä¸‹é¢æ€»ç»“ä¸€ä¸‹å„ç§å£°æ˜çš„å¼‚åŒã€‚æˆ‘ä»¬ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢æ¥çœ‹å„ç§å£°æ˜çš„å¼‚åŒï¼š</p><ul><li>ä½œç”¨åŸŸ</li><li>æš‚æ—¶æ€§æ­»åŒºï¼šå˜é‡ä½•æ—¶å¯ä»¥è®¿é—®ï¼Ÿä¸€äº›å˜é‡åœ¨è¿›å…¥ä½œç”¨åŸŸåå¯å°½å¿«è¢«è®¿é—®ï¼Œä½†æœ‰çš„å¿…é¡»ç­‰åˆ°ä»£ç æ‰§è¡Œåˆ°å®ƒä»¬å£°æ˜æ—¶æ‰å¯ä»¥è®¿é—®ã€‚é€šä¿—è¯´æ³•æ˜¯ï¼Œè¿™ä¸ªå˜é‡æ˜¯å¦å¯ä»¥å…ˆè®¿é—®å†å£°æ˜ã€‚æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼Œ Temporal Dead Zoneï¼‰ å°±æ˜¯å˜é‡åœ¨è¿›å…¥ä½œç”¨åŸŸå’Œæ‰§è¡Œå£°æ˜å‰çš„ä¸€æ®µæ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œè®¿é—®å˜é‡ä¼šæŠ¥é”™ã€‚</li><li>é‡å¤ï¼šå˜é‡æ˜¯å¦å¯ä»¥é‡å¤å£°æ˜ï¼ˆåŒçº§ä½œç”¨åŸŸä¸‹ï¼‰</li><li>å…¨å±€å±æ€§ï¼šå£°æ˜çš„å˜é‡æ˜¯å¦ä¼šè¢«æ·»åŠ åˆ°å…¨å±€å¯¹è±¡ä¸­</li></ul><table><thead><tr><th></th><th>å®šä¹‰</th><th>ä½œç”¨åŸŸ</th><th>æš‚æ—¶æ€§æ­»åŒº</th><th>é‡å¤å£°æ˜å˜é‡</th><th>å…¨å±€å±æ€§</th></tr></thead><tbody><tr><td>const</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>let</td><td>å£°æ˜å˜é‡ï¼ˆES6 æ–°å¢ï¼‰</td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>function</td><td>å£°æ˜å¸¸é‡</td><td>å—çº§ä½œç”¨åŸŸ</td><td>â</td><td>âœ…</td><td>âœ…</td></tr><tr><td>class</td><td></td><td>å—çº§ä½œç”¨åŸŸ</td><td>âœ…</td><td>â</td><td>â</td></tr><tr><td>var</td><td>å£°æ˜å˜é‡</td><td>å‡½æ•°ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…ï¼‰</td><td>â</td><td>âœ…</td><td>âœ…</td></tr></tbody></table><hr><h2 id="ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ</h2><p>å˜é‡æå‡å’Œä¸Šæ–‡æåˆ°è§¦å‘æ—¶é—´æœ‰å…³ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ<code>var</code> å’Œ <code>function</code> å£°æ˜çš„å˜é‡å¯ä»¥åœ¨å£°æ˜å‰è®¿é—®ï¼Œè¿™å°±æ˜¯å› ä¸ºå˜é‡æå‡çš„ç¼˜æ•…ã€‚</p><p>å½“ JavaScript å¼•æ“æ‰§è¡Œä»£ç æ—¶ï¼Œåˆ›å»ºäº†å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒæœ‰ä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆ›å»ºï¼ˆå‡†å¤‡å·¥ä½œï¼‰</li><li>æ‰§è¡Œ</li></ul><p>åœ¨åˆ›å»ºé˜¶æ®µï¼ŒJavaScript å¼•æ“å°† <code>var</code> å’Œ <code>function</code> å£°æ˜ç§»åˆ°äº†é¡¶å±‚ï¼Œè¿™å°±æ˜¯ JavaScript çš„å˜é‡æå‡ã€‚</p><h3 id="var-å…³é”®å­—"><a href="#var-å…³é”®å­—" class="headerlink" title="var å…³é”®å­—"></a><code>var</code> å…³é”®å­—</h3><p>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨å£°æ˜å‰è®¿é—® <code>counter</code> å˜é‡ï¼Œå¹¶æœªæŠ¥é”™ã€‚è¿™æ˜¯å˜é‡æå‡çš„ç¼˜æ•…ã€‚</p><h3 id="function-æå‡"><a href="#function-æå‡" class="headerlink" title="function æå‡"></a><code>function</code> æå‡</h3><p>å’Œ <code>var</code> ä¸€æ ·ï¼Œå‡½æ•°å£°æ˜ä¹Ÿä¼šæå‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x, y);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 30</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>let</code> å…³é”®å­—ã€å‡½æ•°è¡¨è¾¾å¼ã€ç®­å¤´å‡½æ•°ç­‰å‡ä¸ä¼šå˜é‡æå‡ã€‚</p><h3 id="å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å"><a href="#å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å" class="headerlink" title="å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å"></a>å¤„ç†ç›¸åŒçš„å˜é‡åæˆ–è€…å‡½æ•°å</h3><p>ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬çŸ¥é“ <code>var</code> å£°æ˜çš„åŒåå˜é‡ï¼Œåè€…ä¼šè¦†ç›–å‰è€…ï¼Œå¦‚æœæ˜¯å‡½æ•°å‘¢ï¼Ÿå…ˆçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x, y);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result &quot;</span> + result); <span class="comment">// &quot;result 60&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">add</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result1 &quot;</span> + result); <span class="comment">// &quot;result1 60&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªåŒåå‡½æ•° <code>add</code>ï¼Œå®šä¹‰åœ¨åé¢çš„å‡½æ•°è¦†ç›–äº†å‰é¢çš„å‡½æ•°ï¼Œå› æ­¤ <code>result</code> å’Œ <code>result1</code> çš„ç»“æœéƒ½æ˜¯æ‰§è¡Œåé¢çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚</p><p>å› æ­¤ï¼Œä»£ç ä¸­å‡ºç°åŒåçš„å˜é‡åæˆ–è€…å‡½æ•°åï¼Œéƒ½æ˜¯åè€…è¦†ç›–å‰è€…ã€‚</p><h3 id="å°ç»ƒä¹ -1"><a href="#å°ç»ƒä¹ -1" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">20</span>,</span><br><span class="line">y = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result1 &quot;</span> + result); <span class="comment">// &quot;result1 60&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + <span class="number">40</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè€ƒå¯Ÿçš„æ˜¯åŒåå˜é‡å’Œå‡½æ•°çš„æå‡ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯æœ€åä¸€ä¸ªå‡½æ•° <code>add</code>ã€‚</p><hr><h1 id="JavaScript-æ•°æ®ç±»å‹"><a href="#JavaScript-æ•°æ®ç±»å‹" class="headerlink" title="JavaScript æ•°æ®ç±»å‹"></a>JavaScript æ•°æ®ç±»å‹</h1><h2 id="JavaScript-æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#JavaScript-æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="JavaScript æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>JavaScript æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>JavaScript ä¸­æœ‰å…«ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆå‰ä¸ƒç§ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºåŸå§‹æ•°æ®ç±»å‹ï¼Œåä¸€ç§ <code>Object</code> ä¸ºå¤æ‚æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºéåŸå§‹æ•°æ®ç±»å‹æˆ–å¼•ç”¨ç±»å‹ï¼‰ã€‚</p><ul><li>å…¶ä¸­åŸå§‹æ•°æ®ç±»å‹ï¼š<ul><li><code>number</code> ç”¨äºä»»ä½•ç±»å‹çš„æ•°å­—ï¼šæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œåœ¨ <code>Â±(2(^53)-1)</code> èŒƒå›´å†…çš„æ•´æ•°ã€‚</li><li><code>bigint</code> ç”¨äºä»»æ„é•¿åº¦çš„æ•´æ•°ã€‚</li><li><code>string</code> ç”¨äºå­—ç¬¦ä¸²ï¼šä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥åŒ…å« 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬çš„å­—ç¬¦ç±»å‹ã€‚</li><li><code>boolean</code> ç”¨äº <code>true</code> å’Œ <code>false</code>ã€‚</li><li><code>null</code> ç”¨äºæœªçŸ¥çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª <code>null</code> å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚</li><li><code>undefined</code> ç”¨äºæœªå®šä¹‰çš„å€¼ â€”â€” åªæœ‰ä¸€ä¸ª <code>undefined</code> å€¼çš„ç‹¬ç«‹ç±»å‹ã€‚</li><li><code>symbol</code> ç”¨äºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚</li></ul></li><li>ä»¥åŠä¸€ç§éåŸå§‹æ•°æ®ç±»å‹ï¼š<ul><li><code>Object</code> ç”¨äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚ä»¥ä¸‹ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼š<ul><li><code>Function</code>ï¼ˆå‡½æ•°ï¼‰</li><li><code>Array</code>ï¼ˆæ•°ç»„ï¼‰</li><li><code>Date</code>ï¼ˆæ—¥æœŸï¼‰</li><li><code>RegExp</code>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</li></ul></li></ul></li></ul><h2 id="åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ"><a href="#åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ"></a>åŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>JavaScript åŒ…å«ä¸¤ç§ä¸åŒç±»å‹çš„å€¼ï¼š</p><ul><li><p>åŸå§‹æ•°æ®ç±»å‹ï¼ˆPrimitive valuesï¼‰</p></li><li><p>å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆReference valuesï¼‰</p></li></ul><h3 id="æ ˆå†…å­˜å’Œå †å†…å­˜"><a href="#æ ˆå†…å­˜å’Œå †å†…å­˜" class="headerlink" title="æ ˆå†…å­˜å’Œå †å†…å­˜"></a>æ ˆå†…å­˜å’Œå †å†…å­˜</h3><p>å½“å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šä¸ºå˜é‡åˆ†é…ä¸¤ç§å†…å­˜ï¼šæ ˆå†…å­˜å’Œå †å†…å­˜ã€‚</p><p>é™æ€å€¼åœ¨ç¼–è¯‘é˜¶æ®µæœ‰å›ºå®šçš„å¤§å°ï¼Œé™æ€å€¼æœ‰ï¼š</p><ul><li>åŸå§‹å€¼ï¼š<code>Null</code>ã€<code>Undefined</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code>ã€<code>BigInt</code></li><li>å¼•ç”¨å€¼ï¼šæ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚</li></ul><p>é™æ€å€¼æœ‰å›ºå®šçš„å¤§å°ï¼Œä¸èƒ½æ”¹å˜ã€‚JavaScript å¼•æ“ä¸ºå®ƒä»¬åˆ†é…ä¸€ç‰‡å›ºå®šçš„å†…å­˜ï¼Œå¹¶å­˜å‚¨åœ¨æ ˆä¸Šã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br></pre></td></tr></table></figure><p>å› ä¸º <code>name</code> å’Œ <code>age</code> éƒ½æ˜¯åŸå§‹å€¼ç±»å‹ï¼ŒJavaScript å¼•æ“å°†å®ƒä»¬å­˜å‚¨åœ¨æ ˆä¸Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic.leetcode.cn/1675246723-ulSguk-image.png"></p><p>JavaScript å°†å¯¹è±¡ï¼ˆ<code>Object</code>) å­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å†…å­˜å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675246788-HjXqny-image.png"></p><p>JavaScript å¼•æ“åœ¨å †å†…å­˜ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŒæ—¶å®ƒå’Œæ ˆå†…å­˜ä¸Šçš„ <code>person</code> å˜é‡è¿æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¯´ <code>person</code> å˜é‡æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚</p><h3 id="åŠ¨æ€å±æ€§"><a href="#åŠ¨æ€å±æ€§" class="headerlink" title="åŠ¨æ€å±æ€§"></a>åŠ¨æ€å±æ€§</h3><p>ä¸€ä¸ªå¼•ç”¨å€¼å…è®¸æˆ‘ä»¬æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å±æ€§ ssn </span></span><br><span class="line">person.<span class="property">ssn</span> = <span class="string">&quot;123-45&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ name</span></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&quot;John Doe&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤å±æ€§ age </span></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">age</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123;name: &#x27;John Doe&#x27;, ssn: &#x27;123-45&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p>JavaScript ä¹Ÿå…è®¸åœ¨åŸå§‹å€¼ä¸Šæ·»åŠ å±æ€§ï¼Œä½†è¿™ä¸ªå±æ€§ä¸ä¼šèµ·ä½œç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">name.<span class="property">alias</span> = <span class="string">&quot;Knight&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">alias</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="å¤åˆ¶å€¼"><a href="#å¤åˆ¶å€¼" class="headerlink" title="å¤åˆ¶å€¼"></a>å¤åˆ¶å€¼</h3><h4 id="åŸå§‹å€¼"><a href="#åŸå§‹å€¼" class="headerlink" title="åŸå§‹å€¼"></a>åŸå§‹å€¼</h4><p><strong>å¯¹äºåŸå§‹å€¼æ¥è¯´ï¼ŒJavaScript å¼•æ“åˆ›å»ºä¸€ä¸ªå€¼çš„å‰¯æœ¬ï¼Œå¹¶å°†å€¼èµ‹ç»™æ–°çš„å˜é‡ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> newAge = age; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age, newAge); <span class="comment">// 25 25</span></span><br></pre></td></tr></table></figure><p>è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ <code>age</code>ï¼Œå¹¶å°† 25 èµ‹å€¼ç»™å®ƒã€‚</p></li><li><p>å…¶æ¬¡ï¼Œå£°æ˜å¦ä¸€ä¸ªæ–°çš„å˜é‡ <code>newAge</code>ï¼Œå°† <code>age</code> èµ‹å€¼ç»™ <code>newAge</code>ï¼ŒJavaScript å¼•æ“å°† 25 å¤åˆ¶äº†ä¸€ä»½ï¼Œç»™äº†æ–°å˜é‡ã€‚</p></li></ul><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675247356-DMFMSb-image.png"></p><p>å› æ­¤ï¼Œå¯¹ä¸¤ä¸ªå˜é‡çš„æ“ä½œä¸ä¼šäº’ç›¸å½±å“ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">let</span> newAge = age;</span><br><span class="line"></span><br><span class="line">newAge = newAge + <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age, newAge); <span class="comment">// 25 26</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://pic.leetcode.cn/1675247413-GScWMN-image.png"></p><h3 id="å¼•ç”¨å€¼"><a href="#å¼•ç”¨å€¼" class="headerlink" title="å¼•ç”¨å€¼"></a>å¼•ç”¨å€¼</h3><p><strong>å¯¹äºå¼•ç”¨å€¼æ¥è¯´ï¼Œå¤åˆ¶çš„å€¼æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æ“ä½œçš„æ˜¯ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p><p>å½“æˆ‘ä»¬å°†ä¸€ä¸ªå¼•ç”¨å€¼ä»ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼ŒJavaScript å¼•æ“åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æŒ‡å‘å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚æ„å‘³ç€ï¼Œä½ ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> member = person;</span><br><span class="line">member.<span class="property">age</span> = <span class="number">26</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// &#123;name: &#x27;John&#x27;, age: 26&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(member); <span class="comment">// &#123;name: &#x27;John&#x27;, age: 26&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>ä¿®æ”¹å‰ï¼š</p><p><img src="https://pic.leetcode.cn/1675247510-JurGlA-image.png"></p><p>ä¿®æ”¹åï¼š</p><p><img src="https://pic.leetcode.cn/1675247526-qFUHsM-image.png" alt="image.png"></p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><p>JavaScript æœ‰ä¸¤ç§ç±»å‹çš„å€¼ï¼šåŸå§‹å€¼å’Œå¼•ç”¨å€¼</p></li><li><p>å¼•ç”¨ç±»å‹çš„å€¼å¯ä»¥å¯¹å®ƒçš„å±æ€§åšå¢åˆ æ”¹æŸ¥ï¼ŒåŸå§‹å€¼ä¸è¡Œ</p></li><li><p>ä»ä¸€ä¸ªå˜é‡å¤åˆ¶åŸå§‹å€¼åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å€¼çš„å¤‡ä»½ï¼Œæ„å‘³ç€ä¿®æ”¹ä¸€ä¸ªå˜é‡ä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå˜é‡</p></li><li><p>ä»ä¸€ä¸ªå˜é‡å¤åˆ¶å¼•ç”¨å€¼åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªå˜é‡ä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ„å‘³ç€é€šè¿‡ä¸€ä¸ªå˜é‡ä¿®æ”¹å¯¹è±¡å°†ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p></li></ul><h3 id="å°ç»ƒä¹ -2"><a href="#å°ç»ƒä¹ -2" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increaseAge</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    obj.<span class="property">age</span> += <span class="number">1</span>;</span><br><span class="line">    obj = &#123;<span class="attr">name</span>: <span class="string">&quot;Jame&quot;</span>, <span class="attr">age</span>: <span class="number">22</span>&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">increaseAge</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š1 å¤„æ˜¯ï¼š<code>&#123; name: &quot;Jame&quot;, age: 22 &#125;</code>ï¼Œ 2 å¤„æ˜¯ <code>&#123; name: &#39;John&#39;, age: 26 &#125;</code>ã€‚ä¸¤ä¸ªå˜é‡çš„å†…å­˜ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://pic.leetcode.cn/1675247879-Inlzhw-image.png" alt="image.png"></p><p>å®é™…ä¸Šï¼Œ<code>obj = &#123;name: &quot;Jame&quot;, age: 22&#125;</code> ä½¿å¾— <code>obj</code> é‡æ–°æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¼•ç”¨çš„ï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­é‡æ–°åˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶è®© <code>obj</code> æŒ‡å‘å®ƒã€‚ å› æ­¤ <code>console.log(person)</code> çš„ç»“æœæ˜¯ <code>&#123; name: &quot;Jame&quot;, age: 22 &#125;</code>ã€‚</p><p>åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹åœ¨å†…å­˜ä¸­çš„åˆ†é…ä¸å‡½æ•°å‚æ•°ä¼ é€’æœ‰è”ç³»ã€‚å‡½æ•°ä¼ å‚éƒ½æ˜¯å€¼ä¼ é€’ï¼Œåªä¸è¿‡æ ¹æ®å€¼çš„ç±»å‹ä¸åŒæœ‰æ‰€åŒºåˆ«ã€‚</p><p>ç”±ä¸Šå¯çŸ¥ï¼š</p><ul><li>JavaScript å®å‚éƒ½æ˜¯ä¼ å€¼</li><li>å‡½æ•°å®å‚ä¼šåœ¨å‡½æ•°ä¸­åˆ›å»ºæ–°çš„å±€éƒ¨å˜é‡ã€‚</li></ul><hr><h2 id="ä¸ºä»€ä¹ˆ-0-1-0-2-0-3"><a href="#ä¸ºä»€ä¹ˆ-0-1-0-2-0-3" class="headerlink" title="ä¸ºä»€ä¹ˆ 0.1 + 0.2 !&#x3D;&#x3D; 0.3 ?"></a>ä¸ºä»€ä¹ˆ 0.1 + 0.2 !&#x3D;&#x3D; 0.3 ?</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>è¿™æ˜¯ä¸€é“ç»å…¸çš„é¢è¯•é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¶‰åŠåˆ° JavaScript ä¸­çš„æ•°å­—ç±»å‹ã€‚ä¸‹é¢æ˜¯ <code>Number</code> çš„å®šä¹‰ï¼š</p><p>MDN ä¸­å¯¹ <code>Number</code> çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>æ ¹æ®è¯­è¨€è§„èŒƒï¼ŒJavaScript é‡‡ç”¨â€œéµå¾ª IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½æ ¼å¼â€ï¼ˆâ€double-precision 64-bit format IEEE 754 valuesâ€ï¼‰è¡¨ç¤ºæ•°å­—ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</h3><p>ç®€å•åœ°è¯´ï¼Œ0.1 å’Œ 0.2 çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥å®ƒä»¬ç›¸åŠ æ—¶ï¼Œç»“æœä¸æ˜¯ç²¾ç¡®çš„ 0.3ï¼Œ è€Œæ˜¯éå¸¸æ¥è¿‘çš„å€¼ï¼š0.30000000000000004ã€‚</p><p>è¿™æ˜¯å’Œ JavaScript é‡‡ç”¨â€œéµå¾ª IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½æ ¼å¼â€æœ‰å…³ã€‚</p><ul><li>sign bitï¼ˆç¬¦å·ï¼‰ï¼š ç”¨æ¥è¡¨ç¤ºæ­£è´Ÿå·</li><li>exponentï¼ˆæŒ‡æ•°ï¼‰ï¼š ç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°</li><li>mantissaï¼ˆå°¾æ•°ï¼‰ï¼šç”¨æ¥è¡¨ç¤ºç²¾ç¡®åº¦</li></ul><p><img src="https://pic.leetcode.cn/1675248285-kMFmze-image.png" alt="image.png"></p><p>åœ¨è¿™ä¸ªæ ‡å‡†ä¸‹ï¼š</p><ul><li><p>1 ä½å­˜å‚¨ç¬¦å·ï¼ˆSignï¼‰ï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ 1 è¡¨ç¤ºè´Ÿæ•°ã€‚</p></li><li><p>ç”¨ 11 ä½å­˜å‚¨æŒ‡æ•°ï¼ŒæŒ‡æ•°å¿…é¡»æ˜¯â€œæœ‰ç¬¦å·â€çš„å€¼ï¼Œè¿™é‡Œä½¿ç”¨äº†åå·®æŒ‡æ•°ï¼Œå³å­˜å‚¨ E + bias çš„å€¼ã€‚å¯¹äº 11 ä½æ¥è¯´ï¼Œbias çš„å€¼æ˜¯ 2^(11-1) - 1ï¼Œä¹Ÿå°±æ˜¯ 1023ã€‚11 ä½æ— ç¬¦å·æ•´æ•°çš„å€¼çš„èŒƒå›´æ˜¯ 0 åˆ° 2^11ï¼ˆ2047ï¼‰ï¼Œç”±äºå…¨ 0 å’Œ å…¨ 1 çš„æŒ‡æ•°å€¼æ˜¯ä¸ºç‰¹æ®Šæ•°å­—ä¿ç•™çš„ï¼Œæ‰€ä»¥å¯ç”¨çš„æŒ‡æ•°æ˜¯ä» 1 åˆ° 2046ã€‚å‡å»æŒ‡æ•°åå·®å€¼ 1023ï¼Œ å°±èƒ½å¾—åˆ°æŒ‡æ•°çš„å®é™…èŒƒå›´ï¼Œå³ä» -1022 åˆ° +1023ã€‚</p></li><li><pre><code class="js">1 - 1023 = -10222046 - 1023 = +1023<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ç”¨ 52 ä½å­˜å‚¨ Fractionã€‚</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶ï¼Œæˆ‘ä»¬å†æ¥çœ‹ 0.1 + 0.2 çš„è½¬æ¢è¿‡ç¨‹ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ‹¿ 0.1 æ¥çœ‹ï¼š</span><br><span class="line">0.1 å¯¹åº”çš„äºŒè¿›åˆ¶æ˜¯ 1 * 2^-4 * 1.1001100110011â€¦â€¦</span><br><span class="line">ç¬¦å·ä½ï¼š0</span><br><span class="line">E + baisï¼š -4 + 1023 = 1019</span><br><span class="line">Fractionï¼š 1001100110011â€¦â€¦</span><br><span class="line">å¯¹åº”çš„ 64 ä½å®Œæ•´è¡¨ç¤ºå¦‚ä¸‹å›¾ï¼š</span><br><span class="line"></span><br><span class="line">![image.png](https://pic.leetcode.cn/1675248450-nFKGop-image.png)</span><br><span class="line"></span><br><span class="line">åŒç†ï¼Œ0.2 çš„å®Œæ•´è¡¨ç¤ºæ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">![image.png](https://pic.leetcode.cn/1675248480-DpROri-image.png)</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œ**å½“ 0.1 å­˜ä¸‹æ¥çš„æ—¶å€™ï¼Œå°±å‘ç”Ÿäº†ç²¾åº¦ä¸¢å¤±ï¼Œå½“æˆ‘ä»¬ç”¨æµ®ç‚¹æ•°è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å…¶å®æ˜¯ç²¾åº¦ä¸¢å¤±åçš„æ•°ã€‚**</span><br><span class="line"></span><br><span class="line">å½“æˆ‘ä»¬å¯¹ä¸¤ä¸ªæ•°å­—æ±‚å’Œæ—¶ï¼Œå®ƒä»¬çš„â€œç²¾åº¦æŸå¤±â€ä¼šå åŠ èµ·æ¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ 0.1 + 0.2 ä¸ç­‰äº 0.3ã€‚</span><br><span class="line"></span><br><span class="line">### å¦‚ä½•è§£å†³ï¼Ÿ</span><br><span class="line"></span><br><span class="line">**æ–¹æ³•ä¸€ï¼š`toFixed(n)`**</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ–¹æ³• `toFixed(n)` å¯¹ç»“æœè¿›è¡Œèˆå…¥ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>let sum = 0.1 + 0.2;alert(sum.toFixed(2)); // 0.30<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ³¨æ„ï¼š`toFixed `æ€»æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å…ƒåŠ å·å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼š</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">let sum = 0.1 + 0.2;</span><br><span class="line">alert( +sum.toFixed(2) ); // &quot;0.30&quot;</span><br></pre></td></tr></table></figure></code></pre></li></ul><p><strong>æ–¹æ³•äºŒï¼šå°†æ•°å­—ä¸´æ—¶ä¹˜ä»¥ 100ï¼ˆæˆ–æ›´å¤§çš„æ•°å­—ï¼‰ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•´æ•°ï¼Œè¿›è¡Œæ•°å­¦è¿ç®—ï¼Œç„¶åå†é™¤å›ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert( (0.1 * 100 + 0.2 * 100) / 100 ); // 0.3</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Number.EPSILONã€‚å¦‚æœä¸¤ä¸ªæ•°çš„ç²¾åº¦æŸå¤±åœ¨å…è®¸èŒƒå›´å†…ï¼Œåˆ™å¯ä»¥è®¤ä¸ºä¸¤ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ã€‚</strong></p><p><code>Number.EPSILON</code> å±æ€§è¡¨ç¤º 1 ä¸ <code>Number</code> å¯è¡¨ç¤ºçš„å¤§äº 1 çš„æœ€å°çš„æµ®ç‚¹æ•°ä¹‹é—´çš„å·®å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numbersCloseEnoughToEqual</span>(<span class="params">n1, n2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">abs</span>(n1 - n2) &lt; <span class="title class_">Number</span>.<span class="property">EPSILON</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">0.1</span> + <span class="number">0.2</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">0.3</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">numbersCloseEnoughToEqual</span>(a, b); <span class="comment">// true</span></span><br><span class="line"><span class="title function_">numbersCloseEnoughToEqual</span>(<span class="number">0.0000001</span>, <span class="number">0.0000002</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="å°ç»ƒä¹ -3"><a href="#å°ç»ƒä¹ -3" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p>ä¸‹é¢ä»£ç çš„æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">9999999999999999</span>); <span class="comment">// 16ä½</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼šè¾“å‡ºç»“æœ 10000000000000000ï¼ˆ17ä½ï¼‰ã€‚</p><p>è¿™ä¹Ÿæ˜¯å› ä¸ºç²¾åº¦æŸå¤±ã€‚æœ‰ 64 ä½æ¥è¡¨ç¤ºè¯¥æ•°å­—ï¼Œå…¶ä¸­ 52 ä½å¯ç”¨äºå­˜å‚¨æ•°å­—ï¼Œä½†è¿™è¿˜ä¸å¤Ÿã€‚æ‰€ä»¥æœ€ä¸é‡è¦çš„æ•°å­—å°±æ¶ˆå¤±äº†ã€‚</p><p>JavaScript ä¸ä¼šåœ¨æ­¤ç±»äº‹ä»¶ä¸­è§¦å‘ errorã€‚å®ƒä¼šå°½æœ€å¤§åŠªåŠ›ä½¿æ•°å­—ç¬¦åˆæ‰€éœ€çš„æ ¼å¼ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æ ¼å¼ä¸å¤Ÿå¤§åˆ°æ»¡è¶³éœ€æ±‚ã€‚</p><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://zh.m.wikipedia.org/zh-cn/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8">åŒç²¾åº¦æµ®ç‚¹æ•°</a><br><a href="https://leetcode.cn/link/?target=https://www.binaryconvert.com/result_double.html?decimal=048046049">Double (IEEE754 Double precision 64-bit)</a><br><a href="https://leetcode.cn/link/?target=https://zh.javascript.info/number">æ•°å­—ç±»å‹</a></p></blockquote><hr><h2 id="è°ˆè°ˆ-undefined-å’Œ-null-ï¼Ÿ"><a href="#è°ˆè°ˆ-undefined-å’Œ-null-ï¼Ÿ" class="headerlink" title="è°ˆè°ˆ undefined å’Œ null ï¼Ÿ"></a>è°ˆè°ˆ undefined å’Œ null ï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p><code>undefined</code> å’Œ <code>null</code> éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚å®ƒä»¬çš„å®šä¹‰æ˜¯ï¼š</p><ul><li><p><code>undefined</code> æ„å‘³ç€å˜é‡å·²ç»å£°æ˜äº†ä½†æ˜¯æ²¡æœ‰èµ‹å€¼ã€‚</p></li><li><p><code>null</code> æ˜¯ç©ºå€¼ï¼Œå¯ä»¥ä½œä¸ºå¯¹è±¡çš„åˆå§‹å€¼ã€‚</p></li></ul><h3 id="undefined-ä¸æ˜¯-undeclared"><a href="#undefined-ä¸æ˜¯-undeclared" class="headerlink" title="undefined ä¸æ˜¯ undeclared"></a>undefined ä¸æ˜¯ undeclared</h3><ul><li><p><code>undeclared</code> æ˜¯æŒ‡å˜é‡ä»æœªåœ¨ä»£ç ä¸­å‡ºç°.ä½¿ç”¨æœªå£°æ˜çš„å˜é‡å°±ä¼šæŠ¥é”™ï¼šâ€ReferenceError: cat is not definedâ€œã€‚</p></li><li><p><code>undefined</code> åˆ™æ˜¯å£°æ˜äº†ä½†æ˜¯å€¼æ˜¯ <code>undefined</code> æˆ–è€…å€¼å¹¶ä¸å­˜åœ¨ã€‚</p></li></ul><h3 id="å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ"><a href="#å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ"></a>å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ</h3><p>å› ä¸º <code>undefined</code> æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥è¢«å½“ä½œå˜é‡æ¥ä½¿ç”¨å’Œèµ‹å€¼ï¼Œä½†æ˜¯è¿™æ ·ä¼šå½±å“ <code>undefined</code> çš„æ­£å¸¸åˆ¤æ–­ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>void 0</code> è·å¾—å®‰å…¨çš„å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(void 0); // undefined</span><br></pre></td></tr></table></figure><h3 id="å’Œ"><a href="#å’Œ" class="headerlink" title="?? å’Œ ??="></a><code>??</code> å’Œ <code>??=</code></h3><h3 id="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰"></a>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ<code>??</code>ï¼‰</h3><p>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ<code>??</code>ï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘è¿ç®—ç¬¦ï¼Œåˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦æ˜¯ <code>null</code> æˆ– <code>undefined</code>ã€‚å¦‚ä»£ç  <code>a ?? b</code>ï¼Œå¦‚æœ <code>a</code> æ˜¯ <code>null</code> æˆ– <code>undefined</code>ï¼Œè¿”å› <code>b</code>ï¼Œ åä¹‹ï¼Œè¿”å› <code>a</code>ã€‚</p><p><code>a ?? b</code> å¯ä»¥ç†è§£ä¸º: <code>a !== undefined &amp;&amp; a !== null ? a : b</code></p><p>æˆ‘ä»¬å¯ä»¥ç»™å€¼ä¸º <code>null</code> æˆ– <code>undefined</code> çš„å˜é‡ä¸€ä¸ªé»˜è®¤å€¼ã€‚å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><h3 id="vs"><a href="#vs" class="headerlink" title="?? vs ||"></a><code>??</code> vs <code>||</code></h3><p><code>??</code> å’Œ <code>||</code> çš„ç›¸åŒç‚¹ï¼šéƒ½å¯ä»¥ä¸ºå€¼ä¸º <code>null</code> æˆ– <code>undefined</code> çš„å˜é‡èµ‹é»˜è®¤å€¼ã€‚å¦‚ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br><span class="line"></span><br><span class="line">fullName = firstName || lastName;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><p>ä¸åŒç‚¹åœ¨äºï¼š</p><ul><li><p><code>??</code> åªåˆ¤æ–­å€¼ <code>null</code> å’Œ <code>undefined</code></p></li><li><p><code>||</code> æ˜¯ä»»ä½•å‡å€¼ï¼ˆ<code>0</code>ï¼Œ <code>&#39;&#39;</code>ï¼Œ <code>NaN</code>ï¼Œ <code>null</code>ï¼Œ <code>undefined</code>ï¼‰éƒ½ä¸ä¼šè¢«è¿”å›ã€‚è¿™å¯¼è‡´å¦‚æœä½ ä½¿ç”¨ <code>0</code>ï¼Œ<code>&#39;&#39;</code> æˆ– <code>NaN</code> ä½œä¸ºæœ‰æ•ˆå€¼ï¼Œå°±ä¼šå‡ºç°ä¸å¯é¢„æ–™çš„åæœã€‚</p></li></ul><p>å¦‚ä¸‹é¢ä»£ç ï¼Œåˆ¤æ–­å€¼æ˜¯ <code>&#39;&#39;</code> æ—¶ä¸¤è€…çš„ä¸åŒè¡¨ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;&#x27;</span>, lastName = <span class="string">&#x27;Sun&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> fullName = firstName ?? lastName</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">fullName = firstName || lastName;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName); <span class="comment">// Sun</span></span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦"><a href="#é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ ??="></a>é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ <code>??=</code></h3><p>é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ<code>x ??= y</code>ï¼‰ä»…åœ¨ <code>x</code> æ˜¯ç©ºå€¼ï¼ˆ<code>null</code> æˆ– <code>undefined</code>ï¼‰æ—¶å¯¹å…¶èµ‹å€¼ã€‚</p><p><code>a ??= b</code> å¯ä»¥ç†è§£ä¸º: <code>a ?? (a = b) </code>ã€‚</p><p>å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="literal">null</span>;</span><br><span class="line">firstName ??= <span class="string">&#x27;yangyang&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstName); <span class="comment">// &#x27;yangyang&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing">ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰ - JavaScript | MDN</a><br><a href="https://leetcode.cn/link/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_assignment">é€»è¾‘ç©ºèµ‹å€¼ï¼ˆ??&#x3D;ï¼‰ - JavaScript | MDN</a></p></blockquote><h2 id="typeof-null-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#typeof-null-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="typeof null çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"></a>typeof null çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é¢è¯•é«˜é¢‘æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>JavaScript ä¸­ï¼Œ<code>typeof null</code> æ˜¯ <code>object</code>ï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸º <code>null</code> æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸æ˜¯å¯¹è±¡ã€‚è¿™æ˜¯ä¸ª bugï¼Œä½†æ˜¯å› ä¸ºä¿®å¤è¿™ä¸ª bug ä¼šå½±å“ç°å­˜çš„ä»£ç ï¼Œæ‰€ä»¥å°±ä¸€ç›´æ²¡æ”¹ã€‚</p><p>è¿™ä¸ª bug æ˜¯ JavaScript ç¬¬ä¸€ç‰ˆçš„é—ç•™ç‰©ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œå€¼éƒ½æ˜¯ 32 ä½å­˜å‚¨å•å…ƒï¼Œç”±ç±»å‹æ ‡ç­¾ï¼ˆ1-3ä½ï¼‰å’Œå®é™…çš„å€¼ç»„æˆã€‚ç±»å‹æ ‡ç­¾å­˜åœ¨å•å…ƒçš„ä½ä½é‡Œï¼Œæœ‰ä¸‹é¢äº”ç§ï¼š</p><ul><li>000ï¼š å¯¹è±¡ï¼Œæ•°æ®æ˜¯å¯¹è±¡ç±»å‹</li><li>1ï¼šæ•´æ•°ï¼Œå­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ä¸ª 31 ä½çš„æœ‰ç¬¦å·æ•´æ•°ã€‚</li><li>010ï¼šæµ®ç‚¹æ•°ï¼Œå­˜çš„æ•°æ®æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°</li><li>100ï¼š å­—ç¬¦ä¸²ï¼Œå­˜çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²</li><li>110ï¼šå¸ƒå°”ï¼Œå­˜çš„æ•°æ®æ˜¯å¸ƒå°”</li></ul><p>ä½ä½å¦‚æœæ˜¯ 1 ä½ï¼Œç±»å‹æ ‡ç­¾å°±æ˜¯ 1 ä½é•¿åº¦ï¼ˆå¦‚æ•´æ•°ç±»å‹ï¼‰ï¼Œå¦‚æœæ˜¯ 0ï¼Œç±»å‹æ ‡ç­¾æ˜¯ 3 ä½é•¿åº¦ï¼Œæä¾›ä¸¤ä¸ªé¢å¤–çš„ä½ï¼Œå¦‚å…¶ä½™çš„å››ä¸ªç±»å‹ã€‚</p><h3 id="å°ç»ƒä¹ -4"><a href="#å°ç»ƒä¹ -4" class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h3><p><code>typeof NaN</code> è¿”å›ä»€ä¹ˆï¼Ÿ</p><p>ç­”æ¡ˆï¼š<code>typeof NaN</code> è¿”å› <code>&#39;number&#39;</code>ã€‚<code>NaN</code> è¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå®ƒæ˜¯ <code>Number</code> çš„ç‰¹æ®Šå€¼ã€‚</p><blockquote><p>ã€å‚è€ƒèµ„æ–™ã€‘<br><a href="https://leetcode.cn/link/?target=https://2ality.com/2013/10/typeof-null.html">The history of â€œtypeof nullâ€</a></p></blockquote><h2 id="2-jsåŸºç¡€"><a href="#2-jsåŸºç¡€" class="headerlink" title="2. jsåŸºç¡€"></a>2. jsåŸºç¡€</h2><h4 id="2-1-let-const-var-ç›¸å…³"><a href="#2-1-let-const-var-ç›¸å…³" class="headerlink" title="2.1 let const var ç›¸å…³"></a>2.1 let const var ç›¸å…³</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>var â€”â€”ES5 å˜é‡å£°æ˜æ–¹å¼</p><ol><li>åœ¨å˜é‡æœªèµ‹å€¼æ—¶ï¼Œå˜é‡undefinedï¼ˆä¸ºä½¿ç”¨å£°æ˜å˜é‡æ—¶ä¹Ÿä¸ºundefinedï¼‰</li><li>ä½œç”¨åŸŸâ€”â€”varçš„ä½œç”¨åŸŸä¸ºæ–¹æ³•ä½œç”¨åŸŸï¼›åªè¦åœ¨æ–¹æ³•å†…å®šä¹‰äº†ï¼Œæ•´ä¸ªæ–¹æ³•å†…çš„å®šä¹‰å˜é‡åçš„ä»£ç éƒ½å¯ä»¥ä½¿ç”¨</li></ol><p>letâ€”â€”ES6å˜é‡å£°æ˜æ–¹å¼</p><ol><li>åœ¨å˜é‡ä¸ºå£°æ˜å‰ç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™</li><li>ä½œç”¨åŸŸâ€”â€”letä¸ºå—ä½œç”¨åŸŸâ€”â€”é€šå¸¸letæ¯”var èŒƒå›´è¦å°</li><li>letç¦æ­¢é‡å¤å£°æ˜å˜é‡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›varå¯ä»¥é‡å¤å£°æ˜</li></ol><p>constâ€”â€”ES6å˜é‡å£°æ˜æ–¹å¼</p><p>\1. constä¸ºå¸¸é‡å£°æ˜æ–¹å¼ï¼›å£°æ˜å˜é‡æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œåœ¨åé¢å‡ºç°çš„ä»£ç ä¸­ä¸èƒ½å†ä¿®æ”¹è¯¥å¸¸é‡çš„å€¼</p><p>\2. constå®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ä¸å¾—æ”¹åŠ¨</p><h4 id="2-2-jsæ•°æ®ç±»å‹ï¼ŒåŒºåˆ«"><a href="#2-2-jsæ•°æ®ç±»å‹ï¼ŒåŒºåˆ«" class="headerlink" title="2.2 jsæ•°æ®ç±»å‹ï¼ŒåŒºåˆ«"></a>2.2 jsæ•°æ®ç±»å‹ï¼ŒåŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p><p>Numberï¼ŒStringï¼ŒBooleanï¼Œnullï¼Œundefinedï¼Œsymbolï¼Œbigintï¼ˆåä¸¤ä¸ªä¸ºES6æ–°å¢ï¼‰</p><p>å¼•ç”¨æ•°æ®ç±»å‹ï¼š</p><p>objectï¼Œfunctionï¼ˆ<strong>proto</strong> Function.prototypeï¼‰</p><p>objectï¼šæ™®é€šå¯¹è±¡ï¼Œæ•°ç»„å¯¹è±¡ï¼Œæ­£åˆ™å¯¹è±¡ï¼Œæ—¥æœŸå¯¹è±¡ï¼ŒMathæ•°å­¦å‡½æ•°å¯¹è±¡ã€‚</p><p>ä¸¤ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼š</p><p>åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ç›´æ¥å­˜å‚¨åœ¨æ ˆä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ã€‚æ ˆæ˜¯å­˜å‚¨åŸº æœ¬ç±»å‹å€¼å’Œæ‰§è¡Œä»£ç çš„ç©ºé—´ã€‚</p><p>å¼•ç”¨æ•°æ®ç±»å‹æ˜¯å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å † ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ï¼Œå½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ã€‚</p><p>ä¸¤ç§æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼š</p><ol><li>å †æ¯”æ ˆç©ºé—´å¤§ï¼Œæ ˆæ¯”å †è¿è¡Œé€Ÿåº¦å¿«ã€‚</li><li>å †å†…å­˜æ˜¯æ— åºå­˜å‚¨ï¼Œå¯ä»¥æ ¹æ®å¼•ç”¨ç›´æ¥è·å–ã€‚</li><li>åŸºç¡€æ•°æ®ç±»å‹æ¯”è¾ƒç¨³å®šï¼Œè€Œä¸”ç›¸å¯¹æ¥è¯´å ç”¨çš„å†…å­˜å°ã€‚</li><li>å¼•ç”¨æ•°æ®ç±»å‹å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œè€Œä¸”æ˜¯æ— é™çš„ã€‚</li></ol><h4 id="2-3-Object-assignçš„ç†è§£"><a href="#2-3-Object-assignçš„ç†è§£" class="headerlink" title="2.3 Object.assignçš„ç†è§£"></a>2.3 Object.assignçš„ç†è§£</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ä½œç”¨ï¼šObject.assignå¯ä»¥å®ç°å¯¹è±¡çš„åˆå¹¶ã€‚</p><p>è¯­æ³•ï¼šObject.assign(target, â€¦sources)</p><p><strong>è§£æ</strong>ï¼š</p><ol><li>Object.assignä¼šå°†sourceé‡Œé¢çš„å¯æšä¸¾å±æ€§å¤åˆ¶åˆ°targetï¼Œå¦‚æœå’Œtargetçš„å·²æœ‰å±æ€§é‡åï¼Œåˆ™ä¼šè¦†ç›–ã€‚</li><li>åç»­çš„sourceä¼šè¦†ç›–å‰é¢çš„sourceçš„åŒåå±æ€§ã€‚</li><li>Object.assignå¤åˆ¶çš„æ˜¯å±æ€§å€¼ï¼Œå¦‚æœå±æ€§å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå¤åˆ¶çš„å…¶å®æ˜¯å¼•ç”¨åœ°å€ï¼Œå°±ä¼šå­˜åœ¨å¼•ç”¨å…±äº«çš„é—®é¢˜ã€‚</li></ol><h4 id="2-4-constructorçš„ç†è§£"><a href="#2-4-constructorçš„ç†è§£" class="headerlink" title="2.4 constructorçš„ç†è§£"></a>2.4 constructorçš„ç†è§£</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeï¼ˆåŸå‹ï¼‰å¯¹è±¡ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªconstructorï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡å‘prototypeå±æ€§æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆã€‚å½“è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œè¯¥å®ä¾‹çš„å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼ˆç»§æ‰¿è‡ªæ„é€ å‡½æ•°çš„prototypeï¼‰ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚æ³¨æ„å½“å°†æ„é€ å‡½æ•°çš„prototypeè®¾ç½®ä¸ºç­‰äºä¸€ä¸ªä»¥å¯¹è±¡å­—é¢é‡å½¢å¼åˆ›å»ºçš„æ–°å¯¹è±¡æ—¶ï¼Œconstructorå±æ€§ä¸å†æŒ‡å‘è¯¥æ„é€ å‡½æ•°ã€‚</p><h4 id="2-5-map-å’Œ-forEach-çš„åŒºåˆ«"><a href="#2-5-map-å’Œ-forEach-çš„åŒºåˆ«" class="headerlink" title="2.5 map å’Œ forEach çš„åŒºåˆ«"></a>2.5 map å’Œ forEach çš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ç›¸åŒç‚¹ï¼š</p><ol><li>éƒ½æ˜¯å¾ªç¯éå†æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹</li><li>æ¯æ¬¡æ‰§è¡ŒåŒ¿åå‡½æ•°éƒ½æ”¯æŒä¸‰ä¸ªå‚æ•°ï¼Œå‚æ•°åˆ†åˆ«ä¸ºitemï¼ˆå½“å‰æ¯ä¸€é¡¹ï¼‰ï¼Œindexï¼ˆç´¢å¼•å€¼ï¼‰ï¼Œarrï¼ˆåŸæ•°ç»„ï¼‰</li><li>åŒ¿åå‡½æ•°ä¸­çš„thiséƒ½æ˜¯æŒ‡å‘window</li><li>åªèƒ½éå†æ•°ç»„</li></ol><p>ä¸åŒç‚¹ï¼š</p><ol><li>map()ä¼šåˆ†é…å†…å­˜ç©ºé—´å­˜å‚¨æ–°æ•°ç»„å¹¶è¿”å›ï¼ŒforEach()ä¸ä¼šè¿”å›æ•°æ®ã€‚</li><li>forEach()å…è®¸callbackæ›´æ”¹åŸå§‹æ•°ç»„çš„å…ƒç´ ã€‚map()è¿”å›æ–°çš„æ•°ç»„ã€‚</li></ol><h4 id="2-6-for-of-å¯ä»¥éå†å“ªäº›å¯¹è±¡"><a href="#2-6-for-of-å¯ä»¥éå†å“ªäº›å¯¹è±¡" class="headerlink" title="2.6 for of å¯ä»¥éå†å“ªäº›å¯¹è±¡"></a>2.6 for of å¯ä»¥éå†å“ªäº›å¯¹è±¡</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>for..of..: å®ƒæ˜¯es6æ–°å¢çš„ä¸€ä¸ªéå†æ–¹æ³•ï¼Œä½†<strong>åªé™äºè¿­ä»£å™¨(iterator)</strong>, æ‰€ä»¥æ™®é€šçš„å¯¹è±¡ç”¨for..oféå†<br>æ˜¯ä¼šæŠ¥é”™çš„ã€‚</p><p>å¯è¿­ä»£çš„å¯¹è±¡ï¼šåŒ…æ‹¬Array, Map, Set, String, TypedArray, argumentså¯¹è±¡ç­‰ç­‰</p><h4 id="2-7-jsé™æ€ç±»å‹æ£€æŸ¥"><a href="#2-7-jsé™æ€ç±»å‹æ£€æŸ¥" class="headerlink" title="2.7 jsé™æ€ç±»å‹æ£€æŸ¥"></a>2.7 jsé™æ€ç±»å‹æ£€æŸ¥</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>jsæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€</strong></p><p>é™æ€ç±»å‹è¯­è¨€ &amp; åŠ¨æ€ç±»å‹è¯­è¨€</p><p>é™æ€ç±»å‹è¯­è¨€ï¼šç±»å‹æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼Œå› æ­¤é™¤éä¿®å¤é”™è¯¯ï¼Œå¦åˆ™ä¼šä¸€ç›´ç¼–è¯‘å¤±è´¥</p><p>åŠ¨æ€ç±»å‹è¯­è¨€ï¼šåªæœ‰åœ¨ç¨‹åºè¿è¡Œäº†ä¸€æ¬¡çš„æ—¶å€™é”™è¯¯æ‰ä¼šè¢«å‘ç°ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå› æ­¤å³ä½¿ä»£ç ä¸­åŒ…å«äº†ä¼š åœ¨è¿è¡Œæ—¶é˜»æ­¢è„šæœ¬æ­£å¸¸è¿è¡Œçš„é”™è¯¯ç±»å‹ï¼Œè¿™æ®µä»£ç ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘</p><p><strong>jsé™æ€ç±»å‹æ£€æŸ¥çš„æ–¹æ³•</strong></p><p><strong>Flow</strong>æ˜¯Facebookå¼€å‘å’Œå‘å¸ƒçš„ä¸€ä¸ªå¼€æºçš„é™æ€ç±»å‹æ£€æŸ¥åº“ï¼Œå®ƒå…è®¸ä½ é€æ¸åœ°å‘JavaScriptä»£ç ä¸­æ·»åŠ ç±»å‹ã€‚</p><p><strong>TypeScript</strong>æ˜¯ä¸€ä¸ªä¼šç¼–è¯‘ä¸ºJavaScriptçš„è¶…é›†ï¼ˆå°½ç®¡å®ƒçœ‹èµ·æ¥å‡ ä¹åƒä¸€ç§æ–°çš„é™æ€ç±»å‹è¯­è¨€ï¼‰</p><p><strong>ä½¿ç”¨é™æ€ç±»å‹çš„ä¼˜åŠ¿</strong></p><ul><li>å¯ä»¥å°½æ—©å‘ç°bugå’Œé”™è¯¯</li><li>å‡å°‘äº†å¤æ‚çš„é”™è¯¯å¤„ç†</li><li>å°†æ•°æ®å’Œè¡Œä¸ºåˆ†ç¦»</li><li>å‡å°‘å•å…ƒæµ‹è¯•çš„æ•°é‡</li><li>æä¾›äº†é¢†åŸŸå»ºæ¨¡ï¼ˆdomain modelingï¼‰å·¥å…·</li><li>å¸®åŠ©æˆ‘ä»¬æ¶ˆé™¤äº†ä¸€æ•´ç±»bug</li><li>é‡æ„æ—¶æ›´æœ‰ä¿¡å¿ƒ</li></ul><p><strong>ä½¿ç”¨é™æ€ç±»å‹çš„åŠ£åŠ¿</strong></p><ul><li>ä»£ç å†—é•¿</li><li>éœ€è¦èŠ±æ—¶é—´å»æŒæ¡ç±»å‹</li></ul><h4 id="2-8-indexof"><a href="#2-8-indexof" class="headerlink" title="2.8 indexof"></a>2.8 indexof</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>è¯­æ³•ï¼šstr.indexOf(searchValue [, fromIndex])</p><p>å‚æ•°ï¼šsearchValueï¼šè¦è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å€¼ã€‚</p><p>å¦‚æœæ²¡æœ‰æä¾›ç¡®åˆ‡åœ°æä¾›å­—ç¬¦ä¸²ï¼Œ[searchValue ä¼šè¢«å¼ºåˆ¶è®¾ç½®ä¸ºâ€undefinedâ€]ï¼Œ ç„¶ååœ¨å½“å‰å­—ç¬¦ä¸²ä¸­æŸ¥ æ‰¾è¿™ä¸ªå€¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šâ€™undefinedâ€™.indexOf()å°†ä¼šè¿”å›0ï¼Œå› ä¸ºundefinedåœ¨ä½ç½®0å¤„è¢«æ‰¾åˆ°ï¼Œä½†æ˜¯â€™undefineâ€™.indexOf()å°†ä¼šè¿”å› -1 ï¼Œå› ä¸ºå­—ç¬¦ä¸²â€™undefinedâ€™æœªè¢«æ‰¾åˆ°</p><p>fromIndexï¼šå¯é€‰</p><p>æ•°å­—è¡¨ç¤ºå¼€å§‹æŸ¥æ‰¾çš„ä½ç½®ã€‚å¯ä»¥æ˜¯ä»»æ„æ•´æ•°ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</p><p>å¦‚æœfromIndexçš„å€¼å°äº0ï¼Œæˆ–è€…å¤§äºstr.lengthï¼Œé‚£ä¹ˆæŸ¥æ‰¾åˆ†åˆ«ä»0å’Œstr.lengthå¼€å§‹ã€‚ï¼ˆè¯‘è€… æ³¨ï¼šfromIndexçš„å€¼å°äº0ï¼Œç­‰åŒäºä¸ºç©ºæƒ…å†µï¼›fromIndexçš„å€¼å¤§äºæˆ–ç­‰äºstr.lengthï¼Œé‚£ä¹ˆç»“æœ ä¼šç›´æ¥è¿”å›-1ã€‚ï¼‰</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œâ€™hello worldâ€™.indexOf(â€˜oâ€™, -5)è¿”å›4ï¼Œå› ä¸ºå®ƒæ˜¯ä»ä½ç½®0å¤„å¼€å§‹æŸ¥æ‰¾ï¼Œç„¶åoåœ¨ä½ç½®4å¤„è¢«æ‰¾åˆ°ã€‚å¦ä¸€æ–¹é¢ï¼Œâ€™hello worldâ€™.indexOf(â€˜oâ€™, 11)ï¼ˆæˆ–fromIndexå¡«å…¥ä»»ä½•å¤§äº11çš„å€¼ï¼‰ å°†ä¼šè¿”å›-1ï¼Œå› ä¸ºå¼€å§‹æŸ¥æ‰¾çš„ä½ç½®11å¤„ï¼Œå·²ç»æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„ç»“å°¾äº†ã€‚</p><p>è¿”å›å€¼ï¼š</p><p>æŸ¥æ‰¾çš„å­—ç¬¦ä¸²searchValueçš„<strong>ç¬¬ä¸€æ¬¡</strong>å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å›-1ã€‚</p><p>è‹¥è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²searchValueæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›fromIndexã€‚å¦‚æœfromIndexå€¼ä¸ºç©ºï¼Œæˆ–è€…fromIndexå€¼å°äºè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿”å›å€¼å’Œä»¥ä¸‹çš„fromIndexå€¼ä¸€æ ·ã€‚</p><p>å¦‚æœfromIndexå€¼å¤§äºç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå°†ä¼šç›´æ¥è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆstr.lengthï¼‰</p><p>ç‰¹ç‚¹ï¼š</p><p>\1. ä¸¥æ ¼åŒºåˆ†å¤§å°å†™</p><p>\2. åœ¨ä½¿ç”¨indexOfæ£€ç´¢æ•°ç»„æ—¶ï¼Œç”¨â€˜&#x3D;&#x3D;&#x3D;â€™å»åŒ¹é…ï¼Œæ„å‘³ç€ä¼šæ£€æŸ¥æ•°æ®ç±»å‹</p><h4 id="2-9-iframeæœ‰ä»€ä¹ˆä¼˜ç‚¹ã€ç¼ºç‚¹"><a href="#2-9-iframeæœ‰ä»€ä¹ˆä¼˜ç‚¹ã€ç¼ºç‚¹" class="headerlink" title="2.9 iframeæœ‰ä»€ä¹ˆä¼˜ç‚¹ã€ç¼ºç‚¹"></a>2.9 iframeæœ‰ä»€ä¹ˆä¼˜ç‚¹ã€ç¼ºç‚¹</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ä¼˜ç‚¹ï¼š</p><ol><li>iframeèƒ½å¤ŸåŸå°ä¸åŠ¨çš„æŠŠåµŒå…¥çš„ç½‘é¡µå±•ç°å‡ºæ¥ã€‚</li><li>å¦‚æœæœ‰å¤šä¸ªç½‘é¡µå¼•ç”¨iframeï¼Œé‚£ä¹ˆä½ åªéœ€è¦ä¿®æ”¹iframeçš„å†…å®¹ï¼Œå°±å¯ä»¥å®ç°è°ƒç”¨çš„æ¯ä¸€ä¸ªé¡µé¢å†…å®¹çš„æ›´æ”¹ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</li><li>ç½‘é¡µå¦‚æœä¸ºäº†ç»Ÿä¸€é£æ ¼ï¼Œå¤´éƒ¨å’Œç‰ˆæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±å¯ä»¥å†™æˆä¸€ä¸ªé¡µé¢ï¼Œç”¨iframeæ¥åµŒå¥—ï¼Œå¯ä»¥å¢åŠ ä»£ç çš„å¯é‡ç”¨ã€‚</li><li>å¦‚æœé‡åˆ°åŠ è½½ç¼“æ…¢çš„ç¬¬ä¸‰æ–¹å†…å®¹å¦‚å›¾æ ‡å’Œå¹¿å‘Šï¼Œè¿™äº›é—®é¢˜å¯ä»¥ç”±iframeæ¥è§£å†³ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>iframeä¼šé˜»å¡ä¸»é¡µé¢çš„onloadäº‹ä»¶ï¼›</li><li>iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚ä¼šäº§ç”Ÿå¾ˆå¤šé¡µé¢ï¼Œä¸å®¹æ˜“ç®¡ç†ã€‚</li><li>iframeæ¡†æ¶ç»“æ„æœ‰æ—¶ä¼šè®©äººæ„Ÿåˆ°è¿·æƒ‘ï¼Œå¦‚æœæ¡†æ¶ä¸ªæ•°å¤šçš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸Šä¸‹ã€å·¦å³æ»šåŠ¨æ¡ï¼Œä¼šåˆ†æ•£è®¿é—®è€…çš„æ³¨æ„åŠ›ï¼Œç”¨æˆ·ä½“éªŒåº¦å·®ã€‚</li><li>ä»£ç å¤æ‚ï¼Œæ— æ³•è¢«ä¸€äº›æœç´¢å¼•æ“ç´¢å¼•åˆ°ï¼Œè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼Œç°åœ¨çš„æœç´¢å¼•æ“çˆ¬è™«è¿˜ä¸èƒ½å¾ˆå¥½çš„å¤„ç†iframeä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥ä½¿ç”¨iframeä¼šä¸åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰ã€‚</li><li>å¾ˆå¤šçš„ç§»åŠ¨è®¾å¤‡æ— æ³•å®Œå…¨æ˜¾ç¤ºæ¡†æ¶ï¼Œè®¾å¤‡å…¼å®¹æ€§å·®ã€‚</li><li>iframeæ¡†æ¶é¡µé¢ä¼šå¢åŠ æœåŠ¡å™¨çš„httpè¯·æ±‚ï¼Œå¯¹äºå¤§å‹ç½‘ç«™æ˜¯ä¸å¯å–çš„ã€‚</li></ol><h4 id="2-10-webComponents"><a href="#2-10-webComponents" class="headerlink" title="2.10 webComponents"></a>2.10 webComponents</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>Web Components</strong> æ€»çš„æ¥è¯´æ˜¯æä¾›ä¸€æ•´å¥—å®Œå–„çš„å°è£…æœºåˆ¶æ¥æŠŠ Web ç»„ä»¶åŒ–è¿™ä¸ªä¸œè¥¿æ ‡å‡†åŒ–ï¼Œæ¯ä¸ªæ¡†æ¶å®ç° çš„ç»„ä»¶éƒ½ç»Ÿä¸€æ ‡å‡†åœ°è¿›è¡Œè¾“å…¥è¾“å‡ºï¼Œè¿™æ ·å¯ä»¥æ›´å¥½æ¨åŠ¨ç»„ä»¶çš„å¤ç”¨</p><p>åŒ…å«å››ä¸ªéƒ¨åˆ†</p><p>\1. Custom Elements</p><p>\2. HTML Imports</p><p>\3. HTML Templates</p><p>\4. Shadow DOM</p><p><strong>Custom Elements</strong></p><p>æä¾›ä¸€ç§æ–¹å¼è®©å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ HTML å…ƒç´ ï¼ŒåŒ…æ‹¬ç‰¹å®šçš„ç»„æˆï¼Œæ ·å¼å’Œè¡Œä¸ºã€‚æ”¯æŒ Web Components æ ‡å‡†çš„æµè§ˆå™¨ä¼šæä¾›ä¸€ç³»åˆ— API ç»™å¼€å‘è€…ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çš„å…ƒç´ ï¼Œæˆ–è€…æ‰©å±•ç°æœ‰å…ƒç´ ã€‚</p><p><strong>HTML Imports</strong></p><p>ä¸€ç§åœ¨ HTMLs ä¸­å¼•ç”¨ä»¥åŠå¤ç”¨å…¶ä»–çš„ HTML æ–‡æ¡£çš„æ–¹å¼ã€‚è¿™ä¸ª Import å¾ˆæ¼‚äº®ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæˆ‘ä»¬å¸¸è§ çš„æ¨¡æ¿ä¸­çš„includeä¹‹ç±»çš„ä½œç”¨</p><p><strong>HTML Templates</strong></p><p>æ¨¡æ¿</p><p><strong>Shadow DOM</strong></p><p>æä¾›ä¸€ç§æ›´å¥½åœ°ç»„ç»‡é¡µé¢å…ƒç´ çš„æ–¹å¼ï¼Œæ¥ä¸ºæ—¥è¶‹å¤æ‚çš„é¡µé¢åº”ç”¨æä¾›å¼ºå¤§æ”¯æŒï¼Œé¿å…ä»£ç é—´çš„ç›¸äº’å½±å“</p><h4 id="2-11-dvaçš„æ•°æ®æµæµå‘æ˜¯æ€ä¹ˆæ ·çš„"><a href="#2-11-dvaçš„æ•°æ®æµæµå‘æ˜¯æ€ä¹ˆæ ·çš„" class="headerlink" title="2.11 dvaçš„æ•°æ®æµæµå‘æ˜¯æ€ä¹ˆæ ·çš„"></a>2.11 dvaçš„æ•°æ®æµæµå‘æ˜¯æ€ä¹ˆæ ·çš„</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>æ•°æ®çš„æ”¹å˜å‘ç”Ÿé€šå¸¸æ˜¯é€šè¿‡ç”¨æˆ·äº¤äº’è¡Œä¸ºæˆ–è€…æµè§ˆå™¨è¡Œä¸ºï¼ˆå¦‚è·¯ç”±è·³è½¬ç­‰ï¼‰è§¦å‘çš„ï¼Œå½“æ­¤ç±»è¡Œä¸ºä¼šæ”¹å˜æ•°æ® çš„æ—¶å€™å¯ä»¥é€šè¿‡dispatchå‘èµ·ä¸€ä¸ª actionï¼Œå¦‚æœæ˜¯åŒæ­¥è¡Œä¸ºä¼šç›´æ¥é€šè¿‡Reducersæ”¹å˜Stateï¼Œå¦‚æœæ˜¯ å¼‚æ­¥è¡Œä¸ºï¼ˆå‰¯ä½œç”¨ï¼‰ä¼šå…ˆè§¦å‘Effectsç„¶åæµå‘Reducersæœ€ç»ˆæ”¹å˜Stateï¼Œæ‰€ä»¥åœ¨ dva ä¸­ï¼Œæ•°æ®æµå‘é å¸¸æ¸…æ™°ç®€æ˜ï¼Œå¹¶ä¸”æ€è·¯åŸºæœ¬è·Ÿå¼€æºç¤¾åŒºä¿æŒä¸€è‡´ã€‚</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121613938/80A2D6E5BA845BDC932EF25370C0DB0D" alt="img"></p><h4 id="2-12-å˜é‡æå‡"><a href="#2-12-å˜é‡æå‡" class="headerlink" title="2.12 å˜é‡æå‡"></a>2.12 å˜é‡æå‡</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>JavaScriptæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥æ‰§è¡Œè‚¯å®šæ˜¯æŒ‰é¡ºåºæ‰§è¡Œã€‚ä½†æ˜¯å¹¶ä¸æ˜¯é€è¡Œçš„åˆ†æå’Œæ‰§è¡Œï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†ææ‰§è¡Œï¼Œä¼šå…ˆè¿›è¡Œç¼–è¯‘é˜¶æ®µç„¶åæ‰æ˜¯æ‰§è¡Œé˜¶æ®µã€‚åœ¨ç¼–è¯‘é˜¶æ®µé˜¶æ®µï¼Œä»£ç çœŸæ­£æ‰§è¡Œå‰çš„å‡ æ¯«ç§’ï¼Œä¼šæ£€æµ‹åˆ°æ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ï¼Œæ‰€æœ‰è¿™äº›å‡½æ•°å’Œå˜é‡å£°æ˜éƒ½è¢«æ·»åŠ åˆ°åä¸ºLexical Environmentçš„JavaScriptæ•°æ®ç»“æ„å†…çš„å†…å­˜ä¸­ã€‚æ‰€ä»¥è¿™äº›å˜é‡å’Œå‡½æ•°èƒ½åœ¨å®ƒä»¬çœŸæ­£è¢«å£°æ˜ä¹‹å‰ä½¿ç”¨ã€‚</p><h4 id="2-13-ä½œç”¨åŸŸ"><a href="#2-13-ä½œç”¨åŸŸ" class="headerlink" title="2.13 ä½œç”¨åŸŸ"></a>2.13 ä½œç”¨åŸŸ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>æ¦‚å¿µï¼š</strong>ä½œç”¨åŸŸå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åœ°ç›˜ï¼Œè®©å˜é‡ä¸ä¼šå¤–æ³„ã€æš´éœ²å‡ºå»ã€‚ä¹Ÿå°±æ˜¯è¯´ä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯éš”ç¦»å˜é‡ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p><p><strong>ES6 ä¹‹å‰ JavaScript æ²¡æœ‰å—çº§ä½œç”¨åŸŸ,åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸ</strong>ã€‚ES6 çš„åˆ°æ¥ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†â€˜å—çº§ä½œç”¨åŸŸâ€™,å¯é€šè¿‡æ–°å¢å‘½ä»¤ let å’Œ const æ¥ä½“ç°ã€‚</p><p><strong>æ‰©å±•ï¼š</strong></p><p>var â€”â€”ES5 å˜é‡å£°æ˜æ–¹å¼</p><ol><li>åœ¨å˜é‡æœªèµ‹å€¼æ—¶ï¼Œå˜é‡undefinedï¼ˆä¸ºä½¿ç”¨å£°æ˜å˜é‡æ—¶ä¹Ÿä¸ºundefinedï¼‰</li><li>ä½œç”¨åŸŸâ€”â€”varçš„ä½œç”¨åŸŸä¸ºæ–¹æ³•ä½œç”¨åŸŸï¼›åªè¦åœ¨æ–¹æ³•å†…å®šä¹‰äº†ï¼Œæ•´ä¸ªæ–¹æ³•å†…çš„å®šä¹‰å˜é‡åçš„ä»£ç éƒ½å¯ä»¥ä½¿ç”¨</li></ol><p>letâ€”â€”ES6å˜é‡å£°æ˜æ–¹å¼</p><ol><li>åœ¨å˜é‡ä¸ºå£°æ˜å‰ç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™</li><li>ä½œç”¨åŸŸâ€”â€”letä¸ºå—ä½œç”¨åŸŸâ€”â€”é€šå¸¸letæ¯”var èŒƒå›´è¦å°</li><li>letç¦æ­¢é‡å¤å£°æ˜å˜é‡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›varå¯ä»¥é‡å¤å£°æ˜</li></ol><p>constâ€”â€”ES6å˜é‡å£°æ˜æ–¹å¼</p><p>constä¸ºå¸¸é‡å£°æ˜æ–¹å¼ï¼›å£°æ˜å˜é‡æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œåœ¨åé¢å‡ºç°çš„ä»£ç ä¸­ä¸èƒ½å†ä¿®æ”¹è¯¥å¸¸é‡çš„å€¼</p><p>constå®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ä¸å¾—æ”¹åŠ¨</p><h4 id="2-14-HashMap-å’Œ-Array-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#2-14-HashMap-å’Œ-Array-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="2.14 HashMap å’Œ Array æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>2.14 HashMap å’Œ Array æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ol><li>æŸ¥æ‰¾æ•ˆç‡<br>HashMapå› ä¸ºå…¶æ ¹æ®hashcodeçš„å€¼ç›´æ¥ç®—å‡ºindex,æ‰€ä»¥å…¶æŸ¥æ‰¾æ•ˆç‡æ˜¯éšç€æ•°ç»„é•¿åº¦å¢å¤§è€Œå¢åŠ çš„ã€‚<br>ArrayMapä½¿ç”¨çš„æ˜¯äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œæ‰€ä»¥å½“æ•°ç»„é•¿åº¦æ¯å¢åŠ ä¸€å€æ—¶ï¼Œå°±éœ€è¦å¤šè¿›è¡Œä¸€æ¬¡åˆ¤æ–­ï¼Œæ•ˆç‡ä¸‹é™</li><li>æ‰©å®¹æ•°é‡<br>HashMapåˆå§‹å€¼16ä¸ªé•¿åº¦ï¼Œæ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ï¼Œç›´æ¥ç”³è¯·åŒå€çš„æ•°ç»„ç©ºé—´ã€‚<br>ArrayMapæ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ï¼Œå¦‚æœsizeé•¿åº¦å¤§äº8æ—¶ç”³è¯·size*1.5ä¸ªé•¿åº¦ï¼Œå¤§äº4å°äº8æ—¶ç”³è¯·8ä¸ªï¼Œå°äº4æ—¶ç”³ è¯·4ä¸ªã€‚è¿™æ ·æ¯”è¾ƒArrayMapå…¶å®æ˜¯ç”³è¯·äº†æ›´å°‘çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯æ‰©å®¹çš„é¢‘ç‡ä¼šæ›´é«˜ã€‚å› æ­¤ï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä½¿ç”¨HashMapæ›´åˆé€‚ï¼Œå› ä¸ºå…¶æ‰©å®¹çš„æ¬¡æ•°è¦æ¯”ArrayMapå°‘å¾ˆå¤šã€‚</li><li>æ‰©å®¹æ•ˆç‡<br>HashMapæ¯æ¬¡æ‰©å®¹çš„æ—¶å€™é‡æ–°è®¡ç®—æ¯ä¸ªæ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œç„¶åæ”¾åˆ°æ–°çš„ä½ç½®ã€‚<br>ArrayMapåˆ™æ˜¯ç›´æ¥ä½¿ç”¨System.arraycopyï¼Œæ‰€ä»¥æ•ˆç‡ä¸Šè‚¯å®šæ˜¯ArrayMapæ›´å ä¼˜åŠ¿ã€‚</li><li>å†…å­˜æ¶ˆè€—<br>ä»¥ArrayMapé‡‡ç”¨äº†ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼ï¼Œèƒ½å¤Ÿé‡å¤çš„åˆ©ç”¨å› ä¸ºæ•°æ®æ‰©å®¹è€Œé—ç•™ä¸‹æ¥çš„æ•°ç»„ç©ºé—´ï¼Œæ–¹ä¾¿ä¸‹ä¸€ä¸ªArrayMapçš„ä½¿ç”¨ã€‚è€ŒHashMapæ²¡æœ‰è¿™ç§è®¾è®¡ã€‚ ç”±äºArrayMapä¹‹ç¼“å­˜äº†é•¿åº¦æ˜¯4å’Œ8çš„æ—¶å€™ï¼Œæ‰€ä»¥å¦‚æœé¢‘ç¹çš„ä½¿ç”¨åˆ°Mapï¼Œè€Œä¸”æ•°æ®é‡éƒ½æ¯”è¾ƒå°çš„æ—¶å€™ï¼ŒArrayMapæ— ç–‘æ˜¯ç›¸å½“çš„æ˜¯èŠ‚çœå†…å­˜çš„ã€‚</li></ol><p>æ€»ç»“<br>ç»¼ä¸Šæ‰€è¿°ï¼Œæ•°æ®é‡æ¯”è¾ƒå°ï¼Œå¹¶ä¸”éœ€è¦é¢‘ç¹çš„ä½¿ç”¨Mapå­˜å‚¨æ•°æ®çš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨ArrayMapã€‚ è€Œæ•°æ®é‡æ¯”è¾ƒå¤§çš„ æ—¶å€™ï¼Œåˆ™æ¨èä½¿ç”¨HashMapã€‚</p><h4 id="2-15-HashMapå’ŒObject"><a href="#2-15-HashMapå’ŒObject" class="headerlink" title="2.15 HashMapå’ŒObject"></a>2.15 HashMapå’ŒObject</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Objectså’ŒMapsç±»ä¼¼çš„æ˜¯ï¼Œå®ƒä»¬éƒ½å…è®¸ä½ æŒ‰é”®å­˜å–ä¸€ä¸ªå€¼ã€åˆ é™¤é”®ã€æ£€æµ‹ä¸€ä¸ªé”®æ˜¯å¦ç»‘å®šäº†å€¼ã€‚å› æ­¤ï¼ˆå¹¶ä¸”ä¹Ÿæ²¡æœ‰å…¶ä»–å†…å»ºçš„æ›¿ä»£æ–¹å¼äº†ï¼‰è¿‡å»æˆ‘ä»¬ä¸€ç›´éƒ½æŠŠå¯¹è±¡å½“æˆMapsä½¿ç”¨ã€‚ä¸è¿‡Mapså’ŒObjectsæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ï¼Œåœ¨ä¸‹åˆ—æƒ…å†µé‡Œä½¿ç”¨Mapä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼š</p><table><thead><tr><th></th><th>Map</th><th>Object</th></tr></thead><tbody><tr><td>æ„å¤–çš„é”®</td><td>Mapé»˜è®¤æƒ…å†µä¸åŒ…å«ä»»ä½•é”®ã€‚åªåŒ…å«æ˜¾å¼æ’å…¥çš„é”®ã€‚</td><td>ä¸€ä¸ªObjectæœ‰ä¸€ä¸ªåŸå‹, åŸå‹é“¾ä¸Šçš„é”®åæœ‰å¯èƒ½å’Œä½ è‡ªå·±åœ¨å¯¹è±¡ä¸Šçš„è®¾ç½®çš„é”®åäº§ç”Ÿå†²çªã€‚<strong>æ³¨æ„:</strong> è™½ç„¶ ES5 å¼€å§‹å¯ä»¥ç”¨Object.create(null)æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™ç§ç”¨æ³•ä¸å¤ªå¸¸è§ã€‚</td></tr><tr><td>é”®çš„ç±»å‹</td><td>ä¸€ä¸ªMapçš„é”®å¯ä»¥æ˜¯<strong>ä»»æ„å€¼</strong>ï¼ŒåŒ…æ‹¬å‡½æ•°ã€å¯¹è±¡æˆ–ä»»æ„åŸºæœ¬ç±»å‹ã€‚</td><td>ä¸€ä¸ªObjectçš„é”®å¿…é¡»æ˜¯ä¸€ä¸ª <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String">String</a> æˆ–æ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>ã€‚</td></tr><tr><td>é”®çš„é¡ºåº</td><td>Mapä¸­çš„ key æ˜¯æœ‰åºçš„ã€‚å› æ­¤ï¼Œå½“è¿­ä»£çš„æ—¶å€™ï¼Œä¸€ä¸ªMapå¯¹è±¡ä»¥æ’å…¥çš„é¡ºåºè¿”å›é”®å€¼ã€‚</td><td>ä¸€ä¸ªObjectçš„é”®æ˜¯æ— åºçš„æ³¨æ„ï¼šè‡ªECMAScript 2015è§„èŒƒä»¥æ¥ï¼Œå¯¹è±¡<em>ç¡®å®</em>ä¿ç•™äº†å­—ç¬¦ä¸²å’ŒSymbolé”®çš„åˆ›å»ºé¡ºåºï¼› å› æ­¤ï¼Œåœ¨åªæœ‰å­—ç¬¦ä¸²é”®çš„å¯¹è±¡ä¸Šè¿›è¡Œè¿­ä»£å°†æŒ‰æ’å…¥é¡ºåºäº§ç”Ÿé”®ã€‚</td></tr><tr><td>Size</td><td>Mapçš„é”®å€¼å¯¹ä¸ªæ•°å¯ä»¥è½»æ˜“åœ°é€šè¿‡<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/size">size</a> å±æ€§è·å–</td><td>Objectçš„é”®å€¼å¯¹ä¸ªæ•°åªèƒ½æ‰‹åŠ¨è®¡ç®—</td></tr><tr><td>è¿­ä»£</td><td>Mapæ˜¯ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/iterable">iterable</a> çš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¢«è¿­ä»£ã€‚</td><td>è¿­ä»£ä¸€ä¸ªObjectéœ€è¦ä»¥æŸç§æ–¹å¼è·å–å®ƒçš„é”®ç„¶åæ‰èƒ½è¿­ä»£ã€‚</td></tr><tr><td>æ€§èƒ½</td><td>åœ¨é¢‘ç¹å¢åˆ é”®å€¼å¯¹çš„åœºæ™¯ä¸‹è¡¨ç°æ›´å¥½ã€‚</td><td>åœ¨é¢‘ç¹æ·»åŠ å’Œåˆ é™¤é”®å€¼å¯¹çš„åœºæ™¯ä¸‹æœªä½œå‡ºä¼˜åŒ–ã€‚</td></tr></tbody></table><h4 id="2-16-javascriptä¸­argumentsç›¸å…³çš„é—®é¢˜"><a href="#2-16-javascriptä¸­argumentsç›¸å…³çš„é—®é¢˜" class="headerlink" title="2.16 javascriptä¸­argumentsç›¸å…³çš„é—®é¢˜"></a>2.16 javascriptä¸­argumentsç›¸å…³çš„é—®é¢˜</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>arguments</strong></p><p>åœ¨jsä¸­ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨æœ‰å‚æ•°çš„å‡½æ•°æ—¶ï¼Œå½“å¾€è¿™ä¸ªè°ƒç”¨çš„æœ‰å‚å‡½æ•°ä¼ å‚æ—¶ï¼Œjsä¼šæŠŠæ‰€ä¼ çš„å‚æ•°å…¨éƒ¨å­˜åˆ°ä¸€ä¸ªå«argumentsçš„å¯¹è±¡é‡Œé¢ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>ç±»æ•°ç»„æ•°æ®</strong></p><p><strong>ç”±æ¥</strong></p><p>Javascripä¸­æ¯ä¸ªå‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ªArgumentså¯¹è±¡å®ä¾‹argumentsï¼Œå¼•ç”¨ç€å‡½æ•°çš„å®å‚ã€‚å®ƒæ˜¯å¯„ç”Ÿåœ¨jså‡½æ•°å½“ä¸­çš„ï¼Œä¸èƒ½æ˜¾å¼åˆ›å»ºï¼Œargumentså¯¹è±¡åªæœ‰å‡½æ•°å¼€å§‹æ—¶æ‰å¯ç”¨</p><p><strong>ä½œç”¨</strong></p><p>æœ‰äº†argumentsè¿™ä¸ªå¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç»™å‡½æ•°é¢„å…ˆè®¾å®šå½¢å‚äº†ï¼Œå¯ä»¥åŠ¨æ€åœ°é€šè¿‡argumentsä¸ºå‡½æ•°åŠ å…¥å‚æ•°</p><h4 id="2-17-instanceOf-åŸç†ï¼Œæ‰‹åŠ¨å®ç°-function-isInstanceOf-child-Parent"><a href="#2-17-instanceOf-åŸç†ï¼Œæ‰‹åŠ¨å®ç°-function-isInstanceOf-child-Parent" class="headerlink" title="2.17 instanceOf åŸç†ï¼Œæ‰‹åŠ¨å®ç° function isInstanceOf (child, Parent)"></a>2.17 instanceOf åŸç†ï¼Œæ‰‹åŠ¨å®ç° function isInstanceOf (child, Parent)</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>instanceofä¸»è¦ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸç§ç±»å‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> no = <span class="keyword">new</span> <span class="title function_">person</span>()</span><br><span class="line">no <span class="keyword">instanceof</span> person<span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>instanceOf åŸç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">new_instance_of</span>(<span class="params">leftVaule, rightVaule</span>) &#123; </span><br><span class="line">    <span class="keyword">let</span> rightProto = rightVaule.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// å–å³è¡¨è¾¾å¼çš„ prototype å€¼</span></span><br><span class="line">    leftVaule = leftVaule.<span class="property">__proto__</span>; <span class="comment">// å–å·¦è¡¨è¾¾å¼çš„__proto__å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (leftVaule === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;    </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (leftVaule === rightProto) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;    </span><br><span class="line">        &#125; </span><br><span class="line">        leftVaule = leftVaule.<span class="property">__proto__</span> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å® instanceof ä¸»è¦çš„å®ç°åŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ prototype åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œinstanceof åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéå†å·¦è¾¹å˜é‡çš„åŸå‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„ prototypeï¼Œå¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™ä¼šè¿”å› falseï¼Œå‘Šè¯‰æˆ‘ä»¬å·¦è¾¹å˜é‡å¹¶éæ˜¯å³è¾¹å˜é‡çš„å®ä¾‹ã€‚</p><p>åŒæ—¶è¿˜è¦äº†è§£jsçš„åŸå‹ç»§æ‰¿åŸç†</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121650388/2B869BED138922220E1DC0C5C1B898EE" alt="img"></p><p>æˆ‘ä»¬çŸ¥é“æ¯ä¸ª JavaScript å¯¹è±¡å‡æœ‰ä¸€ä¸ªéšå¼çš„ proto åŸå‹å±æ€§ï¼Œè€Œæ˜¾å¼çš„åŸå‹å±æ€§æ˜¯ prototypeï¼Œåªæœ‰ Object.prototype.proto å±æ€§åœ¨æœªä¿®æ”¹çš„æƒ…å†µä¸‹ä¸º null å€¼</p><p>æ‰‹åŠ¨å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">instance_of</span>(<span class="params">L, R</span>) &#123;<span class="comment">//L è¡¨ç¤ºå·¦è¡¨è¾¾å¼ï¼ŒR è¡¨ç¤ºå³è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">var</span> O = R.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    L = L.<span class="property">__proto__</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123; </span><br><span class="line">        <span class="keyword">if</span> (L === <span class="literal">null</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">        <span class="keyword">if</span> (O === L) <span class="comment">// è¿™é‡Œé‡ç‚¹ï¼šå½“ O ä¸¥æ ¼ç­‰äº L æ—¶ï¼Œè¿”å›true </span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">        L = L.<span class="property">__proto__</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¼€å§‹æµ‹è¯•</span></span><br><span class="line"><span class="keyword">var</span> a = []</span><br><span class="line"><span class="keyword">var</span> b = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="title class_">Foo</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">child</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">father</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">child.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title function_">father</span>() </span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title function_">child</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(a, <span class="title class_">Array</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(b, <span class="title class_">Object</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(b, <span class="title class_">Array</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(a, <span class="title class_">Object</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(c, <span class="title class_">Foo</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(d, child)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">instance_of</span>(d, father)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="2-18-æ•°ç»„å»é‡"><a href="#2-18-æ•°ç»„å»é‡" class="headerlink" title="2.18 æ•°ç»„å»é‡"></a>2.18 æ•°ç»„å»é‡</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>1. åˆ©ç”¨ES6 Setå»é‡ï¼ˆES6ä¸­æœ€å¸¸ç”¨ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span> (arr) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"> <span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;&#125;, &#123;&#125;]</span></span><br></pre></td></tr></table></figure><p>ä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œè¿™ç§å»é‡çš„æ–¹æ³•ä»£ç æœ€å°‘ã€‚è¿™ç§æ–¹æ³•è¿˜æ— æ³•å»æ‰â€œ{}â€ç©ºå¯¹è±¡ï¼Œåé¢çš„é«˜é˜¶æ–¹æ³•ä¼šæ·»åŠ å»æ‰é‡å¤â€œ{}â€çš„æ–¹æ³•ã€‚</p><p><strong>2. åˆ©ç”¨foråµŒå¥—forï¼Œç„¶åspliceå»é‡ï¼ˆES5ä¸­æœ€å¸¸ç”¨ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>; j&lt;arr.<span class="property">length</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i]==arr[j])&#123;         <span class="comment">//ç¬¬ä¸€ä¸ªç­‰åŒäºç¬¬äºŒä¸ªï¼Œspliceæ–¹æ³•åˆ é™¤ç¬¬äºŒä¸ª</span></span><br><span class="line">                    arr.<span class="title function_">splice</span>(j,<span class="number">1</span>);</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, 15, false, undefined, NaN, NaN, &quot;NaN&quot;, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]     //NaNå’Œ&#123;&#125;æ²¡æœ‰å»é‡ï¼Œä¸¤ä¸ªnullç›´æ¥æ¶ˆå¤±äº†</span></span><br></pre></td></tr></table></figure><p>åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å…ƒç´ ï¼Œå†…å±‚å¾ªç¯æ—¶æ¯”è¾ƒå€¼ã€‚å€¼ç›¸åŒæ—¶ï¼Œåˆ™åˆ å»è¿™ä¸ªå€¼ã€‚</p><p><strong>3. åˆ©ç”¨indexOfå»é‡</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array .<span class="title function_">indexOf</span>(arr[i]) === -<span class="number">1</span>) &#123;</span><br><span class="line">            array .<span class="title function_">push</span>(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">   <span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]  //NaNã€&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç©ºçš„ç»“æœæ•°ç»„ï¼Œfor å¾ªç¯åŸæ•°ç»„ï¼Œåˆ¤æ–­ç»“æœæ•°ç»„æ˜¯å¦å­˜åœ¨å½“å‰å…ƒç´ ï¼Œå¦‚æœæœ‰ç›¸åŒçš„å€¼åˆ™è·³è¿‡ï¼Œä¸ç›¸åŒåˆ™pushè¿›æ•°ç»„ã€‚</p><p><strong>4. åˆ©ç”¨sort()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    arr = arr.<span class="title function_">sort</span>()</span><br><span class="line">    <span class="keyword">var</span> arrry= [arr[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] !== arr[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">     <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">// [0, 1, 15, &quot;NaN&quot;, NaN, NaN, &#123;â€¦&#125;, &#123;â€¦&#125;, &quot;a&quot;, false, null, true, &quot;true&quot;, undefined]      //NaNã€&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨sort()æ’åºæ–¹æ³•ï¼Œç„¶åæ ¹æ®æ’åºåçš„ç»“æœè¿›è¡Œéå†åŠç›¸é‚»å…ƒç´ æ¯”å¯¹ã€‚</p><p><strong>5. åˆ©ç”¨å¯¹è±¡çš„å±æ€§ä¸èƒ½ç›¸åŒçš„ç‰¹ç‚¹è¿›è¡Œå»é‡ï¼ˆè¿™ç§æ•°ç»„å»é‡çš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œä¸å»ºè®®ç”¨ï¼Œæœ‰å¾…æ”¹è¿›ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arrry= [];</span><br><span class="line">     <span class="keyword">var</span>  obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj[arr[i]]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i])</span><br><span class="line">            obj[arr[i]] = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            obj[arr[i]]++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, 15, false, undefined, null, NaN, 0, &quot;a&quot;, &#123;â€¦&#125;]    //ä¸¤ä¸ªtrueç›´æ¥å»æ‰äº†ï¼ŒNaNå’Œ&#123;&#125;å»é‡</span></span><br></pre></td></tr></table></figure><p><strong>6. åˆ©ç”¨includes</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array =[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>( !array.<span class="title function_">includes</span>( arr[i]) ) &#123;<span class="comment">//includes æ£€æµ‹æ•°ç»„æ˜¯å¦æœ‰æŸä¸ªå€¼</span></span><br><span class="line">                    array.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">              &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]     //&#123;&#125;æ²¡æœ‰å»é‡</span></span><br></pre></td></tr></table></figure><p><strong>7. åˆ©ç”¨hasOwnProperty</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="title function_">hasOwnProperty</span>(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : (obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;]   //æ‰€æœ‰çš„éƒ½å»é‡äº†</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨hasOwnProperty åˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯¹è±¡å±æ€§</p><p><strong>8. åˆ©ç”¨filter</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>) &#123;</span><br><span class="line">    <span class="comment">//å½“å‰å…ƒç´ ï¼Œåœ¨åŸå§‹æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªç´¢å¼•==å½“å‰ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›å½“å‰å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">indexOf</span>(item, <span class="number">0</span>) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure><p><strong>9. åˆ©ç”¨é€’å½’å»é‡</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> array= arr;</span><br><span class="line">        <span class="keyword">var</span> len = array.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    array.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;   <span class="comment">//æ’åºåæ›´åŠ æ–¹ä¾¿å»é‡</span></span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">index</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[index] === array[index-<span class="number">1</span>])&#123;</span><br><span class="line">                array.<span class="title function_">splice</span>(index,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">loop</span>(index - <span class="number">1</span>);    <span class="comment">//é€’å½’loopï¼Œç„¶åæ•°ç»„å»é‡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">loop</span>(len-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;â€¦&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, undefined]</span></span><br></pre></td></tr></table></figure><p><strong>10. åˆ©ç”¨Mapæ•°æ®ç»“æ„å»é‡</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrayNonRepeatfy</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">let</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>();  <span class="comment">// æ•°ç»„ç”¨äºè¿”å›ç»“æœ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(map .<span class="title function_">has</span>(arr[i])) &#123;  <span class="comment">// å¦‚æœæœ‰è¯¥keyå€¼</span></span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">true</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">false</span>);   <span class="comment">// å¦‚æœæ²¡æœ‰è¯¥keyå€¼</span></span><br><span class="line">      array .<span class="title function_">push</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">return</span> array ;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;â€¦&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, undefined]</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªç©ºMapæ•°æ®ç»“æ„ï¼Œéå†éœ€è¦å»é‡çš„æ•°ç»„ï¼ŒæŠŠæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ä½œä¸ºkeyå­˜åˆ°Mapä¸­ã€‚ç”±äºMapä¸­ä¸ä¼šå‡ºç°ç›¸åŒçš„keyå€¼ï¼Œæ‰€ä»¥æœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯å»é‡åçš„ç»“æœã€‚</p><p><strong>11. åˆ©ç”¨reduce+includes</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,cur</span>) =&gt;</span> prev.<span class="title function_">includes</span>(cur) ? prev : [...prev,cur],[]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr));</span><br><span class="line"><span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure><p><strong>12. [â€¦new Set(arr)]</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)] </span><br><span class="line"><span class="comment">//ä»£ç å°±æ˜¯è¿™ä¹ˆå°‘----ï¼ˆå…¶å®ï¼Œä¸¥æ ¼æ¥è¯´å¹¶ä¸ç®—æ˜¯ä¸€ç§ï¼Œç›¸å¯¹äºç¬¬ä¸€ç§æ–¹æ³•æ¥è¯´åªæ˜¯ç®€åŒ–äº†ä»£ç ï¼‰</span></span><br></pre></td></tr></table></figure><h4 id="2-19-ç¼–ç å’Œå­—ç¬¦é›†çš„åŒºåˆ«"><a href="#2-19-ç¼–ç å’Œå­—ç¬¦é›†çš„åŒºåˆ«" class="headerlink" title="2.19 ç¼–ç å’Œå­—ç¬¦é›†çš„åŒºåˆ«"></a>2.19 ç¼–ç å’Œå­—ç¬¦é›†çš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>å­—ç¬¦é›†æ˜¯ä¹¦å†™ç³»ç»Ÿå­—æ¯ä¸ç¬¦å·çš„é›†åˆï¼Œè€Œå­—ç¬¦ç¼–ç åˆ™æ˜¯å°†å­—ç¬¦æ˜ å°„ä¸ºä¸€ç‰¹å®šçš„å­—èŠ‚æˆ–å­—èŠ‚åºåˆ—ï¼Œæ˜¯ä¸€ç§è§„åˆ™ã€‚é€šå¸¸ç‰¹å®šçš„å­—ç¬¦é›†é‡‡ç”¨ç‰¹å®šçš„ç¼–ç æ–¹å¼ï¼ˆå³ä¸€ç§å­—ç¬¦é›†å¯¹åº”ä¸€ç§å­—ç¬¦ç¼–ç ï¼ˆä¾‹å¦‚ï¼šASCIIã€IOS-8859-1ã€GB2312ã€GBKï¼Œéƒ½æ˜¯å³è¡¨ç¤ºäº†å­—ç¬¦é›†åˆè¡¨ç¤ºäº†å¯¹åº”çš„å­—ç¬¦ç¼–ç ï¼Œä½†Unicodeä¸æ˜¯ï¼Œå®ƒé‡‡ç”¨ç°ä»£çš„æ¨¡å‹ï¼‰ï¼‰</p><p><strong>æ‰©å±•ï¼š</strong></p><p>å­—ç¬¦ï¼šåœ¨è®¡ç®—æœºå’Œç”µä¿¡æŠ€æœ¯ä¸­ï¼Œä¸€ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªå•ä½çš„å­—å½¢ã€ç±»å­—å½¢å•ä½æˆ–ç¬¦å·çš„åŸºæœ¬ä¿¡æ¯ã€‚å³ä¸€ä¸ªå­—ç¬¦å¯ä»¥æ˜¯ä¸€ä¸ªä¸­æ–‡æ±‰å­—ã€ä¸€ä¸ªè‹±æ–‡å­—æ¯ã€ä¸€ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—ã€ä¸€ä¸ªæ ‡ç‚¹ç¬¦å·ç­‰ã€‚</p><p>å­—ç¬¦é›†ï¼šå¤šä¸ªå­—ç¬¦çš„é›†åˆã€‚ä¾‹å¦‚GB2312æ˜¯ä¸­å›½å›½å®¶æ ‡å‡†çš„ç®€ä½“ä¸­æ–‡å­—ç¬¦é›†ï¼ŒGB2312æ”¶å½•ç®€åŒ–æ±‰å­—ï¼ˆ6763ä¸ªï¼‰åŠä¸€èˆ¬ç¬¦å·ã€åºå·ã€æ•°å­—ã€æ‹‰ä¸å­—æ¯ã€æ—¥æ–‡å‡åã€å¸Œè…Šå­—æ¯ã€ä¿„æ–‡å­—æ¯ã€æ±‰è¯­æ‹¼éŸ³ç¬¦å·ã€æ±‰è¯­æ³¨éŸ³å­—æ¯ï¼Œå…± 7445 ä¸ªå›¾å½¢å­—ç¬¦ã€‚</p><p>å­—ç¬¦ç¼–ç ï¼šæŠŠå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ç¼–ç ä¸ºï¼ˆæ˜ å°„ï¼‰æŒ‡å®šé›†åˆä¸­çš„æŸä¸€å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼šæ¯”ç‰¹æ¨¡å¼ã€è‡ªç„¶æ•°åºåˆ—ã€ç”µè„‰å†²ï¼‰ï¼Œä»¥ä¾¿æ–‡æœ¬åœ¨è®¡ç®—æœºä¸­å­˜å‚¨å’Œé€šè¿‡é€šä¿¡ç½‘ç»œçš„ä¼ é€’ã€‚</p><h4 id="2-20-null-å’Œ-undefined-çš„åŒºåˆ«ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå±æ€§å˜ä¸ºnull"><a href="#2-20-null-å’Œ-undefined-çš„åŒºåˆ«ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå±æ€§å˜ä¸ºnull" class="headerlink" title="2.20 null å’Œ undefined çš„åŒºåˆ«ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå±æ€§å˜ä¸ºnull"></a>2.20 null å’Œ undefined çš„åŒºåˆ«ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå±æ€§å˜ä¸ºnull</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>undefined è¡¨ç¤ºä¸€ä¸ªå˜é‡è‡ªç„¶çš„ã€æœ€åŸå§‹çš„çŠ¶æ€å€¼ï¼Œè€Œ null åˆ™è¡¨ç¤ºä¸€ä¸ªå˜é‡è¢«äººä¸ºçš„è®¾ç½®ä¸ºç©ºå¯¹è±¡ï¼Œè€Œä¸æ˜¯åŸå§‹çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ä¿è¯å˜é‡æ‰€ä»£è¡¨çš„è¯­ä¹‰ï¼Œä¸è¦å¯¹ä¸€ä¸ªå˜é‡æ˜¾å¼çš„èµ‹å€¼ undefinedï¼Œå½“éœ€è¦é‡Šæ”¾ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç›´æ¥èµ‹å€¼ä¸º null å³å¯ã€‚</p><p><strong>è§£æï¼š</strong></p><p><strong>undefined</strong> çš„å­—é¢æ„æ€å°±æ˜¯ï¼šæœªå®šä¹‰çš„å€¼ ã€‚è¿™ä¸ªå€¼çš„è¯­ä¹‰æ˜¯ï¼Œå¸Œæœ›<strong>è¡¨ç¤ºä¸€ä¸ªå˜é‡æœ€åŸå§‹çš„çŠ¶æ€ï¼Œè€Œéäººä¸ºæ“ä½œçš„ç»“æœ ã€‚</strong> è¿™ç§åŸå§‹çŠ¶æ€ä¼šåœ¨ä»¥ä¸‹ 4 ç§åœºæ™¯ä¸­å‡ºç°ï¼š</p><ol><li>å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ²¡æœ‰èµ‹å€¼</li><li>è®¿é—®å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§</li><li>å‡½æ•°å®šä¹‰äº†å½¢å‚ï¼Œä½†æ²¡æœ‰ä¼ é€’å®å‚</li><li>ä½¿ç”¨ void å¯¹è¡¨è¾¾å¼æ±‚å€¼</li></ol><p>å› æ­¤ï¼Œundefined ä¸€èˆ¬éƒ½æ¥è‡ªäºæŸä¸ªè¡¨è¾¾å¼æœ€åŸå§‹çš„çŠ¶æ€å€¼ï¼Œä¸æ˜¯äººä¸ºæ“ä½œçš„ç»“æœã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ undefinedï¼Œä½†è¿™æ ·åšæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºä¸€ä¸ªå˜é‡ä¸èµ‹å€¼å°±æ˜¯ undefined ã€‚</p><p><strong>null</strong> çš„å­—é¢æ„æ€æ˜¯ï¼šç©ºå€¼ ã€‚è¿™ä¸ªå€¼çš„è¯­ä¹‰æ˜¯ï¼Œå¸Œæœ›<strong>è¡¨ç¤º ä¸€ä¸ªå¯¹è±¡è¢«äººä¸ºçš„é‡ç½®ä¸ºç©ºå¯¹è±¡ï¼Œè€Œéä¸€ä¸ªå˜é‡æœ€åŸå§‹çš„çŠ¶æ€ ã€‚</strong> åœ¨å†…å­˜é‡Œçš„è¡¨ç¤ºå°±æ˜¯ï¼Œæ ˆä¸­çš„å˜é‡æ²¡æœ‰æŒ‡å‘å †ä¸­çš„å†…å­˜å¯¹è±¡</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646121680358/0B3EF648CF963F2F1CFB70DE3D6350F4" alt="img"></p><p>null æœ‰å±äºè‡ªå·±çš„ç±»å‹ Nullï¼Œè€Œä¸å±äºObjectç±»å‹ï¼Œtypeof ä¹‹æ‰€ä»¥ä¼šåˆ¤å®šä¸º Object ç±»å‹ï¼Œæ˜¯å› ä¸ºJavaScript æ•°æ®ç±»å‹åœ¨åº•å±‚éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼è¡¨ç¤ºçš„ï¼Œ<strong>äºŒè¿›åˆ¶çš„å‰ä¸‰ä½ä¸º 0 ä¼šè¢« typeof åˆ¤æ–­ä¸ºå¯¹è±¡ç±»å‹</strong>ï¼Œè€Œ null çš„äºŒè¿›åˆ¶ä½æ°å¥½éƒ½æ˜¯ 0 ï¼Œå› æ­¤ï¼Œnull è¢«è¯¯åˆ¤æ–­ä¸º Object ç±»å‹ã€‚</p><h4 id="2-21-æ•°ç»„å’Œä¼ªæ•°ç»„çš„åŒºåˆ«"><a href="#2-21-æ•°ç»„å’Œä¼ªæ•°ç»„çš„åŒºåˆ«" class="headerlink" title="2.21 æ•°ç»„å’Œä¼ªæ•°ç»„çš„åŒºåˆ«"></a>2.21 æ•°ç»„å’Œä¼ªæ•°ç»„çš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>å®šä¹‰</li></ol><ul><li>æ•°ç»„æ˜¯ä¸€ä¸ªç‰¹æ®Šå¯¹è±¡,ä¸å¸¸è§„å¯¹è±¡çš„åŒºåˆ«ï¼š<ul><li>å½“ç”±æ–°å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨ä¸­æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°lengthå±æ€§</li><li>è®¾ç½®lengthå±æ€§ï¼Œå¯ä»¥æˆªæ–­æ•°ç»„</li><li>ä»Array.protoypeä¸­ç»§æ‰¿äº†æ–¹æ³•</li><li>å±æ€§ä¸ºâ€™Arrayâ€™</li></ul></li><li>ç±»æ•°ç»„æ˜¯ä¸€ä¸ªæ‹¥æœ‰lengthå±æ€§ï¼Œå¹¶ä¸”ä»–å±æ€§ä¸ºéè´Ÿæ•´æ•°çš„æ™®é€šå¯¹è±¡ï¼Œç±»æ•°ç»„ä¸èƒ½ç›´æ¥è°ƒç”¨æ•°ç»„æ–¹æ³•ã€‚</li></ul><ol><li>åŒºåˆ«<br>æœ¬è´¨ï¼šç±»æ•°ç»„æ˜¯ç®€å•å¯¹è±¡ï¼Œå®ƒçš„åŸå‹å…³ç³»ä¸æ•°ç»„ä¸åŒã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå‹å…³ç³»å’ŒåŸå§‹å€¼è½¬æ¢</span></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="number">10</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike.<span class="property">__proto__</span>.<span class="property">constructor</span> === <span class="title class_">Array</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike.<span class="title function_">toString</span>()); <span class="comment">// [object Object]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike.<span class="title function_">valueOf</span>()); <span class="comment">// &#123;length: 10&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array.<span class="property">__proto__</span>.<span class="property">constructor</span> === <span class="title class_">Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array.<span class="title function_">toString</span>()); <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array.<span class="title function_">valueOf</span>()); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><ol><li>ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„</li></ol><ul><li>è½¬æ¢æ–¹æ³•<ul><li>ä½¿ç”¨Array.from()</li><li>ä½¿ç”¨Array.prototype.slice.call()</li><li>ä½¿ç”¨Array.prototype.forEach()è¿›è¡Œå±æ€§éå†å¹¶ç»„æˆæ–°çš„æ•°ç»„</li></ul></li><li>è½¬æ¢é¡»çŸ¥<ul><li>è½¬æ¢åçš„æ•°ç»„é•¿åº¦ç”±lengthå±æ€§å†³å®šã€‚ç´¢å¼•ä¸è¿ç»­æ—¶è½¬æ¢ç»“æœæ˜¯è¿ç»­çš„ï¼Œä¼šè‡ªåŠ¨è¡¥ä½ã€‚</li><li>ä»£ç ç¤ºä¾‹</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> al1 = &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">0</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="number">4</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="number">5</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(al1)) <span class="comment">// [0, 1, undefined, 3]</span></span><br></pre></td></tr></table></figure><ul><li>â‘¡ä»…è€ƒè™‘ 0æˆ–æ­£æ•´æ•° çš„ç´¢å¼•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»£ç ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">let</span> al2 = &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;-1&#x27;</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">a</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(al2)); <span class="comment">// [0, 1, undefined, undefined]</span></span><br></pre></td></tr></table></figure><ul><li>â‘¢ä½¿ç”¨sliceè½¬æ¢äº§ç”Ÿç¨€ç–æ•°ç»„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»£ç ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">let</span> al2 = &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;-1&#x27;</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">a</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(al2)); <span class="comment">//[0, 1, empty Ã— 2]</span></span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨æ•°ç»„æ–¹æ³•æ“ä½œç±»æ•°ç»„æ³¨æ„åœ°æ–¹</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike2 = &#123;</span><br><span class="line">  <span class="number">2</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">push</span>: <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// push æ“ä½œçš„æ˜¯ç´¢å¼•å€¼ä¸º length çš„ä½ç½®</span></span><br><span class="line">arrayLike2.<span class="title function_">push</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike2); <span class="comment">// &#123;2: 1, 3: 4, length: 3, push: Æ’&#125;</span></span><br><span class="line">arrayLike2.<span class="title function_">push</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayLike2); <span class="comment">// &#123;2: 1, 3: 2, length: 4, push: Æ’&#125;</span></span><br></pre></td></tr></table></figure><h4 id="2-22-æ‰‹å†™ä¸€ä¸ªå‘å¸ƒè®¢é˜…"><a href="#2-22-æ‰‹å†™ä¸€ä¸ªå‘å¸ƒè®¢é˜…" class="headerlink" title="2.22 æ‰‹å†™ä¸€ä¸ªå‘å¸ƒè®¢é˜…"></a>2.22 æ‰‹å†™ä¸€ä¸ªå‘å¸ƒè®¢é˜…</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒè®¢é˜…ä¸­å¿ƒ, on-è®¢é˜…, offå–æ¶ˆè®¢é˜…, emitå‘å¸ƒ, å†…éƒ¨éœ€è¦ä¸€ä¸ªå•ç‹¬äº‹ä»¶ä¸­å¿ƒcachesè¿›è¡Œå­˜å‚¨;</span></span><br><span class="line">interface <span class="title class_">CacheProps</span> &#123;</span><br><span class="line">  [<span class="attr">key</span>: string]: <span class="title class_">Array</span>&lt;(<span class="function">(<span class="params">data?: unknown</span>) =&gt;</span> <span class="keyword">void</span>)&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  private <span class="attr">caches</span>: <span class="title class_">CacheProps</span> = &#123;&#125;; <span class="comment">// äº‹ä»¶ä¸­å¿ƒ</span></span><br><span class="line">  on (<span class="attr">eventName</span>: string, <span class="attr">fn</span>: <span class="function">(<span class="params">data?: unknown</span>) =&gt;</span> <span class="keyword">void</span>)&#123; <span class="comment">// eventNameäº‹ä»¶å-ç‹¬ä¸€æ— äºŒ, fnè®¢é˜…åæ‰§è¡Œçš„è‡ªå®šä¹‰è¡Œä¸º</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">caches</span>[eventName] = <span class="variable language_">this</span>.<span class="property">caches</span>[eventName] || [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">caches</span>[eventName].<span class="title function_">push</span>(fn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  emit (<span class="attr">eventName</span>: string, data?: unknown) &#123; <span class="comment">// å‘å¸ƒ =&gt; å°†è®¢é˜…çš„äº‹ä»¶è¿›è¡Œç»Ÿä¸€æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">caches</span>[eventName]) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">caches</span>[eventName].<span class="title function_">forEach</span>(<span class="function">(<span class="params">fn: (data?: unknown) =&gt; <span class="keyword">void</span></span>) =&gt;</span> <span class="title function_">fn</span>(data));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  off (<span class="attr">eventName</span>: string, fn?: <span class="function">(<span class="params">data?: unknown</span>) =&gt;</span> <span class="keyword">void</span>) &#123; <span class="comment">// å–æ¶ˆè®¢é˜… =&gt; è‹¥fnä¸ä¼ , ç›´æ¥å–æ¶ˆè¯¥äº‹ä»¶æ‰€æœ‰è®¢é˜…ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">caches</span>[eventName]) &#123;</span><br><span class="line">      <span class="keyword">const</span> newCaches = fn ? <span class="variable language_">this</span>.<span class="property">caches</span>[eventName].<span class="title function_">filter</span>(<span class="function"><span class="params">e</span> =&gt;</span> e !== fn) : [];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">caches</span>[eventName] = newCaches;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-23-æ‰‹å†™æ•°ç»„è½¬æ ‘"><a href="#2-23-æ‰‹å†™æ•°ç»„è½¬æ ‘" class="headerlink" title="2.23 æ‰‹å†™æ•°ç»„è½¬æ ‘"></a>2.23 æ‰‹å†™æ•°ç»„è½¬æ ‘</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>é—®é¢˜ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹å¦‚å°† input è½¬æˆoutputçš„å½¢å¼</span></span><br><span class="line"><span class="keyword">let</span> input = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>, <span class="attr">parentId</span>: <span class="literal">null</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>, <span class="attr">parentId</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> output = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>,</span><br><span class="line">            <span class="attr">children</span>: []</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç­”æ¡ˆ</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»£ç å®ç°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">arrayToTree</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> root = array[<span class="number">0</span>]</span><br><span class="line">    array.<span class="title function_">shift</span>()</span><br><span class="line">    <span class="keyword">let</span> tree = &#123;</span><br><span class="line">        <span class="attr">id</span>: root.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">val</span>: root.<span class="property">val</span>,</span><br><span class="line">        <span class="attr">children</span>: array.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="title function_">toTree</span>(root.<span class="property">id</span>, array) : []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tree;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toTree</span>(<span class="params">parenId, array</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> children = []</span><br><span class="line">    <span class="keyword">let</span> len = array.<span class="property">length</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> node = array[i]</span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">parentId</span> === parenId) &#123;</span><br><span class="line">            children.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">id</span>: node.<span class="property">id</span>,</span><br><span class="line">                <span class="attr">val</span>: node.<span class="property">val</span>,</span><br><span class="line">                <span class="attr">children</span>: <span class="title function_">toTree</span>(node.<span class="property">id</span>, array)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> children</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">arrayToTree</span>(input))</span><br></pre></td></tr></table></figure><h4 id="2-24-ä»‹ç»ä¸‹-Setã€Mapã€WeakSet-å’Œ-WeakMap-çš„åŒºåˆ«ï¼Ÿ"><a href="#2-24-ä»‹ç»ä¸‹-Setã€Mapã€WeakSet-å’Œ-WeakMap-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2.24 ä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap çš„åŒºåˆ«ï¼Ÿ"></a>2.24 ä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap çš„åŒºåˆ«ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>Set</strong></p><ol><li>æˆå‘˜ä¸èƒ½é‡å¤ï¼›</li><li>åªæœ‰é”®å€¼ï¼Œæ²¡æœ‰é”®åï¼Œæœ‰ç‚¹ç±»ä¼¼æ•°ç»„ï¼›</li><li>å¯ä»¥éå†ï¼Œæ–¹æ³•æœ‰addã€deleteã€has</li></ol><p><strong>WeakSet</strong></p><ol><li>æˆå‘˜éƒ½æ˜¯å¯¹è±¡ï¼ˆå¼•ç”¨ï¼‰ï¼›</li><li>æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œéšæ—¶å¯ä»¥æ¶ˆå¤±ï¼ˆä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ï¼‰ã€‚å¯ä»¥ç”¨æ¥ä¿å­˜ DOM èŠ‚ç‚¹ï¼Œä¸å®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ï¼›</li><li>ä¸èƒ½éå†ï¼Œæ–¹æ³•æœ‰addã€deleteã€hasï¼›</li></ol><p><strong>Map</strong></p><ol><li>æœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼é›†åˆï¼›</li><li>å¯ä»¥éå†ï¼Œæ–¹æ³•å¾ˆå¤šï¼Œå¯ä»¥è·Ÿå„ç§æ•°æ®æ ¼å¼è½¬æ¢ï¼›</li></ol><p><strong>WeakMap</strong></p><ol><li>åªæ¥æ”¶å¯¹è±¡ä¸ºé”®åï¼ˆnull é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åï¼›</li><li>é”®åæŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ï¼›</li><li>ä¸èƒ½éå†ï¼Œæ–¹æ³•åŒgetã€setã€hasã€deleteï¼›</li></ol><h4 id="2-25-ç®€å•è¯´è¯´-js-ä¸­æœ‰å“ªå‡ ç§å†…å­˜æ³„éœ²çš„æƒ…å†µ"><a href="#2-25-ç®€å•è¯´è¯´-js-ä¸­æœ‰å“ªå‡ ç§å†…å­˜æ³„éœ²çš„æƒ…å†µ" class="headerlink" title="2.25 ç®€å•è¯´è¯´ js ä¸­æœ‰å“ªå‡ ç§å†…å­˜æ³„éœ²çš„æƒ…å†µ"></a>2.25 ç®€å•è¯´è¯´ js ä¸­æœ‰å“ªå‡ ç§å†…å­˜æ³„éœ²çš„æƒ…å†µ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>æ„å¤–çš„å…¨å±€å˜é‡ï¼›</li><li>é—­åŒ…ï¼›</li><li>æœªè¢«æ¸…ç©ºçš„å®šæ—¶å™¨ï¼›</li><li>æœªè¢«é”€æ¯çš„äº‹ä»¶ç›‘å¬ï¼›</li><li>DOM å¼•ç”¨ï¼›</li></ol><h4 id="2-26-å¼‚æ­¥ç¬”è¯•é¢˜"><a href="#2-26-å¼‚æ­¥ç¬”è¯•é¢˜" class="headerlink" title="2.26 å¼‚æ­¥ç¬”è¯•é¢˜"></a>2.26 å¼‚æ­¥ç¬”è¯•é¢˜</h4><p>è¯·å†™å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»Šæ—¥å¤´æ¡é¢è¯•é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>()</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;settimeout&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">async1</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure><p>é¢˜ç›®çš„æœ¬è´¨ï¼Œå°±æ˜¯è€ƒå¯ŸsetTimeoutã€promiseã€async awaitçš„å®ç°åŠæ‰§è¡Œé¡ºåºï¼Œä»¥åŠ JS çš„äº‹ä»¶å¾ªç¯çš„ç›¸å…³é—®é¢˜ã€‚</p><p>ç­”æ¡ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">async2</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">async1 end</span><br><span class="line">promise2</span><br><span class="line">settimeout</span><br></pre></td></tr></table></figure><h4 id="2-27-jsonå’Œxmlæ•°æ®çš„åŒºåˆ«"><a href="#2-27-jsonå’Œxmlæ•°æ®çš„åŒºåˆ«" class="headerlink" title="2.27 jsonå’Œxmlæ•°æ®çš„åŒºåˆ«"></a>2.27 jsonå’Œxmlæ•°æ®çš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>æ•°æ®ä½“ç§¯æ–¹é¢ï¼šxmlæ˜¯é‡é‡çº§çš„ï¼Œjsonæ˜¯è½»é‡çº§çš„ï¼Œä¼ é€’çš„é€Ÿåº¦æ›´å¿«äº›ã€‚</li><li>æ•°æ®ä¼ è¾“æ–¹é¢ï¼šxmlåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ¯”è¾ƒå å¸¦å®½ï¼Œjsonå å¸¦å®½å°‘ï¼Œæ˜“äºå‹ç¼©ã€‚</li><li>æ•°æ®äº¤äº’æ–¹é¢ï¼šjsonä¸javascriptçš„äº¤äº’æ›´åŠ æ–¹ä¾¿ï¼Œæ›´å®¹æ˜“è§£æå¤„ç†ï¼Œæ›´å¥½çš„è¿›è¡Œæ•°æ®äº¤äº’</li><li>æ•°æ®æè¿°æ–¹é¢ï¼šjsonå¯¹æ•°æ®çš„æè¿°æ€§æ¯”xmlè¾ƒå·®</li><li>xmlå’Œjsonéƒ½ç”¨åœ¨é¡¹ç›®äº¤äº’ä¸‹ï¼Œxmlå¤šç”¨äºåšé…ç½®æ–‡ä»¶ï¼Œjsonç”¨äºæ•°æ®äº¤äº’ã€‚</li></ol><h4 id="2-28-JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹"><a href="#2-28-JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹" class="headerlink" title="2.28 JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹?"></a>2.28 JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹?</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>ä½¿ç”¨typeofæ£€æµ‹å½“éœ€è¦åˆ¤æ–­å˜é‡æ˜¯å¦æ˜¯number, string, boolean, function, undefinedç­‰ç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨typeofè¿›è¡Œåˆ¤æ–­ã€‚</li><li>ä½¿ç”¨instanceofæ£€æµ‹instanceofè¿ç®—ç¬¦ä¸typeofè¿ç®—ç¬¦ç›¸ä¼¼ï¼Œç”¨äºè¯†åˆ«æ­£åœ¨å¤„ç†çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¸typeofæ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œinstanceof æ–¹æ³•è¦æ±‚å¼€å‘è€…æ˜ç¡®åœ°ç¡®è®¤å¯¹è±¡ä¸ºæŸç‰¹å®šç±»å‹ã€‚</li><li>ä½¿ç”¨constructoræ£€æµ‹constructoræœ¬æ¥æ˜¯åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°ã€‚ä½†æ˜¯æ ¹æ®å®ä¾‹å¯¹è±¡å¯»æ‰¾å±æ€§çš„é¡ºåºï¼Œè‹¥å®ä¾‹å¯¹è±¡ä¸Šæ²¡æœ‰å®ä¾‹å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå°±å»åŸå‹é“¾ä¸Šå¯»æ‰¾ï¼Œå› æ­¤ï¼Œå®ä¾‹å¯¹è±¡ä¹Ÿæ˜¯èƒ½ä½¿ç”¨constructorå±æ€§çš„ã€‚</li></ol><h4 id="2-29-ä»£ç è§£é‡Šé¢˜"><a href="#2-29-ä»£ç è§£é‡Šé¢˜" class="headerlink" title="2.29 ä»£ç è§£é‡Šé¢˜"></a>2.29 ä»£ç è§£é‡Šé¢˜</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>é¢˜ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>();</span><br><span class="line">max = <span class="title class_">Math</span>.<span class="title function_">max</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(min &lt; max);</span><br><span class="line"><span class="comment">// å†™å‡ºæ‰§è¡Œç»“æœï¼Œå¹¶è§£é‡ŠåŸå› </span></span><br></pre></td></tr></table></figure><p><strong>ç­”æ¡ˆ</strong><br>false</p><p><strong>è§£æ</strong></p><ul><li>æŒ‰å¸¸è§„çš„æ€è·¯ï¼Œè¿™æ®µä»£ç åº”è¯¥è¾“å‡º trueï¼Œæ¯•ç«Ÿæœ€å°å€¼å°äºæœ€å¤§å€¼ã€‚ä½†æ˜¯å´è¾“å‡º false</li><li>MDN ç›¸å…³æ–‡æ¡£æ˜¯è¿™æ ·è§£é‡Šçš„<ul><li>Math.min çš„å‚æ•°æ˜¯ 0 ä¸ªæˆ–è€…å¤šä¸ªï¼Œå¦‚æœå¤šä¸ªå‚æ•°å¾ˆå®¹æ˜“ç†è§£ï¼Œè¿”å›å‚æ•°ä¸­æœ€å°çš„ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™è¿”å› Infinityï¼Œæ— ç©·å¤§ã€‚</li><li>è€Œ Math.max æ²¡æœ‰ä¼ é€’å‚æ•°æ—¶è¿”å›çš„æ˜¯-Infinity.æ‰€ä»¥è¾“å‡º false</li></ul></li></ul><h4 id="2-30-ä»£ç è§£æé¢˜"><a href="#2-30-ä»£ç è§£æé¢˜" class="headerlink" title="2.30 ä»£ç è§£æé¢˜"></a>2.30 ä»£ç è§£æé¢˜</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>é¢˜ç›®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> company = &#123;</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> yideng = <span class="title class_">Object</span>.<span class="title function_">create</span>(company);</span><br><span class="line"><span class="keyword">delete</span> yideng.<span class="property">address</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(yideng.<span class="property">address</span>);</span><br><span class="line"><span class="comment">// å†™å‡ºæ‰§è¡Œç»“æœï¼Œå¹¶è§£é‡ŠåŸå› </span></span><br></pre></td></tr></table></figure><p><strong>ç­”æ¡ˆ</strong><br>beijing</p><p><strong>è§£æ</strong><br>è¿™é‡Œçš„ yideng é€šè¿‡ prototype ç»§æ‰¿äº† companyçš„ addressã€‚yidengè‡ªå·±å¹¶æ²¡æœ‰addresså±æ€§ã€‚æ‰€ä»¥deleteæ“ä½œç¬¦çš„ä½œç”¨æ˜¯æ— æ•ˆçš„ã€‚</p><p><strong>æ‰©å±•</strong><br>1.deleteä½¿ç”¨åŸåˆ™ï¼šdelete æ“ä½œç¬¦ç”¨æ¥åˆ é™¤ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚<br>2.deleteåœ¨åˆ é™¤ä¸€ä¸ªä¸å¯é…ç½®çš„å±æ€§æ—¶åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹çš„åŒºåˆ«:<br>ï¼ˆ1ï¼‰åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå¦‚æœå±æ€§æ˜¯ä¸€ä¸ªä¸å¯é…ç½®ï¼ˆnon-configurableï¼‰å±æ€§ï¼Œåˆ é™¤æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸;<br>ï¼ˆ2ï¼‰éä¸¥æ ¼æ¨¡å¼ä¸‹è¿”å› falseã€‚<br>3.deleteèƒ½åˆ é™¤éšå¼å£°æ˜çš„å…¨å±€å˜é‡ï¼šè¿™ä¸ªå…¨å±€å˜é‡å…¶å®æ˜¯globalå¯¹è±¡(window)çš„å±æ€§<br>4.deleteèƒ½åˆ é™¤çš„ï¼š<br>ï¼ˆ1ï¼‰å¯é…ç½®å¯¹è±¡çš„å±æ€§ï¼ˆ2ï¼‰éšå¼å£°æ˜çš„å…¨å±€å˜é‡ ï¼ˆ3ï¼‰ç”¨æˆ·å®šä¹‰çš„å±æ€§ ï¼ˆ4ï¼‰åœ¨ECMAScript 6ä¸­ï¼Œé€šè¿‡ const æˆ– let å£°æ˜æŒ‡å®šçš„ â€œtemporal dead zoneâ€ (TDZ) å¯¹ delete æ“ä½œç¬¦ä¹Ÿä¼šèµ·ä½œç”¨<br>deleteä¸èƒ½åˆ é™¤çš„ï¼š<br>ï¼ˆ2ï¼‰æ˜¾å¼å£°æ˜çš„å…¨å±€å˜é‡ ï¼ˆ2ï¼‰å†…ç½®å¯¹è±¡çš„å†…ç½®å±æ€§ ï¼ˆ3ï¼‰ä¸€ä¸ªå¯¹è±¡ä»åŸå‹ç»§æ‰¿è€Œæ¥çš„å±æ€§<br>5.deleteåˆ é™¤æ•°ç»„å…ƒç´ ï¼š<br>ï¼ˆ1ï¼‰å½“ä½ åˆ é™¤ä¸€ä¸ªæ•°ç»„å…ƒç´ æ—¶ï¼Œæ•°ç»„çš„ length å±æ€§å¹¶ä¸ä¼šå˜å°ï¼Œæ•°ç»„å…ƒç´ å˜æˆundefined<br>ï¼ˆ2ï¼‰å½“ç”¨ delete æ“ä½œç¬¦åˆ é™¤ä¸€ä¸ªæ•°ç»„å…ƒç´ æ—¶ï¼Œè¢«åˆ é™¤çš„å…ƒç´ å·²ç»å®Œå…¨ä¸å±äºè¯¥æ•°ç»„ã€‚<br>ï¼ˆ3ï¼‰å¦‚æœä½ æƒ³è®©ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„å€¼å˜ä¸º undefined è€Œä¸æ˜¯åˆ é™¤å®ƒï¼Œå¯ä»¥ä½¿ç”¨ undefined ç»™å…¶èµ‹å€¼è€Œä¸æ˜¯ä½¿ç”¨ delete æ“ä½œç¬¦ã€‚æ­¤æ—¶æ•°ç»„å…ƒç´ æ˜¯åœ¨æ•°ç»„ä¸­çš„<br>6.delete æ“ä½œç¬¦ä¸ç›´æ¥é‡Šæ”¾å†…å­˜ï¼ˆåªèƒ½é€šè¿‡è§£é™¤å¼•ç”¨æ¥é—´æ¥é‡Šæ”¾ï¼‰æ²¡æœ‰å…³ç³»ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JavaScript-å˜é‡&quot;&gt;&lt;a href=&quot;#JavaScript-å˜é‡&quot; class=&quot;headerlink&quot; title=&quot;JavaScript å˜é‡&quot;&gt;&lt;/a&gt;JavaScript å˜é‡&lt;/h1&gt;&lt;h2 id=&quot;varã€letã€const-çš„å·®å¼‚ï¼Ÿ&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="JavaScript" scheme="https://dont-sleep-so-late.github.io/tags/JavaScript/"/>
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>Vueå…«è‚¡æ–‡</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/Vue%E5%85%AB%E8%82%A1%E6%96%87/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/07/%E5%85%AB%E8%82%A1%E6%96%87/Vue%E5%85%AB%E8%82%A1%E6%96%87/</id>
    <published>2024-03-07T15:31:36.000Z</published>
    <updated>2024-04-03T04:55:57.157Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vue-çš„è®¾è®¡æ¨¡å¼"><a href="#Vue-çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="Vue çš„è®¾è®¡æ¨¡å¼"></a>Vue çš„è®¾è®¡æ¨¡å¼</h2><h3 id="ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ MVVM æ¨¡å¼ï¼Œå’Œ MVC æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ä»‹ç»ä¸€ä¸‹ MVVM æ¨¡å¼ï¼Œå’Œ MVC æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>MVVM å³ Model-View-ViewModel çš„ç®€å†™ï¼Œå³æ¨¡å‹-è§†å›¾-è§†å›¾æ¨¡å‹ã€‚æ¨¡å‹ï¼ˆModelï¼‰æŒ‡çš„æ˜¯åç«¯ä¼ é€’çš„æ•°æ®ã€‚è§†å›¾ï¼ˆViewï¼‰æŒ‡çš„æ˜¯æ‰€çœ‹åˆ°çš„é¡µé¢ã€‚è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰æ˜¯ MVVM æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯è¿æ¥ View å’Œ Model çš„æ¡¥æ¢ã€‚<br>è§†å›¾æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹å‘çš„ä½œç”¨ï¼š<br>1.å°†æ¨¡å‹ï¼ˆModelï¼‰è½¬åŒ–æˆè§†å›¾ï¼ˆViewï¼‰ï¼Œå³å°†åç«¯ä¼ é€’çš„æ•°æ®è½¬åŒ–æˆæ‰€çœ‹åˆ°çš„é¡µé¢ï¼Œå®ç°çš„æ–¹å¼æ˜¯ï¼šæ•°æ®ç»‘å®šã€‚<br>2.å°†è§†å›¾ï¼ˆViewï¼‰è½¬åŒ–æˆæ¨¡å‹ï¼ˆModelï¼‰ï¼Œå³å°†æ‰€çœ‹åˆ°çš„é¡µé¢è½¬åŒ–æˆåç«¯çš„æ•°æ®ï¼Œå®ç°çš„æ–¹å¼æ˜¯ï¼šDOM äº‹ä»¶ç›‘å¬ã€‚å½“è¿™ä¸¤ä¸ªæ–¹å‘çš„æ•°æ®è½¬æ¢éƒ½å®ç°æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°æ®çš„åŒå‘ç»‘å®šã€‚</p><p><strong>MVVMæ¨¡å‹å›¾è§£ï¼š</strong></p><p><img src="https://pic.leetcode.cn/1677830973-gNoWGQ-image.png"></p><p>MVC æ˜¯ Model-View-Controller çš„ç®€å†™ï¼Œå³æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ã€‚M å’Œ V æŒ‡çš„æ„æ€å’Œ MVVM ä¸­çš„ M å’Œ V æ„æ€ä¸€æ ·ã€‚C å³ Controller æŒ‡çš„æ˜¯é¡µé¢ä¸šåŠ¡é€»è¾‘ã€‚ä½¿ç”¨ MVC çš„ç›®çš„å°±æ˜¯å°† M å’Œ V çš„ä»£ç åˆ†ç¦»ã€‚MVC æ˜¯å•å‘é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯ View è·Ÿ Model ï¼Œå¿…é¡»é€šè¿‡ Controller æ¥æ‰¿ä¸Šå¯ä¸‹ã€‚</p><p><strong>MVCæ¨¡å‹å›¾è§£ï¼š</strong></p><p><img src="https://pic.leetcode.cn/1677830876-FXzrYJ-image.png"></p><p>MVVM ä¸ MVC æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šMVVM å®ç°äº† View å’Œ Model çš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“ Model çš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œ Dom å…ƒç´ æ¥æ”¹å˜ View çš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜å±æ€§åè¯¥å±æ€§å¯¹åº” View å±‚æ˜¾ç¤ºä¼šè‡ªåŠ¨æ”¹å˜ï¼ˆåŒå‘ç»‘å®šï¼‰ã€‚</p><hr><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="Vue2-çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"><a href="#Vue2-çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›" class="headerlink" title="Vue2 çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"></a>Vue2 çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›</h3><p>ç”Ÿå‘½å‘¨æœŸå¯ä»¥ç†è§£ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ä¸ºåˆå§‹åŒ– Vue å®ä¾‹çš„è¿‡ç¨‹ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºæ•°æ®æ¸²æŸ“ï¼Œæ›´æ–° Dom çš„è¿‡ç¨‹ï¼Œç¬¬ä¸‰éƒ¨åˆ†ä¸ºé”€æ¯å®ä¾‹çš„è¿‡ç¨‹ï¼Œæ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æœ‰å¯¹åº”çš„é’©å­å‡½æ•°æ¥å®Œæˆå¯¹åº”çš„éƒ¨åˆ†è¿‡ç¨‹ã€‚</p><p>åˆå§‹åŒ–é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeCreate</span>()<span class="comment">//å®ä¾‹åˆ›å»ºå‰ï¼šæ¨¡æ¿å’Œæ•°æ®å‡æœªè·å–åˆ°</span></span><br><span class="line"><span class="title function_">created</span>()<span class="comment">//å®ä¾‹åˆ›å»ºåï¼šæœ€æ—©å¯ä»¥è·å¾—dataæ•°æ®ï¼Œä½†æ¨¡æ¿è¿˜æœªè·å–åˆ°</span></span><br><span class="line"><span class="title function_">beforfeMount</span>()<span class="comment">//æ•°æ®æŒ‚è½½å‰ï¼šæ¨¡æ¿å·²ç»è·å–åˆ°ï¼Œä½†æ˜¯æ•°æ®æœªæŒ‚è½½åˆ°æ¨¡æ¿ä¸Š</span></span><br><span class="line"><span class="title function_">mounted</span>()<span class="comment">//æ•°æ®æŒ‚è½½åï¼šæ•°æ®å·²æŒ‚è½½åˆ°æ¨¡æ¿ä¸­</span></span><br></pre></td></tr></table></figure><p>æ›´æ–°é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">beforeUpdate()//æ¨¡æ¿æ›´æ–°å‰ï¼šdataæ”¹å˜åï¼Œæ›´æ–°æ•°æ®æ¨¡æ¿å‰è°ƒç”¨ </span><br><span class="line">updated()//æ¨¡æ¿æ›´æ–°åï¼šå°†dataæ¸²æŸ“åˆ°æ•°æ®æ¨¡æ¿ä¸­</span><br></pre></td></tr></table></figure><p>é”€æ¯é˜¶æ®µçš„é’©å­å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestroy</span>() <span class="comment">//å®ä¾‹é”€æ¯å‰ </span></span><br><span class="line"><span class="title function_">destroyed</span>() <span class="comment">//å®ä¾‹é”€æ¯å</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240307234024.png"></p><h3 id="keep-alive-ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"><a href="#keep-alive-ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›" class="headerlink" title="keep-alive ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›"></a>keep-alive ä¸­çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›</h3><p>keep-alive æ˜¯ Vue æä¾›çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨æ¥å¯¹ç»„ä»¶è¿›è¡Œç¼“å­˜ï¼Œåœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­å°†çŠ¶æ€ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“ DOMã€‚ å¦‚æœä¸ºä¸€ä¸ªç»„ä»¶åŒ…è£¹äº† keep-aliveï¼Œé‚£ä¹ˆå®ƒä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼šdeactivatedã€activatedã€‚åŒæ—¶ï¼ŒbeforeDestroy å’Œ destroyed å°±ä¸ä¼šå†è¢«è§¦å‘äº†ï¼Œå› ä¸ºç»„ä»¶ä¸ä¼šè¢«çœŸæ­£é”€æ¯ã€‚ å½“ç»„ä»¶è¢«æ¢æ‰æ—¶ï¼Œä¼šè¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ã€è§¦å‘ deactivated ç”Ÿå‘½å‘¨æœŸï¼› å½“ç»„ä»¶è¢«åˆ‡å›æ¥æ—¶ï¼Œå†å»ç¼“å­˜é‡Œæ‰¾è¿™ä¸ªç»„ä»¶ã€è§¦å‘ activated é’©å­å‡½æ•°ã€‚</p><h3 id="çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"><a href="#çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" class="headerlink" title="çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"></a>çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</h3><h4 id="1-æŒ‚è½½é˜¶æ®µ"><a href="#1-æŒ‚è½½é˜¶æ®µ" class="headerlink" title="1.æŒ‚è½½é˜¶æ®µ"></a>1.æŒ‚è½½é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠ beforeCreateã€createdã€beforeMountã€mounted 4 ä¸ªé’©å­å‡½æ•°ã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š<br>çˆ¶ beforeCreate -&gt; çˆ¶ created -&gt; çˆ¶ beforeMount -&gt; å­ beforeCreate -&gt; å­ created -&gt; å­ beforeMount -&gt; å­ mounted -&gt; çˆ¶ mounted</p><p>ä¸€å®šå¾—ç­‰å­ç»„ä»¶æŒ‚è½½å®Œæ¯•åï¼Œçˆ¶ç»„ä»¶æ‰èƒ½æŒ‚åœ¨å®Œæ¯•ï¼Œæ‰€ä»¥çˆ¶ç»„ä»¶çš„ mounted åœ¨æœ€åã€‚</p><h4 id="2-æ›´æ–°é˜¶æ®µ"><a href="#2-æ›´æ–°é˜¶æ®µ" class="headerlink" title="2.æ›´æ–°é˜¶æ®µ"></a>2.æ›´æ–°é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠ beforeUpdateã€updated 2 ä¸ªé’©å­å‡½æ•°ã€‚æ³¨æ„ï¼Œå½“çˆ¶å­ç»„ä»¶æœ‰æ•°æ®ä¼ é€’æ—¶ï¼Œæ‰æœ‰è¿™ä¸ªæ›´æ–°é˜¶æ®µæ‰§è¡Œé¡ºåºçš„æ¯”è¾ƒã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š</p><p>çˆ¶ beforeUpdate -&gt; å­ beforeUpdate -&gt; å­ updated -&gt; çˆ¶ updated</p><h4 id="3-é”€æ¯é˜¶æ®µ"><a href="#3-é”€æ¯é˜¶æ®µ" class="headerlink" title="3.é”€æ¯é˜¶æ®µ"></a>3.é”€æ¯é˜¶æ®µ</h4><p>è¯¥è¿‡ç¨‹ä¸»è¦æ¶‰åŠbeforeDestroyã€destroyed 2 ä¸ªé’©å­å‡½æ•°ã€‚æ‰§è¡Œé¡ºåºä¸ºï¼š<br>çˆ¶ beforeDestroy -&gt; å­ beforeDestroy -&gt; å­ destroyed -&gt; çˆ¶ destroyed</p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>1.å½“çˆ¶ç»„ä»¶æ‰§è¡Œå®Œ beforeMount æŒ‚è½½å¼€å§‹åï¼Œä¼šä¾æ¬¡æ‰§è¡Œå­ç»„ä»¶ä¸­çš„é’©å­ï¼Œç›´åˆ°å…¨éƒ¨å­ç»„ä»¶ mounted æŒ‚è½½åˆ°å®ä¾‹ä¸Šï¼Œçˆ¶ç»„ä»¶æ‰ä¼šè¿›å…¥ mounted é’©å­</p><p>2.å­çº§è§¦å‘äº‹ä»¶ï¼Œä¼šå…ˆè§¦å‘çˆ¶çº§ beforeUpdate é’©å­ï¼Œå†å»è§¦å‘å­çº§ beforeUpdate é’©å­ï¼Œä¸‹é¢åˆæ˜¯å…ˆæ‰§è¡Œå­çº§ updated é’©å­ï¼Œåæ‰§è¡Œçˆ¶çº§ updated é’©å­</p><h3 id="å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› "><a href="#å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› " class="headerlink" title="å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› "></a>å¹³æ—¶å‘é€å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è§£é‡ŠåŸå› </h3><p>æˆ‘ä»¬å¯ä»¥åœ¨é’©å­å‡½æ•° createdã€beforeMountã€mounted ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚æ¨èåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šèƒ½æ›´å¿«è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼›SSR ä¸æ”¯æŒ beforeMount ã€mounted é’©å­å‡½æ•°ï¼Œæ”¾åœ¨ created ä¸­æœ‰åŠ©äºä¸€è‡´æ€§ã€‚</p><h4 id="ã€å»¶ä¼¸é—®ç­”ã€‘created-å’Œ-mouted-åŒºåˆ«"><a href="#ã€å»¶ä¼¸é—®ç­”ã€‘created-å’Œ-mouted-åŒºåˆ«" class="headerlink" title="ã€å»¶ä¼¸é—®ç­”ã€‘created å’Œ mouted åŒºåˆ«"></a>ã€å»¶ä¼¸é—®ç­”ã€‘created å’Œ mouted åŒºåˆ«</h4><p>created ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¼šåœ¨ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºä¹‹åç«‹å³è°ƒç”¨ï¼Œä½†æ˜¯æ­¤æ—¶ç»„ä»¶çš„æ¨¡æ¿è¿˜æ²¡æœ‰è¢«æ¸²æŸ“æˆ HTMLï¼Œå› æ­¤åœ¨è¿™ä¸ªæ—¶å€™ä¸èƒ½è®¿é—®ç»„ä»¶ä¸­çš„ DOM å…ƒç´ ã€‚</p><p>mounted ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°åˆ™ä¼šåœ¨ç»„ä»¶çš„æ¨¡æ¿è¢«æ¸²æŸ“æˆ HTML ä¹‹åè°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è®¿é—®ç»„ä»¶ä¸­çš„ DOM å…ƒç´ ã€‚é€šå¸¸åœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­è¿›è¡Œå¼‚æ­¥è¯·æ±‚æ•°æ®ã€åˆå§‹åŒ–æ’ä»¶ã€è®¢é˜…äº‹ä»¶ç­‰æ“ä½œã€‚</p><p>æ€»ä¹‹ï¼Œcreated é’©å­å‡½æ•°é€‚ç”¨äºç»„ä»¶åˆå§‹åŒ–æ—¶éœ€è¦è¿›è¡Œä¸€äº›æ“ä½œï¼Œè€Œ mounted é’©å­å‡½æ•°é€‚ç”¨äºéœ€è¦æ“ä½œç»„ä»¶çš„ DOM å…ƒç´ æ—¶ã€‚</p><h2 id="1-Vueé¢è¯•é¢˜"><a href="#1-Vueé¢è¯•é¢˜" class="headerlink" title="1. Vueé¢è¯•é¢˜"></a>1. Vueé¢è¯•é¢˜</h2><h4 id="1-1-v-model-ä½œç”¨ï¼Ÿ"><a href="#1-1-v-model-ä½œç”¨ï¼Ÿ" class="headerlink" title="1.1 v-model ä½œç”¨ï¼Ÿ"></a>1.1 v-model ä½œç”¨ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>v-modelæœ¬è´¨ä¸Šä¸è¿‡æ˜¯è¯­æ³•ç³–ï¼Œå¯ä»¥ç”¨ v-model æŒ‡ä»¤åœ¨<strong>è¡¨å•</strong>åŠ<strong>å…ƒç´ </strong>ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚</p><ol><li>å®ƒä¼šæ ¹æ®æ§ä»¶ç±»å‹è‡ªåŠ¨é€‰å–æ­£ç¡®çš„æ–¹æ³•æ¥æ›´æ–°å…ƒç´ </li><li>å®ƒè´Ÿè´£ç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®ï¼Œå¹¶å¯¹ä¸€äº›æç«¯åœºæ™¯è¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†</li><li>v-modelä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„valueã€checkedã€selectedç‰¹æ€§çš„åˆå§‹å€¼,è€Œæ€»æ˜¯å°† Vue å®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æºï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥é€šè¿‡ JavaScript åœ¨ç»„ä»¶çš„dataé€‰é¡¹ä¸­å£°æ˜åˆå§‹å€¼</li></ol><p><strong>æ‰©å±•ï¼š</strong></p><p>v-modelåœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„å±æ€§å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ï¼š</p><ol><li>text å’Œ textarea å…ƒç´ ä½¿ç”¨valueå±æ€§å’Œinputäº‹ä»¶ï¼›</li><li>checkbox å’Œ radio ä½¿ç”¨checkedå±æ€§å’Œchangeäº‹ä»¶ï¼›</li><li>select å­—æ®µå°†valueä½œä¸º prop å¹¶å°†changeä½œä¸ºäº‹ä»¶ã€‚</li></ol><h4 id="1-2-v-model-å®ç°åŸç†ï¼Ÿ"><a href="#1-2-v-model-å®ç°åŸç†ï¼Ÿ" class="headerlink" title="1.2 v-model å®ç°åŸç†ï¼Ÿ"></a>1.2 v-model å®ç°åŸç†ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>v-modelåªä¸è¿‡æ˜¯ä¸€ä¸ªè¯­æ³•ç³–è€Œå·²,çœŸæ­£çš„å®ç°é çš„è¿˜æ˜¯</p><ol><li>v-bind:ç»‘å®šå“åº”å¼æ•°æ®</li><li>è§¦å‘oninput äº‹ä»¶å¹¶ä¼ é€’æ•°æ®</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;sth&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç­‰åŒäº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;sth&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;sth = $event.target.value&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è‡ªhtml5å¼€å§‹,inputæ¯æ¬¡è¾“å…¥éƒ½ä¼šè§¦å‘oninputäº‹ä»¶ï¼Œæ‰€ä»¥è¾“å…¥æ—¶inputçš„å†…å®¹ä¼šç»‘å®šåˆ°sthä¸­ï¼Œäºæ˜¯sthçš„å€¼å°±è¢«æ”¹å˜--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--$event æŒ‡ä»£å½“å‰è§¦å‘çš„äº‹ä»¶å¯¹è±¡;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--$event.target æŒ‡ä»£å½“å‰è§¦å‘çš„äº‹ä»¶å¯¹è±¡çš„dom;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--$event.target.value å°±æ˜¯å½“å‰domçš„valueå€¼;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åœ¨@inputæ–¹æ³•ä¸­ï¼Œvalue =&gt; sth;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åœ¨:valueä¸­,sth =&gt; value;--&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-3-Vue2-0-åŒå‘ç»‘å®šçš„ç¼ºé™·ï¼Ÿ"><a href="#1-3-Vue2-0-åŒå‘ç»‘å®šçš„ç¼ºé™·ï¼Ÿ" class="headerlink" title="1.3 Vue2.0 åŒå‘ç»‘å®šçš„ç¼ºé™·ï¼Ÿ"></a>1.3 Vue2.0 åŒå‘ç»‘å®šçš„ç¼ºé™·ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Vue2.0çš„æ•°æ®å“åº”æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty () æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterã€getterï¼Œä½†æ˜¯å®ƒå¹¶ä¸ç®—æ˜¯å®ç°æ•°æ®çš„å“åº”å¼çš„å®Œç¾æ–¹æ¡ˆï¼ŒæŸäº›æƒ…å†µä¸‹éœ€è¦å¯¹å…¶è¿›è¡Œä¿®è¡¥æˆ–è€…hackè¿™ä¹Ÿæ˜¯å®ƒçš„ç¼ºé™·ï¼Œä¸»è¦è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li>vue å®ä¾‹åˆ›å»ºåï¼Œæ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ–°å¢æˆ–åˆ é™¤ï¼Œåªèƒ½è¿½è¸ªåˆ°æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹<ol><li>ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–</li></ol></li></ol><p><strong>è§£æï¼š</strong></p><ol><li><p>vue å®ä¾‹åˆ›å»ºåï¼Œæ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ–°å¢æˆ–åˆ é™¤ï¼Œåªèƒ½è¿½è¸ªåˆ°æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹(Object.definePropertyåªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§)ã€‚</p><p>å½“åˆ›å»ºä¸€ä¸ªVueå®ä¾‹æ—¶ï¼Œå°†éå†æ‰€æœ‰DOMå¯¹è±¡ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°æ®å±æ€§æ·»åŠ äº†getå’Œsetã€‚getå’Œset å…è®¸Vueè§‚å¯Ÿæ•°æ®çš„æ›´æ”¹å¹¶è§¦å‘æ›´æ–°ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨Vueå®ä¾‹åŒ–åæ·»åŠ ï¼ˆæˆ–åˆ é™¤ï¼‰ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¸ä¼šè¢«vueå¤„ç†ï¼Œæ”¹å˜getå’Œsetã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(obj, propertName/index, value)</span><br><span class="line"><span class="comment">// å“åº”å¼å¯¹è±¡çš„å­å¯¹è±¡æ–°å¢å±æ€§ï¼Œå¯ä»¥ç»™å­å“åº”å¼å¯¹è±¡é‡æ–°èµ‹å€¼</span></span><br><span class="line">data.<span class="property">location</span> = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">data.<span class="property">location</span> = &#123;...data, <span class="attr">z</span>: <span class="number">100</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–</p><p>vueåœ¨å®ç°æ•°ç»„çš„å“åº”å¼æ—¶ï¼Œå®ƒä½¿ç”¨äº†ä¸€äº›hackï¼ŒæŠŠæ— æ³•ç›‘å¬æ•°ç»„çš„æƒ…å†µé€šè¿‡é‡å†™æ•°ç»„çš„éƒ¨åˆ†æ–¹æ³•æ¥å®ç°å“åº”å¼ï¼Œè¿™ä¹Ÿåªé™åˆ¶åœ¨æ•°ç»„çš„push&#x2F;pop&#x2F;shift&#x2F;unshift&#x2F;splice&#x2F;sort&#x2F;reverseä¸ƒä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ•°ç»„æ–¹æ³•åŠæ•°ç»„çš„ä½¿ç”¨åˆ™æ— æ³•æ£€æµ‹åˆ°ï¼Œä¾‹å¦‚å¦‚ä¸‹ä¸¤ç§ä½¿ç”¨æ–¹å¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="property">items</span>[index] = newValue;</span><br><span class="line">vm.<span class="property">items</span>.<span class="property">length</span></span><br></pre></td></tr></table></figure><p>vueå®ç°æ•°ç»„å“åº”å¼çš„æ–¹æ³•</p><p>é€šè¿‡é‡å†™æ•°ç»„çš„Array.prototypeå¯¹åº”çš„æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯é‡æ–°æŒ‡å®šè¦æ“ä½œæ•°ç»„çš„prototypeï¼Œå¹¶é‡æ–°è¯¥prototypeä¸­å¯¹åº”ä¸Šé¢çš„7ä¸ªæ•°ç»„æ–¹æ³•ï¼Œé€šè¿‡ä¸‹é¢ä»£ç ç®€å•äº†è§£ä¸‹å®ç°åŸç†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> methods = [<span class="string">&#x27;pop&#x27;</span>,<span class="string">&#x27;shift&#x27;</span>,<span class="string">&#x27;unshift&#x27;</span>,<span class="string">&#x27;sort&#x27;</span>,<span class="string">&#x27;reverse&#x27;</span>,<span class="string">&#x27;splice&#x27;</span>, <span class="string">&#x27;push&#x27;</span>];</span><br><span class="line"><span class="comment">// å¤åˆ¶Array.prototypeï¼Œå¹¶å°†å…¶prototypeæŒ‡å‘Array.prototype</span></span><br><span class="line"><span class="keyword">let</span> proto = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">methods.<span class="title function_">forEach</span>(<span class="function"><span class="params">method</span> =&gt;</span> &#123;</span><br><span class="line">    proto[method] = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// é‡å†™protoä¸­çš„æ•°ç»„æ–¹æ³•</span></span><br><span class="line">        <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[method].<span class="title function_">call</span>(<span class="variable language_">this</span>, ...<span class="variable language_">arguments</span>);</span><br><span class="line">        <span class="title function_">viewRender</span>() <span class="comment">// è§†å›¾æ›´æ–°</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123; <span class="comment">// æ•°ç»„å®ç°å“åº”å¼</span></span><br><span class="line">                obj.<span class="property">__proto__</span> = proto; <span class="comment">// æ”¹å˜ä¼ å…¥æ•°ç»„çš„prototype</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                ... <span class="comment">// å¯¹è±¡çš„å“åº”å¼å®ç°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-4-Vue3-0-å®ç°æ•°æ®åŒå‘ç»‘å®šçš„æ–¹æ³•"><a href="#1-4-Vue3-0-å®ç°æ•°æ®åŒå‘ç»‘å®šçš„æ–¹æ³•" class="headerlink" title="1.4 Vue3.0 å®ç°æ•°æ®åŒå‘ç»‘å®šçš„æ–¹æ³•"></a>1.4 Vue3.0 å®ç°æ•°æ®åŒå‘ç»‘å®šçš„æ–¹æ³•</h4><p><strong>å‚è€ƒç­”æ¡ˆ:</strong></p><p>vue3.0 å®ç°æ•°æ®åŒå‘ç»‘å®šæ˜¯é€šè¿‡<strong>Proxy</strong></p><p><strong>Proxy</strong>æ˜¯ ES6 ä¸­æ–°å¢çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç¿»è¯‘è¿‡æ¥æ„æ€æ˜¯â€ä»£ç†â€ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œã€‚ Proxy è®©æˆ‘ä»¬èƒ½å¤Ÿä»¥ç®€æ´æ˜“æ‡‚çš„æ–¹å¼æ§åˆ¶å¤–éƒ¨å¯¹å¯¹è±¡çš„è®¿é—®ã€‚å…¶åŠŸèƒ½éå¸¸ç±»ä¼¼äºè®¾è®¡æ¨¡å¼ä¸­çš„ä»£ç†æ¨¡å¼ã€‚</p><p>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p><p>ä½¿ç”¨ Proxy çš„æ ¸å¿ƒä¼˜ç‚¹æ˜¯å¯ä»¥äº¤ç”±å®ƒæ¥å¤„ç†ä¸€äº›éæ ¸å¿ƒé€»è¾‘ï¼ˆå¦‚ï¼šè¯»å–æˆ–è®¾ç½®å¯¹è±¡çš„æŸäº›å±æ€§å‰è®°å½•æ—¥å¿—ï¼›è®¾ç½®å¯¹è±¡çš„æŸäº›å±æ€§å€¼å‰ï¼Œéœ€è¦éªŒè¯ï¼›æŸäº›å±æ€§çš„è®¿é—®æ§åˆ¶ç­‰ï¼‰ã€‚ ä»è€Œå¯ä»¥è®©å¯¹è±¡åªéœ€å…³æ³¨äºæ ¸å¿ƒé€»è¾‘ï¼Œè¾¾åˆ°å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œé™ä½å¯¹è±¡å¤æ‚åº¦ç­‰ç›®çš„ã€‚</p><p><strong>æ‰©å±•ï¼š</strong></p><p>ä½¿ç”¨proxyå®ç°ï¼ŒåŒå‘æ•°æ®ç»‘å®šï¼Œç›¸æ¯”2.0çš„Object.defineProperty ()ä¼˜åŠ¿ï¼š</p><ol><li>å¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡</li><li>æœ‰13ç§åŠ«æŒæ“ä½œ</li></ol><h4 id="1-5-Vuexæ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªå±æ€§æ˜¯å¹²å˜›çš„ï¼Œå¦‚ä½•ä½¿ç”¨"><a href="#1-5-Vuexæ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªå±æ€§æ˜¯å¹²å˜›çš„ï¼Œå¦‚ä½•ä½¿ç”¨" class="headerlink" title="1.5 Vuexæ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªå±æ€§æ˜¯å¹²å˜›çš„ï¼Œå¦‚ä½•ä½¿ç”¨"></a>1.5 Vuexæ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªå±æ€§æ˜¯å¹²å˜›çš„ï¼Œå¦‚ä½•ä½¿ç”¨</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Vuexæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>Vuexæ˜¯ä¸“é—¨ä¸ºVuejsåº”ç”¨ç¨‹åºè®¾è®¡çš„<strong>çŠ¶æ€ç®¡ç†å·¥å…·</strong>ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–</p><p>å…·ä½“å·¥ä½œï¼švuexæ˜¯ä¸€ç§çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå°†å…¨å±€ç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å–å‡ºæ¥ä¸ºä¸€ä¸ªstoreï¼Œä»¥ä¸€ä¸ªå•ä¾‹æ¨¡å¼å­˜åœ¨ï¼Œåº”ç”¨ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œvuexæ›´æ”¹stateçš„å”¯ä¸€é€”å¾„æ˜¯é€šè¿‡mutationï¼Œmutationéœ€è¦commitè§¦å‘, actionå®é™…è§¦å‘æ˜¯mutationï¼Œå…¶ä¸­mutationå¤„ç†åŒæ­¥ä»»åŠ¡ï¼Œactionå¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚</p><p>Vuexæ¯ä¸ªå±æ€§æ˜¯å¹²å˜›çš„ï¼Ÿ</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128565972/EB5115B586566907B3B642BA58A4482A" alt="img"></p><p>Vuexçš„å±æ€§åŒ…å«ä»¥ä¸‹6ä¸ªï¼š</p><p>1ï¼‰state</p><p>stateæ˜¯å­˜å‚¨çš„å•ä¸€çŠ¶æ€ï¼Œæ˜¯å­˜å‚¨çš„åŸºæœ¬æ•°æ®ã€‚</p><p>2ï¼‰Getters</p><p>gettersæ˜¯storeçš„è®¡ç®—å±æ€§ï¼Œå¯¹stateçš„åŠ å·¥ï¼Œæ˜¯æ´¾ç”Ÿå‡ºæ¥çš„æ•°æ®ã€‚å°±åƒcomputedè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetterè¿”å›çš„å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿæ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—ã€‚</p><p>3ï¼‰Mutations</p><p>mutationsæäº¤æ›´æ”¹æ•°æ®ï¼Œä½¿ç”¨store.commitæ–¹æ³•æ›´æ”¹stateå­˜å‚¨çš„çŠ¶æ€ã€‚ï¼ˆmutationsåŒæ­¥å‡½æ•°ï¼‰</p><p>4ï¼‰Actions</p><p>actionsåƒä¸€ä¸ªè£…é¥°å™¨ï¼Œæäº¤mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚ï¼ˆactionså¯ä»¥åŒ…å«ä»»ä½•å¼‚æ­¥æ“ä½œï¼‰</p><p>5ï¼‰Module</p><p>Moduleæ˜¯storeåˆ†å‰²çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„stateã€gettersã€mutationsã€actionsã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: moduleA,</span><br><span class="line">    <span class="attr">b</span>: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.<span class="property">state</span>.<span class="property">a</span> <span class="comment">// -&gt; moduleA çš„çŠ¶æ€</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">b</span> <span class="comment">// -&gt; moduleB çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><p>6ï¼‰è¾…åŠ©å‡½æ•°</p><p>Vuexæä¾›äº†mapStateã€MapGettersã€MapActionsã€mapMutationsç­‰è¾…åŠ©å‡½æ•°ç»™å¼€å‘åœ¨vmä¸­å¤„ç†storeã€‚</p><p>Vuexçš„ä½¿ç”¨æ–¹æ³•ï¼Ÿ</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128588464/5ACC9FABB642EADBED3478A9397CEF15" alt="img"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>); <span class="comment">// 1. vueçš„æ’ä»¶æœºåˆ¶ï¼Œå®‰è£…vuex</span></span><br><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123; <span class="comment">// 2.å®ä¾‹åŒ–storeï¼Œè°ƒç”¨installæ–¹æ³•</span></span><br><span class="line">    state,</span><br><span class="line">    getters,</span><br><span class="line">    modules,</span><br><span class="line">    mutations,</span><br><span class="line">    actions,</span><br><span class="line">    plugins</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; <span class="comment">// 3.æ³¨å…¥store, æŒ‚è½½vueå®ä¾‹</span></span><br><span class="line">    store,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span>=&gt;</span><span class="title function_">h</span>(app)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="1-6-Vuexå®ç°åŸç†"><a href="#1-6-Vuexå®ç°åŸç†" class="headerlink" title="1.6 Vuexå®ç°åŸç†"></a>1.6 Vuexå®ç°åŸç†</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ¥é˜è¿°vuexçš„å®ç°åŸç†ï¼š</p><ul><li>storeæ˜¯æ€ä¹ˆæ³¨å†Œçš„?</li><li>mutationï¼Œcommit æ˜¯æ€ä¹ˆå®ç°çš„?</li><li>è¾…åŠ©å‡½æ•°æ˜¯æ€ä¹ˆå®ç°çš„?</li></ul><ol><li><p>storeæ˜¯æ€ä¹ˆæ³¨å†Œçš„?</p><p>æˆ‘ä»¬çœ‹åˆ°Vuexåœ¨vue çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„åˆå§‹åŒ–é’©å­å‰æ’å…¥ä¸€æ®µ Vuex åˆå§‹åŒ–ä»£ç ã€‚ç»™ Vue çš„å®ä¾‹æ³¨å…¥ä¸€ä¸ª</p><p>$storeçš„å±æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ Vue çš„ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡this.$store.xxx, è®¿é—®åˆ° Vuex çš„å„ç§æ•°æ®å’ŒçŠ¶æ€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">Vue</span>) &#123;</span><br><span class="line">  <span class="comment">// è·å–å½“å‰ Vue çš„ç‰ˆæœ¬</span></span><br><span class="line">  <span class="keyword">const</span> version = <span class="title class_">Number</span>(<span class="title class_">Vue</span>.<span class="property">version</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (version &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// 2.x é€šè¿‡ hook çš„æ–¹å¼æ³¨å…¥</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123; <span class="attr">beforeCreate</span>: vuexInit &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å…¼å®¹ 1.x</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„ _init æ–¹æ³•å¹¶æ›¿æ¢ Vue å¯¹è±¡åŸå‹çš„_initæ–¹æ³•ï¼Œå®ç°æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">const</span> _init = <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">_init</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">_init</span> = <span class="keyword">function</span> (<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">      options.<span class="property">init</span> = options.<span class="property">init</span></span><br><span class="line">        ? [vuexInit].<span class="title function_">concat</span>(options.<span class="property">init</span>)</span><br><span class="line">        : vuexInit</span><br><span class="line">      _init.<span class="title function_">call</span>(<span class="variable language_">this</span>, options)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Vuex init hook, injected into each instances init hooks list.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">vuexInit</span> () &#123;</span><br><span class="line">    <span class="keyword">const</span> options = <span class="variable language_">this</span>.<span class="property">$options</span></span><br><span class="line">    <span class="comment">// store æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">store</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span> = <span class="keyword">typeof</span> options.<span class="property">store</span> === <span class="string">&#x27;function&#x27;</span></span><br><span class="line">        ? options.<span class="title function_">store</span>()</span><br><span class="line">        : options.<span class="property">store</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.<span class="property">parent</span> &amp;&amp; options.<span class="property">parent</span>.<span class="property">$store</span>) &#123;</span><br><span class="line">      <span class="comment">// å­ç»„ä»¶ä»å…¶çˆ¶ç»„ä»¶å¼•ç”¨ $store å±æ€§</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span> = options.<span class="property">parent</span>.<span class="property">$store</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>mutationsï¼Œcommit æ˜¯æ€ä¹ˆå®ç°çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">registerMutation</span> (store, type, handler, local) &#123;</span><br><span class="line">  <span class="comment">// è·å– type(module.mutations çš„ key) å¯¹åº”çš„ mutations, æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„</span></span><br><span class="line">  <span class="keyword">const</span> entry = store.<span class="property">_mutations</span>[type] || (store.<span class="property">_mutations</span>[type] = [])</span><br><span class="line">  <span class="comment">// push å¤„ç†è¿‡çš„ mutation handler</span></span><br><span class="line">  entry.<span class="title function_">push</span>(<span class="keyword">function</span> <span class="title function_">wrappedMutationHandler</span> (payload) &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ç”¨æˆ·å®šä¹‰çš„ hanler, å¹¶ä¼ å…¥ state å’Œ payload å‚æ•°</span></span><br><span class="line">    handler.<span class="title function_">call</span>(store, local.<span class="property">state</span>, payload)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>registerMutation æ˜¯å¯¹ store çš„ mutation çš„åˆå§‹åŒ–ï¼Œå®ƒæ¥å— 4 ä¸ªå‚æ•°ï¼Œstoreä¸ºå½“å‰ Store å®ä¾‹ï¼Œtypeä¸º mutation çš„ keyï¼Œhandler ä¸º mutation æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œpath ä¸ºå½“å‰æ¨¡å—çš„è·¯å¾„ã€‚</p><p>mutation çš„ä½œç”¨å°±æ˜¯åŒæ­¥ä¿®æ”¹å½“å‰æ¨¡å—çš„ state ï¼Œå‡½æ•°é¦–å…ˆé€šè¿‡ type æ‹¿åˆ°å¯¹åº”çš„ mutation å¯¹è±¡æ•°ç»„ï¼Œ ç„¶åæŠŠä¸€ä¸ª mutation çš„åŒ…è£…å‡½æ•° push åˆ°è¿™ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° payloadï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åœ¨å®šä¹‰ mutation çš„æ—¶å€™æ¥æ”¶çš„é¢å¤–å‚æ•°ã€‚è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šè°ƒç”¨ mutation çš„å›è°ƒå‡½æ•°ï¼Œå¹¶é€šè¿‡ getNestedState(store.state, path) æ–¹æ³•å¾—åˆ°å½“å‰æ¨¡å—çš„ stateï¼Œå’Œ playload ä¸€èµ·ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><p>æˆ‘ä»¬çŸ¥é“mutationæ˜¯é€šè¿‡commitæ¥è§¦å‘çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹ä¸€ä¸‹commitçš„å®šä¹‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">commit (_type, _payload, _options) &#123;</span><br><span class="line">    <span class="comment">// è§£æå‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      type,</span><br><span class="line">      payload,</span><br><span class="line">      options</span><br><span class="line">    &#125; = <span class="title function_">unifyObjectStyle</span>(_type, _payload, _options)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ® type è·å–æ‰€æœ‰å¯¹åº”çš„å¤„ç†è¿‡çš„ mutation å‡½æ•°é›†åˆ</span></span><br><span class="line">    <span class="keyword">const</span> mutation = &#123; type, payload &#125;</span><br><span class="line">    <span class="keyword">const</span> entry = <span class="variable language_">this</span>.<span class="property">_mutations</span>[type]</span><br><span class="line">    <span class="keyword">if</span> (!entry) &#123;</span><br><span class="line">      <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[vuex] unknown mutation type: <span class="subst">$&#123;type&#125;</span>`</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œ mutation å‡½æ•°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_withCommit</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      entry.<span class="title function_">forEach</span>(<span class="keyword">function</span> <span class="title function_">commitIterator</span> (handler) &#123;</span><br><span class="line">        <span class="title function_">handler</span>(payload)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œæ‰€æœ‰çš„è®¢é˜…è€…å‡½æ•°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_subscribers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">sub</span> =&gt;</span> <span class="title function_">sub</span>(mutation, <span class="variable language_">this</span>.<span class="property">state</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class="line">      options &amp;&amp; options.<span class="property">silent</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(</span><br><span class="line">    <span class="string">`[vuex] mutation type: <span class="subst">$&#123;type&#125;</span>. Silent option has been removed. `</span> +</span><br><span class="line">        <span class="string">&#x27;Use the filter functionality in the vue-devtools&#x27;</span></span><br><span class="line">  )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>commit æ”¯æŒ 3 ä¸ªå‚æ•°ï¼Œtype è¡¨ç¤º mutation çš„ç±»å‹ï¼Œpayload è¡¨ç¤ºé¢å¤–çš„å‚æ•°,æ ¹æ® type å»æŸ¥æ‰¾å¯¹åº”çš„ mutationï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¾“å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™éå†è¿™ä¸ª type å¯¹åº”çš„ mutation å¯¹è±¡æ•°ç»„ï¼Œæ‰§è¡Œ handler(payload) æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¹‹å‰å®šä¹‰çš„ wrappedMutationHandler(handler)ï¼Œæ‰§è¡Œå®ƒå°±ç›¸å½“äºæ‰§è¡Œäº† registerMutation æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p></li><li><p>è¾…åŠ©å‡½æ•°</p><p>è¾…åŠ©å‡½æ•°çš„å®ç°éƒ½å·®ä¸å¤ªå¤šï¼Œåœ¨è¿™é‡Œäº†è§£ä¸€ä¸‹mapState</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mapGetters = <span class="title function_">normalizeNamespace</span>(<span class="function">(<span class="params">namespace, getters</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿”å›ç»“æœ</span></span><br><span class="line">  <span class="keyword">const</span> res = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå†è§„èŒƒåŒ–å‚æ•°åçš„å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// getters å°±æ˜¯ä¼ é€’ç»™ mapGetters çš„ map å¯¹è±¡æˆ–è€…æ•°ç»„</span></span><br><span class="line">  <span class="title function_">normalizeMap</span>(getters).<span class="title function_">forEach</span>(<span class="function">(<span class="params">&#123; key, val &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    val = namespace + val</span><br><span class="line">    res[key] = <span class="keyword">function</span> <span class="title function_">mappedGetter</span> () &#123;</span><br><span class="line">      <span class="comment">// ä¸€èˆ¬ä¸ä¼šä¼ å…¥ namespace å‚æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (namespace &amp;&amp; !<span class="title function_">getModuleByNamespace</span>(<span class="variable language_">this</span>.<span class="property">$store</span>, <span class="string">&#x27;mapGetters&#x27;</span>, namespace)) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å¦‚æœ getter ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span><br><span class="line">      <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; !(val <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[vuex] unknown getter: <span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è¿”å› getter å€¼, store.getters å¯è§ä¸Šæ–‡ resetStoreVM çš„åˆ†æ</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[val]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// mark vuex getter for devtools</span></span><br><span class="line">    res[key].<span class="property">vuex</span> = <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>mapStateåœ¨è°ƒç”¨äº† normalizeMap å‡½æ•°åï¼ŒæŠŠä¼ å…¥çš„ states è½¬æ¢æˆç”± {key, val} å¯¹è±¡æ„æˆçš„æ•°ç»„ï¼Œæ¥ç€è°ƒç”¨ forEach æ–¹æ³•éå†è¿™ä¸ªæ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡æ¯ä¸ªå…ƒç´ éƒ½è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° mappedStateï¼Œå‡½æ•°å¯¹ val çš„ç±»å‹åˆ¤æ–­ï¼Œå¦‚æœ val æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ç›´æ¥è°ƒç”¨è¿™ä¸ª val å‡½æ•°ï¼ŒæŠŠå½“å‰ store ä¸Šçš„ state å’Œ getters ä½œä¸ºå‚æ•°ï¼Œè¿”å›å€¼ä½œä¸º mappedState çš„è¿”å›å€¼ï¼›å¦åˆ™ç›´æ¥æŠŠ this.$store.state[val]ä½œä¸º mappedState çš„è¿”å›å€¼ã€‚ä¸ºäº†æ›´ç›´è§‚çš„ç†è§£ï¼Œæˆ‘ä»¬çœ‹ä¸‹æœ€ç»ˆmapStateçš„æ•ˆæœ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: <span class="title function_">mapState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">name</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-7-mutationå’Œactionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#1-7-mutationå’Œactionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="1.7 mutationå’Œactionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>1.7 mutationå’Œactionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>mutation</strong>ï¼šæ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutationã€‚Vuex ä¸­çš„ mutation éå¸¸ç±»ä¼¼äºä»¶ï¼š æ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„ äº‹ä»¶ç±»å‹ (type) å’Œ ä¸€ä¸ª å›è°ƒå‡½æ•° (handler)ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯æˆ‘ä»¬å®é™…è¿› è¡ŒçŠ¶æ€æ›´æ”¹çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¼šæ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      <span class="comment">// å˜æ›´çŠ¶æ€</span></span><br><span class="line">      state.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸èƒ½ç›´æ¥è°ƒç”¨ä¸€ä¸ª mutation handlerã€‚è¿™ä¸ªé€‰é¡¹æ›´åƒæ˜¯äº‹ä»¶æ³¨å†Œï¼šâ€œå½“è§¦å‘ä¸€ä¸ªç±»å‹ä¸º increment çš„ mutation æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚â€è¦å”¤é†’ä¸€ä¸ª mutation handlerï¼Œä½ éœ€è¦ä»¥ç›¸åº”çš„ type è°ƒç”¨ store.commit æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>Action:</strong> Action ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äºï¼š</p><ol><li><p>Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚</p></li><li><p>Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</p><p>è®©æˆ‘ä»¬æ¥æ³¨å†Œä¸€ä¸ªç®€å•çš„ actionï¼š</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•ï¼š</strong>äº‹å®ä¸Šåœ¨ vuex é‡Œé¢ actions åªæ˜¯ä¸€ä¸ªæ¶æ„æ€§çš„æ¦‚å¿µï¼Œå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œè¯´åˆ°åº•åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ åœ¨é‡Œé¢æƒ³å¹²å˜›éƒ½å¯ä»¥ï¼Œåªè¦æœ€åè§¦å‘ mutation å°±è¡Œã€‚å¼‚æ­¥ç«æ€æ€ä¹ˆå¤„ç†é‚£æ˜¯ç”¨æˆ·è‡ªå·±çš„äº‹æƒ…ã€‚</p><p>vuex çœŸæ­£é™åˆ¶ä½ çš„åªæœ‰ mutation å¿…é¡»æ˜¯åŒæ­¥çš„è¿™ä¸€ç‚¹ï¼ˆåœ¨ redux é‡Œé¢å°±å¥½åƒ reducer å¿…é¡»åŒæ­¥è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ä¸€æ ·ï¼‰ã€‚åŒæ­¥çš„æ„ä¹‰åœ¨äºè¿™æ ·æ¯ä¸€ä¸ª mutation æ‰§è¡Œå®Œæˆåéƒ½å¯ä»¥å¯¹åº”åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼ˆå’Œ reducer ä¸€æ ·ï¼‰ï¼Œè¿™æ · devtools å°±å¯ä»¥æ‰“ä¸ª snapshot å­˜ä¸‹æ¥ï¼Œç„¶åå°±å¯ä»¥éšä¾¿ time-travel äº†ã€‚å¦‚æœä½ å¼€ç€ devtool è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥çš„ actionï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å®ƒæ‰€è°ƒç”¨çš„ mutation æ˜¯ä½•æ—¶è¢«è®°å½•ä¸‹æ¥çš„ï¼Œå¹¶ä¸”å¯ä»¥ç«‹åˆ»æŸ¥çœ‹å®ƒä»¬å¯¹åº”çš„çŠ¶æ€ã€‚</p><h4 id="1-8-ä¿®æ”¹ElementUI-æ ·å¼çš„å‡ ç§æ–¹å¼"><a href="#1-8-ä¿®æ”¹ElementUI-æ ·å¼çš„å‡ ç§æ–¹å¼" class="headerlink" title="1.8 ä¿®æ”¹ElementUI æ ·å¼çš„å‡ ç§æ–¹å¼?"></a>1.8 ä¿®æ”¹ElementUI æ ·å¼çš„å‡ ç§æ–¹å¼?</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ä¿®æ”¹ElementUI æ ·å¼çš„æ–¹å¼æœ‰å››ç§ï¼š</p><ol><li><p>æ–°å»ºå…¨å±€æ ·å¼è¡¨</p><p>æ–°å»º global.css æ–‡ä»¶ï¼Œå¹¶åœ¨ main.js ä¸­å¼•å…¥ã€‚ global.css æ–‡ä»¶ä¸€èˆ¬éƒ½æ”¾åœ¨ src-&gt;assets é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„ style æ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨ main.js çš„å¼•ç”¨å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./assets/style/global.css&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ global.css æ–‡ä»¶ä¸­å†™çš„æ ·å¼ï¼Œæ— è®ºåœ¨å“ªä¸€ä¸ª vue å•é¡µé¢éƒ½ä¼šè¦†ç›– ElementUI é»˜è®¤çš„æ ·å¼ã€‚</p></li><li><p>åœ¨å½“å‰-vue-å•é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„styleæ ‡ç­¾</p><p>åœ¨å½“å‰çš„vueå•é¡µé¢çš„styleæ ‡ç­¾åï¼Œæ·»åŠ ä¸€å¯¹æ–°çš„styleæ ‡ç­¾ï¼Œæ–°çš„styleæ ‡ç­¾ä¸­ä¸è¦æ·»åŠ scopedå±æ€§ã€‚åœ¨æœ‰å†™scopedçš„styleæ ‡ç­¾ä¸­ä¹¦å†™çš„æ ·å¼ä¸ä¼šè¦†ç›– ElementUI é»˜è®¤çš„æ ·å¼ã€‚</p></li><li><p>ä½¿ç”¨&#x2F;deep&#x2F;æ·±åº¦ä¿®æ”¹æ ‡ç­¾æ ·å¼</p><p>æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ ElementUI æ ‡ç­¾çš„ç±»åï¼Œç„¶ååœ¨ç±»åå‰åŠ ä¸Š&#x2F;deep&#x2F;ï¼Œå¯ä»¥å¼ºåˆ¶ä¿®æ”¹é»˜è®¤æ ·å¼ã€‚è¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥ç”¨åˆ°æœ‰scopedå±æ€§çš„ style æ ‡ç­¾ä¸­ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ä¿®æ”¹çº§è”é€‰æ‹©æ¡†çš„é»˜è®¤å®½åº¦</span><br><span class="line">/deep/ <span class="selector-class">.el-cascader</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å†…è”æ ·å¼ æˆ–è€… ç»‘å®šç±»æ ·å¼è¦†ç›–é»˜è®¤æ ·å¼</p><p>é€šè¿‡å†…è”æ ·å¼ style ï¼Œç»‘å®šç±»æ ·å¼çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨<strong>æŸäº›æ ‡ç­¾</strong>ä¸­å¯ä»¥ç›´æ¥è¦†ç›–é»˜è®¤æ ·å¼ï¼Œä¸æ˜¯å¾ˆé€šç”¨ã€‚å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:style</span>=<span class="string">&quot;selfstyle&quot;</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">selfstyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">color</span>: <span class="string">&quot;white&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">marginTop</span>: <span class="string">&quot;10px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="string">&quot;100px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">backgroundColor</span>: <span class="string">&quot;cadetblue&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»‘å®šä¿®æ”¹æ ·å¼æ–¹å¼ä¿®æ”¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:class</span>=<span class="string">&quot;[selfbutton]&quot;</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">selfbutton</span>: <span class="string">&quot;self-button&quot;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125; </span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet/stylus&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.self-button</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-Color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•ï¼š</strong></p><p>ç¬¬ä¸€ç§å…¨å±€å¼•å…¥cssæ–‡ä»¶çš„æ–¹å¼ï¼Œé€‚åˆäºå¯¹elementUIæ•´ä½“çš„ä¿®æ”¹ï¼Œæ¯”å¦‚æ•´ä½“é…è‰²çš„ä¿®æ”¹ï¼›<br>ç¬¬äºŒç§æ·»åŠ ä¸€ä¸ªstyleæ ‡ç­¾çš„å½¢å¼ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°ä¿®æ”¹é»˜è®¤æ ·å¼çš„æ•ˆæœï¼Œä½†å®é™…ä¸Šå› ä¸ºæ˜¯ä¿®æ”¹äº†å…¨å±€çš„æ ·å¼ï¼Œå› æ­¤ åœ¨ä¸åŒçš„vueç»„ä»¶ä¸­ä¿®æ”¹åŒä¸€ä¸ªæ ·å¼æœ‰å¯èƒ½ä¼šæœ‰å†²çªã€‚<br>ç¬¬ä¸‰ç§æ–¹å¼é€šè¿‡ &#x2F;deep&#x2F; çš„æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨vueç»„ä»¶ä¸­ä¿®æ”¹é»˜è®¤æ ·å¼ï¼Œä¹Ÿä¸ä¼šäºå…¶ä»–é¡µé¢æœ‰å†²çªã€‚<br>ç¬¬å››ç§æ–¹å¼å±€é™æ€§æ¯”è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œä½†ä¸æ¨èä½¿ç”¨ã€‚</p><h4 id="1-9-elementui-æœ‰ä»€ä¹ˆç”¨"><a href="#1-9-elementui-æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="1.9 elementui æœ‰ä»€ä¹ˆç”¨?"></a>1.9 elementui æœ‰ä»€ä¹ˆç”¨?</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>Element-UI</strong>ï¼šæ˜¯ä¸€å¥—é‡‡ç”¨ Vue 2.0 ä½œä¸ºåŸºç¡€æ¡†æ¶å®ç°çš„ç»„ä»¶åº“ï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 2.0 çš„ç»„ä»¶åº“ï¼Œæä¾›äº†é…å¥—è®¾è®¡èµ„æºï¼Œå¸®åŠ©ç½‘ç«™å¿«é€Ÿæˆå‹</p><p><strong>æ‰©å±•ï¼š</strong></p><p>Element-UIç‰¹ç‚¹ï¼š</p><p>ä¸€è‡´æ€§ Consistency</p><ul><li>ä¸ç°å®ç”Ÿæ´»ä¸€è‡´ï¼šä¸ç°å®ç”Ÿæ´»çš„æµç¨‹ã€é€»è¾‘ä¿æŒä¸€è‡´ï¼Œéµå¾ªç”¨æˆ·ä¹ æƒ¯çš„è¯­è¨€å’Œæ¦‚å¿µï¼›</li><li>åœ¨ç•Œé¢ä¸­ä¸€è‡´ï¼šæ‰€æœ‰çš„å…ƒç´ å’Œç»“æ„éœ€ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚ï¼šè®¾è®¡æ ·å¼ã€å›¾æ ‡å’Œæ–‡æœ¬ã€å…ƒç´ çš„ä½ç½®ç­‰ã€‚</li></ul><p>åé¦ˆ Feedback</p><ul><li>æ§åˆ¶åé¦ˆï¼šé€šè¿‡ç•Œé¢æ ·å¼å’Œäº¤äº’åŠ¨æ•ˆè®©ç”¨æˆ·å¯ä»¥æ¸…æ™°çš„æ„ŸçŸ¥è‡ªå·±çš„æ“ä½œï¼›</li><li>é¡µé¢åé¦ˆï¼šæ“ä½œåï¼Œé€šè¿‡é¡µé¢å…ƒç´ çš„å˜åŒ–æ¸…æ™°åœ°å±•ç°å½“å‰çŠ¶æ€ã€‚</li></ul><p>æ•ˆç‡ Efficiency</p><ul><li>ç®€åŒ–æµç¨‹ï¼šè®¾è®¡ç®€æ´ç›´è§‚çš„æ“ä½œæµç¨‹ï¼›</li><li>æ¸…æ™°æ˜ç¡®ï¼šè¯­è¨€è¡¨è¾¾æ¸…æ™°ä¸”è¡¨æ„æ˜ç¡®ï¼Œè®©ç”¨æˆ·å¿«é€Ÿç†è§£è¿›è€Œä½œå‡ºå†³ç­–ï¼›</li><li>å¸®åŠ©ç”¨æˆ·è¯†åˆ«ï¼šç•Œé¢ç®€å•ç›´ç™½ï¼Œè®©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«è€Œéå›å¿†ï¼Œå‡å°‘ç”¨æˆ·è®°å¿†è´Ÿæ‹…ã€‚</li></ul><p>å¯æ§ Controllability</p><ul><li>ç”¨æˆ·å†³ç­–ï¼šæ ¹æ®åœºæ™¯å¯ç»™äºˆç”¨æˆ·æ“ä½œå»ºè®®æˆ–å®‰å…¨æç¤ºï¼Œä½†ä¸èƒ½ä»£æ›¿ç”¨æˆ·è¿›è¡Œå†³ç­–ï¼›</li><li>ç»“æœå¯æ§ï¼šç”¨æˆ·å¯ä»¥è‡ªç”±çš„è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬æ’¤é”€ã€å›é€€å’Œç»ˆæ­¢å½“å‰æ“ä½œç­‰ã€‚</li></ul><h4 id="1-10-å¯¼èˆªå®ˆå«"><a href="#1-10-å¯¼èˆªå®ˆå«" class="headerlink" title="1.10 å¯¼èˆªå®ˆå«"></a>1.10 å¯¼èˆªå®ˆå«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>å¯¼èˆªå®ˆå«ä¸»è¦ç”¨æ¥<strong>é€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆª</strong>ã€‚</p><p>ç®€å•çš„è¯´ï¼Œå¯¼èˆªå®ˆå«å°±æ˜¯è·¯ç”±è·³è½¬è¿‡ç¨‹ä¸­çš„ä¸€äº›é’©å­å‡½æ•°ã€‚è·¯ç”±è·³è½¬æ˜¯ä¸€ä¸ªå¤§çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå¤§çš„è¿‡ç¨‹åˆ†ä¸ºè·³è½¬å‰ä¸­åç­‰ç­‰ç»†å°çš„è¿‡ç¨‹ï¼Œåœ¨æ¯ä¸€ä¸ªè¿‡ç¨‹ä¸­éƒ½æœ‰ä¸€å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°èƒ½è®©ä½ æ“ä½œä¸€äº›å…¶ä»–çš„äº‹å„¿çš„æ—¶æœºï¼Œè¿™å°±æ˜¯å¯¼èˆªå®ˆå«ã€‚</p><p><strong>è§£æï¼š</strong></p><p>è·¯ç”±å®ˆå«çš„å…·ä½“æ–¹æ³•ï¼š</p><ol><li><p>å…¨å±€å‰ç½®å®ˆå«</p><p>ä½ å¯ä»¥ä½¿ç”¨ router.beforeEach æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123; ... &#125;)</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå¯¼èˆªå¼€å§‹æ—¶ï¼Œå…¨å±€å‰ç½®å®ˆå«æŒ‰ç…§æ³¨å†Œé¡ºåºè°ƒç”¨ã€‚å®ˆå«æ˜¯å¼‚æ­¥é“¾å¼è°ƒç”¨çš„ï¼Œå¯¼èˆªåœ¨æœ€åçš„ä¸€å±‚å½“ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;ç¬¬ä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«&#x27;</span>)</span><br><span class="line">&#125;.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;ç¬¬äºŒä¸ªå…¨å±€å‰ç½®å®ˆå«&#x27;</span></span><br><span class="line">&#125;.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¯¼èˆªç»ˆäºå¼€å§‹äº†&#x27;</span>) <span class="comment">// å¯¼èˆªåœ¨æœ€åä¸€å±‚ä¸­</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>æ¯ä¸ªå®ˆå«æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ˆå¾€åçš„å®ˆå«éƒ½å¤§åŒå°å¼‚ï¼‰ï¼š</p><p>\1. to: Route: å³å°†è¦è¿›å…¥çš„ç›®æ ‡ è·¯ç”±å¯¹è±¡</p><p>\2. from: Route: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±</p><p>\3. next: Function: ä¸€å®šè¦è°ƒç”¨è¯¥æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªå®ˆå«ï¼Œæ‰§è¡Œæ•ˆæœä¾èµ– next æ–¹æ³•çš„å‚æ•°ã€‚</p><p>next(): è¿›å…¥ä¸‹ä¸€ä¸ªå®ˆå«ã€‚å¦‚æœå…¨éƒ¨å®ˆå«æ‰§è¡Œå®Œäº†ã€‚åˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯ confirmed (ç¡®è®¤çš„)ã€‚</p><p>next(false): ä¸­æ–­å½“å‰çš„å¯¼èˆªï¼ˆæŠŠå°æ˜è…¿æ‰“æ–­äº†ï¼‰ã€‚å¦‚æœæµè§ˆå™¨çš„ URL æ”¹å˜äº† (å¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–è€…æµè§ˆå™¨ åé€€æŒ‰é’®)ï¼Œé‚£ä¹ˆ URL åœ°å€ä¼šé‡ç½®åˆ° from è·¯ç”±å¯¹åº”çš„åœ°å€ã€‚</p><p>next(â€˜&#x2F;â€˜) æˆ–è€… next({ path: â€˜&#x2F;â€˜ }): è·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªï¼ˆå° æ˜è¢«æ‰“æ–­è…¿å¹¶ä¸”é€å›å®¶äº†ï¼‰ã€‚ä½ å¯ä»¥å‘ next ä¼ é€’ä»»æ„ä½ç½®å¯¹è±¡ï¼Œä¸”å…è®¸è®¾ç½®è¯¸å¦‚ replace: trueã€name: â€˜homeâ€™ ä¹‹ç±»çš„é€‰é¡¹ä»¥åŠä»»ä½•ç”¨åœ¨ router-link çš„ to prop æˆ– router.push ä¸­çš„é€‰é¡¹ã€‚</p><p>next(error): (2.4.0+) å¦‚æœä¼ å…¥ next çš„å‚æ•°æ˜¯ä¸€ä¸ª Error å®ä¾‹ï¼Œåˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ä¸”è¯¥é”™è¯¯ä¼šè¢«ä¼ é€’router.</p><p>onError() æ³¨å†Œè¿‡çš„å›è°ƒã€‚</p><p>æ³¨æ„ï¼šæ°¸è¿œä¸è¦ä½¿ç”¨ä¸¤æ¬¡nextï¼Œè¿™ä¼šäº§ç”Ÿä¸€äº›è¯¯ä¼šã€‚</p><ol><li><p>å…¨å±€è§£æå®ˆå«</p><p>è¿™å’Œ router.beforeEach ç±»ä¼¼ï¼Œä½†ä»–æ€»æ˜¯è¢«æ”¾åœ¨æœ€åä¸€ä¸ªæ‰§è¡Œã€‚</p></li><li><p>å…¨å±€åç½®é’©å­</p><p>å¯¼èˆªå·²ç»ç¡®è®¤äº†çš„ï¼Œå°æ˜å·²ç»åˆ°äº†å¤–å©†å®¶äº†ï¼Œä½ æ‰“æ–­ä»–çš„è…¿ä»–ä¹Ÿæ˜¯åœ¨å¤–å©†å®¶äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½ å¹¶ä¸èƒ½è°ƒç”¨next</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è·¯ç”±ç‹¬äº«çš„å®ˆå«</p><p>åœ¨è·¯ç”±å†…å†™çš„å®ˆå«</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Foo</span>,</span><br><span class="line">      <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶å†…çš„å®ˆå«</p><p>5.1 beforeRouteEnter</p><p>5.2 beforeRouteUpdate (2.2 æ–°å¢)</p><p>5.3 beforeRouteLeave</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Foo</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`...`</span>,</span><br><span class="line">  beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// è·¯ç”±è¢« confirm å‰è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ç»„ä»¶è¿˜æœªæ¸²æŸ“å‡ºæ¥ï¼Œä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ</span></span><br><span class="line">    <span class="comment">// ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`ï¼Œä¸€èˆ¬ç”¨æ¥æ•°æ®è·å–ã€‚</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>æ‰©å±•ï¼š</strong></p><p>å¯¼èˆªå…¨è¿‡ç¨‹</p><ul><li>å¯¼èˆªè¢«è§¦å‘ã€‚</li><li>åœ¨å‡†å¤‡ç¦»å¼€çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteLeave å®ˆå«ã€‚</li><li>è°ƒç”¨å…¨å±€çš„ beforeEach å®ˆå«ã€‚</li><li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå« (2.2+)ã€‚ï¼ˆå¦‚æœä½ çš„ç»„ä»¶æ˜¯é‡ç”¨çš„ï¼‰</li><li>åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnterã€‚</li><li>è§£æå³å°†æŠµè¾¾çš„ç»„ä»¶ã€‚</li><li>åœ¨å³å°†æŠµè¾¾çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnterã€‚</li><li>è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå« (2.5+)ã€‚</li><li>å¯¼èˆªè¢«ç¡®è®¤ã€‚</li><li>è°ƒç”¨å…¨å±€çš„ afterEach é’©å­ã€‚</li><li>è§¦å‘ DOM æ›´æ–°ã€‚</li><li>ç”¨åˆ›å»ºå¥½çš„å®ä¾‹è°ƒç”¨ beforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°ã€‚</li></ul><h4 id="1-11-è·¯ç”±å®ˆå«è¿›è¡Œåˆ¤æ–­ç™»å½•"><a href="#1-11-è·¯ç”±å®ˆå«è¿›è¡Œåˆ¤æ–­ç™»å½•" class="headerlink" title="1.11 è·¯ç”±å®ˆå«è¿›è¡Œåˆ¤æ–­ç™»å½•"></a>1.11 è·¯ç”±å®ˆå«è¿›è¡Œåˆ¤æ–­ç™»å½•</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>åœ¨vueé¡¹ç›®ä¸­ï¼Œåˆ‡æ¢è·¯ç”±æ—¶è‚¯å®šä¼šç¢°åˆ°éœ€è¦ç™»å½•çš„è·¯ç”±ï¼Œå…¶åŸç†å°±æ˜¯åœ¨åˆ‡æ¢è·¯å¾„ä¹‹å‰è¿›è¡Œåˆ¤æ–­ï¼Œä½ ä¸å¯èƒ½è¿›å…¥é¡µé¢å†å»åˆ¤æ–­æœ‰æ— ç™»å½•é‡æ–°å®šå‘åˆ°loginï¼Œé‚£æ ·çš„è¯ä¼šå¯¼è‡´é¡µé¢å·²ç»æ¸²æŸ“ä»¥åŠå®ƒçš„å„ç§è¯·æ±‚å·²ç»å‘å‡ºã€‚</p><ol><li><p>å¦‚éœ€è¦ç™»å½•çš„è·¯ç”±å¯åœ¨main.jsä¸­ç»Ÿä¸€å¤„ç†ï¼ˆå…¨å±€å‰ç½®å®ˆå«ï¼‰</p><p>æˆ‘ä»¬å¯ä»¥åœ¨å…¥å£æ–‡ä»¶man.jsé‡Œé¢è¿›è¡Œé…ç½®ï¼Œä½¿ç”¨router.beforeEachæ–¹æ³•ï¼Œä¸æ‡‚å¾—å¯ä»¥æ‰“å°toï¼Œfromçš„å‚æ•°å°±okï¼ŒrequireAuthå¯ä»¥éšæ„æ¢åçš„ï¼Œåªè¦man.jsé‡Œé¢è·Ÿé…ç½®è·¯ç”±çš„routesé‡Œé¢çš„å­—æ®µä¿æŒä¸€è‡´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">matched</span>.<span class="title function_">some</span>(<span class="function"><span class="params">record</span> =&gt;</span> record.<span class="property">meta</span>.<span class="property">requireAuth</span>))&#123;  <span class="comment">// åˆ¤æ–­è¯¥è·¯ç”±æ˜¯å¦éœ€è¦ç™»å½•æƒé™</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>) &amp;&amp; !<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>))&#123;</span><br><span class="line">      <span class="title function_">next</span>(&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;<span class="attr">redirect</span>: to.<span class="property">fullPath</span>&#125;  <span class="comment">// å°†è·³è½¬çš„è·¯ç”±pathä½œä¸ºå‚æ•°ï¼Œç™»å½•æˆåŠŸåè·³è½¬åˆ°è¯¥è·¯ç”±</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">            <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">            <span class="attr">meta</span>: &#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              <span class="attr">requireAuth</span>: <span class="literal">true</span>,  <span class="comment">// æ·»åŠ è¯¥å­—æ®µï¼Œè¡¨ç¤ºè¿›å…¥è¿™ä¸ªè·¯ç”±æ˜¯éœ€è¦ç™»å½•çš„</span></span><br><span class="line">           &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">Login</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;register&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">Register</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å…¨å±€åç½®å®ˆå«</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å•ç‹¬è·¯ç”±ç‹¬äº«å®ˆå«ï¼ˆä¸å…¨å±€ä¸€è‡´ï¼Œå¯å•ç‹¬å¯¹æŸä¸ªè·¯ç”±è¿›è¡Œé…ç½®ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Foo</span>,</span><br><span class="line">      <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶å†…éƒ¨è·¯ç”±å®ˆå«ï¼ˆå¯å†™åœ¨ä¸ç”Ÿå‘½å‘¨æœŸåŒçº§ä½ç½®ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢« confirm å‰è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä¸ï¼èƒ½ï¼è·å–ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">    <span class="comment">// å› ä¸ºå½“å®ˆå«æ‰§è¡Œå‰ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º</span></span><br><span class="line">&#125;,</span><br><span class="line">beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ</span></span><br><span class="line">    <span class="comment">// ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">&#125;,</span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-12-vue-router-å®ç°æ‡’åŠ è½½"><a href="#1-12-vue-router-å®ç°æ‡’åŠ è½½" class="headerlink" title="1.12 vue-router å®ç°æ‡’åŠ è½½"></a>1.12 vue-router å®ç°æ‡’åŠ è½½</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>æ‡’åŠ è½½ï¼šå½“æ‰“åŒ…æ„å»ºåº”ç”¨æ—¶ï¼ŒJavaScript åŒ…ä¼šå˜å¾—éå¸¸å¤§ï¼Œå½±å“é¡µé¢åŠ è½½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚</p><p>å®ç°ï¼šç»“åˆ Vue çš„<a href="https://cn.vuejs.org/v2/guide/components-dynamic-async.html#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6">å¼‚æ­¥ç»„ä»¶</a>å’Œ Webpack çš„<a href="https://doc.webpack-china.org/guides/code-splitting-async/#require-ensure-/">ä»£ç åˆ†å‰²åŠŸèƒ½</a>ï¼Œå¯ä»¥å®ç°è·¯ç”±ç»„ä»¶çš„æ‡’åŠ è½½</p><ol><li><p>é¦–å…ˆï¼Œå¯ä»¥å°†å¼‚æ­¥ç»„ä»¶å®šä¹‰ä¸ºè¿”å›ä¸€ä¸ª Promise çš„å·¥å‚å‡½æ•° (è¯¥å‡½æ•°è¿”å›çš„ Promise åº”è¯¥ resolve ç»„ä»¶æœ¬èº«)ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123; <span class="comment">/* ç»„ä»¶å®šä¹‰å¯¹è±¡ */</span> &#125;)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Webpack 2 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://github.com/tc39/proposal-dynamic-import">åŠ¨æ€ import</a>è¯­æ³•æ¥å®šä¹‰ä»£ç åˆ†å—ç‚¹ (split point)ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./Foo.vue&#x27;</span>) <span class="comment">// è¿”å› Promise</span></span><br></pre></td></tr></table></figure><p>ç»“åˆè¿™ä¸¤è€…ï¼Œè¿™å°±æ˜¯å¦‚ä½•å®šä¹‰ä¸€ä¸ªèƒ½å¤Ÿè¢« Webpack è‡ªåŠ¨ä»£ç åˆ†å‰²çš„å¼‚æ­¥ç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;./Foo.vue&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨è·¯ç”±é…ç½®ä¸­ä»€ä¹ˆéƒ½ä¸éœ€è¦æ”¹å˜ï¼Œåªéœ€è¦åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨Fooï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Foo</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-13-jsæ˜¯å¦‚ä½•ç›‘å¬HistoryRouterçš„å˜åŒ–çš„"><a href="#1-13-jsæ˜¯å¦‚ä½•ç›‘å¬HistoryRouterçš„å˜åŒ–çš„" class="headerlink" title="1.13 jsæ˜¯å¦‚ä½•ç›‘å¬HistoryRouterçš„å˜åŒ–çš„"></a>1.13 jsæ˜¯å¦‚ä½•ç›‘å¬HistoryRouterçš„å˜åŒ–çš„</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>é€šè¿‡æµè§ˆå™¨çš„åœ°å€æ æ¥æ”¹å˜åˆ‡æ¢é¡µé¢ï¼Œå‰ç«¯å®ç°ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><p>é€šè¿‡hashæ”¹å˜ï¼Œåˆ©ç”¨window.onhashchange ç›‘å¬ã€‚</p></li><li><p><strong>HistoryRouterï¼š</strong>é€šè¿‡historyçš„æ”¹å˜ï¼Œè¿›è¡Œjsæ“ä½œåŠ è½½é¡µé¢ï¼Œç„¶è€Œhistoryå¹¶ä¸åƒhashé‚£æ ·ç®€å•ï¼Œå› ä¸ºhistoryçš„æ”¹å˜ï¼Œé™¤äº†æµè§ˆå™¨çš„å‡ ä¸ªå‰è¿›åé€€ï¼ˆä½¿ç”¨ history.back(), history.forward()å’Œ history.go() æ–¹æ³•æ¥å®Œæˆåœ¨ç”¨æˆ·å†å²è®°å½•ä¸­å‘åå’Œå‘å‰çš„è·³è½¬ã€‚ï¼‰ç­‰æ“ä½œä¼šä¸»åŠ¨è§¦å‘popstate äº‹ä»¶ï¼ŒpushStateï¼ŒreplaceState å¹¶ä¸ä¼šè§¦å‘popstateäº‹ä»¶ï¼Œè¦è§£å†³historyç›‘å¬çš„é—®é¢˜ï¼Œæ–¹æ³•æ˜¯ï¼š</p><p>é¦–å…ˆå®Œæˆä¸€ä¸ªè®¢é˜…-å‘å¸ƒæ¨¡å¼ï¼Œç„¶åé‡å†™history.pushState, history.replaceState,å¹¶æ·»åŠ æ¶ˆæ¯é€šçŸ¥ï¼Œè¿™æ ·ä¸€æ¥åªè¦historyçš„æ— æ³•å®ç°ç›‘å¬å‡½æ•°å°±è¢«æˆ‘ä»¬åŠ ä¸Šäº†äº‹ä»¶é€šçŸ¥ï¼Œåªä¸è¿‡è¿™é‡Œç”¨çš„ä¸æ˜¯æµè§ˆå™¨åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯é€šè¿‡æˆ‘ä»¬åˆ›å»ºçš„event-bus æ¥å®ç°é€šçŸ¥ï¼Œç„¶åè§¦å‘äº‹ä»¶è®¢é˜…å‡½æ•°çš„æ‰§è¡Œã€‚</p></li></ol><p>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ol><li>è®¢é˜…-å‘å¸ƒæ¨¡å¼ç¤ºä¾‹</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dep</span> &#123;                  <span class="comment">// è®¢é˜…æ± </span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">id</span> = <span class="keyword">new</span> <span class="title class_">Date</span>() <span class="comment">//è¿™é‡Œç®€å•çš„è¿ç”¨æ—¶é—´æˆ³åšè®¢é˜…æ± çš„ID</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subs</span> = []       <span class="comment">//è¯¥äº‹ä»¶ä¸‹è¢«è®¢é˜…å¯¹è±¡çš„é›†åˆ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">defined</span>(<span class="params"></span>)&#123;              <span class="comment">// æ·»åŠ è®¢é˜…è€…</span></span><br><span class="line">        <span class="title class_">Dep</span>.<span class="property">watch</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">notify</span>(<span class="params"></span>) &#123;              <span class="comment">//é€šçŸ¥è®¢é˜…è€…æœ‰å˜åŒ–</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">e, i</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> e.<span class="property">update</span> === <span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                   e.<span class="property">update</span>.<span class="title function_">apply</span>(e)  <span class="comment">//è§¦å‘è®¢é˜…è€…æ›´æ–°å‡½æ•°</span></span><br><span class="line">                &#125; <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">warr</span>(err)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Dep</span>.<span class="property">watch</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Watch</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, fn</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;       <span class="comment">//è®¢é˜…æ¶ˆæ¯çš„åç§°</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">id</span> = <span class="keyword">new</span> <span class="title class_">Date</span>();   <span class="comment">//è¿™é‡Œç®€å•çš„è¿ç”¨æ—¶é—´æˆ³åšè®¢é˜…è€…çš„ID</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">callBack</span> = fn;     <span class="comment">//è®¢é˜…æ¶ˆæ¯å‘é€æ”¹å˜æ—¶-&gt;è®¢é˜…è€…æ‰§è¡Œçš„å›è°ƒå‡½æ•°     </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">dep</span>) &#123;                  <span class="comment">//å°†è®¢é˜…è€…æ”¾å…¥depè®¢é˜…æ± </span></span><br><span class="line">       dep.<span class="property">subs</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>) &#123;                  <span class="comment">//å°†è®¢é˜…è€…æ›´æ–°æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">var</span> cb = <span class="variable language_">this</span>.<span class="property">callBack</span>; <span class="comment">//èµ‹å€¼ä¸ºäº†ä¸æ”¹å˜å‡½æ•°å†…è°ƒç”¨çš„this</span></span><br><span class="line">        <span class="title function_">cb</span>(<span class="variable language_">this</span>.<span class="property">name</span>);         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>é‡å†™historyæ–¹æ³•ï¼Œå¹¶æ·»åŠ window.addHistoryListeneräº‹ä»¶æœºåˆ¶ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addHistoryMethod = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> historyDep = <span class="keyword">new</span> <span class="title class_">Dep</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(name === <span class="string">&#x27;historychange&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">name, fn</span>)&#123;</span><br><span class="line">                    <span class="keyword">var</span> event = <span class="keyword">new</span> <span class="title class_">Watch</span>(name, fn)</span><br><span class="line">                    <span class="title class_">Dep</span>.<span class="property">watch</span> = event;</span><br><span class="line">                    historyDep.<span class="title function_">defined</span>();</span><br><span class="line">                    <span class="title class_">Dep</span>.<span class="property">watch</span> = <span class="literal">null</span>;       <span class="comment">//ç½®ç©ºä¾›ä¸‹ä¸€ä¸ªè®¢é˜…è€…ä½¿ç”¨</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(name === <span class="string">&#x27;pushState&#x27;</span> || name === <span class="string">&#x27;replaceState&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> method = history[name];</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                    method.<span class="title function_">apply</span>(history, <span class="variable language_">arguments</span>);</span><br><span class="line">                    historyDep.<span class="title function_">notify</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;())</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">addHistoryListener</span> = <span class="title function_">addHistoryMethod</span>(<span class="string">&#x27;historychange&#x27;</span>);</span><br><span class="line">history.<span class="property">pushState</span> =  <span class="title function_">addHistoryMethod</span>(<span class="string">&#x27;pushState&#x27;</span>);</span><br><span class="line">history.<span class="property">replaceState</span> =  <span class="title function_">addHistoryMethod</span>(<span class="string">&#x27;replaceState&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="1-14-HashRouter-å’Œ-HistoryRouterçš„åŒºåˆ«å’ŒåŸç†"><a href="#1-14-HashRouter-å’Œ-HistoryRouterçš„åŒºåˆ«å’ŒåŸç†" class="headerlink" title="1.14 HashRouter å’Œ HistoryRouterçš„åŒºåˆ«å’ŒåŸç†"></a>1.14 HashRouter å’Œ HistoryRouterçš„åŒºåˆ«å’ŒåŸç†</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>vue-router</strong>æ˜¯Vueå®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—æ˜“å¦‚åæŒã€‚vue-routeré»˜è®¤ hash æ¨¡å¼ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯historyæ¨¡å¼ã€‚</p><p>åŸç†ï¼š</p><ol><li><p>hashè·¯ç”±ï¼šhashæ¨¡å¼çš„å·¥ä½œåŸç†æ˜¯hashchangeäº‹ä»¶ï¼Œå¯ä»¥åœ¨windowç›‘å¬hashçš„å˜åŒ–ã€‚æˆ‘ä»¬åœ¨urlåé¢éšä¾¿æ·»åŠ ä¸€ä¸ª#xxè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚vue-routeré»˜è®¤çš„æ˜¯hashæ¨¡å¼â€”ä½¿ç”¨URLçš„hashæ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„URL,äºæ˜¯å½“URLæ”¹å˜çš„æ—¶å€™,é¡µé¢ä¸ä¼šé‡æ–°åŠ è½½,ä¹Ÿå°±æ˜¯å•é¡µåº”ç”¨äº†,å½“#åé¢çš„hashå‘ç”Ÿå˜åŒ–,ä¸ä¼šå¯¼è‡´æµè§ˆå™¨å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚,æµè§ˆå™¨ä¸å‘å‡ºè¯·æ±‚å°±ä¸ä¼šåˆ·æ–°é¡µé¢,å¹¶ä¸”ä¼šè§¦å‘hasChangeè¿™ä¸ªäº‹ä»¶,é€šè¿‡ç›‘å¬hashå€¼çš„å˜åŒ–æ¥å®ç°æ›´æ–°é¡µé¢éƒ¨åˆ†å†…å®¹çš„æ“ä½œ</p><p>å¯¹äºhashæ¨¡å¼ä¼šåˆ›å»ºhashHistoryå¯¹è±¡,åœ¨è®¿é—®ä¸åŒçš„è·¯ç”±çš„æ—¶å€™,ä¼šå‘ç”Ÿä¸¤ä»¶äº‹:<br>HashHistory.push()å°†æ–°çš„è·¯ç”±æ·»åŠ åˆ°æµè§ˆå™¨è®¿é—®çš„å†å²çš„æ ˆé¡¶,å’ŒHasHistory.replace()æ›¿æ¢åˆ°å½“å‰æ ˆé¡¶çš„è·¯ç”±</p></li><li><p>historyè·¯ç”±ï¼š</p><p>ä¸»è¦ä½¿ç”¨HTML5çš„pushState()å’ŒreplaceState()è¿™ä¸¤ä¸ªapiç»“åˆwindow.popstateäº‹ä»¶ï¼ˆç›‘å¬æµè§ˆå™¨å‰è¿›åé€€ï¼‰æ¥å®ç°çš„,pushState()å¯ä»¥æ”¹å˜urlåœ°å€ä¸”ä¸ä¼šå‘é€è¯·æ±‚,replaceState()å¯ä»¥è¯»å–å†å²è®°å½•æ ˆ,è¿˜å¯ä»¥å¯¹æµè§ˆå™¨è®°å½•è¿›è¡Œä¿®æ”¹</p></li></ol><p>åŒºåˆ«ï¼š</p><ol><li>hashæ¨¡å¼è¾ƒä¸‘ï¼Œhistoryæ¨¡å¼è¾ƒä¼˜é›…</li><li>pushStateè®¾ç½®çš„æ–°URLå¯ä»¥æ˜¯ä¸å½“å‰URLåŒæºçš„ä»»æ„URLï¼›è€Œhashåªå¯ä¿®æ”¹#åé¢çš„éƒ¨åˆ†ï¼Œæ•…åªå¯è®¾ç½®ä¸å½“å‰åŒæ–‡æ¡£çš„URL</li><li>pushStateè®¾ç½®çš„æ–°URLå¯ä»¥ä¸å½“å‰URLä¸€æ¨¡ä¸€æ ·ï¼Œè¿™æ ·ä¹Ÿä¼šæŠŠè®°å½•æ·»åŠ åˆ°æ ˆä¸­ï¼›è€Œhashè®¾ç½®çš„æ–°å€¼å¿…é¡»ä¸åŸæ¥ä¸ä¸€æ ·æ‰ä¼šè§¦å‘è®°å½•æ·»åŠ åˆ°æ ˆä¸­</li><li>pushStateé€šè¿‡stateObjectå¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°è®°å½•ä¸­ï¼›è€Œhashåªå¯æ·»åŠ çŸ­å­—ç¬¦ä¸²</li><li>pushStateå¯é¢å¤–è®¾ç½®titleå±æ€§ä¾›åç»­ä½¿ç”¨</li><li>hashå…¼å®¹IE8ä»¥ä¸Šï¼Œhistoryå…¼å®¹IE10ä»¥ä¸Š</li><li>historyæ¨¡å¼éœ€è¦åç«¯é…åˆå°†æ‰€æœ‰è®¿é—®éƒ½æŒ‡å‘index.htmlï¼Œå¦åˆ™ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œä¼šå¯¼è‡´404é”™è¯¯</li></ol><p>ä½¿ç”¨æ–¹æ³•:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// hashè·¯ç”±åŸç†***************************</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ç›‘å¬hashchangeæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hashchange&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">innerHTML</span> = location.<span class="property">hash</span>.<span class="title function_">slice</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// historyè·¯ç”±åŸç†************************</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// åˆ©ç”¨html5çš„historyçš„pushStateæ–¹æ³•ç»“åˆwindow.popstateäº‹ä»¶ï¼ˆç›‘å¬æµè§ˆå™¨å‰è¿›åé€€ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">routerChange</span> (pathname)&#123;</span></span><br><span class="line"><span class="language-javascript">            history.<span class="title function_">pushState</span>(<span class="literal">null</span>,<span class="literal">null</span>,pathname)</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">innerHTML</span> = location.<span class="property">pathname</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;popstate&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="property">innerHTML</span> = location.<span class="property">pathname</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-15-Vue-router-åŸç†-å“ªä¸ªæ¨¡å¼ä¸ä¼šè¯·æ±‚æœåŠ¡å™¨"><a href="#1-15-Vue-router-åŸç†-å“ªä¸ªæ¨¡å¼ä¸ä¼šè¯·æ±‚æœåŠ¡å™¨" class="headerlink" title="1.15 Vue router åŸç†, å“ªä¸ªæ¨¡å¼ä¸ä¼šè¯·æ±‚æœåŠ¡å™¨"></a>1.15 Vue router åŸç†, å“ªä¸ªæ¨¡å¼ä¸ä¼šè¯·æ±‚æœåŠ¡å™¨</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>Vue router çš„ä¸¤ç§æ–¹æ³•ï¼Œhashæ¨¡å¼ä¸ä¼šè¯·æ±‚æœåŠ¡å™¨</p><p><strong>è§£æï¼š</strong></p><ol><li>urlçš„hashï¼Œå°±æ˜¯é€šå¸¸æ‰€è¯´çš„é”šç‚¹#ï¼Œjavascripté€šè¿‡hashChangeäº‹ä»¶æ¥ç›‘å¬urlçš„å˜åŒ–ï¼ŒIE7ä»¥ä¸‹éœ€è¦è½®è¯¢ã€‚æ¯”å¦‚è¿™ä¸ª URLï¼š<a href="http://www.abc.com/#/hello%EF%BC%8Chash">http://www.abc.com/#/helloï¼Œhash</a> çš„å€¼ä¸º#&#x2F;helloã€‚å®ƒçš„ç‰¹ç‚¹åœ¨äºï¼šhash è™½ç„¶å‡ºç°åœ¨ URL ä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…æ‹¬åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œå› æ­¤<strong>æ”¹å˜ hash ä¸ä¼šé‡æ–°åŠ è½½é¡µé¢</strong>ã€‚</li><li>HTML5çš„Historyæ¨¡å¼ï¼Œå®ƒä½¿urlçœ‹èµ·æ¥åƒæ™®é€šç½‘ç«™é‚£æ ·ï¼Œä»¥â€œ&#x2F;â€åˆ†å‰²ï¼Œæ²¡æœ‰#ï¼Œå•é¡µé¢å¹¶æ²¡æœ‰è·³è½¬ã€‚ä¸è¿‡ä½¿ç”¨è¿™ç§æ¨¡å¼éœ€è¦æœåŠ¡ç«¯æ”¯æŒï¼ŒæœåŠ¡ç«¯åœ¨æ¥æ”¶åˆ°æ‰€æœ‰è¯·æ±‚åï¼Œéƒ½åªæƒ³åŒä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œä¸ç„¶ä¼šå‡ºç°404ã€‚å› æ­¤å•é¡µé¢åº”ç”¨åªæœ‰ä¸€ä¸ªhtmlï¼Œæ•´ä¸ªç½‘ç«™çš„å†…å®¹éƒ½åœ¨è¿™ä¸€ä¸ªhtmlé‡Œï¼Œé€šè¿‡jsæ¥å¤„ç†ã€‚</li></ol><h4 id="1-16-ç»„ä»¶é€šä¿¡çš„æ–¹å¼"><a href="#1-16-ç»„ä»¶é€šä¿¡çš„æ–¹å¼" class="headerlink" title="1.16 ç»„ä»¶é€šä¿¡çš„æ–¹å¼"></a>1.16 ç»„ä»¶é€šä¿¡çš„æ–¹å¼</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ç»„ä»¶é€šä¿¡çš„æ–¹å¼çš„æ–¹å¼æœ‰ä»¥ä¸‹8ç§æ–¹æ³•ï¼š</p><ol><li><p>propså’Œ$emit</p><p>è¿™æ˜¯æœ€æœ€å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼ï¼Œçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ˜¯é€šè¿‡propä¼ é€’çš„ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶æ˜¯é€šè¿‡$emitè§¦å‘äº‹ä»¶æ¥åšåˆ°çš„</p></li><li><p><img src="https://www.nowcoder.com/equation?tex=attrs%E5%92%8C&preview=true" alt="img">listeners</p><p>ç¬¬ä¸€ç§æ–¹å¼å¤„ç†çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ è¾“æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå¤šå±‚åµŒå¥—ï¼Œçˆ¶ç»„ä»¶Aä¸‹é¢æœ‰å­ç»„ä»¶Bï¼Œç»„ä»¶Bä¸‹é¢æœ‰ç»„ä»¶C,è¿™æ—¶å¦‚æœç»„ä»¶Aæƒ³ä¼ é€’æ•°æ®ç»™ç»„ä»¶Cæ€ä¹ˆåŠå‘¢?</p><p>å¦‚æœé‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»è®©ç»„ä»¶Aé€šè¿‡propä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶Bï¼Œç»„ä»¶Båœ¨é€šè¿‡propä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶C;è¦æ˜¯ç»„ä»¶Aå’Œç»„ä»¶Cä¹‹é—´æœ‰æ›´å¤šçš„ç»„ä»¶ï¼Œé‚£é‡‡ç”¨è¿™ç§æ–¹å¼å°±å¾ˆå¤æ‚äº†ã€‚ä»Vue 2.4å¼€å§‹ï¼Œæä¾›äº†<img src="https://www.nowcoder.com/equation?tex=attrs%E5%92%8C&preview=true" alt="img">listenersæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œèƒ½å¤Ÿè®©ç»„ä»¶Aä¹‹é—´ä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶Cã€‚</p></li><li><p>v-model</p><p>çˆ¶ç»„ä»¶é€šè¿‡v-modelä¼ é€’å€¼ç»™å­ç»„ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨ä¼ é€’ä¸€ä¸ªvalueçš„propå±æ€§ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡this.$emit(â€˜inputâ€™,val)è‡ªåŠ¨ä¿®æ”¹v-modelç»‘å®šçš„å€¼</p></li><li><p>provideå’Œinject</p><p>çˆ¶ç»„ä»¶ä¸­é€šè¿‡provideræ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ã€‚ä¸è®ºå­ç»„ä»¶æœ‰å¤šæ·±ï¼Œåªè¦è°ƒç”¨äº†injecté‚£ä¹ˆå°±å¯ä»¥æ³¨å…¥providerä¸­çš„æ•°æ®ã€‚è€Œä¸æ˜¯å±€é™äºåªèƒ½ä»å½“å‰çˆ¶ç»„ä»¶çš„propå±æ€§æ¥è·å–æ•°æ®ï¼Œåªè¦åœ¨çˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå­ç»„ä»¶éƒ½å¯ä»¥è°ƒç”¨ã€‚</p></li><li><p>ä¸­å¤®äº‹ä»¶æ€»çº¿</p><p>ä¸Šé¢æ–¹å¼éƒ½æ˜¯å¤„ç†çš„çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œé‚£å¦‚æœä¸¤ä¸ªç»„ä»¶ä¸æ˜¯çˆ¶å­å…³ç³»å‘¢?ä¹Ÿå°±æ˜¯å…„å¼Ÿç»„ä»¶å¦‚ä½•é€šä¿¡?</p><p>è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ä¸­å¤®äº‹ä»¶æ€»çº¿çš„æ–¹å¼ã€‚æ–°å»ºä¸€ä¸ªVueäº‹ä»¶buså¯¹è±¡ï¼Œç„¶åé€šè¿‡bus.<img src="https://www.nowcoder.com/equation?tex=emit%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6%EF%BC%8Cbus.&preview=true" alt="img">onç›‘å¬è§¦å‘çš„äº‹ä»¶ã€‚</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128629803/500809B9BD071EA8067678D9EC046261" alt="img"></p></li><li><p>parentå’Œchildren</p></li><li><p>boradcastå’Œdispatch</p><p>vue1.0ä¸­æä¾›äº†è¿™ç§æ–¹å¼ï¼Œä½†vue2.0ä¸­æ²¡æœ‰ï¼Œä½†å¾ˆå¤šå¼€æºè½¯ä»¶éƒ½è‡ªå·±å°è£…äº†è¿™ç§æ–¹å¼ï¼Œæ¯”å¦‚min uiã€element uiå’Œiviewç­‰ã€‚ æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼Œä¸€èˆ¬éƒ½ä½œä¸ºä¸€ä¸ªmixinså»ä½¿ç”¨, broadcastæ˜¯å‘ç‰¹å®šçš„çˆ¶ç»„ä»¶ï¼Œè§¦å‘äº‹ä»¶ï¼Œdispatchæ˜¯å‘ç‰¹å®šçš„å­ç»„ä»¶è§¦å‘äº‹ä»¶ï¼Œæœ¬è´¨ä¸Šè¿™ç§æ–¹å¼è¿˜æ˜¯onå’Œonå’Œemitçš„å°è£…ï¼Œä½†åœ¨ä¸€äº›åŸºç¡€ç»„ä»¶ä¸­å´å¾ˆå®ç”¨</p></li><li><p>vuexå¤„ç†ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’</p><p>å¦‚æœä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¾ˆå¤šç»„ä»¶ä¹‹é—´éœ€è¦åŒæ—¶å¤„ç†ä¸€äº›å…¬å…±çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™æ‰æœ‰ä¸Šé¢è¿™ä¸€äº›æ–¹æ³•å¯èƒ½ä¸åˆ©äºé¡¹ç›®çš„ç»´æŠ¤ï¼Œvuexçš„åšæ³•å°±æ˜¯å°†è¿™ä¸€äº›å…¬å…±çš„æ•°æ®æŠ½ç¦»å‡ºæ¥ï¼Œç„¶åå…¶ä»–ç»„ä»¶å°±å¯ä»¥å¯¹è¿™ä¸ªå…¬å…±æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œï¼Œè¿™æ ·è¾¾åˆ°äº†è§£è€¦çš„ç›®çš„</p></li></ol><h4 id="1-17-vueç»„ä»¶é—´ä¼ å€¼ï¼Œ-attrså’Œlisteners-äº†è§£è¿‡å—ï¼Ÿ"><a href="#1-17-vueç»„ä»¶é—´ä¼ å€¼ï¼Œ-attrså’Œlisteners-äº†è§£è¿‡å—ï¼Ÿ" class="headerlink" title="1.17 vueç»„ä»¶é—´ä¼ å€¼ï¼Œ attrså’Œlisteners äº†è§£è¿‡å—ï¼Ÿ"></a>1.17 vueç»„ä»¶é—´ä¼ å€¼ï¼Œ attrså’Œlisteners äº†è§£è¿‡å—ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><img src="https://www.nowcoder.com/equation?tex=attrs%E5%92%8C&preview=true" alt="img">listenersçš„ä½œç”¨ï¼šè§£å†³å¤šå±‚åµŒå¥—æƒ…å†µä¸‹ï¼Œçˆ¶ç»„ä»¶Aä¸‹é¢æœ‰å­ç»„ä»¶Bï¼Œç»„ä»¶Bä¸‹é¢æœ‰ç»„ä»¶Cï¼Œç»„ä»¶Aä¼ é€’æ•°æ®ç»™ç»„ä»¶Bçš„é—®é¢˜ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Vue 2.4æå‡ºçš„ã€‚</p><p><img src="https://www.nowcoder.com/equation?tex=attrs%E5%92%8C&preview=true" alt="img">listenersè§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼š</p><p>Cç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;C&#x27;</span>,&#123; </span><br><span class="line">     <span class="attr">template</span>:<span class="string">` </span></span><br><span class="line"><span class="string">     &lt;div&gt; </span></span><br><span class="line"><span class="string">     &lt;input type=&quot;text&quot; v-model=&quot;$attrs.messageC&quot; @input=&quot;passCData($attrs.messageC)&quot;&gt; </span></span><br><span class="line"><span class="string">     &lt;/div&gt; </span></span><br><span class="line"><span class="string">     `</span>, </span><br><span class="line">     <span class="attr">methods</span>:&#123; </span><br><span class="line">         <span class="title function_">passCData</span>(<span class="params">val</span>)&#123; </span><br><span class="line">             <span class="comment">//è§¦å‘çˆ¶ç»„ä»¶Aä¸­çš„äº‹ä»¶ </span></span><br><span class="line">             <span class="variable language_">this</span>.$emit(<span class="string">&#x27;getCData&#x27;</span>,val) </span><br><span class="line">         &#125; </span><br><span class="line">     &#125; </span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><p>Bç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;B&#x27;</span>,&#123; </span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="keyword">return</span> &#123; </span><br><span class="line">         <span class="attr">myMessage</span>:<span class="variable language_">this</span>.<span class="property">message</span> </span><br><span class="line">     &#125; </span><br><span class="line"> &#125;, </span><br><span class="line"> <span class="attr">template</span>:<span class="string">` </span></span><br><span class="line"><span class="string"> &lt;div&gt; </span></span><br><span class="line"><span class="string"> &lt;input type=&quot;text&quot; v-model=&quot;myMessage&quot; @input=&quot;passData(myMessage)&quot;&gt; </span></span><br><span class="line"><span class="string"> &lt;C v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/C&gt; </span></span><br><span class="line"><span class="string"> &lt;/div&gt; </span></span><br><span class="line"><span class="string"> `</span>, </span><br><span class="line"> <span class="comment">//å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® </span></span><br><span class="line"> <span class="attr">props</span>:[<span class="string">&#x27;message&#x27;</span>], </span><br><span class="line"> <span class="attr">methods</span>:&#123; </span><br><span class="line">     <span class="title function_">passData</span>(<span class="params">val</span>)&#123; </span><br><span class="line">         <span class="comment">//è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„äº‹ä»¶ </span></span><br><span class="line">         <span class="variable language_">this</span>.$emit(<span class="string">&#x27;getChildData&#x27;</span>,val) </span><br><span class="line">     &#125; </span><br><span class="line"> &#125; </span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><p>Aç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;A&#x27;</span>,&#123; </span><br><span class="line"> <span class="attr">template</span>:<span class="string">` </span></span><br><span class="line"><span class="string"> &lt;div&gt; </span></span><br><span class="line"><span class="string"> &lt;p&gt;this is parent compoent!&lt;/p&gt; </span></span><br><span class="line"><span class="string"> &lt;B  </span></span><br><span class="line"><span class="string"> :messageC=&quot;messageC&quot;  </span></span><br><span class="line"><span class="string"> :message=&quot;message&quot;  </span></span><br><span class="line"><span class="string"> v-on:getCData=&quot;getCData&quot;  </span></span><br><span class="line"><span class="string"> v-on:getChildData=&quot;getChildData(message)&quot;&gt; </span></span><br><span class="line"><span class="string"> &lt;/B&gt; </span></span><br><span class="line"><span class="string"> &lt;/div&gt; </span></span><br><span class="line"><span class="string"> `</span>, </span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>)&#123; </span><br><span class="line">     <span class="keyword">return</span> &#123; </span><br><span class="line">         <span class="attr">message</span>:<span class="string">&#x27;Hello&#x27;</span>, </span><br><span class="line">         <span class="attr">messageC</span>:<span class="string">&#x27;Hello c&#x27;</span> </span><br><span class="line">     &#125; </span><br><span class="line"> &#125;, </span><br><span class="line"> <span class="attr">methods</span>:&#123; </span><br><span class="line">     <span class="title function_">getChildData</span>(<span class="params">val</span>)&#123; </span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿™æ˜¯æ¥è‡ªBç»„ä»¶çš„æ•°æ®&#x27;</span>) </span><br><span class="line">     &#125;, </span><br><span class="line">     <span class="comment">//æ‰§è¡ŒCå­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ </span></span><br><span class="line">     <span class="title function_">getCData</span>(<span class="params">val</span>)&#123; </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿™æ˜¯æ¥è‡ªCç»„ä»¶çš„æ•°æ®ï¼š&quot;</span>+val) </span><br><span class="line">     &#125; </span><br><span class="line"> &#125; </span><br><span class="line">&#125;) </span><br><span class="line"><span class="keyword">var</span> app=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; </span><br><span class="line"> <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>, </span><br><span class="line"> <span class="attr">template</span>:<span class="string">` </span></span><br><span class="line"><span class="string"> &lt;div&gt; </span></span><br><span class="line"><span class="string"> &lt;A&gt;&lt;/A&gt; </span></span><br><span class="line"><span class="string"> &lt;/div&gt; </span></span><br><span class="line"><span class="string"> `</span> </span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><p><strong>è§£æï¼š</strong></p><ul><li>Cç»„ä»¶ä¸­èƒ½ç›´æ¥è§¦å‘getCDataçš„åŸå› åœ¨äº Bç»„ä»¶è°ƒç”¨Cç»„ä»¶æ—¶ ä½¿ç”¨ v-on ç»‘å®šäº†$listeners å±æ€§</li><li>é€šè¿‡v-bind ç»‘å®š$attrså±æ€§ï¼ŒCç»„ä»¶å¯ä»¥ç›´æ¥è·å–åˆ°Aç»„ä»¶ä¸­ä¼ é€’ä¸‹æ¥çš„props(é™¤äº†Bç»„ä»¶ä¸­propså£°æ˜çš„)</li></ul><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128655053/F98E288D764804F2354ED35EC26D637C" alt="img"></p><h4 id="1-18-ç»„å»ºä¼ å€¼ï¼Œäº‹ä»¶æ€»çº¿æ˜¯æ€ä¹ˆç”¨çš„"><a href="#1-18-ç»„å»ºä¼ å€¼ï¼Œäº‹ä»¶æ€»çº¿æ˜¯æ€ä¹ˆç”¨çš„" class="headerlink" title="1.18 ç»„å»ºä¼ å€¼ï¼Œäº‹ä»¶æ€»çº¿æ˜¯æ€ä¹ˆç”¨çš„"></a>1.18 ç»„å»ºä¼ å€¼ï¼Œäº‹ä»¶æ€»çº¿æ˜¯æ€ä¹ˆç”¨çš„</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>ä¸­å¤®äº‹ä»¶æ€»çº¿</strong>ä¸»è¦ç”¨æ¥è§£å†³å…„å¼Ÿç»„ä»¶é€šä¿¡çš„é—®é¢˜ã€‚</p><p>å®ç°æ–¹å¼ï¼šæ–°å»ºä¸€ä¸ªVueäº‹ä»¶buså¯¹è±¡ï¼Œç„¶åé€šè¿‡bus.<img src="https://www.nowcoder.com/equation?tex=emit%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6%EF%BC%8Cbus.&preview=true" alt="img">onç›‘å¬è§¦å‘çš„äº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;brother1&#x27;,&#123; </span><br><span class="line"> data()&#123; </span><br><span class="line">     return &#123; </span><br><span class="line">        myMessage:&#x27;Hello brother1&#x27; </span><br><span class="line">     &#125; </span><br><span class="line"> &#125;, </span><br><span class="line"> template:` </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>this is brother1 compoent!<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;myMessage&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;passData(myMessage)&quot;</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"> `, </span><br><span class="line"> methods:&#123; </span><br><span class="line">     passData(val)&#123; </span><br><span class="line">         //è§¦å‘å…¨å±€äº‹ä»¶globalEvent </span><br><span class="line">         bus.$emit(&#x27;globalEvent&#x27;,val) </span><br><span class="line">     &#125; </span><br><span class="line"> &#125; </span><br><span class="line">&#125;) </span><br><span class="line">Vue.component(&#x27;brother2&#x27;,&#123; </span><br><span class="line"> template:` </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>this is brother2 compoent!<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>brother1ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼š&#123;&#123;brothermessage&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"> `, </span><br><span class="line"> data()&#123; </span><br><span class="line">     return &#123; </span><br><span class="line">         myMessage:&#x27;Hello brother2&#x27;, </span><br><span class="line">         brothermessage:&#x27;&#x27; </span><br><span class="line">     &#125; </span><br><span class="line"> &#125;, </span><br><span class="line"> mounted()&#123; </span><br><span class="line">      //ç»‘å®šå…¨å±€äº‹ä»¶globalEvent </span><br><span class="line">     bus.$on(&#x27;globalEvent&#x27;,(val)=&gt;&#123; </span><br><span class="line">        this.brothermessage=val; </span><br><span class="line">     &#125;) </span><br><span class="line"> &#125; </span><br><span class="line">&#125;) </span><br><span class="line">//ä¸­å¤®äº‹ä»¶æ€»çº¿ </span><br><span class="line">var bus=new Vue(); </span><br><span class="line">var app=new Vue(&#123; </span><br><span class="line"> el:&#x27;#app&#x27;, </span><br><span class="line"> template:` </span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">brother1</span>&gt;</span><span class="tag">&lt;/<span class="name">brother1</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">brother2</span>&gt;</span><span class="tag">&lt;/<span class="name">brother2</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"> ` </span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128668820/B30491C32F761B02007519727B8B2DF9" alt="img"></p><h4 id="1-19-vueç”Ÿå‘½å‘¨æœŸä¸­å¼‚æ­¥åŠ è½½åœ¨moutedè¿˜æ˜¯createé‡Œå®ç°"><a href="#1-19-vueç”Ÿå‘½å‘¨æœŸä¸­å¼‚æ­¥åŠ è½½åœ¨moutedè¿˜æ˜¯createé‡Œå®ç°" class="headerlink" title="1.19 vueç”Ÿå‘½å‘¨æœŸä¸­å¼‚æ­¥åŠ è½½åœ¨moutedè¿˜æ˜¯createé‡Œå®ç°"></a>1.19 vueç”Ÿå‘½å‘¨æœŸä¸­å¼‚æ­¥åŠ è½½åœ¨moutedè¿˜æ˜¯createé‡Œå®ç°</h4><p><strong>å‚è€ƒç­”æ¡ˆ:</strong></p><p>æœ€å¸¸ç”¨çš„æ˜¯åœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚</p><p><strong>è§£æï¼š</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥åœ¨ï¼Œcreatedï¼Œmountedä¸­éƒ½å¯ä»¥å‘é€æ•°æ®è¯·æ±‚ï¼Œä½†æ˜¯ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¼šåœ¨createdå‘é€è¯·æ±‚ã€‚<br>Createdçš„ä½¿ç”¨åœºæ™¯ï¼šå¦‚æœé¡µé¢é¦–æ¬¡æ¸²æŸ“çš„å°±æ¥è‡ªåç«¯æ•°æ®ã€‚å› ä¸ºï¼Œæ­¤æ—¶dataå·²ç»æŒ‚è½½åˆ°vueå®ä¾‹äº†ã€‚<br>åœ¨ createdï¼ˆå¦‚æœå¸Œæœ›é¦–æ¬¡é€‰çš„æ•°æ®æ¥è‡ªäºåç«¯ï¼Œå°±åœ¨æ­¤å¤„å‘è¯·æ±‚ï¼‰ï¼ˆåªå‘äº†å¼‚æ­¥è¯·æ±‚ï¼Œæ¸²æŸ“æ˜¯åœ¨åç«¯å“åº”ä¹‹åæ‰è¿›è¡Œçš„ï¼‰ã€beforeMountã€mountedï¼ˆåœ¨mountedä¸­å‘è¯·æ±‚ä¼šè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“ï¼‰ è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­è¿›è¡Œè°ƒç”¨ã€‚<br>å› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚ä½†æ˜¯<strong>æœ€å¸¸ç”¨çš„æ˜¯åœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚</strong>ï¼Œå› ä¸ºåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š<br>ç¬¬ä¸€ç‚¹ï¼šèƒ½æ›´å¿«è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢ loading æ—¶é—´ï¼›<br>ç¬¬äºŒç‚¹ï¼šæ”¾åœ¨ created ä¸­æœ‰åŠ©äºä¸€è‡´æ€§ï¼Œå› ä¸ºssr ä¸æ”¯æŒ beforeMount ã€mounted é’©å­å‡½æ•°ã€‚</p><h4 id="1-20-vueé’©å­å‡½æ•°-é‡ç‚¹é—®äº†keep-alive"><a href="#1-20-vueé’©å­å‡½æ•°-é‡ç‚¹é—®äº†keep-alive" class="headerlink" title="1.20 vueé’©å­å‡½æ•°(é‡ç‚¹é—®äº†keep-alive)"></a>1.20 vueé’©å­å‡½æ•°(é‡ç‚¹é—®äº†keep-alive)</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128702563/F5DFA24F5FDFC338D5D73739BF09C491" alt="img">Vueç”Ÿå‘½å‘¨æœŸç»å†å“ªäº›é˜¶æ®µï¼š</p><ol><li>æ€»ä½“æ¥è¯´ï¼šåˆå§‹åŒ–ã€è¿è¡Œä¸­ã€é”€æ¯</li><li>è¯¦ç»†æ¥è¯´ï¼šå¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domã€æ¸²æŸ“â†’æ›´æ–°â†’æ¸²æŸ“ã€é”€æ¯ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹</li></ol><p>ç”Ÿå‘½å‘¨æœŸç»å†çš„é˜¶æ®µå’Œé’©å­å‡½æ•°:</p><ol><li><p>å®ä¾‹åŒ–vue(ç»„ä»¶)å¯¹è±¡ï¼šnew Vue()</p></li><li><p>åˆå§‹åŒ–äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸ init events å’Œ init cycle</p></li><li><p>beforeCreateå‡½æ•°ï¼š</p><p>åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event&#x2F;watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p>å³æ­¤æ—¶vueï¼ˆç»„ä»¶ï¼‰å¯¹è±¡è¢«åˆ›å»ºäº†ï¼Œä½†æ˜¯vueå¯¹è±¡çš„å±æ€§è¿˜æ²¡æœ‰ç»‘å®šï¼Œå¦‚dataå±æ€§ï¼Œcomputedå±æ€§è¿˜æ²¡æœ‰ç»‘å®šï¼Œå³æ²¡æœ‰å€¼ã€‚</p><p>æ­¤æ—¶è¿˜æ²¡æœ‰æ•°æ®å’ŒçœŸå®DOMã€‚</p><p>å³ï¼šå±æ€§è¿˜æ²¡æœ‰èµ‹å€¼ï¼Œä¹Ÿæ²¡æœ‰åŠ¨æ€åˆ›å»ºtemplateå±æ€§å¯¹åº”çš„HTMLå…ƒç´ ï¼ˆäºŒé˜¶æ®µçš„createUIå‡½æ•°è¿˜æ²¡æœ‰æ‰§è¡Œï¼‰</p></li><li><p>æŒ‚è½½æ•°æ®ï¼ˆå±æ€§èµ‹å€¼ï¼‰</p><p>åŒ…æ‹¬ å±æ€§å’Œcomputedçš„è¿ç®—</p></li><li><p>Createdå‡½æ•°ï¼š</p><p>vueå¯¹è±¡çš„å±æ€§æœ‰å€¼äº†ï¼Œä½†æ˜¯DOMè¿˜æ²¡æœ‰ç”Ÿæˆï¼Œ$elå±æ€§è¿˜ä¸å­˜åœ¨ã€‚</p><p>æ­¤æ—¶æœ‰æ•°æ®äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰çœŸå®çš„DOM</p><p>å³ï¼šdataï¼Œcomputedéƒ½æ‰§è¡Œäº†ã€‚å±æ€§å·²ç»èµ‹å€¼ï¼Œä½†æ²¡æœ‰åŠ¨æ€åˆ›å»ºtemplateå±æ€§å¯¹åº”çš„HTMLå…ƒç´ ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶å¦‚æœæ›´æ”¹æ•°æ®ä¸ä¼šè§¦å‘updatedå‡½æ•°</p><p>å¦‚æœï¼šæ•°æ®çš„åˆå§‹å€¼å°±æ¥è‡ªäºåç«¯ï¼Œå¯ä»¥å‘é€ajaxï¼Œæˆ–è€…fetchè¯·æ±‚è·å–æ•°æ®ï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘updatedå‡½æ•°</p><ol><li>æ£€æŸ¥</li></ol></li></ol><p>6.1 æ£€æŸ¥æ˜¯å¦æœ‰elå±æ€§<br>æ£€æŸ¥vueé…ç½®ï¼Œå³new Vue{}é‡Œé¢çš„elé¡¹æ˜¯å¦å­˜åœ¨ï¼Œæœ‰å°±ç»§ç»­æ£€æŸ¥templateé¡¹ã€‚æ²¡æœ‰åˆ™ç­‰åˆ°æ‰‹åŠ¨ç»‘å®šè°ƒç”¨ vm.<img src="https://www.nowcoder.com/equation?tex=mount()%E5%AE%8C%E6%88%90%E4%BA%86%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F&preview=true" alt="img">elçš„ç»‘å®šã€‚</p><p>6.2 æ£€æŸ¥æ˜¯å¦æœ‰templateå±æ€§</p><p>æ£€æŸ¥é…ç½®ä¸­çš„templateé¡¹ï¼Œå¦‚æœæ²¡æœ‰templateè¿›è¡Œå¡«å……è¢«ç»‘å®šåŒºåŸŸï¼Œåˆ™è¢«ç»‘å®šåŒºåŸŸçš„elå¯¹outerHTMLï¼ˆå³ æ•´ä¸ª#app DOMå¯¹è±¡ï¼ŒåŒ…æ‹¬</p><p>å’Œ</p><p>æ ‡ç­¾ï¼‰éƒ½ä½œä¸ºè¢«å¡«å……å¯¹è±¡æ›¿æ¢æ‰å¡«å……åŒºåŸŸã€‚å³ï¼š å¦‚æœvueå¯¹è±¡ä¸­æœ‰ templateå±æ€§ï¼Œé‚£ä¹ˆï¼Œtemplateåé¢çš„HTMLä¼šæ›¿æ¢$elå¯¹åº”çš„å†…å®¹ã€‚å¦‚æœæœ‰renderå± æ€§ï¼Œé‚£ä¹ˆrenderå°±ä¼šæ›¿æ¢templateã€‚ å³ï¼šä¼˜å…ˆå…³ç³»æ—¶ï¼š render &gt; template &gt; el</p><ol><li><p>beforeMountå‡½æ•°ï¼š</p><p>æ¨¡æ¿ç¼–è¯‘(template)ã€æ•°æ®æŒ‚è½½(æŠŠæ•°æ®æ˜¾ç¤ºåœ¨æ¨¡æ¿é‡Œ)ä¹‹å‰æ‰§è¡Œçš„é’©å­å‡½æ•°</p><p>æ­¤æ—¶ this.$elæœ‰å€¼ï¼Œä½†æ˜¯æ•°æ®è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚å³æ­¤æ—¶é¡µé¢ä¸­çš„<code>&#123;&#123;&#125;&#125;</code>é‡Œçš„å˜é‡è¿˜æ²¡æœ‰è¢«æ•°æ®æ›¿æ¢</p></li><li><p>æ¨¡æ¿ç¼–è¯‘ï¼šç”¨vueå¯¹è±¡çš„æ•°æ®ï¼ˆå±æ€§ï¼‰æ›¿æ¢æ¨¡æ¿ä¸­çš„å†…å®¹</p></li><li><p>Mountedå‡½æ•°ï¼š</p><p>æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œæ•°æ®æŒ‚è½½å®Œæ¯•</p><p>å³ï¼šæ­¤æ—¶å·²ç»æŠŠæ•°æ®æŒ‚è½½åˆ°äº†é¡µé¢ä¸Šï¼Œæ‰€ä»¥ï¼Œé¡µé¢ä¸Šèƒ½å¤Ÿçœ‹åˆ°æ­£ç¡®çš„æ•°æ®äº†ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ­¤å¤„å‘é€å¼‚æ­¥è¯·æ±‚ï¼ˆajaxï¼Œfetchï¼Œaxiosç­‰ï¼‰ï¼Œè·å–æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨DOMé‡Œã€‚</p></li><li><p>beforeUpdateå‡½æ•°ï¼š</p><p>ç»„ä»¶æ›´æ–°ä¹‹å‰æ‰§è¡Œçš„å‡½æ•°ï¼Œåªæœ‰æ•°æ®æ›´æ–°åï¼Œæ‰èƒ½è°ƒç”¨ï¼ˆè§¦å‘ï¼‰beforeUpdateï¼Œæ³¨æ„ï¼šæ­¤æ•°æ®ä¸€å®šæ˜¯åœ¨æ¨¡æ¿ä¸Šå‡ºç°çš„æ•°æ®ï¼Œå¦åˆ™ï¼Œä¸ä¼šï¼Œä¹Ÿæ²¡æœ‰å¿…è¦è§¦å‘ç»„ä»¶æ›´æ–°ï¼ˆå› ä¸ºæ•°æ®ä¸å‡ºç°åœ¨æ¨¡æ¿é‡Œï¼Œå°±æ²¡æœ‰å¿…è¦å†æ¬¡æ¸²æŸ“ï¼‰</p><p>æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯ï¼Œvueï¼ˆç»„ä»¶ï¼‰å¯¹è±¡å¯¹åº”çš„domä¸­çš„å†…éƒ¨ï¼ˆinnerHTMLï¼‰æ²¡æœ‰å˜ï¼Œæ‰€ä»¥å«ä½œç»„ä»¶æ›´æ–°å‰</p></li><li><p>updatedå‡½æ•°ï¼š</p><p>ç»„ä»¶æ›´æ–°ä¹‹åæ‰§è¡Œçš„å‡½æ•°</p><p>vueï¼ˆç»„ä»¶ï¼‰å¯¹è±¡å¯¹åº”çš„domä¸­çš„å†…éƒ¨ï¼ˆinnerHTMLï¼‰æ”¹å˜äº†ï¼Œæ‰€ä»¥ï¼Œå«ä½œç»„ä»¶æ›´æ–°ä¹‹å</p></li><li><p>activatedå‡½æ•°ï¼škeep-aliveç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨</p></li><li><p>activatedå‡½æ•°ï¼škeep-aliveç»„ä»¶åœç”¨æ—¶è°ƒç”¨</p></li><li><p>beforeDestroyï¼švueï¼ˆç»„ä»¶ï¼‰å¯¹è±¡é”€æ¯ä¹‹å‰</p></li><li><p>destroyedï¼švueç»„ä»¶é”€æ¯å</p></li></ol><p>keep-alive</p><p><keep-alive></keep-alive>åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹,ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚</p><p><strong>è§£æï¼š</strong> æ¯”å¦‚æœ‰ä¸€ä¸ªåˆ—è¡¨å’Œä¸€ä¸ªè¯¦æƒ…ï¼Œé‚£ä¹ˆç”¨æˆ·å°±ä¼šç»å¸¸æ‰§è¡Œæ‰“å¼€è¯¦æƒ…&#x3D;&gt;è¿”å›åˆ—è¡¨&#x3D;&gt;æ‰“å¼€è¯¦æƒ…â€¦è¿™æ ·çš„è¯åˆ—è¡¨å’Œè¯¦æƒ…éƒ½æ˜¯ä¸€ä¸ªé¢‘ç‡å¾ˆé«˜çš„é¡µé¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹åˆ—è¡¨ç»„ä»¶ä½¿ç”¨<keep-alive></keep-alive>è¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·ç”¨æˆ·æ¯æ¬¡è¿”å›åˆ—è¡¨çš„æ—¶å€™ï¼Œéƒ½èƒ½ä»ç¼“å­˜ä¸­å¿«é€Ÿæ¸²æŸ“ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“</p><h4 id="1-21-vue-keep-alive"><a href="#1-21-vue-keep-alive" class="headerlink" title="1.21 vue keep-alive"></a>1.21 vue keep-alive</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p><strong>keep-alive</strong>ï¼škeep-aliveå¯ä»¥å®ç°ç»„ä»¶ç¼“å­˜ï¼Œæ˜¯Vue.jsçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚</p><p>ä½œç”¨ï¼š</p><ol><li>å®ƒèƒ½å¤ŸæŠŠä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯</li><li>å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­</li></ol><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li>å¸¸ç”¨çš„ä¸¤ä¸ªå±æ€§include&#x2F;excludeï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶çš„è¿›è¡Œç¼“å­˜ã€‚</li><li>ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸactivated&#x2F;deactivatedï¼Œç”¨æ¥å¾—çŸ¥å½“å‰ç»„ä»¶æ˜¯å¦å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</li><li>keep-aliveçš„ä¸­è¿˜è¿ç”¨äº†LRU(Least Recently Used)ç®—æ³•ã€‚</li></ol><p>åŸç†ï¼šVue çš„ç¼“å­˜æœºåˆ¶å¹¶ä¸æ˜¯ç›´æ¥å­˜å‚¨ DOM ç»“æ„ï¼Œè€Œæ˜¯å°† DOM èŠ‚ç‚¹æŠ½è±¡æˆäº†ä¸€ä¸ªä¸ª VNodeèŠ‚ç‚¹ï¼Œæ‰€ä»¥ï¼Œkeep- aliveçš„ç¼“å­˜ä¹Ÿæ˜¯åŸºäºVNodeèŠ‚ç‚¹çš„è€Œä¸æ˜¯ç›´æ¥å­˜å‚¨DOMç»“æ„ã€‚</p><p>å…¶å®å°±æ˜¯å°†éœ€è¦ç¼“å­˜çš„VNodeèŠ‚ç‚¹ä¿å­˜åœ¨this.cacheä¸­ï¼åœ¨renderæ—¶,å¦‚æœVNodeçš„nameç¬¦åˆåœ¨ç¼“å­˜æ¡ä»¶ï¼ˆå¯ä»¥ç”¨includeä»¥åŠexcludeæ§åˆ¶ï¼‰ï¼Œåˆ™ä¼šä»this.cacheä¸­å–å‡ºä¹‹å‰ç¼“å­˜çš„VNodeå®ä¾‹è¿›è¡Œæ¸²æŸ“ã€‚</p><h4 id="1-22-æ—¢ç„¶å‡½æ•°æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸ºä»€ä¹ˆ-vue-çš„-data-è¿˜æ˜¯å¯ä»¥ç”¨å‡½æ•°"><a href="#1-22-æ—¢ç„¶å‡½æ•°æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸ºä»€ä¹ˆ-vue-çš„-data-è¿˜æ˜¯å¯ä»¥ç”¨å‡½æ•°" class="headerlink" title="1.22 æ—¢ç„¶å‡½æ•°æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸ºä»€ä¹ˆ vue çš„ data è¿˜æ˜¯å¯ä»¥ç”¨å‡½æ•°"></a>1.22 æ—¢ç„¶å‡½æ•°æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸ºä»€ä¹ˆ vue çš„ data è¿˜æ˜¯å¯ä»¥ç”¨å‡½æ•°</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>JavaScriptåªæœ‰å‡½æ•°æ„æˆä½œç”¨åŸŸ(æ³¨æ„ç†è§£ä½œç”¨åŸŸï¼Œ<strong>åªæœ‰å‡½æ•°{}æ„æˆä½œç”¨åŸŸ</strong>,å¯¹è±¡çš„{}ä»¥åŠif(){}éƒ½ä¸æ„æˆä½œç”¨åŸŸ),dataæ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ¯ä¸ªå®ä¾‹ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šç›¸äº’å½±å“ã€‚</p><h4 id="1-23-vue-ä¸­-nextTick-ä½œç”¨ä¸åŸç†"><a href="#1-23-vue-ä¸­-nextTick-ä½œç”¨ä¸åŸç†" class="headerlink" title="1.23 vue ä¸­ $nextTick ä½œç”¨ä¸åŸç†"></a>1.23 vue ä¸­ $nextTick ä½œç”¨ä¸åŸç†</h4><p><strong>å‚è€ƒç­”æ¡ˆ:</strong></p><p>ä½œç”¨ï¼šæ˜¯ä¸ºäº†å¯ä»¥è·å–æ›´æ–°åçš„DOM ã€‚</p><p>ç”±äºVue DOMæ›´æ–°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå³ä¿®æ”¹æ•°æ®æ—¶ï¼Œè§†å›¾ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯ä¼šç›‘å¬æ•°æ®å˜åŒ–ï¼Œå¹¶ç¼“å­˜åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­ï¼Œç­‰åŒä¸€æ•°æ®å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆä¹‹åï¼Œå†ç»Ÿä¸€è¿›è¡Œè§†å›¾æ›´æ–°ã€‚ä¸ºäº†ç¡®ä¿å¾—åˆ°æ›´æ–°åçš„DOMï¼Œæ‰€ä»¥è®¾ç½®äº† Vue.nextTick()ï¼Œå°±æ˜¯åœ¨ä¸‹æ¬¡DOMæ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„DOMã€‚</p><p>åŸç†ï¼š</p><p>åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚nextTickä¸»è¦ä½¿ç”¨äº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚æ ¹æ®æ‰§è¡Œç¯å¢ƒåˆ†åˆ«å°è¯•é‡‡ç”¨</p><ul><li>Promise</li><li>MutationObserver</li><li>setImmediate</li><li>å¦‚æœä»¥ä¸Šéƒ½ä¸è¡Œåˆ™é‡‡ç”¨setTimeout</li></ul><p>å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¤šæ¬¡è°ƒç”¨nextTickä¼šå°†æ–¹æ³•å­˜å…¥é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå¼‚æ­¥æ–¹æ³•æ¸…ç©ºå½“å‰é˜Ÿåˆ—ã€‚</p><h4 id="1-24-vueçš„ç‰¹æ€§"><a href="#1-24-vueçš„ç‰¹æ€§" class="headerlink" title="1.24 vueçš„ç‰¹æ€§"></a>1.24 vueçš„ç‰¹æ€§</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ul><li>è¡¨å•æ“ä½œ</li><li>è‡ªå®šä¹‰æŒ‡ä»¤</li><li>è®¡ç®—å±æ€§</li><li>è¿‡æ»¤å™¨</li><li>ä¾¦å¬å™¨</li><li>ç”Ÿå‘½å‘¨æœŸ</li></ul><h4 id="1-25-v-if-v-showåŒºåˆ«"><a href="#1-25-v-if-v-showåŒºåˆ«" class="headerlink" title="1.25 v-if v-showåŒºåˆ«"></a>1.25 v-if v-showåŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>v-showå’Œv-iféƒ½æ˜¯ç”¨æ¥æ˜¾ç¤ºéšè—å…ƒç´ ï¼Œv-ifè¿˜æœ‰ä¸€ä¸ªv-elseé…åˆä½¿ç”¨ï¼Œä¸¤è€…è¾¾åˆ°çš„æ•ˆæœéƒ½ä¸€æ ·ï¼Œä½†æ˜¯v-ifæ›´æ¶ˆè€—æ€§èƒ½çš„ï¼Œå› ä¸ºv-ifåœ¨æ˜¾ç¤ºéšè—è¿‡ç¨‹ä¸­æœ‰DOMçš„æ·»åŠ å’Œåˆ é™¤ï¼Œv-showå°±ç®€å•å¤šäº†ï¼Œåªæ˜¯æ“ä½œcssã€‚</p><p><strong>è§£æï¼š</strong></p><p>v-show</p><p>v-showä¸ç®¡æ¡ä»¶æ˜¯çœŸè¿˜æ˜¯å‡ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šç¼–è¯‘å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯æ ‡ç­¾éƒ½ä¼šæ·»åŠ åˆ°DOMä¸­ã€‚ä¹‹ååˆ‡æ¢çš„æ—¶å€™ï¼Œé€šè¿‡display: none;æ ·å¼æ¥æ˜¾ç¤ºéšè—å…ƒç´ ã€‚å¯ä»¥è¯´åªæ˜¯æ”¹å˜cssçš„æ ·å¼ï¼Œå‡ ä¹ä¸ä¼šå½±å“ä»€ä¹ˆæ€§èƒ½ã€‚</p><p>v-if</p><p>åœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œä»€ä¹ˆä¹Ÿä¸æ“ä½œï¼Œé¡µé¢å½“ä½œæ²¡æœ‰è¿™äº›å…ƒç´ ã€‚å½“æ¡ä»¶ä¸ºçœŸçš„æ—¶å€™ï¼Œå¼€å§‹å±€éƒ¨ç¼–è¯‘ï¼ŒåŠ¨æ€çš„å‘DOMå…ƒç´ é‡Œé¢æ·»åŠ å…ƒç´ ã€‚å½“æ¡ä»¶ä»çœŸå˜ä¸ºå‡çš„æ—¶å€™ï¼Œå¼€å§‹å±€éƒ¨ç¼–è¯‘ï¼Œå¸è½½è¿™äº›å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤ã€‚</p><h4 id="1-26-Vue-åˆ—è¡¨ä¸ºä»€ä¹ˆåŠ -key"><a href="#1-26-Vue-åˆ—è¡¨ä¸ºä»€ä¹ˆåŠ -key" class="headerlink" title="1.26 Vue åˆ—è¡¨ä¸ºä»€ä¹ˆåŠ  key"></a>1.26 Vue åˆ—è¡¨ä¸ºä»€ä¹ˆåŠ  key</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>vueä¸­åˆ—è¡¨å¾ªç¯éœ€åŠ :key&#x3D;â€å”¯ä¸€æ ‡è¯†â€ å”¯ä¸€æ ‡è¯†ä¸”æœ€å¥½æ˜¯é™æ€çš„ï¼Œå› ä¸ºvueç»„ä»¶é«˜åº¦å¤ç”¨å¢åŠ Keyå¯ä»¥æ ‡è¯†ç»„ä»¶çš„å”¯ä¸€æ€§ï¼Œä¸ºäº†æ›´å¥½åœ°åŒºåˆ«å„ä¸ªç»„ä»¶ keyçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOM</p><p><strong>è§£æï¼š</strong></p><p>vueå’Œreactçš„è™šæ‹ŸDOMçš„Diffç®—æ³•å¤§è‡´ç›¸åŒï¼Œå…¶æ ¸å¿ƒæ˜¯åŸºäºä¸¤ä¸ªç®€å•çš„å‡è®¾<br>é¦–å…ˆè®²ä¸€ä¸‹diffç®—æ³•çš„å¤„ç†æ–¹æ³•ï¼Œå¯¹æ“ä½œå‰åçš„domæ ‘åŒä¸€å±‚çš„èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œä¸€å±‚ä¸€å±‚å¯¹æ¯”ï¼Œ</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128744220/448BD33DD57542E1E6A5B03957CC7034" alt="img"></p><p>å½“æŸä¸€å±‚æœ‰å¾ˆå¤šç›¸åŒçš„èŠ‚ç‚¹æ—¶ï¼Œä¹Ÿå°±æ˜¯åˆ—è¡¨èŠ‚ç‚¹æ—¶ï¼ŒDiffç®—æ³•çš„æ›´æ–°è¿‡ç¨‹é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯éµå¾ªä»¥ä¸ŠåŸåˆ™ã€‚</p><p>æ¯”å¦‚ä¸€ä¸‹è¿™ä¸ªæƒ…å†µï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128758816/EAA1B46F9F910D663C45A96D03B305C4" alt="img"></p><p>å¯ä»¥åœ¨Bå’ŒCä¹‹é—´åŠ ä¸€ä¸ªFï¼ŒDiffç®—æ³•é»˜è®¤æ‰§è¡Œèµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128776932/CE0C377B5746FC3BE8D5C8466A40AA87" alt="img"></p><p>å³æŠŠCæ›´æ–°æˆFï¼ŒDæ›´æ–°æˆCï¼ŒEæ›´æ–°æˆDï¼Œæœ€åå†æ’å…¥Eï¼Œæ˜¯ä¸æ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡ï¼Ÿ</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨keyæ¥ç»™æ¯ä¸ªèŠ‚ç‚¹åšä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ŒDiffç®—æ³•å°±å¯ä»¥æ­£ç¡®çš„è¯†åˆ«æ­¤èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ä½ç½®åŒºæ’å…¥æ–°çš„èŠ‚ç‚¹ã€‚</p><h4 id=""><a href="#" class="headerlink" title=""></a><img src="https://uploadfiles.nowcoder.com/images/20220301/4107856_1646128789653/536CB47A8208A5561AEC33A70324C88B" alt="img"></h4><h4 id="1-27-jquery-å’Œ-vueç›¸æ¯”"><a href="#1-27-jquery-å’Œ-vueç›¸æ¯”" class="headerlink" title="1.27 jquery å’Œ vueç›¸æ¯”"></a>1.27 jquery å’Œ vueç›¸æ¯”</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ol><li>jqueryï¼šè½»é‡çº§çš„jsåº“</li><li>vueï¼šå‰ç«¯jsåº“ï¼Œæ˜¯ä¸€ä¸ªç²¾ç®€çš„MVVMï¼Œå®ƒä¸“æ³¨äºMVVMæ¨¡å‹çš„viewModelå±‚ï¼Œé€šè¿‡åŒå‘æ•°æ®ç»‘å®šæŠŠviewå’Œmodelå±‚è¿æ¥èµ·æ¥ï¼Œé€šè¿‡å¯¹æ•°æ®çš„æ“ä½œå°±å¯ä»¥å®Œæˆå¯¹é¡µé¢è§†å›¾çš„æ¸²æŸ“ã€‚</li></ol><table><thead><tr><th><strong>Vue</strong></th><th><strong>jQuery</strong></th></tr></thead><tbody><tr><td>æ•°æ®é©±åŠ¨è§†å›¾(MVVMæ€æƒ³:æ•°æ®è§†å›¾å®Œå…¨åˆ†ç¦»ï¼›æ•°æ®é©±åŠ¨ã€åŒå‘ç»‘å®šï¼›)</td><td>ç›´æ¥æ“ä½œDOM(è·å–ã€ä¿®æ”¹ã€èµ‹å€¼ã€äº‹ä»¶ç»‘å®š)</td></tr><tr><td>æ“ä½œç®€å•</td><td>æ“ä½œéº»çƒ¦</td></tr><tr><td>æ¨¡å—åŒ–</td><td>x</td></tr><tr><td>å®ç°å•é¡µé¢</td><td>x</td></tr><tr><td>ç»„ä»¶å¤ç”¨</td><td>x</td></tr><tr><td>æ€§èƒ½é«˜ï¼šä½¿ç”¨çš„è™šæ‹ŸDOMï¼Œå‡å°‘ domçš„æ“ä½œ</td><td>x</td></tr></tbody></table><p><strong>æ‰©å±•ï¼š</strong></p><ol><li>vueé€‚ç”¨çš„åœºæ™¯ï¼šå¤æ‚æ•°æ®æ“ä½œçš„åå°é¡µé¢ï¼Œè¡¨å•å¡«å†™é¡µé¢<ol><li>jqueryé€‚ç”¨çš„åœºæ™¯ï¼šæ¯”å¦‚è¯´ä¸€äº›html5çš„åŠ¨ç”»é¡µé¢ï¼Œä¸€äº›éœ€è¦jsæ¥æ“ä½œé¡µé¢æ ·å¼çš„é¡µé¢</li><li>äºŒè€…ä¹Ÿæ˜¯å¯ä»¥ç»“åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨çš„ï¼Œvueä¾§é‡æ•°æ®ç»‘å®šï¼Œjqueryä¾§é‡æ ·å¼æ“ä½œï¼ŒåŠ¨ç”»æ•ˆæœç­‰ï¼Œåˆ™ä¼šæ›´åŠ é«˜æ•ˆç‡çš„å®Œæˆä¸šåŠ¡éœ€æ±‚</li></ol></li></ol><h4 id="1-28-ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨vueåšé¡µé¢å±•ç¤º"><a href="#1-28-ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨vueåšé¡µé¢å±•ç¤º" class="headerlink" title="1.28 ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨vueåšé¡µé¢å±•ç¤º"></a>1.28 ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨vueåšé¡µé¢å±•ç¤º</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ul><li><p>MVVM æ¡†æ¶ï¼š</p><p>Vue æ­£æ˜¯ä½¿ç”¨äº†è¿™ç§ MVVM çš„æ¡†æ¶å½¢å¼ï¼Œå¹¶ä¸”é€šè¿‡å£°æ˜å¼æ¸²æŸ“å’Œå“åº”å¼æ•°æ®ç»‘å®šçš„æ–¹å¼æ¥å¸®åŠ©æˆ‘ä»¬å®Œå…¨é¿å…äº†å¯¹ DOM çš„æ“ä½œã€‚</p></li><li><p>å•é¡µé¢åº”ç”¨ç¨‹åº</p><p>Vue é…åˆç”Ÿæ€åœˆä¸­çš„ Vue-Router å°±å¯ä»¥éå¸¸æ–¹ä¾¿çš„å¼€å‘å¤æ‚çš„å•é¡µåº”ç”¨</p></li><li><p>è½»é‡åŒ–ä¸æ˜“å­¦ä¹ </p><p>Vue çš„ç”Ÿäº§ç‰ˆæœ¬åªæœ‰ 30.90KB çš„å¤§å°ï¼Œå‡ ä¹ä¸ä¼šå¯¹æˆ‘ä»¬çš„ç½‘é¡µåŠ è½½é€Ÿåº¦äº§ç”Ÿå½±å“ã€‚åŒæ—¶å› ä¸º Vue åªä¸“æ³¨äºè§†å›¾å±‚ï¼Œå•ç‹¬çš„ Vue å°±åƒä¸€ä¸ªåº“ä¸€æ ·ï¼Œæ‰€ä»¥ä½¿æˆ‘ä»¬çš„å­¦ä¹ æˆæœ¬å˜å¾—éå¸¸ä½</p></li><li><p>æ¸è¿›å¼ä¸å…¼å®¹æ€§</p><p>Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚Vue åªåšç•Œé¢ï¼Œè€ŒæŠŠå…¶ä»–çš„ä¸€åˆ‡éƒ½äº¤ç»™äº†å®ƒçš„å‘¨è¾¹ç”Ÿæ€ï¼ˆaxiosï¼ˆVue å®˜æ–¹æ¨èï¼‰ã€Loadsh.jsã€Velocity.js ç­‰ï¼‰æ¥åšå¤„ç†ï¼Œè¿™å°±è¦æ±‚ Vue å¿…é¡»è¦å¯¹å…¶ä»–çš„æ¡†æ¶æ‹¥æœ‰æœ€å¤§ç¨‹åº¦çš„å…¼å®¹æ€§</p></li><li><p>è§†å›¾ç»„ä»¶åŒ–</p><p>Vue å…è®¸é€šè¿‡ç»„ä»¶æ¥å»æ‹¼è£…ä¸€ä¸ªé¡µé¢ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªå¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œç»„ä»¶é‡Œé¢å¯ä»¥åŒ…å«è‡ªå·±çš„æ•°æ®ï¼Œè§†å›¾å’Œä»£ç é€»è¾‘ã€‚æ–¹ä¾¿å¤ç”¨</p></li><li><p>è™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰</p><p>Vue ä¹‹æ‰€ä»¥å¯ä»¥å®Œå…¨é¿å…å¯¹ DOM çš„æ“ä½œï¼Œå°±æ˜¯å› ä¸º Vue é‡‡ç”¨äº†è™šæ‹Ÿ DOM çš„æ–¹å¼ï¼Œä¸ä½†é¿å…äº†æˆ‘ä»¬å¯¹ DOM çš„å¤æ‚æ“ä½œï¼Œå¹¶ä¸”å¤§å¤§çš„åŠ å¿«äº†æˆ‘ä»¬åº”ç”¨çš„è¿è¡Œé€Ÿåº¦ã€‚</p></li><li><p>ç¤¾åŒºæ”¯æŒ</p><p>å¾—ç›Šäº Vue çš„æœ¬åœŸåŒ–èº«ä»½ï¼ˆVue çš„ä½œè€…ä¸ºå›½äººå°¤é›¨æºªï¼‰ï¼Œå†åŠ ä¸Š Vue æœ¬èº«çš„å¼ºå¤§ï¼Œæ‰€ä»¥æ¶Œç°å‡ºäº†ç‰¹åˆ«å¤šçš„å›½å†…ç¤¾åŒºï¼Œè¿™ç§æƒ…å†µåœ¨å…¶ä»–çš„æ¡†æ¶èº«ä¸Šæ˜¯æ²¡æœ‰å‡ºç°è¿‡çš„ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨å­¦ä¹ æˆ–è€…ä½¿ç”¨ Vue çš„æ—¶å€™ï¼Œå¯ä»¥è·å¾—æ›´å¤šçš„å¸®åŠ©</p></li><li><p>æœªæ¥çš„ Vue èµ°å‘</p><p>Vue æ˜¯ç”±å›½äººå°¤é›¨æºªåœ¨ Google å·¥ä½œçš„æ—¶å€™ï¼Œä¸ºäº†æ–¹ä¾¿è‡ªå·±çš„å·¥ä½œè€Œå¼€å‘å‡ºæ¥çš„ä¸€ä¸ªåº“ï¼Œè€Œåœ¨ Vue è¢«ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œçªç„¶å‘ç°è¶Šæ¥è¶Šå¤šçš„äººå–œæ¬¢ä¸Šäº†å®ƒã€‚æ‰€ä»¥å°¤é›¨æºªå°±è¿›å…¥äº†ä¸€ä¸ªè¾¹å·¥ä½œã€è¾¹ç»´æŠ¤çš„çŠ¶æ€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ Vue ä¾ç„¶è¿…é€Ÿçš„å‘å±•ã€‚</p><p>è€Œç°åœ¨å°¤é›¨æºªå·²ç»æ­£å¼è¾å»äº† Google çš„å·¥ä½œï¼Œå¼€å§‹ä¸“èŒç»´æŠ¤ Vueï¼ŒåŒæ—¶åŠ å…¥è¿›æ¥çš„è¿˜æœ‰å‡ åä½ä¼˜ç§€çš„å¼€å‘è€…ï¼Œä»–ä»¬è‡´åŠ›äºæŠŠ Vue æ‰“é€ ä¸ºæœ€å—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ã€‚äº‹å®è¯æ˜ Vue ç¡®å®åœ¨å¾€è¶Šæ¥è¶Šå¥½çš„æ–¹å‘å‘å±•äº†ï¼ˆä» Angularã€Reactã€Vue çš„å¯¹æ¯”å›¾ä¸­å¯ä»¥çœ‹å‡º Vue çš„åŠ¿å¤´ï¼‰ã€‚æ‰€ä»¥æˆ‘è§‰å¾—å®Œå…¨ä¸éœ€è¦æ‹…å¿ƒæœªæ¥ Vue çš„å‘å±•ï¼Œè‡³å°‘åœ¨æ²¡æœ‰æ–°çš„é¢ è¦†æ€§åˆ›æ–°å‡ºæ¥ä¹‹å‰ï¼ŒVue éƒ½ä¼šè¶Šåšè¶Šå¥½ã€‚</p></li></ul><h4 id="1-29-vue-angularåŒºåˆ«"><a href="#1-29-vue-angularåŒºåˆ«" class="headerlink" title="1.29 vue&#x2F;angularåŒºåˆ«"></a>1.29 vue&#x2F;angularåŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><ol><li><p>ä½“ç§¯å’Œæ€§èƒ½</p><p>ç›¸è¾ƒäºvueï¼Œangularæ˜¾å¾—æ¯”è¾ƒè‡ƒè‚¿ï¼Œæ¯”å¦‚ä¸€ä¸ªåŒ…å«äº† Vuex + Vue Router çš„ Vue é¡¹ç›® (gzip ä¹‹å 30kB) ï¼Œè€Œ angular-cli ç”Ÿæˆçš„é»˜è®¤é¡¹ç›®å°ºå¯¸ (~65KB) è¿˜æ˜¯è¦å°å¾—å¤šã€‚</p><p>åœ¨æ€§èƒ½ä¸Šï¼ŒAngularJSä¾èµ–å¯¹æ•°æ®åšè„æ£€æŸ¥ï¼Œæ‰€ä»¥Watcherè¶Šå¤šè¶Šæ…¢ã€‚Vue.jsä½¿ç”¨åŸºäºä¾èµ–è¿½è¸ªçš„è§‚å¯Ÿå¹¶ä¸”ä½¿ç”¨å¼‚æ­¥é˜Ÿåˆ—æ›´æ–°ã€‚æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ç‹¬ç«‹è§¦å‘çš„ã€‚ å¯¹äºåºå¤§çš„åº”ç”¨æ¥è¯´ï¼Œè¿™ä¸ªä¼˜åŒ–å·®å¼‚è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„</p></li><li><p>Virtual DOM vs Incremental DOM</p><p>åœ¨åº•å±‚æ¸²æŸ“æ–¹é¢ï¼Œvue ä½¿ç”¨çš„è™šæ‹Ÿdomï¼Œè€Œangular ä½¿ç”¨çš„æ˜¯Incremental DOMï¼ŒIncremental DOMçš„ä¼˜åŠ¿åœ¨äºä½å†…å¼€é”€</p></li><li><p>Vue ç›¸æ¯”äº Angular æ›´åŠ çµæ´»ï¼Œå¯ä»¥æŒ‰ç…§ä¸åŒçš„éœ€è¦å»ç»„ç»‡é¡¹ç›®çš„åº”ç”¨ä»£ç ã€‚æ¯”å¦‚ï¼Œç”šè‡³å¯ä»¥ç›´æ¥åƒå¼•ç”¨jqueryé‚£æ ·åœ¨HTMLä¸­å¼•ç”¨vueï¼Œç„¶åä»…ä»…å½“æˆä¸€ä¸ªå‰ç«¯çš„æ¨¡æ¿å¼•æ“æ¥ç”¨ã€‚</p></li><li><p>es6æ”¯æŒ</p><p>es6æ˜¯æ–°ä¸€ä»£çš„javascriptæ ‡å‡†ï¼Œå¯¹JavaScriptè¿›è¡Œäº†å¤§é‡çš„æ”¹è¿›ï¼Œä½¿ç”¨es6å¼€å‘å·²æ˜¯åŸºæœ¬éœ€æ±‚ã€‚è™½ç„¶æœ‰éƒ¨åˆ†ååˆ†è€æ—§çš„æµè§ˆå™¨ä¸æ”¯æŒes6ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨ç°ä»£å¼€å‘å·¥å…·å°†es6ç¼–è¯‘æˆes5ã€‚åœ¨å¯¹es6çš„æ”¯æŒä¸Šä¸¤è€…éƒ½åšå¾—å¾ˆå¥½ï¼Œï¼ˆTSæœ¬èº«å°±æ˜¯es6çš„è¶…é›†ï¼‰</p></li><li><p>å­¦ä¹ æ›²çº¿</p><p>é’ˆå¯¹å‰ç«¯è€Œè¨€ï¼Œangularçš„å­¦ä¹ æ›²çº¿ç›¸å¯¹è¾ƒå¤§ï¼Œvueå­¦ä¹ èµ·æ¥æ›´å®¹æ˜“ä¸€äº›ã€‚ä¸è¿‡å¯¹javaå’Œcçš„ä½¿ç”¨è€…è€Œè¨€ï¼Œangularçš„é™æ€æ£€æŸ¥ã€ä¾èµ–æ³¨å…¥çš„ç‰¹æ€§ï¼Œä»¥åŠé¢å‘å¯¹è±¡çš„ç¼–ç¨‹é£æ ¼ï¼Œä½¿å¾—angularéƒ½è¦æ›´äº²åˆ‡ä¸€äº›ã€‚</p></li><li><p>ä½¿ç”¨çƒ­åº¦</p><p>åœ¨ä½¿ç”¨çƒ­åº¦ä¸Šï¼Œvueå…·æœ‰æ›´å¤§ä¼˜åŠ¿ï¼Œä¸»è¦åŸå› æ˜¯æ›´å—æ•°é‡åºå¤§çš„ä¸­å›½å¼€å‘è€…æ¬¢è¿ã€‚è¾ƒä½çš„ä¸Šæ‰‹éš¾åº¦ï¼Œæ˜“æ‡‚çš„å¼€å‘æ–‡æ¡£ï¼Œä»¥åŠå›½äººä¸»å¯¼å¼€å‘çš„å…‰ç¯ï¼Œéƒ½ä½¿å¾—vueæ›´ä¸ºæµè¡Œ</p></li></ol><h4 id="1-30-åŒå‘æ•°æ®ç»‘å®šåŸç†"><a href="#1-30-åŒå‘æ•°æ®ç»‘å®šåŸç†" class="headerlink" title="1.30 åŒå‘æ•°æ®ç»‘å®šåŸç†"></a>1.30 åŒå‘æ•°æ®ç»‘å®šåŸç†</h4><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><p>ç›®å‰å‡ ç§ä¸»æµçš„mvc(vm)æ¡†æ¶éƒ½å®ç°äº†å•å‘æ•°æ®ç»‘å®šï¼Œè€Œæˆ‘æ‰€ç†è§£çš„åŒå‘æ•°æ®ç»‘å®šæ— éå°±æ˜¯åœ¨å•å‘ç»‘å®šçš„åŸºç¡€ä¸Šç»™å¯è¾“å…¥å…ƒç´ ï¼ˆinputã€textareç­‰ï¼‰æ·»åŠ äº†change(input)äº‹ä»¶ï¼Œæ¥åŠ¨æ€ä¿®æ”¹modelå’Œ viewï¼Œå¹¶æ²¡æœ‰å¤šé«˜æ·±ã€‚æ‰€ä»¥æ— éœ€å¤ªè¿‡ä»‹æ€€æ˜¯å®ç°çš„å•å‘æˆ–åŒå‘ç»‘å®šã€‚</p><p>å®ç°æ•°æ®ç»‘å®šçš„åšæ³•æœ‰å¤§è‡´å¦‚ä¸‹å‡ ç§ï¼š</p><p><strong>å‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼:</strong> ä¸€èˆ¬é€šè¿‡sub, pubçš„æ–¹å¼å®ç°æ•°æ®å’Œè§†å›¾çš„ç»‘å®šç›‘å¬ï¼Œæ›´æ–°æ•°æ®æ–¹å¼é€šå¸¸åšæ³•æ˜¯vm.set(â€˜propertyâ€™, value)</p><p>è¿™ç§æ–¹å¼ç°åœ¨æ¯•ç«Ÿå¤ªlowäº†ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›é€šè¿‡vm.property &#x3D; valueè¿™ç§æ–¹å¼æ›´æ–°æ•°æ®ï¼ŒåŒæ—¶è‡ªåŠ¨æ›´æ–°è§†å›¾ï¼Œäºæ˜¯æœ‰äº†ä¸‹é¢ä¸¤ç§æ–¹å¼</p><p><strong>è„å€¼æ£€æŸ¥:</strong> angular.js æ˜¯é€šè¿‡è„å€¼æ£€æµ‹çš„æ–¹å¼æ¯”å¯¹æ•°æ®æ˜¯å¦æœ‰å˜æ›´ï¼Œæ¥å†³å®šæ˜¯å¦æ›´æ–°è§†å›¾ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯é€šè¿‡setInterval()å®šæ—¶è½®è¯¢æ£€æµ‹æ•°æ®å˜åŠ¨ï¼Œå½“ç„¶Googleä¸ä¼šè¿™ä¹ˆlowï¼Œangularåªæœ‰åœ¨æŒ‡å®šçš„äº‹ä»¶è§¦å‘æ—¶è¿›å…¥è„å€¼æ£€æµ‹ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p><ul><li>DOMäº‹ä»¶ï¼Œè­¬å¦‚ç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼Œç‚¹å‡»æŒ‰é’®ç­‰ã€‚( ng-click )</li><li>XHRå“åº”äº‹ä»¶ ( $http )</li><li>æµè§ˆå™¨Locationå˜æ›´äº‹ä»¶ ( $location )</li><li>Timeräº‹ä»¶( <img src="https://www.nowcoder.com/equation?tex=timeout,&preview=true" alt="img">interval )</li><li>æ‰§è¡Œ digest()æˆ–apply()</li></ul><p><strong>æ•°æ®åŠ«æŒ:</strong> vue.js åˆ™æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚</p><h4 id="1-31-æ—¢ç„¶-Vue-é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®åœ¨å…·ä½“domä¸Šçš„å˜åŒ–-ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ-DOM-diff-å‘¢"><a href="#1-31-æ—¢ç„¶-Vue-é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®åœ¨å…·ä½“domä¸Šçš„å˜åŒ–-ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ-DOM-diff-å‘¢" class="headerlink" title="1.31 æ—¢ç„¶ Vue é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®åœ¨å…·ä½“domä¸Šçš„å˜åŒ–,ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ DOM diff å‘¢?"></a>1.31 æ—¢ç„¶ Vue é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®åœ¨å…·ä½“domä¸Šçš„å˜åŒ–,ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ DOM diff å‘¢?</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>å‰ç½®çŸ¥è¯†:</strong> ä¾èµ–æ”¶é›†ã€è™šæ‹Ÿ DOMã€å“åº”å¼ç³»ç»Ÿ</p><p>ç°ä»£å‰ç«¯æ¡†æ¶æœ‰ä¸¤ç§æ–¹å¼ä¾¦æµ‹å˜åŒ–ï¼Œä¸€ç§æ˜¯ <strong>pull</strong> ï¼Œä¸€ç§æ˜¯ <strong>push</strong></p><p><strong>pull:</strong> å…¶ä»£è¡¨ä¸ºReactï¼Œæˆ‘ä»¬å¯ä»¥å›å¿†ä¸€ä¸‹Reactæ˜¯å¦‚ä½•ä¾¦æµ‹åˆ°å˜åŒ–çš„,æˆ‘ä»¬é€šå¸¸ä¼šç”¨setStateAPIæ˜¾å¼æ›´æ–°ï¼Œç„¶åReactä¼šè¿›è¡Œä¸€å±‚å±‚çš„Virtual Dom Diffæ“ä½œæ‰¾å‡ºå·®å¼‚ï¼Œç„¶åPatchåˆ°DOMä¸Šï¼ŒReactä»ä¸€å¼€å§‹å°±ä¸çŸ¥é“åˆ°åº•æ˜¯å“ªå‘ç”Ÿäº†å˜åŒ–ï¼Œåªæ˜¯çŸ¥é“ã€Œæœ‰å˜åŒ–äº†ã€ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒæš´åŠ›çš„Diffæ“ä½œæŸ¥æ‰¾ã€Œå“ªå‘ç”Ÿå˜åŒ–äº†ã€ï¼Œå¦å¤–ä¸€ä¸ªä»£è¡¨å°±æ˜¯Angularçš„è„æ£€æŸ¥æ“ä½œã€‚</p><p><strong>push:</strong> Vueçš„å“åº”å¼ç³»ç»Ÿåˆ™æ˜¯pushçš„ä»£è¡¨ï¼Œå½“Vueç¨‹åºåˆå§‹åŒ–çš„æ—¶å€™å°±ä¼šå¯¹æ•°æ®dataè¿›è¡Œä¾èµ–çš„æ”¶é›†ï¼Œä¸€ä½†æ•°æ®å‘ç”Ÿå˜åŒ–,å“åº”å¼ç³»ç»Ÿå°±ä¼šç«‹åˆ»å¾—çŸ¥ã€‚å› æ­¤Vueæ˜¯ä¸€å¼€å§‹å°±çŸ¥é“æ˜¯ã€Œåœ¨å“ªå‘ç”Ÿå˜åŒ–äº†ã€ï¼Œä½†æ˜¯è¿™åˆä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ ç†Ÿæ‚‰Vueçš„å“åº”å¼ç³»ç»Ÿå°±çŸ¥é“ï¼Œé€šå¸¸ä¸€ä¸ªç»‘å®šä¸€ä¸ªæ•°æ®å°±éœ€è¦ä¸€ä¸ªWatcher</p><p>ä¸€ä½†æˆ‘ä»¬çš„ç»‘å®šç»†ç²’åº¦è¿‡é«˜å°±ä¼šäº§ç”Ÿå¤§é‡çš„Watcherï¼Œè¿™ä¼šå¸¦æ¥å†…å­˜ä»¥åŠä¾èµ–è¿½è¸ªçš„å¼€é”€ï¼Œè€Œç»†ç²’åº¦è¿‡ä½ä¼šæ— æ³•ç²¾å‡†ä¾¦æµ‹å˜åŒ–,å› æ­¤Vueçš„è®¾è®¡æ˜¯é€‰æ‹©ä¸­ç­‰ç»†ç²’åº¦çš„æ–¹æ¡ˆ,åœ¨ç»„ä»¶çº§åˆ«è¿›è¡Œpushä¾¦æµ‹çš„æ–¹å¼,ä¹Ÿå°±æ˜¯é‚£å¥—å“åº”å¼ç³»ç»Ÿ,é€šå¸¸æˆ‘ä»¬ä¼šç¬¬ä¸€æ—¶é—´ä¾¦æµ‹åˆ°å‘ç”Ÿå˜åŒ–çš„ç»„ä»¶,ç„¶ååœ¨ç»„ä»¶å†…éƒ¨è¿›è¡ŒVirtual Dom Diffè·å–æ›´åŠ å…·ä½“çš„å·®å¼‚ï¼Œè€ŒVirtual Dom Diffåˆ™æ˜¯pullæ“ä½œï¼ŒVueæ˜¯push+pullç»“åˆçš„æ–¹å¼è¿›è¡Œå˜åŒ–ä¾¦æµ‹çš„ã€‚</p><h4 id="1-32-ç®€å•èŠèŠ-new-Vue-ä»¥åå‘ç”Ÿçš„äº‹æƒ…"><a href="#1-32-ç®€å•èŠèŠ-new-Vue-ä»¥åå‘ç”Ÿçš„äº‹æƒ…" class="headerlink" title="1.32 ç®€å•èŠèŠ new Vue ä»¥åå‘ç”Ÿçš„äº‹æƒ…"></a>1.32 ç®€å•èŠèŠ new Vue ä»¥åå‘ç”Ÿçš„äº‹æƒ…</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>new Vueä¼šè°ƒç”¨ Vue åŸå‹é“¾ä¸Šçš„_initæ–¹æ³•å¯¹ Vue å®ä¾‹è¿›è¡Œåˆå§‹åŒ–ï¼›</li><li>é¦–å…ˆæ˜¯initLifecycleåˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸï¼Œå¯¹ Vue å®ä¾‹å†…éƒ¨çš„ä¸€äº›å±æ€§ï¼ˆå¦‚ childrenã€parentã€isMountedï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼›</li><li>initEventsï¼Œåˆå§‹åŒ–å½“å‰å®ä¾‹ä¸Šçš„ä¸€äº›è‡ªå®šä¹‰äº‹ä»¶ï¼ˆVue.$onï¼‰ï¼›</li><li>initRenderï¼Œè§£æslotsç»‘å®šåœ¨ Vue å®ä¾‹ä¸Šï¼Œç»‘å®šcreateElementæ–¹æ³•åœ¨å®ä¾‹ä¸Šï¼›</li><li>å®Œæˆå¯¹ç”Ÿå‘½å‘¨æœŸã€è‡ªå®šä¹‰äº‹ä»¶ç­‰ä¸€ç³»åˆ—å±æ€§çš„åˆå§‹åŒ–åï¼Œè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­beforeCreateï¼›</li><li>initInjectionsï¼Œåœ¨åˆå§‹åŒ–dataå’Œpropsä¹‹å‰å®Œæˆä¾èµ–æ³¨å…¥ï¼ˆç±»ä¼¼äº React.Contextï¼‰ï¼›</li><li>initStateï¼Œå®Œæˆå¯¹dataå’Œpropsçš„åˆå§‹åŒ–ï¼ŒåŒæ—¶å¯¹å±æ€§å®Œæˆæ•°æ®åŠ«æŒå†…éƒ¨ï¼Œå¯ç”¨ç›‘å¬è€…å¯¹æ•°æ®è¿›è¡Œç›‘å¬ï¼ˆæ›´æ”¹ï¼‰ï¼›</li><li>initProvideï¼Œå¯¹ä¾èµ–æ³¨å…¥è¿›è¡Œè§£æï¼›</li><li>å®Œæˆå¯¹æ•°æ®ï¼ˆstate çŠ¶æ€ï¼‰çš„åˆå§‹åŒ–åï¼Œè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­createdï¼›</li><li>è¿›å…¥æŒ‚è½½é˜¶æ®µï¼Œå°† vue æ¨¡æ¿è¯­æ³•é€šè¿‡vue-loaderè§£ææˆè™šæ‹Ÿ DOM æ ‘ï¼Œè™šæ‹Ÿ DOM æ ‘ä¸æ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­beforeMountï¼›</li><li>å°†è§£æå¥½çš„è™šæ‹Ÿ DOM æ ‘é€šè¿‡ vue æ¸²æŸ“æˆçœŸå® DOMï¼Œè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­mountedï¼›</li></ol><h4 id="1-33-v-forä¸­çš„keyçš„ç†è§£ï¼Ÿ"><a href="#1-33-v-forä¸­çš„keyçš„ç†è§£ï¼Ÿ" class="headerlink" title="1.33 v-forä¸­çš„keyçš„ç†è§£ï¼Ÿ"></a>1.33 v-forä¸­çš„keyçš„ç†è§£ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>éœ€è¦ä½¿ç”¨keyæ¥ç»™æ¯ä¸ªèŠ‚ç‚¹åšä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ŒDiffç®—æ³•å°±å¯ä»¥æ­£ç¡®çš„è¯†åˆ«æ­¤èŠ‚ç‚¹ã€‚ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOMã€‚</p><h4 id="1-34-vueé¦–å±ç™½å±å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#1-34-vueé¦–å±ç™½å±å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="1.34 vueé¦–å±ç™½å±å¦‚ä½•è§£å†³ï¼Ÿ"></a>1.34 vueé¦–å±ç™½å±å¦‚ä½•è§£å†³ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><ol><li>è·¯ç”±æ‡’åŠ è½½</li><li>vue-cliå¼€å¯æ‰“åŒ…å‹ç¼© å’Œåå°é…åˆ gzipè®¿é—®</li><li>è¿›è¡ŒcdnåŠ é€Ÿ</li><li>å¼€å¯vueæœåŠ¡æ¸²æŸ“æ¨¡å¼</li><li>ç”¨webpackçš„externalså±æ€§æŠŠä¸éœ€è¦æ‰“åŒ…çš„åº“æ–‡ä»¶åˆ†ç¦»å‡ºå»ï¼Œå‡å°‘æ‰“åŒ…åæ–‡ä»¶çš„å¤§å°</li><li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ é™¤æ‰ä¸å¿…è¦çš„console.log</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> webpack.<span class="property">optimize</span>.<span class="title class_">UglifyJsPlugin</span>(&#123; <span class="comment">//æ·»åŠ -åˆ é™¤console.log</span></span><br><span class="line">    <span class="attr">compress</span>: &#123;</span><br><span class="line">      <span class="attr">warnings</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">drop_debugger</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">drop_console</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">sourceMap</span>: <span class="literal">true</span></span><br><span class="line">  &#125;),</span><br></pre></td></tr></table></figure><ol><li>å¼€å¯nginxçš„gzip ,åœ¨nginx.confé…ç½®æ–‡ä»¶ä¸­é…ç½®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http &#123;  <span class="comment">//åœ¨ httpä¸­é…ç½®å¦‚ä¸‹ä»£ç ï¼Œ</span></span><br><span class="line">   gzip on;</span><br><span class="line">   gzip_disable <span class="string">&quot;msie6&quot;</span>; </span><br><span class="line">   gzip_vary on; </span><br><span class="line">   gzip_proxied any;</span><br><span class="line">   gzip_comp_level <span class="number">8</span>; #å‹ç¼©çº§åˆ«</span><br><span class="line">   gzip_buffers <span class="number">16</span> 8k;</span><br><span class="line">   #gzip_http_version <span class="number">1.1</span>;</span><br><span class="line">   gzip_min_length <span class="number">100</span>; #ä¸å‹ç¼©ä¸´ç•Œå€¼</span><br><span class="line">   gzip_types text/plain application/javascript application/x-javascript text/css</span><br><span class="line">    application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ol><li>æ·»åŠ loadingæ•ˆæœï¼Œç»™ç”¨æˆ·ä¸€ç§è¿›åº¦æ„Ÿå—</li></ol><h4 id="1-35-vueå•é¡µé¢å’Œä¼ ç»Ÿçš„å¤šé¡µé¢åŒºåˆ«ï¼Ÿ"><a href="#1-35-vueå•é¡µé¢å’Œä¼ ç»Ÿçš„å¤šé¡µé¢åŒºåˆ«ï¼Ÿ" class="headerlink" title="1.35 vueå•é¡µé¢å’Œä¼ ç»Ÿçš„å¤šé¡µé¢åŒºåˆ«ï¼Ÿ"></a>1.35 vueå•é¡µé¢å’Œä¼ ç»Ÿçš„å¤šé¡µé¢åŒºåˆ«ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>:</p><p>å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰</p><p>é€šä¿—ä¸€ç‚¹è¯´å°±æ˜¯æŒ‡åªæœ‰ä¸€ä¸ªä¸»é¡µé¢çš„åº”ç”¨ï¼Œæµè§ˆå™¨ä¸€å¼€å§‹è¦åŠ è½½æ‰€æœ‰å¿…é¡»çš„ html, js, cssã€‚æ‰€æœ‰çš„é¡µé¢å†…å®¹éƒ½åŒ…å«åœ¨è¿™ä¸ªæ‰€è°“çš„ä¸»é¡µé¢ä¸­ã€‚ä½†åœ¨å†™çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¼šåˆ†å¼€å†™ï¼ˆé¡µé¢ç‰‡æ®µï¼‰ï¼Œç„¶ååœ¨äº¤äº’çš„æ—¶å€™ç”±è·¯ç”±ç¨‹åºåŠ¨æ€è½½å…¥ï¼Œå•é¡µé¢çš„é¡µé¢è·³è½¬ï¼Œä»…åˆ·æ–°å±€éƒ¨èµ„æºã€‚å¤šåº”ç”¨äºpcç«¯ã€‚</p><p>å¤šé¡µé¢ï¼ˆMPAï¼‰</p><p>æŒ‡ä¸€ä¸ªåº”ç”¨ä¸­æœ‰å¤šä¸ªé¡µé¢ï¼Œé¡µé¢è·³è½¬æ—¶æ˜¯æ•´é¡µåˆ·æ–°</p><p><strong>å•é¡µé¢çš„ä¼˜ç‚¹ï¼š</strong></p><p>ç”¨æˆ·ä½“éªŒå¥½ï¼Œå¿«ï¼Œå†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼ŒåŸºäºè¿™ä¸€ç‚¹spaå¯¹æœåŠ¡å™¨å‹åŠ›è¾ƒå°ï¼›å‰åç«¯åˆ†ç¦»ï¼›é¡µé¢æ•ˆæœä¼šæ¯”è¾ƒç‚«é…·ï¼ˆæ¯”å¦‚åˆ‡æ¢é¡µé¢å†…å®¹æ—¶çš„ä¸“åœºåŠ¨ç”»ï¼‰ã€‚</p><p><strong>å•é¡µé¢ç¼ºç‚¹ï¼š</strong></p><p>ä¸åˆ©äºseoï¼›å¯¼èˆªä¸å¯ç”¨ï¼Œå¦‚æœä¸€å®šè¦å¯¼èˆªéœ€è¦è‡ªè¡Œå®ç°å‰è¿›ã€åé€€ã€‚ï¼ˆç”±äºæ˜¯å•é¡µé¢ä¸èƒ½ç”¨æµè§ˆå™¨çš„å‰è¿›åé€€åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å»ºç«‹å †æ ˆç®¡ç†ï¼‰ï¼›åˆæ¬¡åŠ è½½æ—¶è€—æ—¶å¤šï¼›é¡µé¢å¤æ‚åº¦æé«˜å¾ˆå¤šã€‚</p><h4 id="1-36-refsã€-parentçš„ä½¿ç”¨ï¼Ÿ"><a href="#1-36-refsã€-parentçš„ä½¿ç”¨ï¼Ÿ" class="headerlink" title="1.36 refsã€$parentçš„ä½¿ç”¨ï¼Ÿ"></a>1.36 <img src="https://www.nowcoder.com/equation?tex=root%E3%80%81&preview=true" alt="img">refsã€$parentçš„ä½¿ç”¨ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>$root</p><p>å¯ä»¥ç”¨æ¥è·å–vueçš„æ ¹å®ä¾‹ï¼Œæ¯”å¦‚åœ¨ç®€å•çš„é¡¹ç›®ä¸­å°†å…¬å…±æ•°æ®æ”¾å†vueæ ¹å®ä¾‹ä¸Š(å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå…¨å±€ store ),å› æ­¤å¯ä»¥ä»£æ›¿vuexå®ç°çŠ¶æ€ç®¡ç†ï¼›</p><p>$refs</p><p>åœ¨å­ç»„ä»¶ä¸Šä½¿ç”¨refç‰¹æ€§åï¼Œthis.å±æ€§å¯ä»¥ç›´æ¥è®¿é—®è¯¥å­ç»„ä»¶ã€‚å¯ä»¥ä»£æ›¿äº‹ä»¶emit å’Œ<img src="https://www.nowcoder.com/equation?tex=on%20%E7%9A%84%E4%BD%9C%E7%94%A8%E3%80%82%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E6%98%AF%E9%80%9A%E8%BF%87ref%E7%89%B9%E6%80%A7%E4%B8%BA%E8%BF%99%E4%B8%AA%E5%AD%90%E7%BB%84%E4%BB%B6%E8%B5%8B%E4%BA%88%E4%B8%80%E4%B8%AAID%E5%BC%95%E7%94%A8%EF%BC%8C%E5%86%8D%E9%80%9A%E8%BF%87this.&preview=true" alt="img">refs.testIdè·å–æŒ‡å®šå…ƒç´ ã€‚æ³¨æ„ï¼š<img src="https://www.nowcoder.com/equation?tex=refs%E5%8F%AA%E4%BC%9A%E5%9C%A8%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%E7%94%9F%E6%95%88%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%83%E4%BB%AC%E4%B8%8D%E6%98%AF%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E3%80%82%E8%BF%99%E4%BB%85%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E2%80%9C%E9%80%83%E7%94%9F%E8%88%B1%E2%80%9D%E2%80%94%E2%80%94%E4%BD%A0%E5%BA%94%E8%AF%A5%E9%81%BF%E5%85%8D%E5%9C%A8%E6%A8%A1%E6%9D%BF%E6%88%96%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%AD%E8%AE%BF%E9%97%AE&preview=true" alt="img">refsã€‚</p><p>$parent</p><p>$parentå±æ€§å¯ä»¥ç”¨æ¥ä»ä¸€ä¸ªå­ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥æ›¿ä»£å°†æ•°æ®ä»¥ prop çš„æ–¹å¼ä¼ å…¥å­ç»„ä»¶çš„æ–¹å¼ï¼›å½“å˜æ›´çˆ¶çº§ç»„ä»¶çš„æ•°æ®çš„æ—¶å€™ï¼Œå®¹æ˜“é€ æˆè°ƒè¯•å’Œç†è§£éš¾åº¦å¢åŠ ï¼›</p><h4 id="1-36-è·¯ç”±è·³è½¬å’Œlocation-hrefçš„åŒºåˆ«ï¼Ÿ"><a href="#1-36-è·¯ç”±è·³è½¬å’Œlocation-hrefçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="1.36 è·¯ç”±è·³è½¬å’Œlocation.hrefçš„åŒºåˆ«ï¼Ÿ"></a>1.36 è·¯ç”±è·³è½¬å’Œlocation.hrefçš„åŒºåˆ«ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>ä½¿ç”¨location.href&#x3D;â€™&#x2F;urlâ€™æ¥è·³è½¬ï¼Œç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯åˆ·æ–°äº†é¡µé¢ï¼›<br>ä½¿ç”¨è·¯ç”±æ–¹å¼è·³è½¬ï¼Œæ— åˆ·æ–°é¡µé¢ï¼Œé™æ€è·³è½¬ï¼›</p><h4 id="1-37-scssæ˜¯ä»€ä¹ˆï¼Ÿåœ¨vue-cliä¸­çš„å®‰è£…ä½¿ç”¨æ­¥éª¤æ˜¯ï¼Ÿæœ‰å“ªå‡ å¤§ç‰¹æ€§ï¼Ÿ"><a href="#1-37-scssæ˜¯ä»€ä¹ˆï¼Ÿåœ¨vue-cliä¸­çš„å®‰è£…ä½¿ç”¨æ­¥éª¤æ˜¯ï¼Ÿæœ‰å“ªå‡ å¤§ç‰¹æ€§ï¼Ÿ" class="headerlink" title="1.37 scssæ˜¯ä»€ä¹ˆï¼Ÿåœ¨vue.cliä¸­çš„å®‰è£…ä½¿ç”¨æ­¥éª¤æ˜¯ï¼Ÿæœ‰å“ªå‡ å¤§ç‰¹æ€§ï¼Ÿ"></a>1.37 scssæ˜¯ä»€ä¹ˆï¼Ÿåœ¨vue.cliä¸­çš„å®‰è£…ä½¿ç”¨æ­¥éª¤æ˜¯ï¼Ÿæœ‰å“ªå‡ å¤§ç‰¹æ€§ï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>cssçš„é¢„ç¼–è¯‘ã€‚</p><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>å…ˆè£…css-loaderã€node-loaderã€sass-loaderç­‰åŠ è½½å™¨æ¨¡å—</li><li>åœ¨buildç›®å½•æ‰¾åˆ°webpack.base.config.jsï¼Œåœ¨é‚£ä¸ªextendså±æ€§ä¸­åŠ ä¸€ä¸ªæ‹“å±•.scss</li><li>åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé…ç½®ä¸€ä¸ªmoduleå±æ€§</li><li>ç„¶ååœ¨ç»„ä»¶çš„styleæ ‡ç­¾åŠ ä¸Šlangå±æ€§ ï¼Œä¾‹å¦‚ï¼šlang&#x3D;â€scssâ€</li></ol><p>ç‰¹æ€§:</p><p>å¯ä»¥ç”¨å˜é‡ï¼Œä¾‹å¦‚ï¼ˆ$å˜é‡åç§°&#x3D;å€¼ï¼‰ï¼›<br>å¯ä»¥ç”¨æ··åˆå™¨ï¼Œä¾‹å¦‚ï¼ˆï¼‰<br>å¯ä»¥åµŒå¥—</p><h4 id="1-38-deleteä¸vue-deleteåŒºåˆ«"><a href="#1-38-deleteä¸vue-deleteåŒºåˆ«" class="headerlink" title="1.38 deleteä¸vue.deleteåŒºåˆ«?"></a>1.38 deleteä¸vue.deleteåŒºåˆ«?</h4><p>delteä¼šåˆ é™¤æ•°ç»„çš„å€¼ï¼Œä½†æ˜¯å®ƒä¾ç„¶ä¼šåœ¨å†…å­˜ä¸­å ä½ç½®<br>è€Œvue.deleteä¼šåˆ é™¤æ•°ç»„åœ¨å†…å­˜ä¸­çš„å ä½</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">delete</span> arr1[<span class="number">1</span>]</span><br><span class="line"><span class="variable language_">this</span>.$delete(arr2,<span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1)    <span class="comment">//ã€1, empty, 3ã€‘</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2)    <span class="comment">//ã€1,2ã€‘</span></span><br></pre></td></tr></table></figure><h4 id="1-39-computedå’Œwatchçš„åŒºåˆ«"><a href="#1-39-computedå’Œwatchçš„åŒºåˆ«" class="headerlink" title="1.39 computedå’Œwatchçš„åŒºåˆ«"></a>1.39 computedå’Œwatchçš„åŒºåˆ«</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p>computed</p><p>è®¡ç®—ç»“æœå¹¶è¿”å›ï¼Œåªæœ‰å½“è¢«è®¡ç®—çš„å±æ€§å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šè§¦å‘ï¼ˆå³ï¼šè®¡ç®—å±æ€§çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼Œé™¤éä¾èµ–çš„å“åº”å±æ€§å˜åŒ–æ‰ä¼šé‡æ–°åŠå­™ï¼‰</p><p>watch</p><p>ç›‘å¬æŸä¸€ä¸ªå€¼ï¼Œå½“è¢«ç›‘å¬çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰§è¡Œç›¸å…³æ“ä½œã€‚</p><p>ä¸computedçš„åŒºåˆ«æ˜¯ï¼Œwatchæ›´åŠ é€‚ç”¨äºç›‘å¬æŸä¸€ä¸ªå€¼å¾—å˜åŒ–ï¼Œå¹¶åšå¯¹åº”æ“ä½œï¼Œæ¯”å¦‚è¯·æ±‚åå¤ªæ¥å£ç­‰ã€‚è€Œcomputedé€‚ç”¨äºè®¡ç®—å·²æœ‰çš„å€¼å¹¶è¿”å›ç»“æœã€‚ ç›‘å¬ç®€å•æ•°æ®ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;      </span><br><span class="line">    <span class="keyword">return</span>&#123;        </span><br><span class="line">        <span class="string">&#x27;first&#x27;</span>:<span class="number">2</span>     </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;,   </span><br><span class="line"> <span class="attr">watch</span>:&#123;      </span><br><span class="line">     <span class="title function_">first</span>(<span class="params"></span>)&#123;        </span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">first</span>)    </span><br><span class="line">    &#125;   </span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h4 id="1-40-Vue-ä¸ºä»€ä¹ˆè¦ç”¨-vm-set-è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜-ï¼Ÿä½ èƒ½è¯´è¯´å¦‚ä¸‹ä»£ç çš„å®ç°åŸç†ä¹ˆï¼Ÿ"><a href="#1-40-Vue-ä¸ºä»€ä¹ˆè¦ç”¨-vm-set-è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜-ï¼Ÿä½ èƒ½è¯´è¯´å¦‚ä¸‹ä»£ç çš„å®ç°åŸç†ä¹ˆï¼Ÿ" class="headerlink" title="1.40 Vue ä¸ºä»€ä¹ˆè¦ç”¨ vm.$set() è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜ ï¼Ÿä½ èƒ½è¯´è¯´å¦‚ä¸‹ä»£ç çš„å®ç°åŸç†ä¹ˆï¼Ÿ"></a>1.40 Vue ä¸ºä»€ä¹ˆè¦ç”¨ vm.$set() è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜ ï¼Ÿä½ èƒ½è¯´è¯´å¦‚ä¸‹ä»£ç çš„å®ç°åŸç†ä¹ˆï¼Ÿ</h4><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼š</p><p><strong>1ï¼‰Vueä¸ºä»€ä¹ˆè¦ç”¨vm.$set() è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜</strong></p><ol><li>Vueä½¿ç”¨äº†Object.definePropertyå®ç°åŒå‘æ•°æ®ç»‘å®š</li><li>åœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ getter&#x2F;setter è½¬åŒ–</li><li>å±æ€§å¿…é¡»åœ¨dataå¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®©Vueå°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ï¼ˆè¿™ä¹Ÿå°±é€ æˆäº†Vueæ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ï¼‰</li></ol><p>æ‰€ä»¥Vueæä¾›äº†Vue.set (object, propertyName, value) &#x2F; vm.$set (object, propertyName, value)</p><p><strong>2ï¼‰æ¡†æ¶æœ¬èº«æ˜¯å¦‚ä½•å®ç°çš„å‘¢?</strong></p><blockquote><p>Vue æºç ä½ç½®ï¼švue&#x2F;src&#x2F;core&#x2F;instance&#x2F;index.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">set</span> (<span class="attr">target</span>: <span class="title class_">Array</span>&lt;any&gt; | <span class="title class_">Object</span>, <span class="attr">key</span>: any, <span class="attr">val</span>: any): any &#123;</span><br><span class="line">  <span class="comment">// target ä¸ºæ•°ç»„  </span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(target) &amp;&amp; <span class="title function_">isValidArrayIndex</span>(key)) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹æ•°ç»„çš„é•¿åº¦, é¿å…ç´¢å¼•&gt;æ•°ç»„é•¿åº¦å¯¼è‡´splcie()æ‰§è¡Œæœ‰è¯¯</span></span><br><span class="line">    target.<span class="property">length</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(target.<span class="property">length</span>, key)</span><br><span class="line">    <span class="comment">// åˆ©ç”¨æ•°ç»„çš„spliceå˜å¼‚æ–¹æ³•è§¦å‘å“åº”å¼  </span></span><br><span class="line">    target.<span class="title function_">splice</span>(key, <span class="number">1</span>, val)</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// key å·²ç»å­˜åœ¨ï¼Œç›´æ¥ä¿®æ”¹å±æ€§å€¼  </span></span><br><span class="line">  <span class="keyword">if</span> (key <span class="keyword">in</span> target &amp;&amp; !(key <span class="keyword">in</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>)) &#123;</span><br><span class="line">    target[key] = val</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> ob = (<span class="attr">target</span>: any).<span class="property">__ob__</span></span><br><span class="line">  <span class="comment">// target æœ¬èº«å°±ä¸æ˜¯å“åº”å¼æ•°æ®, ç›´æ¥èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (!ob) &#123;</span><br><span class="line">    target[key] = val</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¯¹å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†</span></span><br><span class="line">  <span class="title function_">defineReactive</span>(ob.<span class="property">value</span>, key, val)</span><br><span class="line">  ob.<span class="property">dep</span>.<span class="title function_">notify</span>()</span><br><span class="line">  <span class="keyword">return</span> val</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é˜…è¯»ä»¥ä¸Šæºç å¯çŸ¥ï¼Œvm.$set çš„å®ç°åŸç†æ˜¯ï¼š</p><ol><li>å¦‚æœç›®æ ‡æ˜¯æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨æ•°ç»„çš„ splice æ–¹æ³•è§¦å‘ç›¸åº”å¼ï¼›</li><li>å¦‚æœç›®æ ‡æ˜¯å¯¹è±¡ï¼Œä¼šå…ˆåˆ¤è¯»å±æ€§æ˜¯å¦å­˜åœ¨ã€å¯¹è±¡æ˜¯å¦æ˜¯å“åº”å¼ï¼Œ</li><li>æœ€ç»ˆå¦‚æœè¦å¯¹å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œåˆ™æ˜¯é€šè¿‡è°ƒç”¨ defineReactive æ–¹æ³•è¿›è¡Œå“åº”å¼å¤„ç†</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Vue-çš„è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#Vue-çš„è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;Vue çš„è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;Vue çš„è®¾è®¡æ¨¡å¼&lt;/h2&gt;&lt;h3 id=&quot;ä»‹ç»ä¸€ä¸‹-MVVM-æ¨¡å¼ï¼Œå’Œ-MVC-æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&quot;&gt;&lt;a href=</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="å…«è‚¡æ–‡" scheme="https://dont-sleep-so-late.github.io/tags/%E5%85%AB%E8%82%A1%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>HTML</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/06/HTML/html5/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/06/HTML/html5/</id>
    <published>2024-03-06T07:02:15.000Z</published>
    <updated>2024-04-07T12:32:28.203Z</updated>
    
    <content type="html"><![CDATA[<h1 id="âœHTML5"><a href="#âœHTML5" class="headerlink" title="âœHTML5"></a>âœHTML5</h1><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><h1 id="âœç›®å½•æ€»è§ˆ"><a href="#âœç›®å½•æ€»è§ˆ" class="headerlink" title="âœç›®å½•æ€»è§ˆ"></a>âœç›®å½•æ€»è§ˆ</h1><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152415.png"></p><h1 id="1-HTML5æé«˜"><a href="#1-HTML5æé«˜" class="headerlink" title="1.HTML5æé«˜"></a>1.HTML5æé«˜</h1><ul><li>HTML5çš„æ–°å¢ç‰¹æ€§ä¸»è¦æ˜¯é’ˆå¯¹äºä»¥å‰çš„ä¸è¶³ï¼Œå¢åŠ äº†ä¸€äº›æ–°çš„æ ‡ç­¾ï¼Œæ–°çš„è¡¨å•å’Œæ–°çš„è¡¨å•å±æ€§ç­‰ã€‚</li><li>è¿™äº›æ–°ç‰¹æ€§éƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ï¼ŒåŸºæœ¬éƒ½æ˜¯IE9+ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨æ‰æ”¯æŒï¼Œå¦‚æœä¸è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥å¤§é‡ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§</li><li></li></ul><p>HTML5æœ‰æ›´å¤§çš„æŠ€æœ¯é›†ï¼Œå…è®¸æ›´å¤šæ ·åŒ–å’Œå¼ºå¤§çš„ç½‘ç«™å’Œåº”ç”¨ç¨‹åºã€‚å¢åŠ äº†æ–°ç‰¹æ€§ï¼šè¯­ä¹‰ç‰¹æ€§ï¼Œæœ¬åœ°å­˜å‚¨ç‰¹æ€§ï¼Œè®¾å¤‡å…¼å®¹ç‰¹æ€§ï¼Œè¿æ¥ç‰¹æ€§ï¼Œç½‘é¡µå¤šåª’ä½“ç‰¹æ€§ï¼Œä¸‰ç»´ã€å›¾å½¢åŠç‰¹æ•ˆç‰¹æ€§ï¼Œæ€§èƒ½ä¸é›†æˆç‰¹æ€§ï¼ŒCSS3ç‰¹æ€§ã€‚è¿™ä¸ªé›†åˆæœ‰æ—¶ç§°ä¸ºHTML5å’Œæœ‹å‹ï¼Œé€šå¸¸ç¼©å†™ä¸ºHTML5</p><h2 id="1-æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥"><a href="#1-æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥" class="headerlink" title="1.æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥"></a>1.æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾ğŸ”¥</h2><p>ä»¥å‰å¸ƒå±€ï¼Œæˆ‘ä»¬åŸºæœ¬ç”¨div æ¥åšã€‚ div å¯¹äºæœç´¢å¼•æ“æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰è¯­ä¹‰çš„ã€‚</p><p>æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152419.png"></p><ul><li>&lt; header &gt; :å¤´éƒ¨æ ‡ç­¾</li><li>&lt; nav &gt;: å¯¼èˆªæ ‡ç­¾</li><li>&lt; article &gt;ï¼š å†…å®¹æ ‡ç­¾</li><li>&lt; section &gt;:å®šä¹‰æ–‡æ¡£æŸä¸ªåŒºåŸŸ</li><li>&lt; aside &gt;:ä¾§è¾¹æ æ ‡ç­¾</li><li>&lt; footer &gt;: å°¾éƒ¨æ ‡ç­¾</li></ul><p><strong>â€“æ³¨æ„ï¼š</strong></p><ul><li>è¿™ç§è¯­ä¹‰åŒ–æ ‡å‡†ä¸»è¦æ˜¯é’ˆå¯¹<strong>æœç´¢å¼•æ“</strong>çš„</li><li>è¿™äº›æ–°æ ‡ç­¾é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨<strong>å¤šæ¬¡</strong></li><li>åœ¨IE9ä¸­ï¼Œéœ€è¦æŠŠè¿™äº›å…ƒç´ è½¬æ¢ä¸º<strong>å—çº§å…ƒç´ </strong></li><li>å…¶å®ï¼Œç§»åŠ¨ç«¯æ›´å–œæ¬¢ä½¿ç”¨è¿™äº›æ ‡ç­¾</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> &lt;style&gt;</span><br><span class="line">        header, nav &#123;</span><br><span class="line">            height: 120px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            border-radius: 15px;</span><br><span class="line">            width: 800px;</span><br><span class="line">            margin: 15px auto;</span><br><span class="line">        &#125;</span><br><span class="line">        section &#123;</span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            background-color: skyblue;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;å¤´éƒ¨æ ‡ç­¾&lt;/header&gt;</span><br><span class="line">    &lt;nav&gt;å¯¼èˆªæ æ ‡ç­¾&lt;/nav&gt;</span><br><span class="line">    &lt;section&gt;æŸä¸ªåŒºåŸŸ&lt;/section&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥"><a href="#2-æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥" class="headerlink" title="2.æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥"></a>2.æ–°å¢è§†é¢‘æ ‡ç­¾ğŸ”¥</h2><h3 id="2-1-videoè§†é¢‘ğŸ”¥"><a href="#2-1-videoè§†é¢‘ğŸ”¥" class="headerlink" title="2.1 videoè§†é¢‘ğŸ”¥"></a>2.1 videoè§†é¢‘ğŸ”¥</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152422.png"></p><p>è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;æ–‡ä»¶åœ°å€&quot;   controls=&quot;controls&quot;&gt;&lt;/video&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">        video &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;video src=&quot;media/mi.mp4&quot; autoplay=&quot;autoplay&quot; muted=&quot;muted&quot;  loop=&quot;loop&quot; poster=&quot;media/mi9.jpg&quot;&gt;&lt;/video&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>è§†é¢‘å°±ç»ªè‡ªåŠ¨æ’­æ”¾(<strong>è°·æ­Œæµè§ˆå™¨éœ€è¦æ·»åŠ mutedæ¥è§£å†³è‡ªåŠ¨æ’­æ”¾é—®é¢˜</strong>)</td></tr><tr><td>controls</td><td>controls</td><td>å‘ç”¨æˆ·æ˜¾ç¤ºæ’­æ”¾æ§ä»¶</td></tr><tr><td>width</td><td>pixels(åƒç´ )</td><td>è®¾ç½®æ’­æ”¾å™¨å®½åº¦</td></tr><tr><td>height</td><td>pixels(åƒç´ )</td><td>è®¾ç½®æ’­æ”¾å™¨é«˜åº¦</td></tr><tr><td>loop</td><td>loop</td><td>æ’­æ”¾å®Œæ˜¯å¦ç»§ç»­æ’­æ”¾è¯¥è§†é¢‘,å¾ªç¯æ’­æ”¾</td></tr><tr><td>preload</td><td>auto(é¢„å…ˆåŠ è½½è§†é¢‘)none(ä¸åº”åŠ è½½è§†é¢‘)</td><td>è§„å®šæ˜¯å¦é¢„åŠ è½½è§†é¢‘(å¦‚æœæœ‰äº†autoplay å°±å¿½ç•¥è¯¥å±æ€§)</td></tr><tr><td>src</td><td>url</td><td>è§†é¢‘urlçš„åœ°å€</td></tr><tr><td>poster</td><td>lmgurl</td><td>åŠ è½½ç­‰å¾…çš„ç”»é¢å›¾ç‰‡</td></tr><tr><td>muted</td><td>muted</td><td>é™éŸ³æ’­æ”¾</td></tr></tbody></table><ul><li>ä¸€èˆ¬ä¸æ˜¾ç¤ºcontrolsï¼Œè®©è§†é¢‘å¾ªç¯æ’­æ”¾</li></ul><h3 id="2-2-audioéŸ³é¢‘"><a href="#2-2-audioéŸ³é¢‘" class="headerlink" title="2.2 audioéŸ³é¢‘"></a>2.2 audioéŸ³é¢‘</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240306152426.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src=&quot;æ–‡ä»¶åœ°å€&quot; controls=&quot;controls&quot;&gt;&lt;/audio&gt;</span><br><span class="line"></span><br><span class="line">&lt;audio src=&quot;media/music.mp3&quot; autoplay=&quot;autoplay&quot; controls=&quot;controls&quot;&gt;&lt;/audio&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™éŸ³é¢‘åœ¨å°±ç»ªåé©¬ä¸Šæ’­æ”¾</td></tr><tr><td>controls</td><td>controls</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™å‘ç”¨æˆ·æ˜¾ç¤ºæ§ä»¶ï¼Œæ¯”å¦‚æ’­æ”¾æŒ‰é’®</td></tr><tr><td>loop</td><td>loop</td><td>å¦‚æœå‡ºç°è¯¥å±æ€§ï¼Œåˆ™æ¯å½“éŸ³é¢‘ç»“æŸæ—¶é‡æ–°å¼€å§‹æ’­æ”¾</td></tr><tr><td>src</td><td>url</td><td>è¦æ’­æ”¾çš„éŸ³é¢‘çš„url</td></tr></tbody></table><h3 id="2-3æ€»ç»“"><a href="#2-3æ€»ç»“" class="headerlink" title="2.3æ€»ç»“"></a>2.3æ€»ç»“</h3><ol><li>éŸ³é¢‘æ ‡ç­¾å’Œè§†é¢‘æ ‡ç­¾ä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸€è‡´</li><li>æµè§ˆå™¨æ”¯æŒæƒ…å†µä¸åŒ</li><li><strong>è°·æ­Œæµè§ˆå™¨æŠŠéŸ³é¢‘å’Œè§†é¢‘è‡ªåŠ¨æ’­æ”¾ç¦æ­¢äº†</strong></li><li>æˆ‘ä»¬å¯ä»¥ç»™è§†é¢‘æ ‡ç­¾æ·»åŠ mutedå±æ€§æ¥é™éŸ³æ’­æ”¾è§†é¢‘ï¼ŒéŸ³é¢‘ä¸å¯ä»¥(å¯ä»¥é€šè¿‡JavaScriptè§£å†³)</li><li>è§†é¢‘æ ‡ç­¾æ˜¯é‡ç‚¹ï¼Œæˆ‘ä»¬ç»å¸¸è®¾ç½®è‡ªåŠ¨æ’­æ”¾ï¼Œä¸é€‚ç”¨controlsæ§ä»¶ï¼Œå¾ªç¯å’Œè®¾ç½®å¤§å°å±æ€§</li></ol><h2 id="3-æ–°å¢inputç±»å‹ğŸ”¥"><a href="#3-æ–°å¢inputç±»å‹ğŸ”¥" class="headerlink" title="3.æ–°å¢inputç±»å‹ğŸ”¥"></a>3.æ–°å¢inputç±»å‹ğŸ”¥</h2><table><thead><tr><th>å±æ€§å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>type&#x3D;â€œemailâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºEmailç±»å‹</td></tr><tr><td>type&#x3D;â€œurlâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºURLç±»å‹</td></tr><tr><td>type&#x3D;â€œdataâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¥æœŸç±»å‹</td></tr><tr><td>type&#x3D;â€œtimeâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¶é—´ç±»å‹</td></tr><tr><td>type&#x3D;â€œmonthâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæœˆç±»å‹</td></tr><tr><td>type&#x3D;â€œweekâ€</td><td>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºå‘¨ç±»å‹</td></tr><tr><td><strong>type&#x3D;â€numberâ€</strong></td><td><strong>é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ•°å­—ç±»å‹</strong></td></tr><tr><td><strong>type&#x3D;â€telâ€</strong></td><td><strong>æ‰‹æœºå·ç </strong></td></tr><tr><td><strong>type&#x3D;â€searchâ€</strong></td><td><strong>æœç´¢æ¡†</strong></td></tr><tr><td>type&#x3D;â€œcolorâ€</td><td>ç”Ÿæˆä¸€ä¸ªé¢œè‰²é€‰æ‹©è¡¨å•</td></tr></tbody></table><ul><li>é‡ç‚¹è®°ä½ï¼š <strong>number tel search</strong> è¿™ä¸‰ä¸ª</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- æˆ‘ä»¬éªŒè¯çš„æ—¶å€™å¿…é¡»æ·»åŠ formè¡¨å•åŸŸ --&gt;</span><br><span class="line">    &lt;form action=&quot;&quot;&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;é‚®ç®±: &lt;input type=&quot;email&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;ç½‘å€: &lt;input type=&quot;url&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ—¥æœŸ: &lt;input type=&quot;date&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ—¶é—´: &lt;input type=&quot;time&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ•°é‡: &lt;input type=&quot;number&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æ‰‹æœºå·ç : &lt;input type=&quot;tel&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;æœç´¢: &lt;input type=&quot;search&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;é¢œè‰²: &lt;input type=&quot;color&quot; /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;!-- å½“æˆ‘ä»¬ç‚¹å‡»æäº¤æŒ‰é’®å°±å¯ä»¥éªŒè¯è¡¨å•äº† --&gt;</span><br><span class="line">            &lt;li&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ–°å¢è¡¨å•å±æ€§ğŸ”¥"><a href="#4-æ–°å¢è¡¨å•å±æ€§ğŸ”¥" class="headerlink" title="4.æ–°å¢è¡¨å•å±æ€§ğŸ”¥"></a>4.æ–°å¢è¡¨å•å±æ€§ğŸ”¥</h2><table><thead><tr><th>å±æ€§</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>required</td><td>required</td><td>è¡¨å•æ‹¥æœ‰è¯¥å±æ€§è¡¨ç¤ºå…¶å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œå¿…å¡«</td></tr><tr><td><strong>placeholder</strong></td><td><strong>æç¤ºæ–‡æœ¬</strong></td><td><strong>è¡¨å•çš„æç¤ºä¿¡æ¯ï¼Œå­˜åœ¨é»˜è®¤å€¼å°†ä¸æ˜¾ç¤º</strong></td></tr><tr><td>autofocus</td><td>autofocus</td><td>è‡ªåŠ¨èšç„¦å±æ€§ï¼Œé¡µé¢åŠ è½½å®Œæˆè‡ªåŠ¨èšç„¦åˆ°æŒ‡å®šè¡¨å•</td></tr><tr><td>autocomplete</td><td>off&#x2F;on</td><td>å½“ç”¨æˆ·åœ¨å­—æ®µå¼€å§‹é”®å…¥æ—¶ï¼Œæµè§ˆå™¨åŸºäºä¹‹å‰é”®å…¥è¿‡çš„å€¼ï¼Œåº”è¯¥æ˜¾ç¤ºå‡ºåœ¨å­—æ®µä¸­å¡«å†™çš„é€‰é¡¹ï¼Œé»˜è®¤å·²ç»æ‰“å¼€ã€‚å¦‚autocomplete&#x3D;â€œonâ€ ,å…³é—­autocomplete&#x3D;â€œoffâ€ï¼Œéœ€è¦æ”¾åœ¨è¡¨å•å†…ï¼ŒåŒæ—¶åŠ ä¸Šnameå±æ€§ï¼ŒåŒæ—¶æˆåŠŸæäº¤</td></tr><tr><td><strong>multiple</strong></td><td><strong>multiple</strong></td><td><strong>å¯ä»¥å¤šé€‰æ–‡ä»¶æç¤º</strong></td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot;&gt;</span><br><span class="line">       &lt;input type=&quot;search&quot; name=&quot;sear&quot; id=&quot;&quot; required=&quot;required&quot; placeholder=&quot;pinkè€å¸ˆ&quot; autofocus=&quot;autofocus&quot; autocommplete=&quot;off&quot;&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;</span><br><span class="line">   &lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¾ç½®æ–¹å¼ä¿®æ”¹placeholderé‡Œé¢çš„å­—ä½“é¢œè‰²</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input::placeholder &#123;</span><br><span class="line">color: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;âœHTML5&quot;&gt;&lt;a href=&quot;#âœHTML5&quot; class=&quot;headerlink&quot; title=&quot;âœHTML5&quot;&gt;&lt;/a&gt;âœHTML5&lt;/h1&gt;&lt;p&gt;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;&amp;#x3D;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="HTML5" scheme="https://dont-sleep-so-late.github.io/tags/HTML5/"/>
    
  </entry>
  
  <entry>
    <title>Vue3é¡¹ç›®é…ç½®</title>
    <link href="https://dont-sleep-so-late.github.io/2024/03/05/Vue/Vue3%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/"/>
    <id>https://dont-sleep-so-late.github.io/2024/03/05/Vue/Vue3%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/</id>
    <published>2024-03-05T09:31:36.000Z</published>
    <updated>2024-03-16T08:22:42.168Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vite@latest name -- --template vue-ts</span><br></pre></td></tr></table></figure><h2 id="ç¼–ç è§„èŒƒé…ç½®"><a href="#ç¼–ç è§„èŒƒé…ç½®" class="headerlink" title="ç¼–ç è§„èŒƒé…ç½®"></a>ç¼–ç è§„èŒƒé…ç½®</h2><blockquote><p>ESLintï¼šç¼–ç è§„èŒƒæ£€æŸ¥<br>Prettierï¼šä»£ç æ ¼å¼åŒ–å·¥å…·</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint =&gt; ESLintçš„æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@typescript-eslint/parser =&gt; ESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætsï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒtsä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">@typescript-eslint/eslint-plugin =&gt; ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹tsä»£ç çš„è§„èŒƒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-plugin-vue =&gt; vue3çš„ä»£ç æ ¡éªŒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prettier =&gt; prettieræ’ä»¶çš„æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-config-prettier =&gt; è§£å†³ESLintä¸­çš„æ ·å¼è§„èŒƒå’Œprettierä¸­æ ·å¼è§„èŒƒçš„å†²çªï¼Œä»¥prettierçš„æ ·å¼è§„èŒƒä¸ºå‡†ï¼Œä½¿ESLintä¸­çš„æ ·å¼è§„èŒƒè‡ªåŠ¨å¤±æ•ˆ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eslint-plugin-prettier =&gt; å°†prettierä½œä¸ºESLintè§„èŒƒæ¥ä½¿ç”¨</span></span><br><span class="line">cnpm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-vue prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="eslintrc-jsé…ç½®æ–‡ä»¶"><a href="#eslintrc-jsé…ç½®æ–‡ä»¶" class="headerlink" title=".eslintrc.jsé…ç½®æ–‡ä»¶"></a><code>.eslintrc.js</code>é…ç½®æ–‡ä»¶</h4><blockquote><p><a href="https://eslint.org/docs/latest/user-guide/configuring/configuration-files#configuration-file-formats">https://eslint.org/docs/latest/user-guide/configuring/configuration-files#configuration-file-formats</a><br><a href="https://eslint.vuejs.org/rules">https://eslint.vuejs.org/rules</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>, <span class="comment">//å®šä¹‰ESLintçš„è§£æå™¨</span></span><br><span class="line">    <span class="attr">extends</span>: [</span><br><span class="line">        <span class="string">&#x27;prettier/@typescript-eslint&#x27;</span>,  <span class="comment">// ä½¿@typescript-eslintä¸­çš„æ ·å¼è§„èŒƒå¤±æ•ˆï¼Œéµå¾ªprettierä¸­çš„æ ·å¼è§„èŒƒ</span></span><br><span class="line">        <span class="string">&#x27;plugin:prettier/recommended&#x27;</span> <span class="comment">// ä½¿ç”¨prettierä¸­çš„æ ·å¼è§„èŒƒï¼Œä¸”å¦‚æœä½¿ESLintä¼šæ£€æµ‹prettierçš„æ ¼å¼é—®é¢˜ï¼ŒåŒæ ·å°†æ ¼å¼é—®é¢˜ä»¥errorçš„å½¢å¼æŠ›å‡º</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">settings</span>: &#123;</span><br><span class="line">        <span class="string">&quot;react&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;React&quot;</span>,</span><br><span class="line">            <span class="string">&quot;version&quot;</span>: <span class="string">&quot;detect&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">2019</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="comment">//æŒ‡å®šä»£ç çš„è¿è¡Œç¯å¢ƒ</span></span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="prettierrc-jsé…ç½®æ–‡ä»¶"><a href="#prettierrc-jsé…ç½®æ–‡ä»¶" class="headerlink" title=".prettierrc.jsé…ç½®æ–‡ä»¶"></a><code>.prettierrc.js</code>é…ç½®æ–‡ä»¶</h4><blockquote><p><a href="https://prettier.io/docs/en/configuration.html">https://prettier.io/docs/en/configuration.html</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">printWidth</span>: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">trailingComma</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">    <span class="attr">bracketSpacing</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">jsxBracketSameLine</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">arrowParens</span>: <span class="string">&quot;avoid&quot;</span>,</span><br><span class="line">    <span class="attr">insertPragma</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">useTabs</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶"><a href="#eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶" class="headerlink" title=".eslintignoreESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶"></a><code>.eslintignore</code>ESLintå¿½ç•¥æ£€æŸ¥æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">*.md</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">dist</span><br><span class="line">/public</span><br><span class="line">.eslintrc.js</span><br><span class="line">src/assets</span><br></pre></td></tr></table></figure><h4 id="prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶"><a href="#prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶" class="headerlink" title=".prettierignorePrettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶"></a><code>.prettierignore</code>Prettierå¿½ç•¥æ ¼å¼åŒ–æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/dist/*</span><br><span class="line">/node_modules/**</span><br><span class="line">**/*.svg</span><br><span class="line">/public/*</span><br></pre></td></tr></table></figure><h3 id="ä»£ç æ£€æŸ¥-è‡ªåŠ¨ä¿®å¤-è‡ªåŠ¨æ ¼å¼åŒ–"><a href="#ä»£ç æ£€æŸ¥-è‡ªåŠ¨ä¿®å¤-è‡ªåŠ¨æ ¼å¼åŒ–" class="headerlink" title="ä»£ç æ£€æŸ¥ &amp; è‡ªåŠ¨ä¿®å¤ &amp; è‡ªåŠ¨æ ¼å¼åŒ–"></a>ä»£ç æ£€æŸ¥ &amp; è‡ªåŠ¨ä¿®å¤ &amp; è‡ªåŠ¨æ ¼å¼åŒ–</h3><p><code>package.json</code>çš„<code>scripts</code>ä¸­æ·»åŠ </p><blockquote><p><code>--ext</code>: é…ç½®è¦æ£€æŸ¥æ–‡ä»¶çš„åç¼€<br><code>eslint --ext .js --ext .ts --ext .vue src</code>: åªæ£€æŸ¥srcæ–‡ä»¶å¤¹ä¸‹çš„js&#x2F;ts&#x2F;vueæ–‡ä»¶</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;lint&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src&quot;,</span><br><span class="line">    &quot;lint-fix&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src --fix&quot;,</span><br><span class="line">    &quot;prettier&quot;: &quot;prettier --write .&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»£ç æ£€æŸ¥</span></span><br><span class="line">cnpm run lint</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªåŠ¨ä¿®å¤  tips: éƒ¨åˆ†ä»£ç ä¿®å¤å¯èƒ½ä¼šå½±å“åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ä¼šè‡ªåŠ¨ä¿®å¤ï¼Œä¼šç»™å‡ºæç¤º</span></span><br><span class="line">cnpm run lint-fix</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prettier è‡ªåŠ¨æ ¼å¼åŒ–</span></span><br><span class="line">cnpm run prettier</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿä¸€ä»£ç é£æ ¼"><a href="#ç»Ÿä¸€ä»£ç é£æ ¼" class="headerlink" title="ç»Ÿä¸€ä»£ç é£æ ¼"></a>ç»Ÿä¸€ä»£ç é£æ ¼</h3><blockquote><p>éœ€å®‰è£…æ’ä»¶<code>EditorConfig for VS Code</code></p></blockquote><p><code>.editorconfig</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># https://editorconfig.org</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">insert_final_newline = true</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">insert_final_newline = false</span><br><span class="line">trim_trailing_whitespace = false</span><br></pre></td></tr></table></figure><h2 id="Viteé…ç½®"><a href="#Viteé…ç½®" class="headerlink" title="Viteé…ç½®"></a>Viteé…ç½®</h2><h3 id="é…ç½®è·¯å¾„åˆ«å"><a href="#é…ç½®è·¯å¾„åˆ«å" class="headerlink" title="é…ç½®è·¯å¾„åˆ«å"></a>é…ç½®è·¯å¾„åˆ«å</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="comment">//srcé…ç½®è·¯å¾„</span></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="comment">//@æ›¿ä»£src</span></span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œpathâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…nodeå£°æ˜æ–‡ä»¶</span></span><br><span class="line">cnpm i @types/node --save-dev</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°<code>tsconfig.json</code>é…ç½®æ–‡ä»¶,æ‰¾åˆ°é…ç½®é¡¹<code>compilerOptions </code>æ·»åŠ é…ç½®,è¿™ä¸€æ­¥çš„ä½œç”¨æ˜¯è®© IDE å¯ä»¥å¯¹è·¯å¾„è¿›è¡Œæ™ºèƒ½æç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;baseUrl&quot;: &quot;.&quot;,</span><br><span class="line">&quot;paths&quot;: &#123;</span><br><span class="line">  &quot;@/*&quot;: [</span><br><span class="line">    &quot;src/*&quot;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p><code>.env.dev</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å‘ç¯å¢ƒ</span><br><span class="line">NODE_ENV=&#x27;dev&#x27;</span><br><span class="line"></span><br><span class="line"># ä¸ºäº†é˜²æ­¢æ„å¤–åœ°å°†ä¸€äº›ç¯å¢ƒå˜é‡æ³„æ¼åˆ°å®¢æˆ·ç«¯ï¼Œåªæœ‰ä»¥ VITE_ ä¸ºå‰ç¼€çš„å˜é‡æ‰ä¼šæš´éœ²ç»™ç»è¿‡ vite å¤„ç†çš„ä»£ç ã€‚</span><br><span class="line"># tsä¸­é€šè¿‡`import.meta.env.VITE_APP_BASE_API`å–å€¼</span><br><span class="line">VITE_APP_PORT = 5173</span><br><span class="line">VITE_APP_BASE_API = &#x27;/dev-api&#x27;</span><br></pre></td></tr></table></figure><h3 id="åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜-é…ç½®é¡¹ç›®è¿è¡Œç«¯å£"><a href="#åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜-é…ç½®é¡¹ç›®è¿è¡Œç«¯å£" class="headerlink" title="åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ &amp; é…ç½®é¡¹ç›®è¿è¡Œç«¯å£"></a>åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ &amp; é…ç½®é¡¹ç›®è¿è¡Œç«¯å£</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–`.env`ç¯å¢ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; </span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">      <span class="comment">// host:&#x27;localhost&#x27;ï¼Œ//åªèƒ½æœ¬åœ°è®¿é—®</span></span><br><span class="line">      <span class="attr">host</span>:<span class="string">&#x27;0.0.0.0&#x27;</span>,<span class="comment">//å±€åŸŸç½‘åˆ«äººä¹Ÿå¯è®¿é—®</span></span><br><span class="line">      <span class="attr">port</span>: <span class="title class_">Number</span>(env.<span class="property">VITE_APP_PORT</span>),</span><br><span class="line">      <span class="comment">// è¿è¡Œæ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">      <span class="comment">// open: true,</span></span><br><span class="line">      <span class="attr">proxy</span>: &#123;</span><br><span class="line">        [env.<span class="property">VITE_APP_BASE_API</span>]: &#123;</span><br><span class="line">          <span class="attr">target</span>: <span class="string">&#x27;http://localhost:1218&#x27;</span>,</span><br><span class="line">          <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">rewrite</span>: <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">            path.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^&#x27;</span> + env.<span class="property">VITE_APP_BASE_API</span>), <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥scsså…¨å±€å˜é‡"><a href="#å¼•å…¥scsså…¨å±€å˜é‡" class="headerlink" title="å¼•å…¥scsså…¨å±€å˜é‡"></a>å¼•å…¥scsså…¨å±€å˜é‡</h3><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// å¼•å…¥scsså…¨å±€å˜é‡</span></span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">      <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">        <span class="attr">scss</span>: &#123;</span><br><span class="line">          <span class="attr">additionalData</span>: <span class="string">`@import &quot;@/styles/app-theme.scss&quot;;`</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>src/styles/app-theme.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$dark_main_color</span>: <span class="number">#021b32</span>;</span><br></pre></td></tr></table></figure><h2 id="TypeScripté…ç½®"><a href="#TypeScripté…ç½®" class="headerlink" title="TypeScripté…ç½®"></a>TypeScripté…ç½®</h2><p><code>tsconfig.json</code></p><blockquote><p>é€šè¿‡viteåˆ›å»ºé¡¹ç›®åçš„é»˜è®¤é…ç½®</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;useDefineForClassFields&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Node&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.tsx&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;references&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig.node.json&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ-routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚"><a href="#è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ-routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚" class="headerlink" title="è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ@&#x2F;routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚"></a>è§£å†³ï¼šæ‰¾ä¸åˆ°æ¨¡å—â€œ@&#x2F;routerâ€æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜ã€‚</h3><p><code>tsconfig.json</code>æ–°å¢å¦‚ä¸‹é…ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;src/*&quot;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è§£å†³ï¼štemplateä¸­ä½¿ç”¨-storeæŠ¥é”™"><a href="#è§£å†³ï¼štemplateä¸­ä½¿ç”¨-storeæŠ¥é”™" class="headerlink" title="è§£å†³ï¼štemplateä¸­ä½¿ç”¨$storeæŠ¥é”™"></a>è§£å†³ï¼štemplateä¸­ä½¿ç”¨$storeæŠ¥é”™</h3><p><code>vite-env.d.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Store</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">$store</span>: <span class="title class_">Store</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p><code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;small-tools-web&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.1&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;module&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    // è¿è¡Œ</span><br><span class="line">    &quot;dev&quot;: &quot;vite --mode dev&quot;,</span><br><span class="line">    // æ„å»ºç”Ÿæˆ dist æ–‡ä»¶å¤¹</span><br><span class="line">    &quot;build:prod&quot;: &quot;vue-tsc --noEmit &amp;&amp; vite build --mode prod&quot;,</span><br><span class="line">    // åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªé™æ€ Web æœåŠ¡å™¨ï¼Œå°† dist æ–‡ä»¶å¤¹è¿è¡Œåœ¨ http://localhost:8080</span><br><span class="line">    &quot;preview&quot;: &quot;vite preview --port 8080 --mode prod&quot;,</span><br><span class="line">    // eslintæ£€æŸ¥</span><br><span class="line">    &quot;lint&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src&quot;,</span><br><span class="line">    // eslintè‡ªåŠ¨ä¿®å¤</span><br><span class="line">    &quot;lint-fix&quot;: &quot;eslint --ext .js --ext .ts --ext .vue src --fix&quot;,</span><br><span class="line">    // prettierè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </span><br><span class="line">    &quot;prettier&quot;: &quot;prettier --write .&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;vue&quot;: &quot;^3.2.37&quot;,</span><br><span class="line">    &quot;vue-router&quot;: &quot;^4.1.2&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;@types/node&quot;: &quot;^18.0.5&quot;,</span><br><span class="line">    &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^5.30.6&quot;,</span><br><span class="line">    &quot;@typescript-eslint/parser&quot;: &quot;^5.30.6&quot;,</span><br><span class="line">    &quot;@vitejs/plugin-vue&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;eslint&quot;: &quot;^8.20.0&quot;,</span><br><span class="line">    &quot;eslint-config-prettier&quot;: &quot;^8.5.0&quot;,</span><br><span class="line">    &quot;eslint-plugin-prettier&quot;: &quot;^4.2.1&quot;,</span><br><span class="line">    &quot;eslint-plugin-vue&quot;: &quot;^9.2.0&quot;,</span><br><span class="line">    &quot;prettier&quot;: &quot;^2.7.1&quot;,</span><br><span class="line">    &quot;typescript&quot;: &quot;^4.6.4&quot;,</span><br><span class="line">    &quot;vite&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;vue-tsc&quot;: &quot;^0.38.4&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># devDependencies: é‡Œé¢çš„æ’ä»¶åªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ </span><br><span class="line"># dependencies: éœ€è¦å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„</span><br><span class="line"></span><br><span class="line"># å†™å…¥åˆ° dependencies å¯¹è±¡</span><br><span class="line">npm i module_name -S    =&gt;    npm install module_name --save</span><br><span class="line"></span><br><span class="line"># å†™å…¥åˆ° devDependencies å¯¹è±¡</span><br><span class="line">npm i module_name -D    =&gt;    npm install module_name --save-dev</span><br></pre></td></tr></table></figure><h2 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h2><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass --save-dev</span><br></pre></td></tr></table></figure><h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h2><blockquote><p><a href="https://router.vuejs.org/zh">https://router.vuejs.org/zh</a></p></blockquote><h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></figure><h3 id="å…¥é—¨é…ç½®"><a href="#å…¥é—¨é…ç½®" class="headerlink" title="å…¥é—¨é…ç½®"></a>å…¥é—¨é…ç½®</h3><p><code>src/router/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/error-page/404.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºè·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><p><code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ è·¯ç”± â†“â†“â†“ ******</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>src/views/error-page/404.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;404&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><code>src/App.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- è·¯ç”±å‡ºå£ --&gt;</span><br><span class="line">  &lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt;</span><br><span class="line">  &lt;router-view/&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>è®¿é—®<code>http://ip:ç«¯å£/#/404</code></p><h2 id="Element-Plus"><a href="#Element-Plus" class="headerlink" title="Element-Plus"></a>Element-Plus</h2><blockquote><p><a href="https://element-plus.gitee.io/zh-CN">https://element-plus.gitee.io/zh-CN</a></p></blockquote><h3 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br><span class="line">npm install @element-plus/icons-vue</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ element-plus â†“â†“â†“ ******</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ‰€æœ‰å›¾æ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">    app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="Volar-æ”¯æŒ"><a href="#Volar-æ”¯æŒ" class="headerlink" title="Volar æ”¯æŒ"></a>Volar æ”¯æŒ</h3><p><code>tsconfig.json</code>ä¸­é€šè¿‡<code>compilerOptions.types</code>æŒ‡å®šå…¨å±€ç»„ä»¶ç±»å‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;element-plus/global&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">link</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">class</span>=<span class="string">&quot;is-loading&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:icon</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Check&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Message&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Star&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; <span class="title class_">Check</span>, <span class="title class_">Delete</span>, <span class="title class_">Edit</span>, <span class="title class_">Message</span>, <span class="title class_">Search</span>, <span class="title class_">Star</span>, &#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ ·å¼"><a href="#è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h2><h3 id="è‡ªå®šä¹‰æ ·å¼-1"><a href="#è‡ªå®šä¹‰æ ·å¼-1" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/styles/index.scss&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>src/styles/index.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./element-plus-theme&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#021b32</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/styles/element-plus-theme.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ****** â†“â†“â†“ è¦†ç›– element-plus çš„æ ·å¼ â†“â†“â†“ ******</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰é’®</span></span><br><span class="line"><span class="selector-class">.el-button--text</span> &#123;</span><br><span class="line">  <span class="comment">// background-color: #8f6732 !important; </span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><blockquote><p><a href="https://pinia.vuejs.org/">https://pinia.vuejs.org</a></p></blockquote><h3 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia --save</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// pinia</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line"></span><br><span class="line"><span class="comment">// store</span></span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$store</span> = <span class="title function_">useStore</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p><code>src/store/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useAppStore <span class="keyword">from</span> <span class="string">&#x27;./modules/app&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useStore</span> = (<span class="params"></span>) =&gt; (&#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="title function_">useAppStore</span>()</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore;</span><br></pre></td></tr></table></figure><p><code>src/store/modules/app.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/app&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useAppStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;app&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: (): <span class="function"><span class="params">AppState</span> =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="variable language_">localStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>) || <span class="string">&#x27;Small Tools&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="title function_">setName</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>, name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useAppStore;</span><br></pre></td></tr></table></figure><p><code>src/utils/storage.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * window.localStorage =&gt; æµè§ˆå™¨æ°¸ä¹…å­˜å‚¨ï¼Œç”¨äºé•¿ä¹…ä¿å­˜æ•´ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œä¿å­˜çš„æ•°æ®æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œç›´åˆ°æ‰‹åŠ¨å»åˆ é™¤ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable language_">localStorage</span> = &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: <span class="built_in">string</span>, val: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(val));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">json</span>: <span class="built_in">any</span> = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * window.sessionStorage =&gt; æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®ä¿å­˜åœ¨å½“å‰ä¼šè¯ä¸­ï¼Œåœ¨å…³é—­çª—å£æˆ–æ ‡ç­¾é¡µä¹‹åå°†ä¼šåˆ é™¤è¿™äº›æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable language_">sessionStorage</span> = &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key: <span class="built_in">string</span>, val: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(val));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">json</span>: <span class="built_in">any</span> = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é¡µé¢å¼•ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; app.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;store: &#123;&#123; $store.app.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;el-button @click=&quot;changeStore(&#x27;666&#x27;)&quot;&gt;change store&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">import useStore from &quot;@/store&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; app &#125; = useStore()</span><br><span class="line">// const name = ref(app.name)</span><br><span class="line">// å“åº”å¼</span><br><span class="line">const &#123; name: name &#125; = storeToRefs(app)</span><br><span class="line"></span><br><span class="line">function changeStore(value: string) &#123;</span><br><span class="line">    app.setName(value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="Axioså’ŒAPIå°è£…"><a href="#Axioså’ŒAPIå°è£…" class="headerlink" title="Axioså’ŒAPIå°è£…"></a>Axioså’ŒAPIå°è£…</h2><blockquote><p><a href="http://www.axios-js.com/zh-cn/docs">http://www.axios-js.com/zh-cn/docs</a></p></blockquote><h3 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install axios --save</span><br></pre></td></tr></table></figure><h3 id="axioså·¥å…·å°è£…"><a href="#axioså·¥å…·å°è£…" class="headerlink" title="axioså·¥å…·å°è£…"></a>axioså·¥å…·å°è£…</h3><p><code>src/utils/request.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; <span class="title class_">AxiosRequestConfig</span>, <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span>, <span class="title class_">ElMessageBox</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_APP_BASE_API</span>,</span><br><span class="line">  <span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼š50s</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">50000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span> &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!config.<span class="property">headers</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">        <span class="string">`Expected &#x27;config&#x27; and &#x27;config.headers&#x27; not to be undefined`</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="keyword">if</span> (user.<span class="property">token</span>) &#123;</span><br><span class="line">      <span class="comment">// æˆæƒè®¤è¯</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">Authorization</span> = user.<span class="property">token</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç§Ÿæˆ·ID</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;TENANT_ID&#x27;</span>] = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = response.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; code, msg &#125; = res;</span><br><span class="line">    <span class="keyword">if</span> (code === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// tokenè¿‡æœŸ</span></span><br><span class="line">      <span class="keyword">if</span> (code === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;æ‚¨çš„ç™»å½•è´¦å·å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•&quot;</span>, &#123;</span><br><span class="line">          <span class="attr">confirmButtonText</span>: <span class="string">&quot;å†æ¬¡ç™»å½•&quot;</span>,</span><br><span class="line">          <span class="attr">cancelButtonText</span>: <span class="string">&quot;å–æ¶ˆ&quot;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span></span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ¸…é™¤æµè§ˆå™¨å…¨éƒ¨ç¼“å­˜</span></span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">          <span class="comment">// è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">          <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">          location.<span class="title function_">reload</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">          <span class="attr">message</span>: msg || <span class="string">&#x27;ç³»ç»Ÿå‡ºé”™&#x27;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(msg || <span class="string">&#x27;Error&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; msg &#125; = error.<span class="property">response</span>.<span class="property">data</span>;</span><br><span class="line">    <span class="comment">// æœªè®¤è¯</span></span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;æ‚¨çš„ç™»å½•è´¦å·å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&quot;å†æ¬¡ç™»å½•&quot;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>: <span class="string">&quot;å–æ¶ˆ&quot;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span></span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ¸…é™¤æµè§ˆå™¨å…¨éƒ¨ç¼“å­˜</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="comment">// è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">        location.<span class="title function_">reload</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•!&quot;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(msg || <span class="string">&#x27;Error&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure><h3 id="apiå°è£…"><a href="#apiå°è£…" class="headerlink" title="apiå°è£…"></a>apiå°è£…</h3><p>&#96;src&#x2F;api&#x2F;</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¿åˆ°æ‰€æœ‰api</span></span><br><span class="line"><span class="keyword">const</span> modulesFiles = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">globEager</span>(<span class="string">&#x27;./*/*.*&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="attr">modules</span>: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> modulesFiles) &#123;</span><br><span class="line">  <span class="keyword">const</span> moduleName = key.<span class="title function_">replace</span>(<span class="regexp">/(.*\/)*([^.]+).*/gi</span>, <span class="string">&#x27;$2&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">value</span>: <span class="built_in">any</span> = modulesFiles[key];</span><br><span class="line">  <span class="keyword">if</span> (value.<span class="property">default</span>) &#123;</span><br><span class="line">    <span class="comment">// å…¼å®¹js</span></span><br><span class="line">    modules[moduleName] = value.<span class="property">default</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å…¼å®¹ts</span></span><br><span class="line">    modules[moduleName] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(666, modules);</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> modules;</span><br></pre></td></tr></table></figure><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®å…¨å±€api</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span> = api;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="apiè°ƒç”¨demo"><a href="#apiè°ƒç”¨demo" class="headerlink" title="apiè°ƒç”¨demo"></a>apiè°ƒç”¨demo</h3><p><code>src/api/system/sys_login.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Captcha</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/api/system/login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosPromise</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–éªŒè¯ç </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCaptcha</span>(<span class="params"></span>): <span class="title class_">AxiosPromise</span>&lt;<span class="title class_">Captcha</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/captcha?t=&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>().<span class="title function_">toString</span>(),</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/types/api/system/login.d.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯ç ç±»å‹å£°æ˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Captcha</span> &#123;</span><br><span class="line">    <span class="attr">img</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">uuid</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/views/login/index.vue</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ç»„ä»¶å®ä¾‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; proxy &#125;: any = <span class="title function_">getCurrentInstance</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// è·å–éªŒè¯ç </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleCaptcha</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> res = <span class="keyword">await</span> proxy.<span class="property">$api</span>.<span class="property">sys_login</span>.<span class="title function_">getCaptcha</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res:&#x27;</span>, res);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">handleCaptcha</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><h3 id="ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­"><a href="#ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­" class="headerlink" title="ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­"></a>ç”¨æˆ·ç™»å½•æˆåŠŸåå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°storeä¸­</h3><p><code>src/views/login/index.vue</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleLogin</span>(<span class="params"></span>) &#123;</span><br><span class="line">  loginFormRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid: <span class="built_in">boolean</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      state.<span class="property">loading</span> = <span class="literal">true</span>;</span><br><span class="line">      user.<span class="title function_">login</span>(state.<span class="property">loginForm</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: state.<span class="property">redirect</span> || <span class="string">&#x27;/&#x27;</span>, <span class="attr">query</span>: state.<span class="property">otherQuery</span> &#125;);</span><br><span class="line">        state.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        state.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="title function_">handleCaptchaGenerate</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p><code>src/store/modules/user.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LoginFormData</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/api/system/login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/user&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable language_">localStorage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; login, logout &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/system/sys_login&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getUserPerm &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/system/user&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resetRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">UserState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">userId</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">openId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="variable language_">localStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">nickname</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">avatarUrl</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">roleNames</span>: [],</span><br><span class="line">    <span class="attr">permissionTreeList</span>: [],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">RESET_STATE</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$reset();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç™»å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">login</span>(<span class="params">loginData: LoginFormData</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; username, password, code, uuid &#125; = loginData;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">login</span>(&#123;</span><br><span class="line">          <span class="attr">username</span>: username.<span class="title function_">trim</span>(),</span><br><span class="line">          <span class="attr">password</span>: password,</span><br><span class="line">          <span class="attr">grant_type</span>: <span class="string">&#x27;captcha&#x27;</span>,</span><br><span class="line">          <span class="attr">code</span>: code,</span><br><span class="line">          <span class="attr">uuid</span>: uuid,</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; tokenType, value &#125; = response.<span class="property">data</span>;</span><br><span class="line">          <span class="keyword">const</span> token = tokenType + <span class="string">&#x27; &#x27;</span> + value;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">set</span>(<span class="string">&#x27;token&#x27;</span>, token);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">token</span> = token;</span><br><span class="line">          <span class="title function_">resolve</span>(token);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ˜µç§°ã€å¤´åƒã€è§’è‰²é›†åˆã€æƒé™é›†åˆï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getUserInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getUserPerm</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; data &#125;: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="string">&#x27;Verification failed, please Login again.&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">const</span> &#123; userId, openId, nickname, avatarUrl, roleNames, permissionTreeList &#125; = data;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">userId</span> = userId;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">openId</span> = openId;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">nickname</span> = nickname;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">avatarUrl</span> = avatarUrl;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">roleNames</span> = roleNames;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">permissionTreeList</span> = permissionTreeList;</span><br><span class="line">          <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  æ³¨é”€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">logout</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">RESET_STATE</span>();</span><br><span class="line">          <span class="title function_">resetRouter</span>();</span><br><span class="line">          <span class="title function_">resolve</span>(<span class="literal">null</span>);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…é™¤ Token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">resetToken</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">remove</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">RESET_STATE</span>();</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="literal">null</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useUserStore;</span><br></pre></td></tr></table></figure><p><code>src/store/modules/permission.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PermissionState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/store/permission&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RouteRecordRaw</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; constantRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modules = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">glob</span>(<span class="string">&#x27;../../views/**/**.vue&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">Layout</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;@/layout/index.vue&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">parentView</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;@/layout/parentView.vue&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">filterAsyncRoutes</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  routes: RouteRecordRaw[],</span></span><br><span class="line"><span class="params">  roleNames: <span class="built_in">string</span>[]</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">res</span>: <span class="title class_">RouteRecordRaw</span>[] = [];</span><br><span class="line">  routes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> tmp = &#123; ...route &#125; <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">if</span> (tmp.<span class="property">component</span> === <span class="string">&#x27;Layout&#x27;</span>) &#123;</span><br><span class="line">      tmp.<span class="property">component</span> = <span class="title class_">Layout</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tmp.<span class="property">component</span> === <span class="string">&#x27;parentView&#x27;</span>) &#123;</span><br><span class="line">      tmp.<span class="property">component</span> = parentView</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> component = modules[<span class="string">`../../views/<span class="subst">$&#123;tmp.component&#125;</span>.vue`</span>] <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">      <span class="keyword">if</span> (component) &#123;</span><br><span class="line">        tmp.<span class="property">component</span> = modules[<span class="string">`../../views/<span class="subst">$&#123;tmp.component&#125;</span>.vue`</span>];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tmp.<span class="property">component</span> = modules[<span class="string">`../../views/error-page/404.vue`</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">push</span>(tmp);</span><br><span class="line">    <span class="keyword">if</span> (tmp.<span class="property">children</span>) &#123;</span><br><span class="line">      tmp.<span class="property">children</span> = <span class="title function_">filterAsyncRoutes</span>(tmp.<span class="property">children</span>, roleNames);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¾§è¾¹æ æƒé™è·¯ç”±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> usePermissionStore = <span class="title function_">defineStore</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;permission&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">PermissionState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">routes</span>: [],</span><br><span class="line">    <span class="attr">addRoutes</span>: [],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">setRoutes</span>(<span class="params">routes: RouteRecordRaw[]</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">addRoutes</span> = routes;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">routes</span> = constantRoutes.<span class="title function_">concat</span>(routes);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">generateRoutes</span>(<span class="params">roleNames: <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">      <span class="keyword">const</span> accessedRoutes = <span class="title function_">filterAsyncRoutes</span>(user.<span class="property">permissionTreeList</span>, roleNames);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setRoutes</span>(accessedRoutes);</span><br><span class="line">        <span class="title function_">resolve</span>(accessedRoutes);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> usePermissionStore;</span><br></pre></td></tr></table></figure><h3 id="router"><a href="#router" class="headerlink" title="router"></a>router</h3><p><code>src/router/index.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createRouter, createWebHashHistory, RouteRecordRaw &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">// é™æ€è·¯ç”±</span><br><span class="line">export const constantRoutes: Array&lt;RouteRecordRaw&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/login&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/login/index.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/test&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/test/index.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/404&#x27;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/error-page/404.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºè·¯ç”±</span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">    history: createWebHashHistory(),</span><br><span class="line">    routes: constantRoutes as RouteRecordRaw[],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// é‡ç½®è·¯ç”±</span><br><span class="line">export function resetRouter() &#123;</span><br><span class="line">    const &#123; permission &#125; = useStore();</span><br><span class="line">    permission.routes.forEach((route) =&gt; &#123;</span><br><span class="line">        const name = route.name;</span><br><span class="line">        if (name &amp;&amp; router.hasRoute(name)) &#123;</span><br><span class="line">            router.removeRoute(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure><h3 id="åˆ·æ–°è·¯ç”±æ—¶æƒé™"><a href="#åˆ·æ–°è·¯ç”±æ—¶æƒé™" class="headerlink" title="åˆ·æ–°è·¯ç”±æ—¶æƒé™"></a>åˆ·æ–°è·¯ç”±æ—¶æƒé™</h3><p><code>permission.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NProgress</span> <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span>;</span><br><span class="line"><span class="title class_">NProgress</span>.<span class="title function_">configure</span>(&#123; <span class="attr">showSpinner</span>: <span class="literal">false</span> &#125;); <span class="comment">// è¿›åº¦ç¯æ˜¾ç¤º/éšè—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™½åå•è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/auth-redirect&#x27;</span>];</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">start</span>();</span><br><span class="line">  <span class="keyword">const</span> &#123; user, permission &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">  <span class="keyword">const</span> hasToken = user.<span class="property">token</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasToken) &#123;</span><br><span class="line">    <span class="comment">// ç™»å½•æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> hasGetUserInfo = user.<span class="property">roleNames</span>.<span class="property">length</span> &gt; <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">if</span> (hasGetUserInfo) &#123;</span><br><span class="line">        <span class="keyword">if</span> (to.<span class="property">matched</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">from</span>.<span class="property">name</span> ? <span class="title function_">next</span>(&#123; <span class="attr">name</span>: <span class="keyword">from</span>.<span class="property">name</span> <span class="keyword">as</span> <span class="built_in">any</span> &#125;) : <span class="title function_">next</span>(<span class="string">&#x27;/401&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">next</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">await</span> user.<span class="title function_">getUserInfo</span>();</span><br><span class="line">          <span class="keyword">const</span> roleNames = user.<span class="property">roleNames</span>;</span><br><span class="line">          <span class="keyword">const</span> <span class="attr">accessRoutes</span>: <span class="built_in">any</span> = <span class="keyword">await</span> permission.<span class="title function_">generateRoutes</span>(roleNames);</span><br><span class="line">          accessRoutes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">            router.<span class="title function_">addRoute</span>(route);</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="title function_">next</span>(&#123; ...to, <span class="attr">replace</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="comment">// ç§»é™¤ token å¹¶è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">          <span class="keyword">await</span> user.<span class="title function_">resetToken</span>();</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>((error <span class="keyword">as</span> <span class="built_in">any</span>) || <span class="string">&#x27;Has Error&#x27;</span>);</span><br><span class="line">          <span class="title function_">next</span>(<span class="string">`/login?redirect=<span class="subst">$&#123;to.path&#125;</span>`</span>);</span><br><span class="line">          <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æœªç™»å½•å¯ä»¥è®¿é—®ç™½åå•é¡µé¢(ç™»å½•é¡µé¢)</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">indexOf</span>(to.<span class="property">path</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">`/login?redirect=<span class="subst">$&#123;to.path&#125;</span>`</span>);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±æƒé™</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/permission&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€è·¯ç”±å¸ƒå±€"><a href="#åŠ¨æ€è·¯ç”±å¸ƒå±€" class="headerlink" title="åŠ¨æ€è·¯ç”±å¸ƒå±€"></a>åŠ¨æ€è·¯ç”±å¸ƒå±€</h2><h3 id="åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢"><a href="#åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢" class="headerlink" title="åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢"></a>åŠ¨æ€è·¯ç”±å¸ƒå±€ç›¸å…³é¡µé¢</h3><p>å…·ä½“è§æºç <code>src/layout</code>éƒ¨åˆ†</p><p><code>src/layout/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;classObj&quot; class=&quot;app-wrapper&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;device === &#x27;mobile&#x27; &amp;&amp; sidebar.opened&quot; class=&quot;drawer-bg&quot; @click=&quot;handleClickOutside&quot; /&gt;</span><br><span class="line">    &lt;Sidebar class=&quot;sidebar-container&quot; /&gt;</span><br><span class="line">    &lt;div :class=&quot;&#123; hasTagsView: needTagsView &#125;&quot; class=&quot;main-container&quot;&gt;</span><br><span class="line">      &lt;div :class=&quot;&#123; &#x27;fixed-header&#x27;: true &#125;&quot;&gt;</span><br><span class="line">        &lt;navbar /&gt;</span><br><span class="line">        &lt;tags-view v-if=&quot;needTagsView&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;app-main /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, watchEffect &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useWindowSize &#125; from &#x27;@vueuse/core&#x27;;</span><br><span class="line">import &#123; AppMain, Navbar, TagsView &#125; from &#x27;./components/index&#x27;;</span><br><span class="line">import Sidebar from &#x27;./components/Sidebar/index.vue&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const &#123; width &#125; = useWindowSize();</span><br><span class="line">const WIDTH = 992;</span><br><span class="line"></span><br><span class="line">const &#123; app, setting &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line">const needTagsView = computed(() =&gt; setting.tagsView);</span><br><span class="line"></span><br><span class="line">const classObj = computed(() =&gt; (&#123;</span><br><span class="line">  hideSidebar: !sidebar.value.opened,</span><br><span class="line">  openSidebar: sidebar.value.opened,</span><br><span class="line">  withoutAnimation: sidebar.value.withoutAnimation,</span><br><span class="line">  mobile: device.value === &#x27;mobile&#x27;,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  if (width.value &lt; WIDTH) &#123;</span><br><span class="line">    app.toggleDevice(&#x27;mobile&#x27;);</span><br><span class="line">    app.closeSideBar(true);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    app.toggleDevice(&#x27;desktop&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function handleClickOutside() &#123;</span><br><span class="line">  app.closeSideBar(false);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">@import &#x27;@/styles/mixin.scss&#x27;;</span><br><span class="line">@import &#x27;@/styles/variables.module.scss&#x27;;</span><br><span class="line"></span><br><span class="line">.app-wrapper &#123;</span><br><span class="line">  @include clearfix;</span><br><span class="line">  position: relative;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line"></span><br><span class="line">  &amp;.mobile.openSidebar &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.drawer-bg &#123;</span><br><span class="line">  background: #000;</span><br><span class="line">  opacity: 0.3;</span><br><span class="line">  width: 100%;</span><br><span class="line">  top: 0;</span><br><span class="line">  height: 100%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: 999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fixed-header &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  z-index: 9;</span><br><span class="line">  width: calc(100% - #&#123;$sideBarWidth&#125;);</span><br><span class="line">  transition: width 0.28s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hideSidebar .fixed-header &#123;</span><br><span class="line">  width: calc(100% - 54px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mobile .fixed-header &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/parentView.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;ParentView&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>src/layout/components/AppMain.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class=&quot;app-main&quot;&gt;</span><br><span class="line">    &lt;router-view v-slot=&quot;&#123; Component, route &#125;&quot;&gt;</span><br><span class="line">      &lt;transition name=&quot;router-fade&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">        &lt;keep-alive :include=&quot;cachedViews&quot;&gt;</span><br><span class="line">          &lt;component :is=&quot;Component&quot; :key=&quot;route.fullPath&quot; /&gt;</span><br><span class="line">        &lt;/keep-alive&gt;</span><br><span class="line">      &lt;/transition&gt;</span><br><span class="line">    &lt;/router-view&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const cachedViews = computed(() =&gt; tagsView.cachedViews);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.app-main &#123;</span><br><span class="line">  min-height: calc(100vh - 50px);</span><br><span class="line">  width: 100%;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fixed-header+.app-main &#123;</span><br><span class="line">  padding-top: 50px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hasTagsView &#123;</span><br><span class="line">  .app-main &#123;</span><br><span class="line">    min-height: calc(100vh - 84px);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .fixed-header+.app-main &#123;</span><br><span class="line">    padding-top: 84px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.el-popup-parent--hidden &#123;</span><br><span class="line">  .fixed-header &#123;</span><br><span class="line">    padding-right: 15px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Navbar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Navbar.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">AppMain</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./AppMain.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">TagsView</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./TagsView/index.vue&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Navbar.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;navbar&quot;&gt;</span><br><span class="line">    &lt;hamburger id=&quot;hamburger-container&quot; :is-active=&quot;sidebar.opened&quot; class=&quot;hamburger-container&quot;</span><br><span class="line">      @toggleClick=&quot;toggleSideBar&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;breadcrumb id=&quot;breadcrumb-container&quot; class=&quot;breadcrumb-container&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;right-menu&quot;&gt;</span><br><span class="line">      &lt;el-dropdown class=&quot;avatar-container right-menu-item hover-effect&quot; trigger=&quot;click&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;el-avatar :src=&quot;avatarUrl&quot; /&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; nickname &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;CaretBottom style=&quot;width: 0.6em; height: 0.6em; margin-left: 5px&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;template #dropdown&gt;</span><br><span class="line">          &lt;el-dropdown-menu&gt;</span><br><span class="line">            &lt;router-link to=&quot;/&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;é¦–é¡µ&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/system/personal-center&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;ä¸ªäººä¸­å¿ƒ&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;a target=&quot;_blank&quot; href=&quot;https://gitee.com/zhengqingya&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;Gitee&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;router-link to=&quot;/other/anonymity&quot;&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;æå»ºè®®&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;el-dropdown-item divided @click=&quot;logout&quot;&gt; é€€å‡º &lt;/el-dropdown-item&gt;</span><br><span class="line">          &lt;/el-dropdown-menu&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-dropdown&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRoute, useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; ElMessageBox &#125; from &#x27;element-plus&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶ä¾èµ–</span><br><span class="line">import Breadcrumb from &#x27;@/components/Breadcrumb/index.vue&#x27;;</span><br><span class="line">import Hamburger from &#x27;@/components/Hamburger/index.vue&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; app, user, tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line">const avatarUrl = computed(() =&gt; user.avatarUrl);</span><br><span class="line">const nickname = computed(() =&gt; user.nickname);</span><br><span class="line"></span><br><span class="line">function toggleSideBar() &#123;</span><br><span class="line">  app.toggleSidebar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function logout() &#123;</span><br><span class="line">  ElMessageBox.confirm(&#x27;ç¡®å®šæ³¨é”€å¹¶é€€å‡ºç³»ç»Ÿå—ï¼Ÿ&#x27;, &#x27;æç¤º&#x27;, &#123;</span><br><span class="line">    confirmButtonText: &#x27;ç¡®å®š&#x27;,</span><br><span class="line">    cancelButtonText: &#x27;å–æ¶ˆ&#x27;,</span><br><span class="line">    type: &#x27;warning&#x27;,</span><br><span class="line">  &#125;).then(() =&gt; &#123;</span><br><span class="line">    user</span><br><span class="line">      .logout()</span><br><span class="line">      .then(() =&gt; &#123;</span><br><span class="line">        tagsView.delAllViews();</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(() =&gt; &#123;</span><br><span class="line">        router.push(`/login?redirect=$&#123;route.fullPath&#125;`);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">ul &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.navbar &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  position: relative;</span><br><span class="line">  background: $dark_main_color;</span><br><span class="line">  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);</span><br><span class="line"></span><br><span class="line">  .hamburger-container &#123;</span><br><span class="line">    line-height: 46px;</span><br><span class="line">    height: 100%;</span><br><span class="line">    float: left;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    transition: background 0.3s;</span><br><span class="line">    -webkit-tap-highlight-color: transparent;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      background: rgba(0, 0, 0, 0.025);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .breadcrumb-container &#123;</span><br><span class="line">    float: left;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .right-menu &#123;</span><br><span class="line">    float: right;</span><br><span class="line">    height: 100%;</span><br><span class="line">    line-height: 50px;</span><br><span class="line"></span><br><span class="line">    &amp;:focus &#123;</span><br><span class="line">      outline: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .right-menu-item &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      padding: 0 8px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      color: #5a5e66;</span><br><span class="line">      vertical-align: text-bottom;</span><br><span class="line"></span><br><span class="line">      &amp;.hover-effect &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        transition: background 0.3s;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          background: rgba(0, 0, 0, 0.025);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .avatar-container &#123;</span><br><span class="line">      margin-right: 60px;</span><br><span class="line"></span><br><span class="line">      .user-info &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        position: absolute;</span><br><span class="line">        right: -50px;</span><br><span class="line">        top: 15px;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;&#123; &#x27;has-logo&#x27;: true &#125;&quot;&gt;</span><br><span class="line">    &lt;logo :collapse=&quot;isCollapse&quot; /&gt;</span><br><span class="line">    &lt;el-scrollbar wrap-class=&quot;scrollbar-wrapper&quot;&gt;</span><br><span class="line">      &lt;el-menu :default-active=&quot;activeMenu&quot; :collapse=&quot;isCollapse&quot; :background-color=&quot;variables.menuBg&quot;</span><br><span class="line">        :text-color=&quot;variables.menuText&quot; :active-text-color=&quot;variables.menuActiveText&quot; :unique-opened=&quot;true&quot;</span><br><span class="line">        :collapse-transition=&quot;false&quot; mode=&quot;vertical&quot;&gt;</span><br><span class="line">        &lt;sidebar-item v-for=&quot;route in routes&quot; :item=&quot;route&quot; :key=&quot;route.path&quot; :base-path=&quot;route.path&quot; /&gt;</span><br><span class="line">      &lt;/el-menu&gt;</span><br><span class="line">    &lt;/el-scrollbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">import SidebarItem from &#x27;./SidebarItem.vue&#x27;;</span><br><span class="line">import Logo from &#x27;./Logo.vue&#x27;;</span><br><span class="line">import variables from &#x27;@/styles/variables.module.scss&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; permission, app &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line">const routes = computed(() =&gt; permission.routes);</span><br><span class="line">const isCollapse = computed(() =&gt; !app.sidebar.opened);</span><br><span class="line"></span><br><span class="line">const activeMenu = computed(() =&gt; &#123;</span><br><span class="line">  const &#123; meta, path &#125; = route;</span><br><span class="line">  // if set path, the sidebar will highlight the path you set</span><br><span class="line">  if (meta.activeMenu) &#123;</span><br><span class="line">    return meta.activeMenu as string;</span><br><span class="line">  &#125;</span><br><span class="line">  return path;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/Link.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a v-if=&quot;isExternal(to)&quot; :href=&quot;to&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">  &lt;div v-else @click=&quot;push&quot;&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, defineComponent &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; isExternal &#125; from &#x27;@/utils/validate&#x27;;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; app &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const sidebar = computed(() =&gt; app.sidebar);</span><br><span class="line">const device = computed(() =&gt; app.device);</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    to: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    const router = useRouter();</span><br><span class="line">    const push = () =&gt; &#123;</span><br><span class="line">      if (device.value === &#x27;mobile&#x27; &amp;&amp; sidebar.value.opened == true) &#123;</span><br><span class="line">        app.closeSideBar(false);</span><br><span class="line">      &#125;</span><br><span class="line">      router.push(props.to).catch((err) =&gt; &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      push,</span><br><span class="line">      isExternal,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/Logo.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;sidebar-logo-container&quot; :class=&quot;&#123; collapse: isCollapse &#125;&quot;&gt;</span><br><span class="line">    &lt;transition name=&quot;sidebarLogoFade&quot;&gt;</span><br><span class="line">      &lt;router-link</span><br><span class="line">        v-if=&quot;collapse&quot;</span><br><span class="line">        key=&quot;collapse&quot;</span><br><span class="line">        class=&quot;sidebar-logo-link&quot;</span><br><span class="line">        to=&quot;/&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;img v-if=&quot;logo&quot; :src=&quot;logo&quot; class=&quot;sidebar-logo&quot; /&gt;</span><br><span class="line">        &lt;h1 v-else class=&quot;sidebar-title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">      &lt;router-link v-else key=&quot;expand&quot; class=&quot;sidebar-logo-link&quot; to=&quot;/&quot;&gt;</span><br><span class="line">        &lt;img v-if=&quot;logo&quot; :src=&quot;logo&quot; class=&quot;sidebar-logo&quot; /&gt;</span><br><span class="line">        &lt;h1 class=&quot;sidebar-title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  collapse: &#123;</span><br><span class="line">    type: Boolean,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const state = reactive(&#123;</span><br><span class="line">  isCollapse: props.collapse,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const &#123; isCollapse &#125; = toRefs(state);</span><br><span class="line"></span><br><span class="line">const title = ref(&#x27;Small Tools&#x27;);</span><br><span class="line">const logo = ref(</span><br><span class="line">  &#x27;https://wpimg.wallstcn.com/69a1c46c-eb1c-4b46-8bd4-e9e686ef5251.png&#x27;</span><br><span class="line">);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.sidebarLogoFade-enter-active &#123;</span><br><span class="line">  transition: opacity 1.5s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebarLogoFade-enter,</span><br><span class="line">.sidebarLogoFade-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-logo-container &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  line-height: 50px;</span><br><span class="line">  background: #00284c;</span><br><span class="line">  text-align: center;</span><br><span class="line">  overflow: hidden;</span><br><span class="line"></span><br><span class="line">  &amp; .sidebar-logo-link &#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    width: 100%;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-logo &#123;</span><br><span class="line">      width: 32px;</span><br><span class="line">      height: 32px;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-title &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      margin: 0;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-weight: 600;</span><br><span class="line">      line-height: 50px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      font-family: Avenir, Helvetica Neue, Arial, Helvetica, sans-serif;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      margin-left: 12px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;.collapse &#123;</span><br><span class="line">    .sidebar-logo &#123;</span><br><span class="line">      margin-right: 0px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/Sidebar/SidebarItem.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if=&quot;!item.hidden&quot;&gt;</span><br><span class="line">    &lt;template v-if=&quot;</span><br><span class="line">      hasOneShowingChild(item.children, item) &amp;&amp;</span><br><span class="line">      (!onlyOneChild.children || onlyOneChild.noShowingChildren) &amp;&amp;</span><br><span class="line">      (!item.meta || !item.meta.alwaysShow)</span><br><span class="line">    &quot;&gt;</span><br><span class="line">      &lt;app-link v-if=&quot;onlyOneChild.meta&quot; :to=&quot;resolvePath(onlyOneChild.path)&quot;&gt;</span><br><span class="line">        &lt;el-menu-item :index=&quot;resolvePath(onlyOneChild.path)&quot; :class=&quot;&#123; &#x27;submenu-title-noDropdown&#x27;: !isNest &#125;&quot;&gt;</span><br><span class="line">          &lt;el-icon v-if=&quot;onlyOneChild.meta &amp;&amp; onlyOneChild.meta.icon&quot;&gt;</span><br><span class="line">            &lt;component :is=&quot;onlyOneChild.meta.icon&quot; /&gt;</span><br><span class="line">          &lt;/el-icon&gt;</span><br><span class="line">          &lt;template #title&gt;</span><br><span class="line">            &#123;&#123; onlyOneChild.meta.title &#125;&#125;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">      &lt;/app-link&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-sub-menu v-else :index=&quot;resolvePath(item.path)&quot;&gt;</span><br><span class="line">      &lt;template #title&gt;</span><br><span class="line">        &lt;el-icon v-if=&quot;item.meta &amp;&amp; item.meta.icon&quot;&gt;</span><br><span class="line">          &lt;component :is=&quot;item.meta.icon&quot; /&gt;</span><br><span class="line">        &lt;/el-icon&gt;</span><br><span class="line">        &lt;span v-if=&quot;item.meta &amp;&amp; item.meta.title&quot;&gt;&#123;&#123;</span><br><span class="line">            item.meta.title</span><br><span class="line">        &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;sidebar-item v-for=&quot;child in item.children&quot; :key=&quot;child.path&quot; :item=&quot;child&quot; :is-nest=&quot;true&quot;</span><br><span class="line">        :base-path=&quot;resolvePath(child.path)&quot; class=&quot;nest-menu&quot; /&gt;</span><br><span class="line">    &lt;/el-sub-menu&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">import path from &#x27;path-browserify&#x27;;</span><br><span class="line">import &#123; isExternal &#125; from &#x27;@/utils/validate&#x27;;</span><br><span class="line">import AppLink from &#x27;./Link.vue&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  item: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  isNest: &#123;</span><br><span class="line">    type: Boolean,</span><br><span class="line">    required: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  basePath: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const onlyOneChild = ref();</span><br><span class="line"></span><br><span class="line">function hasOneShowingChild(children = [] as any, parent: any) &#123;</span><br><span class="line">  if (!children) &#123;</span><br><span class="line">    children = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const showingChildren = children.filter((item: any) =&gt; &#123;</span><br><span class="line">    if (item.meta &amp;&amp; item.meta.hidden) &#123;</span><br><span class="line">      return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // Temp set(will be used if only has one showing child)</span><br><span class="line">      onlyOneChild.value = item;</span><br><span class="line">      return true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // When there is only one child router, the child router is displayed by default</span><br><span class="line">  if (showingChildren.length === 1) &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Show parent if there are no child router to display</span><br><span class="line">  if (showingChildren.length === 0) &#123;</span><br><span class="line">    onlyOneChild.value = &#123; ...parent, path: &#x27;&#x27;, noShowingChildren: true &#125;;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function resolvePath(routePath: string) &#123;</span><br><span class="line">  if (isExternal(routePath)) &#123;</span><br><span class="line">    return routePath;</span><br><span class="line">  &#125;</span><br><span class="line">  if (isExternal(props.basePath)) &#123;</span><br><span class="line">    return props.basePath;</span><br><span class="line">  &#125;</span><br><span class="line">  return path.resolve(props.basePath, routePath);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/TagsView/index.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tags-view__container&quot;&gt;</span><br><span class="line">    &lt;scroll-pane ref=&quot;scrollPaneRef&quot; class=&quot;tags-view__wrapper&quot; @scroll=&quot;handleScroll&quot;&gt;</span><br><span class="line">      &lt;router-link v-for=&quot;tag in visitedViews&quot; :key=&quot;tag.path&quot; :data-path=&quot;tag.path&quot;</span><br><span class="line">        :class=&quot;isActive(tag) ? &#x27;active&#x27; : &#x27;&#x27;&quot; :to=&quot;&#123; path: tag.path, query: tag.query &#125;&quot; class=&quot;tags-view__item&quot;</span><br><span class="line">        @click.middle=&quot;!isAffix(tag) ? closeSelectedTag(tag) : &#x27;&#x27;&quot; @contextmenu.prevent=&quot;openMenu(tag, $event)&quot;&gt;</span><br><span class="line">        &#123;&#123; tag.meta.title &#125;&#125;</span><br><span class="line">        &lt;span v-if=&quot;!isAffix(tag)&quot; class=&quot;icon-close&quot; @click.prevent.stop=&quot;closeSelectedTag(tag)&quot;&gt;</span><br><span class="line">          &lt;svg-icon icon-class=&quot;close&quot; /&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/scroll-pane&gt;</span><br><span class="line">    &lt;ul v-show=&quot;visible&quot; :style=&quot;&#123; left: left + &#x27;px&#x27;, top: top + &#x27;px&#x27; &#125;&quot; class=&quot;tags-view__menu&quot;&gt;</span><br><span class="line">      &lt;li @click=&quot;refreshSelectedTag(selectedTag)&quot;&gt;</span><br><span class="line">        åˆ·æ–°</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isAffix(selectedTag)&quot; @click=&quot;closeSelectedTag(selectedTag)&quot;&gt;</span><br><span class="line">        å…³é—­</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li @click=&quot;closeOtherTags&quot;&gt;</span><br><span class="line">        å…³é—­å…¶å®ƒ</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isFirstView()&quot; @click=&quot;closeLeftTags&quot;&gt;</span><br><span class="line">        å…³é—­å·¦ä¾§</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-if=&quot;!isLastView()&quot; @click=&quot;closeRightTags&quot;&gt;</span><br><span class="line">        å…³é—­å³ä¾§</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li @click=&quot;closeAllTags(selectedTag)&quot;&gt;</span><br><span class="line">        å…³é—­æ‰€æœ‰</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  computed,</span><br><span class="line">  getCurrentInstance,</span><br><span class="line">  nextTick,</span><br><span class="line">  ref,</span><br><span class="line">  watch,</span><br><span class="line">  onMounted,</span><br><span class="line">  ComponentInternalInstance,</span><br><span class="line">&#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">import path from &#x27;path-browserify&#x27;;</span><br><span class="line"></span><br><span class="line">import &#123; useRoute, useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; TagView &#125; from &#x27;@/types/store/tagsview&#x27;;</span><br><span class="line"></span><br><span class="line">import ScrollPane from &#x27;./ScrollPane.vue&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView, permission &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance() as ComponentInternalInstance;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const visitedViews = computed&lt;any&gt;(() =&gt; tagsView.visitedViews);</span><br><span class="line">const routes = computed&lt;any&gt;(() =&gt; permission.routes);</span><br><span class="line"></span><br><span class="line">const affixTags = ref([]);</span><br><span class="line">const visible = ref(false);</span><br><span class="line">const selectedTag = ref(&#123;&#125;);</span><br><span class="line">const scrollPaneRef = ref();</span><br><span class="line">const left = ref(0);</span><br><span class="line">const top = ref(0);</span><br><span class="line"></span><br><span class="line">watch(</span><br><span class="line">  route,</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    addTags();</span><br><span class="line">    moveToCurrentTag();</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    //åˆå§‹åŒ–ç«‹å³æ‰§è¡Œ</span><br><span class="line">    immediate: true,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">watch(visible, (value) =&gt; &#123;</span><br><span class="line">  if (value) &#123;</span><br><span class="line">    document.body.addEventListener(&#x27;click&#x27;, closeMenu);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    document.body.removeEventListener(&#x27;click&#x27;, closeMenu);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function filterAffixTags(routes: any[], basePath = &#x27;/&#x27;) &#123;</span><br><span class="line">  let tags: TagView[] = [];</span><br><span class="line"></span><br><span class="line">  routes.forEach((route) =&gt; &#123;</span><br><span class="line">    if (route.meta &amp;&amp; route.meta.affix) &#123;</span><br><span class="line">      const tagPath = path.resolve(basePath, route.path);</span><br><span class="line">      tags.push(&#123;</span><br><span class="line">        fullPath: tagPath,</span><br><span class="line">        path: tagPath,</span><br><span class="line">        name: route.name,</span><br><span class="line">        meta: &#123; ...route.meta &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (route.children) &#123;</span><br><span class="line">      const childTags = filterAffixTags(route.children, route.path);</span><br><span class="line">      if (childTags.length &gt;= 1) &#123;</span><br><span class="line">        tags = tags.concat(childTags);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  return tags;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function initTags() &#123;</span><br><span class="line">  const res = filterAffixTags(routes.value) as [];</span><br><span class="line">  affixTags.value = res;</span><br><span class="line">  for (const tag of res) &#123;</span><br><span class="line">    // Must have tag name</span><br><span class="line">    if ((tag as TagView).name) &#123;</span><br><span class="line">      tagsView.addVisitedView(tag);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function addTags() &#123;</span><br><span class="line">  if (route.name) &#123;</span><br><span class="line">    tagsView.addView(route);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveToCurrentTag() &#123;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    for (const r of visitedViews.value) &#123;</span><br><span class="line">      if (r.path === route.path) &#123;</span><br><span class="line">        scrollPaneRef.value.moveToTarget(r);</span><br><span class="line">        // when query is different then update</span><br><span class="line">        if (r.fullPath !== route.fullPath) &#123;</span><br><span class="line">          tagsView.updateVisitedView(route);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isActive(tag: TagView) &#123;</span><br><span class="line">  return tag.path === route.path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isAffix(tag: TagView) &#123;</span><br><span class="line">  return tag.meta &amp;&amp; tag.meta.affix;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isFirstView() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    return (</span><br><span class="line">      (selectedTag.value as TagView).fullPath ===</span><br><span class="line">      visitedViews.value[1].fullPath ||</span><br><span class="line">      (selectedTag.value as TagView).fullPath === &#x27;/index&#x27;</span><br><span class="line">    );</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isLastView() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    return (</span><br><span class="line">      (selectedTag.value as TagView).fullPath ===</span><br><span class="line">      visitedViews.value[visitedViews.value.length - 1].fullPath</span><br><span class="line">    );</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function refreshSelectedTag(view: TagView) &#123;</span><br><span class="line">  tagsView.delCachedView(view);</span><br><span class="line">  const &#123; fullPath &#125; = view;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    router.replace(&#123; path: &#x27;/redirect&#x27; + fullPath &#125;).catch((err) =&gt; &#123;</span><br><span class="line">      console.warn(err);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function toLastView(visitedViews: TagView[], view?: any) &#123;</span><br><span class="line">  const latestView = visitedViews.slice(-1)[0];</span><br><span class="line">  if (latestView &amp;&amp; latestView.fullPath) &#123;</span><br><span class="line">    router.push(latestView.fullPath);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // now the default is to redirect to the home page if there is no tags-view,</span><br><span class="line">    // you can adjust it according to your needs.</span><br><span class="line">    if (view.name === &#x27;Dashboard&#x27;) &#123;</span><br><span class="line">      // to reload home page</span><br><span class="line">      router.replace(&#123; path: &#x27;/redirect&#x27; + view.fullPath &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      router.push(&#x27;/&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeSelectedTag(view: TagView) &#123;</span><br><span class="line">  tagsView.delView(view).then((res: any) =&gt; &#123;</span><br><span class="line">    if (isActive(view)) &#123;</span><br><span class="line">      toLastView(res.visitedViews, view);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeLeftTags() &#123;</span><br><span class="line">  tagsView.delLeftViews(selectedTag.value).then((res: any) =&gt; &#123;</span><br><span class="line">    if (</span><br><span class="line">      !res.visitedViews.find((item: any) =&gt; item.fullPath === route.fullPath)</span><br><span class="line">    ) &#123;</span><br><span class="line">      toLastView(res.visitedViews);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function closeRightTags() &#123;</span><br><span class="line">  tagsView.delRightViews(selectedTag.value).then((res: any) =&gt; &#123;</span><br><span class="line">    if (</span><br><span class="line">      !res.visitedViews.find((item: any) =&gt; item.fullPath === route.fullPath)</span><br><span class="line">    ) &#123;</span><br><span class="line">      toLastView(res.visitedViews);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeOtherTags() &#123;</span><br><span class="line">  router.push(selectedTag.value);</span><br><span class="line">  tagsView.delOtherViews(selectedTag.value).then(() =&gt; &#123;</span><br><span class="line">    moveToCurrentTag();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeAllTags(view: TagView) &#123;</span><br><span class="line">  tagsView.delAllViews().then((res: any) =&gt; &#123;</span><br><span class="line">    toLastView(res.visitedViews, view);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function openMenu(tag: TagView, e: MouseEvent) &#123;</span><br><span class="line">  const menuMinWidth = 105;</span><br><span class="line">  const offsetLeft = proxy?.$el.getBoundingClientRect().left; // container margin left</span><br><span class="line">  const offsetWidth = proxy?.$el.offsetWidth; // container width</span><br><span class="line">  const maxLeft = offsetWidth - menuMinWidth; // left boundary</span><br><span class="line">  const l = e.clientX - offsetLeft + 15; // 15: margin right</span><br><span class="line"></span><br><span class="line">  if (l &gt; maxLeft) &#123;</span><br><span class="line">    left.value = maxLeft;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    left.value = l;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  top.value = e.clientY;</span><br><span class="line">  visible.value = true;</span><br><span class="line">  selectedTag.value = tag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closeMenu() &#123;</span><br><span class="line">  visible.value = false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function handleScroll() &#123;</span><br><span class="line">  closeMenu();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initTags();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.tags-view__container &#123;</span><br><span class="line">  height: 34px;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background: $dark_main_color;</span><br><span class="line">  border-bottom: 1px solid #d8dce5;</span><br><span class="line">  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 0 3px 0 rgba(0, 0, 0, 0.04);</span><br><span class="line"></span><br><span class="line">  .tags-view__wrapper &#123;</span><br><span class="line">    .tags-view__item &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      position: relative;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      height: 26px;</span><br><span class="line">      line-height: 26px;</span><br><span class="line">      border: 1px solid #d8dce5;</span><br><span class="line">      color: #495060;</span><br><span class="line">      background: $dark_main_color;</span><br><span class="line">      padding: 0 8px;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      margin-left: 5px;</span><br><span class="line">      margin-top: 4px;</span><br><span class="line"></span><br><span class="line">      &amp;:first-of-type &#123;</span><br><span class="line">        margin-left: 15px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-of-type &#123;</span><br><span class="line">        margin-right: 15px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        color: var(--el-color-primary);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        background-color: var(--el-color-primary);</span><br><span class="line">        color: var(--el-color-primary-light-9);</span><br><span class="line">        border-color: var(--el-color-primary);</span><br><span class="line"></span><br><span class="line">        &amp;::before &#123;</span><br><span class="line">          content: &#x27;&#x27;;</span><br><span class="line">          background: #fff;</span><br><span class="line">          display: inline-block;</span><br><span class="line">          width: 8px;</span><br><span class="line">          height: 8px;</span><br><span class="line">          border-radius: 50%;</span><br><span class="line">          position: relative;</span><br><span class="line">          margin-right: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .icon-close &#123;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        text-align: center;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          background-color: #ccc;</span><br><span class="line">          color: #fff;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tags-view__menu &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    background: $dark_main_color;</span><br><span class="line">    z-index: 3000;</span><br><span class="line">    position: absolute;</span><br><span class="line">    list-style-type: none;</span><br><span class="line">    padding: 5px 0;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    font-weight: 400;</span><br><span class="line">    // color: #333;</span><br><span class="line">    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 7px 16px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        background: rgb(77, 156, 130);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><code>src/layout/components/TagsView/ScrollPane.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-scrollbar</span><br><span class="line">    ref=&quot;scrollContainer&quot;</span><br><span class="line">    :vertical=&quot;false&quot;</span><br><span class="line">    class=&quot;scroll-container&quot;</span><br><span class="line">    @wheel.prevent=&quot;handleScroll&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/el-scrollbar&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  computed,</span><br><span class="line">  onMounted,</span><br><span class="line">  onBeforeUnmount,</span><br><span class="line">  getCurrentInstance,</span><br><span class="line">&#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; TagView &#125; from &#x27;@/types/store/tagsview&#x27;;</span><br><span class="line">import useStore from &#x27;@/store&#x27;;</span><br><span class="line"></span><br><span class="line">const tagAndTagSpacing = ref(4);</span><br><span class="line">const &#123; proxy &#125; = getCurrentInstance() as any;</span><br><span class="line"></span><br><span class="line">const emits = defineEmits([&#x27;scroll&#x27;]);</span><br><span class="line">const emitScroll = () =&gt; &#123;</span><br><span class="line">  emits(&#x27;scroll&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const &#123; tagsView &#125; = useStore();</span><br><span class="line"></span><br><span class="line">const visitedViews = computed(() =&gt; tagsView.visitedViews);</span><br><span class="line"></span><br><span class="line">const scrollWrapper = computed(() =&gt; proxy?.$refs.scrollContainer.$refs.wrap$);</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  scrollWrapper.value.addEventListener(&#x27;scroll&#x27;, emitScroll, true);</span><br><span class="line">&#125;);</span><br><span class="line">onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">  scrollWrapper.value.removeEventListener(&#x27;scroll&#x27;, emitScroll);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function handleScroll(e: WheelEvent) &#123;</span><br><span class="line">  const eventDelta = (e as any).wheelDelta || -e.deltaY * 40;</span><br><span class="line">  scrollWrapper.value.scrollLeft =</span><br><span class="line">    scrollWrapper.value.scrollLeft + eventDelta / 4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function moveToTarget(currentTag: TagView) &#123;</span><br><span class="line">  const $container = proxy.$refs.scrollContainer.$el;</span><br><span class="line">  const $containerWidth = $container.offsetWidth;</span><br><span class="line">  const $scrollWrapper = scrollWrapper.value;</span><br><span class="line"></span><br><span class="line">  let firstTag = null;</span><br><span class="line">  let lastTag = null;</span><br><span class="line"></span><br><span class="line">  // find first tag and last tag</span><br><span class="line">  if (visitedViews.value.length &gt; 0) &#123;</span><br><span class="line">    firstTag = visitedViews.value[0];</span><br><span class="line">    lastTag = visitedViews.value[visitedViews.value.length - 1];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (firstTag === currentTag) &#123;</span><br><span class="line">    $scrollWrapper.scrollLeft = 0;</span><br><span class="line">  &#125; else if (lastTag === currentTag) &#123;</span><br><span class="line">    $scrollWrapper.scrollLeft = $scrollWrapper.scrollWidth - $containerWidth;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    const tagListDom = document.getElementsByClassName(&#x27;tags-view__item&#x27;);</span><br><span class="line">    const currentIndex = visitedViews.value.findIndex(</span><br><span class="line">      (item) =&gt; item === currentTag</span><br><span class="line">    );</span><br><span class="line">    let prevTag = null;</span><br><span class="line">    let nextTag = null;</span><br><span class="line">    for (const k in tagListDom) &#123;</span><br><span class="line">      if (k !== &#x27;length&#x27; &amp;&amp; Object.hasOwnProperty.call(tagListDom, k)) &#123;</span><br><span class="line">        if (</span><br><span class="line">          (tagListDom[k] as any).dataset.path ===</span><br><span class="line">          visitedViews.value[currentIndex - 1].path</span><br><span class="line">        ) &#123;</span><br><span class="line">          prevTag = tagListDom[k];</span><br><span class="line">        &#125;</span><br><span class="line">        if (</span><br><span class="line">          (tagListDom[k] as any).dataset.path ===</span><br><span class="line">          visitedViews.value[currentIndex + 1].path</span><br><span class="line">        ) &#123;</span><br><span class="line">          nextTag = tagListDom[k];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // the tag&#x27;s offsetLeft after of nextTag</span><br><span class="line">    const afterNextTagOffsetLeft =</span><br><span class="line">      (nextTag as any).offsetLeft +</span><br><span class="line">      (nextTag as any).offsetWidth +</span><br><span class="line">      tagAndTagSpacing.value;</span><br><span class="line"></span><br><span class="line">    // the tag&#x27;s offsetLeft before of prevTag</span><br><span class="line">    const beforePrevTagOffsetLeft =</span><br><span class="line">      (prevTag as any).offsetLeft - tagAndTagSpacing.value;</span><br><span class="line">    if (afterNextTagOffsetLeft &gt; $scrollWrapper.scrollLeft + $containerWidth) &#123;</span><br><span class="line">      $scrollWrapper.scrollLeft = afterNextTagOffsetLeft - $containerWidth;</span><br><span class="line">    &#125; else if (beforePrevTagOffsetLeft &lt; $scrollWrapper.scrollLeft) &#123;</span><br><span class="line">      $scrollWrapper.scrollLeft = beforePrevTagOffsetLeft;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  moveToTarget,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.scroll-container &#123;</span><br><span class="line">  .el-scrollbar__bar &#123;</span><br><span class="line">    bottom: 0px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .el-scrollbar__wrap &#123;</span><br><span class="line">    height: 49px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.scroll-container &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="æŒ‰é’®æƒé™"><a href="#æŒ‰é’®æƒé™" class="headerlink" title="æŒ‰é’®æƒé™"></a>æŒ‰é’®æƒé™</h2><h3 id="è‡ªå®šä¹‰æŒ‡ä»¤-æŒ‰é’®æƒé™"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤-æŒ‰é’®æƒé™" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤ - æŒ‰é’®æƒé™"></a>è‡ªå®šä¹‰æŒ‡ä»¤ - æŒ‰é’®æƒé™</h3><p><code>src/directive/permission/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Directive</span>, <span class="title class_">DirectiveBinding</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æƒé™æŒ‡ä»¤`v-hasPerm` `v-hasRole`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‰é’®æƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment"> * array :  v-hasPerm=&quot;[&#x27;sys:user:add&#x27;,&#x27;sys:user:edit&#x27;]&quot;</span></span><br><span class="line"><span class="comment"> * single : v-hasPerm=&quot;&#x27;sys:user:add&#x27;&quot;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">hasPerm</span>: <span class="title class_">Directive</span> = &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params">el: HTMLElement, binding: DirectiveBinding</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = binding;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰è·¯ç”±</span></span><br><span class="line">    <span class="keyword">const</span> currentRouteUrl = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">replace</span>(<span class="string">&#x27;#/&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰è·¯ç”±ï¼š&#x27;</span>, currentRouteUrl)</span><br><span class="line">    <span class="keyword">const</span> btnPermList = <span class="title function_">getBtnPermList</span>(currentRouteUrl, user.<span class="property">permissionTreeList</span>, [])</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‹¥æœ‰çš„æŒ‰é’®æƒé™ï¼š&#x27;</span>, btnPermList);</span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      <span class="comment">// DOMç»‘å®šéœ€è¦çš„æŒ‰é’®æƒé™æ ‡è¯†</span></span><br><span class="line">      <span class="keyword">const</span> requiredPerms = value <span class="keyword">instanceof</span> <span class="title class_">Array</span> ? value : [value];</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;éœ€è¦çš„æŒ‰é’®æƒé™ï¼š&#x27;</span>, requiredPerms);</span><br><span class="line">      <span class="keyword">const</span> hasPerm = btnPermList.<span class="title function_">some</span>(<span class="function"><span class="params">btnPerm</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> requiredPerms.<span class="title function_">includes</span>(btnPerm);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span> (!hasPerm) &#123;</span><br><span class="line">        el.<span class="property">parentNode</span> &amp;&amp; el.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(el);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">        <span class="string">&quot;need perms! Like v-has-perm=\&quot;[&#x27;sys:user:add&#x27;,&#x27;sys:user:edit&#x27;]\&quot;&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å½“å‰è·¯ç”±ä¸‹çš„æŒ‰é’®æƒé™</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> currentRouteUrl å½“å‰è·¯ç”±url ex: system/user/index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> permissionTreeList æƒé™èœå•æ ‘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> btnPermList æŒ‰é’®æƒé™</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> æŒ‰é’®æƒé™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getBtnPermList</span>(<span class="params">currentRouteUrl: <span class="built_in">string</span>, permissionTreeList: <span class="built_in">any</span>, btnPermList: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;</span>): <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (permissionTreeList) &#123;</span><br><span class="line">    permissionTreeList.<span class="title function_">forEach</span>(<span class="function">(<span class="params">e: &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">      meta: <span class="built_in">any</span>;</span></span></span><br><span class="line"><span class="params"><span class="function">      component: <span class="built_in">string</span>;</span></span></span><br><span class="line"><span class="params"><span class="function">      children: <span class="built_in">any</span>;</span></span></span><br><span class="line"><span class="params"><span class="function">    &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">component</span> === currentRouteUrl || e.<span class="property">component</span> === currentRouteUrl + <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">        e.<span class="property">meta</span>.<span class="property">btnPermList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">btnPerm: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          btnPermList.<span class="title function_">push</span>(btnPerm)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> childList = e.<span class="property">children</span></span><br><span class="line">      <span class="keyword">if</span> (childList) &#123;</span><br><span class="line">        <span class="title function_">getBtnPermList</span>(currentRouteUrl, childList, btnPermList)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> btnPermList</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> btnPermList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§’è‰²æƒé™æ ¡éªŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">hasRole</span>: <span class="title class_">Directive</span> = &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params">el: HTMLElement, binding: DirectiveBinding</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = binding;</span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      <span class="comment">// DOMç»‘å®šéœ€è¦çš„è§’è‰²ç¼–ç </span></span><br><span class="line">      <span class="keyword">const</span> requiredRoles = value;</span><br><span class="line">      <span class="keyword">const</span> &#123; user &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">      <span class="keyword">const</span> hasRole = user.<span class="property">roleNames</span>.<span class="title function_">some</span>(<span class="function">(<span class="params">perm</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> requiredRoles.<span class="title function_">includes</span>(perm);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span> (!hasRole) &#123;</span><br><span class="line">        el.<span class="property">parentNode</span> &amp;&amp; el.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(el);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;need roles! Like v-has-role=\&quot;[&#x27;admin&#x27;,&#x27;test&#x27;]\&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>src/directive/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; hasPerm, hasRole &#125; <span class="keyword">from</span> <span class="string">&#x27;./permission&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤"><a href="#æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤"></a>æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</h3><p><code>main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰æŒ‡ä»¤(æŒ‰é’®æƒé™)</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> directive <span class="keyword">from</span> <span class="string">&#x27;@/directive&#x27;</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(directive).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">  app.<span class="title function_">directive</span>(key, (directive <span class="keyword">as</span> &#123; [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="title class_">Directive</span> &#125;)[key]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="é¡µé¢ä½¿ç”¨demo"><a href="#é¡µé¢ä½¿ç”¨demo" class="headerlink" title="é¡µé¢ä½¿ç”¨demo"></a>é¡µé¢ä½¿ç”¨demo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button v-hasPerm=&quot;&#x27;add&#x27;&quot; type=&quot;primary&quot; @click=&quot;handleCreate&quot;&gt;æ·»åŠ &lt;/el-button&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="debugè°ƒè¯•"><a href="#debugè°ƒè¯•" class="headerlink" title="debugè°ƒè¯•"></a>debugè°ƒè¯•</h2><h3 id="æ–¹å¼ä¸€ï¼šdebugger"><a href="#æ–¹å¼ä¸€ï¼šdebugger" class="headerlink" title="æ–¹å¼ä¸€ï¼šdebugger"></a>æ–¹å¼ä¸€ï¼š<code>debugger</code></h3><ol><li>ä»£ç ä¸­æ·»åŠ <code>debugger</code></li><li>æµè§ˆå™¨<code>F12</code> å³å¯è¿›å…¥è°ƒè¯•</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">refreshTableData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">debugger</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">baseTable</span>.<span class="title function_">refresh</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼äºŒï¼švscode"><a href="#æ–¹å¼äºŒï¼švscode" class="headerlink" title="æ–¹å¼äºŒï¼švscode"></a>æ–¹å¼äºŒï¼švscode</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180250.png"></p><p><code>launch.json</code></p><blockquote><p>æœ‰ä¸ªè¿™ä¸ªæ–‡ä»¶åï¼Œå¯ç›´æ¥åœ¨vscodeä¸­F5æ‰“å¼€å½“å‰æœåŠ¡</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pwa-chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Launch Chrome against localhost&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:5173&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;webRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue-js-devtools"><a href="#æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue-js-devtools" class="headerlink" title="æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶Vue.js devtools"></a>æ–¹å¼ä¸‰ï¼šè°·æ­Œæ’ä»¶<code>Vue.js devtools</code></h3><blockquote><p><a href="https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg">https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg</a></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180319.png"></p><h3 id="æ–¹å¼å››ï¼šæµè§ˆå™¨F12-æºä»£ç ä¸­ç›´æ¥debug"><a href="#æ–¹å¼å››ï¼šæµè§ˆå™¨F12-æºä»£ç ä¸­ç›´æ¥debug" class="headerlink" title="æ–¹å¼å››ï¼šæµè§ˆå™¨F12 -&gt; æºä»£ç ä¸­ç›´æ¥debug"></a>æ–¹å¼å››ï¼šæµè§ˆå™¨F12 -&gt; æºä»£ç ä¸­ç›´æ¥debug</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20240305180413.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;/a&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>Vue3å­¦ä¹ </title>
    <link href="https://dont-sleep-so-late.github.io/2024/01/28/Vue/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/"/>
    <id>https://dont-sleep-so-late.github.io/2024/01/28/Vue/Vue3%E5%AD%A6%E4%B9%A0(%E6%96%B0)/</id>
    <published>2024-01-28T15:31:36.000Z</published>
    <updated>2024-01-28T15:57:57.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-Vue3ç®€ä»‹"><a href="#1-Vue3ç®€ä»‹" class="headerlink" title="1. Vue3ç®€ä»‹"></a>1. Vue3ç®€ä»‹</h1><ul><li><p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p></li><li><p>ç»å†äº†ï¼š<a href="https://github.com/vuejs/core/commits/main">4800+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/core/graphs/contributors">300+è´¡çŒ®è€…</a></p></li><li><p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece Â· vuejs&#x2F;core</a></p></li><li><p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /></li></ul><h2 id="1-1-ã€æ€§èƒ½çš„æå‡ã€‘"><a href="#1-1-ã€æ€§èƒ½çš„æå‡ã€‘" class="headerlink" title="1.1. ã€æ€§èƒ½çš„æå‡ã€‘"></a>1.1. ã€æ€§èƒ½çš„æå‡ã€‘</h2><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p></li><li><p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p></li></ul><h2 id="1-2-ã€-æºç çš„å‡çº§ã€‘"><a href="#1-2-ã€-æºç çš„å‡çº§ã€‘" class="headerlink" title="1.2.ã€ æºç çš„å‡çº§ã€‘"></a>1.2.ã€ æºç çš„å‡çº§ã€‘</h2><ul><li><p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p></li><li><p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p></li></ul><h2 id="1-3-ã€æ‹¥æŠ±TypeScriptã€‘"><a href="#1-3-ã€æ‹¥æŠ±TypeScriptã€‘" class="headerlink" title="1.3. ã€æ‹¥æŠ±TypeScriptã€‘"></a>1.3. ã€æ‹¥æŠ±TypeScriptã€‘</h2><ul><li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li></ul><h2 id="1-4-ã€æ–°çš„ç‰¹æ€§ã€‘"><a href="#1-4-ã€æ–°çš„ç‰¹æ€§ã€‘" class="headerlink" title="1.4. ã€æ–°çš„ç‰¹æ€§ã€‘"></a>1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</h2><ol><li><p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>ä¸<code>reactive</code></p></li><li><p><code>computed</code>ä¸<code>watch</code></p><p>â€¦â€¦</p></li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>â€¦â€¦</p></li></ul></li><li><p>å…¶ä»–æ”¹å˜ï¼š</p><ul><li><p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li><li><p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p><p>â€¦â€¦</p></li></ul></li></ol><h1 id="2-åˆ›å»ºVue3å·¥ç¨‹"><a href="#2-åˆ›å»ºVue3å·¥ç¨‹" class="headerlink" title="2. åˆ›å»ºVue3å·¥ç¨‹"></a>2. åˆ›å»ºVue3å·¥ç¨‹</h1><h2 id="2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘"><a href="#2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘" class="headerlink" title="2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘"></a>2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</h2><p>ç‚¹å‡»æŸ¥çœ‹<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  éšåé€‰æ‹©3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è"><a href="#2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è" class="headerlink" title="2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)"></a>2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</h2><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li><li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li><li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black" /></li></ul><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.åˆ›å»ºå‘½ä»¤</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.å…·ä½“é…ç½®</span></span><br><span class="line"><span class="comment">## é…ç½®é¡¹ç›®åç§°</span></span><br><span class="line">âˆš Project name: vue3_test</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span></span><br><span class="line">âˆš Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span></span><br><span class="line">âˆš Add JSX Support?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span></span><br><span class="line">âˆš Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span></span><br><span class="line">âˆš Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span></span><br><span class="line">âˆš Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span></span><br><span class="line">âˆš Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? Â» No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span></span><br><span class="line">âˆš Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span></span><br><span class="line">âˆš Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //ç»„ä»¶å</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/volar.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231218085906380.png" alt="image-20231218085906380" style="zoom:42%;" /> <p>æ€»ç»“ï¼š</p><ul><li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li><li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li><li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li></ul><h2 id="2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"><a href="#2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘" class="headerlink" title="2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"></a>2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</h2><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="3-Vue3æ ¸å¿ƒè¯­æ³•"><a href="#3-Vue3æ ¸å¿ƒè¯­æ³•" class="headerlink" title="3. Vue3æ ¸å¿ƒè¯­æ³•"></a>3. Vue3æ ¸å¿ƒè¯­æ³•</h1><h2 id="3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘"><a href="#3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘" class="headerlink" title="3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘"></a>3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</h2><ul><li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li><li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li></ul><h3 id="Options-API-çš„å¼Šç«¯"><a href="#Options-API-çš„å¼Šç«¯" class="headerlink" title="Options API çš„å¼Šç«¯"></a>Options API çš„å¼Šç«¯</h3><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><h3 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h3><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p></blockquote><h2 id="3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘"><a href="#3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘" class="headerlink" title="3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘"></a>3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</h2><h3 id="setup-æ¦‚è¿°"><a href="#setup-æ¦‚è¿°" class="headerlink" title="setup æ¦‚è¿°"></a>setup æ¦‚è¿°</h3><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong>_<strong>â€</strong>_ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†â€¦â€¦ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li><li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      // æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">      let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">      // æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­</span><br><span class="line">      function changeName()&#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(name)</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge()&#123;</span><br><span class="line">        age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(age)</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel()&#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="setup-çš„è¿”å›å€¼"><a href="#setup-çš„è¿”å›å€¼" class="headerlink" title="setup çš„è¿”å›å€¼"></a>setup çš„è¿”å›å€¼</h3><ul><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚</strong></li><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;ä½ å¥½å•Šï¼&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setup-ä¸-Options-API-çš„å…³ç³»"><a href="#setup-ä¸-Options-API-çš„å…³ç³»" class="headerlink" title="setup ä¸ Options API çš„å…³ç³»"></a>setup ä¸ Options API çš„å…³ç³»</h3><ul><li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ã€‚</li><li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li></ul><h3 id="setup-è¯­æ³•ç³–"><a href="#setup-è¯­æ³•ç³–" class="headerlink" title="setup è¯­æ³•ç³–"></a>setup è¯­æ³•ç³–</h3><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³– --&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  console.log(this) //undefined</span><br><span class="line">  </span><br><span class="line">  // æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">  let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changName()&#123;</span><br><span class="line">    name = &#x27;æå››&#x27;//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function changAge()&#123;</span><br><span class="line">    console.log(age)</span><br><span class="line">    age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p><ol><li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol><h2 id="3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰å“åº”å¼å˜é‡ã€‚</li><li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><ul><li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li><li>å¯¹äº<code>let name = ref(&#39;å¼ ä¸‰&#39;)</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  // nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  // telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    name.value = &#x27;æå››&#x27;</span><br><span class="line">    console.log(name.value)</span><br><span class="line"></span><br><span class="line">    // æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚</span><br><span class="line">    // name = ref(&#x27;zhang-san&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰ä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li><li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = reactive(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li><li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = ref(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = ref([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = ref(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(car)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.value.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games.value[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.value.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-6-ã€ref-å¯¹æ¯”-reactiveã€‘"><a href="#3-6-ã€ref-å¯¹æ¯”-reactiveã€‘" class="headerlink" title="3.6. ã€ref å¯¹æ¯” reactiveã€‘"></a>3.6. ã€ref å¯¹æ¯” reactiveã€‘</h2><p>å®è§‚è§’åº¦çœ‹ï¼š</p><blockquote><ol><li><p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p></li><li><p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p></li></ol></blockquote><ul><li>åŒºåˆ«ï¼š</li></ul><blockquote><ol><li><p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>volar</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/è‡ªåŠ¨è¡¥å……value.png" alt="è‡ªåŠ¨è¡¥å……value" style="zoom:50%;border-radius:20px" /> </li><li><p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨åŸåˆ™ï¼š</li></ul><blockquote><ol><li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li></ol></blockquote><h2 id="3-7-ã€toRefs-ä¸-toRefã€‘"><a href="#3-7-ã€toRefs-ä¸-toRefã€‘" class="headerlink" title="3.7. ã€toRefs ä¸ toRefã€‘"></a>3.7. ã€toRefs ä¸ toRefã€‘</h2><ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li><li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ€§åˆ«ï¼š&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;ä¿®æ”¹æ€§åˆ«&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;name:&#x27;å¼ ä¸‰&#x27;, age:18, gender:&#x27;ç”·&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let &#123;name,gender&#125; =  toRefs(person)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let age = toRef(person,&#x27;age&#x27;)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeGender()&#123;</span><br><span class="line">    gender.value = &#x27;å¥³&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-8-ã€computedã€‘"><a href="#3-8-ã€computedã€‘" class="headerlink" title="3.8. ã€computedã€‘"></a>3.8. ã€computedã€‘</h2><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/computed.gif" style="zoom:20%;" />  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    åï¼š&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;å…¨åæ”¹ä¸ºï¼šli-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // è¯»å–</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      console.log(&#x27;æœ‰äººä¿®æ”¹äº†fullName&#x27;,val)</span><br><span class="line">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br><span class="line">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-9-ã€watchã€‘"><a href="#3-9-ã€watchã€‘" class="headerlink" title="3.9.ã€watchã€‘"></a>3.9.ã€watchã€‘</h2><ul><li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li><li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š</li></ul><blockquote><ol><li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li><li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li></ol></blockquote><p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><h3 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="* æƒ…å†µä¸€"></a>* æƒ…å†µä¸€</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sumå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="* æƒ…å†µäºŒ"></a>* æƒ…å†µäºŒ</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäºŒï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;æå››&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†</span><br><span class="line">    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®</span><br><span class="line">    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ</span><br><span class="line">    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µä¸‰"><a href="#æƒ…å†µä¸‰" class="headerlink" title="*  æƒ…å†µä¸‰"></a>*  æƒ…å†µä¸‰</h3><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;ä¿®æ”¹obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;æå››&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Objå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µå››"><a href="#æƒ…å†µå››" class="headerlink" title="* æƒ…å†µå››"></a>* æƒ…å†µå››</h3><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li><li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li></ol><p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µå››ï¼šç›‘è§†ã€refã€‘æˆ–ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„æŸä¸ªå±æ€§&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.nameå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäº”"><a href="#æƒ…å†µäº”" class="headerlink" title="* æƒ…å†µäº”"></a>* æƒ…å†µäº”</h3><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-10-ã€watchEffectã€‘"><a href="#3-10-ã€watchEffectã€‘" class="headerlink" title="3.10. ã€watchEffectã€‘"></a>3.10. ã€watchEffectã€‘</h2><ul><li><p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p></li><li><p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p><blockquote><ol><li><p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p></li><li><p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p></li><li><p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p></li></ol></blockquote></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;éœ€æ±‚ï¼šæ°´æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œåˆ™è”ç³»æœåŠ¡å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;æ°´æ¸©ï¼š&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ°´ä½ï¼š&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;æ°´æ¸©+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;æ°´ä½+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let temp = ref(0)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    height.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height</span><br><span class="line">  watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼</span><br><span class="line">    const [newTemp,newHeight] = value</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // ç”¨watchEffectå®ç°ï¼Œä¸ç”¨</span><br><span class="line">  const stopWtach = watchEffect(()=&gt;&#123;</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;</span><br><span class="line">      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†</span><br><span class="line">    if(temp.value === 100 || height.value === 50)&#123;</span><br><span class="line">      console.log(&#x27;æ¸…ç†äº†&#x27;)</span><br><span class="line">      stopWtach()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘"><a href="#3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘" class="headerlink" title="3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘"></a>3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</h2><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p><blockquote><ul><li><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p></li></ul></blockquote><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;å°šç¡…è°·&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;å‰ç«¯&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;ç‚¹æˆ‘æ‰“å°å†…å®¹&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let title1 = ref()</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let title3 = ref()</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    // é€šè¿‡idè·å–å…ƒç´ </span><br><span class="line">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br><span class="line">    // æ‰“å°å†…å®¹</span><br><span class="line">    console.log((t1 as HTMLElement).innerText)</span><br><span class="line">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br><span class="line">    console.log(t1?.innerText)</span><br><span class="line">    </span><br><span class="line">/************************************/</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡refè·å–å…ƒç´ </span><br><span class="line">    console.log(title1.value)</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">    console.log(title3.value)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- çˆ¶ç»„ä»¶App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let ren = ref()</span><br><span class="line"></span><br><span class="line">  function test()&#123;</span><br><span class="line">    console.log(ren.value.name)</span><br><span class="line">    console.log(ren.value.age)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- å­ç»„ä»¶Person.vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹ --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">// æ•°æ®</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  /****************************/</span><br><span class="line">  /****************************/</span><br><span class="line">  // ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨</span><br><span class="line">  defineExpose(&#123;name,age&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-12-ã€propsã€‘"><a href="#3-12-ã€propsã€‘" class="headerlink" title="3.12. ã€propsã€‘"></a>3.12. ã€propsã€‘</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:string,</span><br><span class="line"><span class="attr">name</span>:string,</span><br><span class="line"> <span class="attr">age</span>:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Person :list=&quot;persons&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"> import &#123;type Persons&#125; from &#x27;./types&#x27;</span><br><span class="line"></span><br><span class="line"> let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123;id:&#x27;e98219e12&#x27;,name:&#x27;å¼ ä¸‰&#x27;,age:18&#125;,</span><br><span class="line">   &#123;id:&#x27;e98219e13&#x27;,name:&#x27;æå››&#x27;,age:19&#125;,</span><br><span class="line">    &#123;id:&#x27;e98219e14&#x27;,name:&#x27;ç‹äº”&#x27;,age:20&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;å°çŒªä½©å¥‡&#x27;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘"><a href="#3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘" class="headerlink" title="3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘"></a>3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</h2><ul><li><p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>è§„å¾‹ï¼š</p><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p></blockquote></li><li><p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p><p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p><p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p></blockquote></li><li><p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3å†™æ³• --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; </span><br><span class="line">    ref, </span><br><span class="line">    onBeforeMount, </span><br><span class="line">    onMounted, </span><br><span class="line">    onBeforeUpdate, </span><br><span class="line">    onUpdated, </span><br><span class="line">    onBeforeUnmount, </span><br><span class="line">    onUnmounted </span><br><span class="line">  &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#x27;setup&#x27;)</span><br><span class="line">  // ç”Ÿå‘½å‘¨æœŸé’©å­</span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-14-ã€è‡ªå®šä¹‰hookã€‘"><a href="#3-14-ã€è‡ªå®šä¹‰hookã€‘" class="headerlink" title="3.14. ã€è‡ªå®šä¹‰hookã€‘"></a>3.14. ã€è‡ªå®šä¹‰hookã€‘</h2><ul><li><p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p></li><li><p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// å‘è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// ç»´æŠ¤æ•°æ®</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‚è½½é’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;ç‚¹æˆ‘+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;ç‚¹æˆ‘-1&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;åŠ è½½ä¸­......&lt;/span&gt;&lt;br&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;å†æ¥ä¸€åªç‹—&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineComponent&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import useSum from &#x27;./hooks/useSum&#x27;</span><br><span class="line">  import useDog from &#x27;./hooks/useDog&#x27;</span><br><span class="line"></span><br><span class="line">  let &#123;sum,increment,decrement&#125; = useSum()</span><br><span class="line">  let &#123;dogList,getDog&#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="4-è·¯ç”±"><a href="#4-è·¯ç”±" class="headerlink" title="4. è·¯ç”±"></a>4. è·¯ç”±</h1><h2 id="4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"><a href="#4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘" class="headerlink" title="4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"></a>4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <h2 id="4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"><a href="#4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘" class="headerlink" title="4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"></a>4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</h2><ul><li><p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p></li><li><p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vueè·¯ç”±æµ‹è¯•&lt;/h2&gt;</span><br><span class="line">    &lt;!-- å¯¼èˆªåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;é¦–é¡µ&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;æ–°é—»&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;å…³äº&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å±•ç¤ºåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"><a href="#4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘" class="headerlink" title="4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"></a>4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</h2><blockquote><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p></li><li><p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p></li></ol></blockquote><h2 id="4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"><a href="#4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘" class="headerlink" title="4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"></a>4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</h2><ol><li><p><code>history</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p><p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//historyæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p><p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hashæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘"><a href="#4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘" class="headerlink" title="4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘"></a>4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¬¬ä¸€ç§ï¼štoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;ä¸»é¡µ&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¬¬äºŒç§ï¼štoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-6-ã€å‘½åè·¯ç”±ã€‘"><a href="#4-6-ã€å‘½åè·¯ç”±ã€‘" class="headerlink" title="4.6. ã€å‘½åè·¯ç”±ã€‘"></a>4.6. ã€å‘½åè·¯ç”±ã€‘</h2><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p><p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è·³è½¬è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç®€åŒ–å‰ï¼šéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–åï¼šç›´æ¥é€šè¿‡åå­—è·³è½¬ï¼ˆtoçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§ï¼‰ --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-7-ã€åµŒå¥—è·¯ç”±ã€‘"><a href="#4-7-ã€åµŒå¥—è·¯ç”±ã€‘" class="headerlink" title="4.7. ã€åµŒå¥—è·¯ç”±ã€‘"></a>4.7. ã€åµŒå¥—è·¯ç”±ã€‘</h2><ol><li><p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p></li><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- æˆ– --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;news.name&#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-8-ã€è·¯ç”±ä¼ å‚ã€‘"><a href="#4-8-ã€è·¯ç”±ä¼ å‚ã€‘" class="headerlink" title="4.8. ã€è·¯ç”±ä¼ å‚ã€‘"></a>4.8. ã€è·¯ç”±ä¼ å‚ã€‘</h2><h3 id="queryå‚æ•°"><a href="#queryå‚æ•°" class="headerlink" title="queryå‚æ•°"></a>queryå‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &quot;&gt;</span><br><span class="line">è·³è½¬</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°queryå‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="paramså‚æ•°"><a href="#paramså‚æ•°" class="headerlink" title="paramså‚æ•°"></a>paramså‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink :to=&quot;`/news/detail/001/æ–°é—»001/å†…å®¹001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name:&#x27;xiang&#x27;, //ç”¨nameè·³è½¬</span><br><span class="line">    params:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°paramså‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">params</span>)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p><p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p></blockquote><h2 id="4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘"><a href="#4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘" class="headerlink" title="4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘"></a>4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;, </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-10-ã€-replaceå±æ€§ã€‘"><a href="#4-10-ã€-replaceå±æ€§ã€‘" class="headerlink" title="4.10. ã€ replaceå±æ€§ã€‘"></a>4.10. ã€ replaceå±æ€§ã€‘</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p><ul><li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li><li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li></ul></li><li><p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"><a href="#4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘" class="headerlink" title="4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"></a>4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</h2><p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>$route</code>å’Œ<code>$router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><h2 id="4-12-ã€é‡å®šå‘ã€‘"><a href="#4-12-ã€é‡å®šå‘ã€‘" class="headerlink" title="4.12. ã€é‡å®šå‘ã€‘"></a>4.12. ã€é‡å®šå‘ã€‘</h2><ol><li><p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h1><h2 id="5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"><a href="#5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘" class="headerlink" title="5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"></a>5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</h2><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h2 id="5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘"><a href="#5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘" class="headerlink" title="5.2ã€æ­å»º pinia ç¯å¢ƒã€‘"></a>5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</h2><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p><p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨æ’ä»¶ */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p><img src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><h2 id="5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘"><a href="#5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘" class="headerlink" title="5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘"></a>5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</h2><ol><li><p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p></li><li><p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  // å¼•å…¥å¯¹åº”çš„useXxxxxStore</span><br><span class="line">  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;</span><br><span class="line">  </span><br><span class="line">  // è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store</span><br><span class="line">  const sumStore = useSumStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import axios from &#x27;axios&#x27;</span><br><span class="line">  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;</span><br><span class="line"></span><br><span class="line">  const talkStore = useTalkStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼"><a href="#5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼" class="headerlink" title="5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)"></a>5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</h2><ol><li><p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//åŠ </span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//æ“ä½œcountStoreä¸­çš„sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//å‡</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value:number</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å¯¹åº”action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-5-ã€storeToRefsã€‘"><a href="#5-5-ã€storeToRefsã€‘" class="headerlink" title="5.5.ã€storeToRefsã€‘"></a>5.5.ã€storeToRefsã€‘</h2><ul><li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;count&quot;&gt;</span><br><span class="line">&lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">  /* å¼•å…¥storeToRefs */</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">/* å¾—åˆ°countStore */</span><br><span class="line">  const countStore = useCountStore()</span><br><span class="line">  /* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */</span><br><span class="line">  const &#123;sum&#125; = storeToRefs(countStore)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-6-ã€gettersã€‘"><a href="#5-6-ã€gettersã€‘" class="headerlink" title="5.6.ã€gettersã€‘"></a>5.6.ã€gettersã€‘</h2><ol><li><p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p></li><li><p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="attr">bigSum</span>:(state):<span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> *<span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>. school.<span class="title function_">toUpperCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = countStore</span><br><span class="line"><span class="keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="title function_">storeToRefs</span>(countStore)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-7-ã€-subscribeã€‘"><a href="#5-7-ã€-subscribeã€‘" class="headerlink" title="5.7.ã€$subscribeã€‘"></a>5.7.ã€$subscribeã€‘</h2><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate,state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LoveTalk&#x27;</span>,mutate,state)</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘"><a href="#5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘" class="headerlink" title="5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘"></a>5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// talkListå°±æ˜¯state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalkå‡½æ•°ç›¸å½“äºaction</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</span></span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">data</span>:&#123;<span class="attr">content</span>:title&#125;&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),title&#125;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;talkList,getATalk&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6-ç»„ä»¶é€šä¿¡"><a href="#6-ç»„ä»¶é€šä¿¡" class="headerlink" title="6. ç»„ä»¶é€šä¿¡"></a>6. ç»„ä»¶é€šä¿¡</h1><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p><ul><li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li></ul><ul><li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li><li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li><li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li><li><code>$children</code>è¢«ç æ‰äº†ã€‚</li></ul><p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> <h2 id="6-1-ã€propsã€‘"><a href="#6-1-ã€propsã€‘" class="headerlink" title="6.1. ã€propsã€‘"></a>6.1. ã€propsã€‘</h2><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p><ul><li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li><li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li></ul><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶ï¼Œ&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;å„¿å­ç»™çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// æ•°æ®</span><br><span class="line">const car = ref(&#x27;å¥”é©°&#x27;)</span><br><span class="line">const toy = ref()</span><br><span class="line">// æ–¹æ³•</span><br><span class="line">function getToy(value:string)&#123;</span><br><span class="line">toy.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;çˆ¶ç»™æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;getToy(toy)&quot;&gt;ç©å…·ç»™çˆ¶äº²&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&#x27;å¥¥ç‰¹æ›¼&#x27;)</span><br><span class="line"></span><br><span class="line">defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"><a href="#6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘" class="headerlink" title="6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"></a>6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</h2><ol><li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ &#x3D;&gt; çˆ¶ã€‚</strong></li><li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li></ol><ul><li>åŸç”Ÿäº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li><li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li></ul></li><li>è‡ªå®šä¹‰äº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li><li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong ></li></ul></li></ul><ol start="3"><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;send-toy&#x27;</span>, å…·ä½“æ•°æ®)</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-3-ã€mittã€‘"><a href="#6-3-ã€mittã€‘" class="headerlink" title="6.3. ã€mittã€‘"></a>6.3. ã€mittã€‘</h2><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p>å®‰è£…<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºemitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abcäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyzäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // æ¸…ç†äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æš´éœ²mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toyäº‹ä»¶è¢«è§¦å‘&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p><h2 id="6-4-ã€v-modelã€‘"><a href="#6-4-ã€v-modelã€‘" class="headerlink" title="6.4.ã€v-modelã€‘"></a>6.4.ã€v-modelã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p></li><li><p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç  --&gt;</span><br><span class="line">&lt;input </span><br><span class="line">  type=&quot;text&quot; </span><br><span class="line">  :value=&quot;userName&quot; </span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šv-modelçš„æœ¬è´¨ --&gt;</span><br><span class="line">&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§ï¼Œç›®çš„æ˜¯ï¼šä¸ºäº†å‘ˆç°æ•°æ® --&gt;</span><br><span class="line">&lt;!--ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶ï¼Œè§¦å‘inputäº‹ä»¶æ—¶ï¼Œè¿›è€Œè§¦å‘update:model-valueäº‹ä»¶--&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;modelValue&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä¹Ÿå¯ä»¥æ›´æ¢valueï¼Œä¾‹å¦‚æ”¹æˆabc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹ --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;abc&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;abc&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:abc&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-5-ã€-attrs-ã€‘"><a href="#6-5-ã€-attrs-ã€‘" class="headerlink" title="6.5.ã€$attrs ã€‘"></a>6.5.ã€$attrs ã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p></li><li><p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p><blockquote><p> æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p></blockquote></li></ol><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1)</span><br><span class="line">let b = ref(2)</span><br><span class="line">let c = ref(3)</span><br><span class="line">let d = ref(4)</span><br><span class="line"></span><br><span class="line">function updateA(value)&#123;</span><br><span class="line">a.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­™ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;aï¼š&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;bï¼š&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;cï¼š&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;dï¼š&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;xï¼š&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;yï¼š&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;updateA(666)&quot;&gt;ç‚¹æˆ‘æ›´æ–°A&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-6-ã€-refsã€-parentã€‘"><a href="#6-6-ã€-refsã€-parentã€‘" class="headerlink" title="6.6. ã€$refsã€$parentã€‘"></a>6.6. ã€$refsã€$parentã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š</p><ul><li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li><li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li></ul></li><li><p>åŸç†å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td></tr><tr><td><code>$parent</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td></tr></tbody></table></li></ol><h2 id="6-7-ã€provideã€injectã€‘"><a href="#6-7-ã€provideã€injectã€‘" class="headerlink" title="6.7. ã€provideã€injectã€‘"></a>6.7. ã€provideã€injectã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p></li><li><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</li><li>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</li></ul></li><li><p>å…·ä½“ç¼–ç ï¼š</p><p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;èµ„äº§+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;æ±½è½¦ä»·æ ¼+1&lt;/button&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let money = ref(100)</span><br><span class="line">  let car = reactive(&#123;</span><br><span class="line">    brand:&#x27;å¥”é©°&#x27;,</span><br><span class="line">    price:100</span><br><span class="line">  &#125;)</span><br><span class="line">  // ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•</span><br><span class="line">  function updateMoney(value:number)&#123;</span><br><span class="line">    money.value += value</span><br><span class="line">  &#125;</span><br><span class="line">  // æä¾›æ•°æ®</span><br><span class="line">  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)</span><br><span class="line">  provide(&#x27;car&#x27;,car)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p></blockquote><p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;æˆ‘æ˜¯å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateMoney(6)&quot;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">  import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line">  // æ³¨å…¥æ•°æ®</span><br><span class="line"> let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)</span><br><span class="line">  let car = inject(&#x27;car&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-8-ã€piniaã€‘"><a href="#6-8-ã€piniaã€‘" class="headerlink" title="6.8. ã€piniaã€‘"></a>6.8. ã€piniaã€‘</h2><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p><h2 id="6-9-ã€slotã€‘"><a href="#6-9-ã€slotã€‘" class="headerlink" title="6.9. ã€slotã€‘"></a>6.9. ã€slotã€‘</h2><h3 id="1-é»˜è®¤æ’æ§½"><a href="#1-é»˜è®¤æ’æ§½" class="headerlink" title="1. é»˜è®¤æ’æ§½"></a>1. é»˜è®¤æ’æ§½</h3><p><img src="http://49.232.112.44/images/default_slot.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;!-- é»˜è®¤æ’æ§½ --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-å…·åæ’æ§½"><a href="#2-å…·åæ’æ§½" class="headerlink" title="2. å…·åæ’æ§½"></a>2. å…·åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;æ›´å¤š&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a>3. ä½œç”¨åŸŸæ’æ§½</h3><ol><li><p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">          &lt;h2&gt;ä»Šæ—¥æ¸¸æˆæ¦œå•&lt;/h2&gt;</span><br><span class="line">          &lt;slot :games=&quot;games&quot; a=&quot;å“ˆå“ˆ&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">        import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">        let games = reactive([</span><br><span class="line">          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;è‹±é›„è”ç›Ÿ&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;ç‹è€…è£è€€&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;çº¢è‰²è­¦æˆ’&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;æ–—ç½—å¤§é™†&#x27;&#125;</span><br><span class="line">        ])</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="7-å…¶å®ƒ-API"><a href="#7-å…¶å®ƒ-API" class="headerlink" title="7. å…¶å®ƒ API"></a>7. å…¶å®ƒ API</h1><h2 id="7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘"><a href="#7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘" class="headerlink" title="7.1.ã€shallowRef ä¸ shallowReactive ã€‘"></a>7.1.ã€shallowRef ä¸ shallowReactive ã€‘</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p></li></ol><h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>é€šè¿‡ä½¿ç”¨ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> å’Œ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p></blockquote><h2 id="7-2-ã€readonly-ä¸-shallowReadonlyã€‘"><a href="#7-2-ã€readonly-ä¸-shallowReadonlyã€‘" class="headerlink" title="7.2.ã€readonly ä¸ shallowReadonlyã€‘"></a>7.2.ã€readonly ä¸ shallowReadonlyã€‘</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li><li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li></ul></li><li><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li><li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li></ul></li></ol><h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p></li><li><p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p></li></ul></li></ol><h2 id="7-3-ã€toRaw-ä¸-markRawã€‘"><a href="#7-3-ã€toRaw-ä¸-markRawã€‘" class="headerlink" title="7.3.ã€toRaw ä¸ markRawã€‘"></a>7.3.ã€toRaw ä¸ markRawã€‘</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®&#x2F;è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p></blockquote></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// å“åº”å¼å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2))</span><br></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol><li><p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p><blockquote><p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p></blockquote></li><li><p>ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><h2 id="7-4-ã€customRefã€‘"><a href="#7-4-ã€customRefã€‘" class="headerlink" title="7.4.ã€customRefã€‘"></a>7.4.ã€customRefã€‘</h2><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p><p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">initValue:<span class="built_in">string</span>,delay:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">track</span>() <span class="comment">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span> initValue</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value</span><br><span class="line">          <span class="title function_">trigger</span>() <span class="comment">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><h1 id="8-Vue3æ–°ç»„ä»¶"><a href="#8-Vue3æ–°ç»„ä»¶" class="headerlink" title="8. Vue3æ–°ç»„ä»¶"></a>8. Vue3æ–°ç»„ä»¶</h1><h2 id="8-1-ã€Teleportã€‘"><a href="#8-1-ã€Teleportã€‘" class="headerlink" title="8.1. ã€Teleportã€‘"></a>8.1. ã€Teleportã€‘</h2><ul><li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="8-2-ã€Suspenseã€‘"><a href="#8-2-ã€Suspenseã€‘" class="headerlink" title="8.2. ã€Suspenseã€‘"></a>8.2. ã€Suspenseã€‘</h2><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ </li><li>ä½¿ç”¨æ­¥éª¤ï¼š <ul><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">          &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;Child/&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;h3&gt;åŠ è½½ä¸­.......&lt;/h3&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"><a href="#8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘" class="headerlink" title="8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"></a>8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-ã€å…¶ä»–ã€‘"><a href="#8-4-ã€å…¶ä»–ã€‘" class="headerlink" title="8.4.ã€å…¶ä»–ã€‘"></a>8.4.ã€å…¶ä»–ã€‘</h2><ul><li><p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p></li><li><p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p></li><li><p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p></li><li><p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p></li><li><p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p></li><li><p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p><p>â€¦â€¦</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-Vue3ç®€ä»‹&quot;&gt;&lt;a href=&quot;#1-Vue3ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1. Vue3ç®€ä»‹&quot;&gt;&lt;/a&gt;1. Vue3ç®€ä»‹&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;2020å¹´9æœˆ18æ—¥ï¼Œ&lt;code&gt;Vue.js&lt;/code&gt;å‘å¸ƒç‰ˆ&lt;c</summary>
      
    
    
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Vue" scheme="https://dont-sleep-so-late.github.io/tags/Vue/"/>
    
    <category term="Vue3" scheme="https://dont-sleep-so-late.github.io/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>è§†é¢‘ç´ æ</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:31:36.000Z</published>
    <updated>2023-12-15T14:31:17.693Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å…è´¹è§†é¢‘"><a href="#1ã€å…è´¹è§†é¢‘" class="headerlink" title="1ã€å…è´¹è§†é¢‘"></a>1ã€å…è´¹è§†é¢‘</h2><table><thead><tr><th align="left">â–¼ <strong>é«˜æ¸…è§†é¢‘</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://pixabay.com/zh/videos/">Pixabay</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.pexels.com/zh-cn/videos/">Pexels</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://coverr.co/">Coverr</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-stock-video/">Mixkit</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.vidsplay.com/">Vidsplay</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://isorepublic.com/videos/">ISO Republic</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videezy.com/">Videezy</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/">Videvo</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.freepik.com/videos">Freepik</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">â–¼ <strong>å°ä¼—è§†é¢‘</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.motionplaces.com/">Motion Places</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºå»¶æ—¶æ‘„å½±ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mazwai.com/">Mazwai</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºç”µå½±é£æ ¼ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://dareful.com/">Dareful</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://focastock.com/videos/">FOCA</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freenaturestock.com/videos/">Nature Stock</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å°ä¼—è§†é¢‘ã€å¤šä¸ºè‡ªç„¶æ™¯è‰²ã€‚</td></tr><tr><td align="left">â–¼ <strong>èšåˆæœç´¢</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.6huo.com/footages">é¢„å‘Šç‰‡ä¸–ç•Œ</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://video.librestock.com/">Librestock</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.free-video-footage.com/">FVF</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr></tbody></table><h2 id="2ã€è§†é¢‘ç´ æ"><a href="#2ã€è§†é¢‘ç´ æ" class="headerlink" title="2ã€è§†é¢‘ç´ æ"></a>2ã€è§†é¢‘ç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>è§†é¢‘ç´ æ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.aigei.com/">çˆ±ç»™ç½‘</a></td><td align="left">å›½å†…çŸ¥åçš„è§†é¢‘ç´ æç½‘ç«™ï¼Œä¸‹è½½è¦é“œå¸ï¼Œæ¯æ—¥å…è´¹é€ 20 é“œå¸ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.heycan.com/home">é»‘ç½å¤´</a></td><td align="left">æŠ–éŸ³æ——ä¸‹ç´ æå¹³å°ï¼ŒUGC å¹³å°ï¼Œå…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cool.bilibili.com/square/video">ç´ æé…·å¹³å°</a></td><td align="left">B ç«™æ——ä¸‹ç´ æå¹³å°ï¼ŒUGC å¹³å°ï¼Œå…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sucai.zhiyu.art/">çŸ¥é±¼ç´ æ</a></td><td align="left">å›½å†…è§†é¢‘ç´ æåº“ï¼Œ<strong>â€œå…±äº«åè®®â€</strong>çš„ç´ æå¯å…è´¹å•†ç”¨ã€å…è´¹ç”¨æˆ·æ¯å¤© 1 æ¬¡ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://shipin520.com/">æ½®ç‚¹è§†é¢‘</a></td><td align="left">å›½å†…è§†é¢‘ç´ æåº“ï¼Œå…è´¹ç”¨æˆ·æ¯å¤© 1 æ¬¡ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://al.jybest.ltd/%E8%BD%AF%E4%BB%B6/Windows/4000%E4%B8%AA%E7%BB%BF%E5%B9%95%E8%A7%86%E9%A2%91%E7%B4%A0%E6%9D%9027G">ç»¿å¹•è§†é¢‘27G</a></td><td align="left">ç½‘ä¸Šæ‰¾åˆ°çš„ 4000ä¸ªç»¿å¹•è§†é¢‘ç´ æ 27Gï¼Œæ”¯æŒé¢„è§ˆå’Œä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cutestockfootage.com/">Cute Footage</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.productioncrate.com/">ProductionCrate</a></td><td align="left">è¦ç™»å½•ã€ä»˜è´¹ç½‘ç«™çš„å…è´¹å†…å®¹ï¼Œæ¯æ—¥ 4 æ¬¡å…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.monzoom.com/">Monzoom</a></td><td align="left">è¦ç™»å½•ã€CC0ç‰ˆæƒã€å…è´¹ä½¿ç”¨éœ€è¦ç½²åã€‚</td></tr></tbody></table><h2 id="3ã€è§†é¢‘åæœŸ"><a href="#3ã€è§†é¢‘åæœŸ" class="headerlink" title="3ã€è§†é¢‘åæœŸ"></a>3ã€è§†é¢‘åæœŸ</h2><table><thead><tr><th align="left">â–¼ <strong>ç‰¹æ•ˆæ¨¡ç‰ˆ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-video-templates/">Mixkit</a></td><td align="left">å…ç™»å½•ã€CC0ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.lookae.com/">LookAE</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.newcger.com/">NewCGer</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://c4dsky.com/">ä¹¦ç”Ÿå½±è§†</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mfcpx.com/">FCPXèµ„æºç«™</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.cgdream.com.cn/">CGæ¨¡å‹ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.cgown.com/">CGèµ„æºç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.cgahz.com/">CGçˆ±å¥½è€…ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.cgufo.com/">CGUFO</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.aepond.com/">AEPON</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://prmuban.com/">PRæ¨¡æ¿ç½‘</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gfxcamp.com/">GFXCamp</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.lovelifemrle.com/">çˆ±ç”Ÿæ´»çš„ä¹å…ˆç”Ÿ</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://videocopilot.net.cn/">Video-Copilot</a></td><td align="left">å…ç™»å½•ã€æä¾›ç½‘ç›˜ä¸‹è½½ï¼Œå•†ç”¨éœ€è°¨æ…ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€å…è´¹è§†é¢‘&quot;&gt;&lt;a href=&quot;#1ã€å…è´¹è§†é¢‘&quot; class=&quot;headerlink&quot; title=&quot;1ã€å…è´¹è§†é¢‘&quot;&gt;&lt;/a&gt;1ã€å…è´¹è§†é¢‘&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;é«˜æ¸…è§†é¢‘&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="è§†é¢‘" scheme="https://dont-sleep-so-late.github.io/tags/%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>å­—ä½“å¯¼èˆª</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E5%AD%97%E4%BD%93%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:30:36.000Z</published>
    <updated>2023-12-15T14:29:13.489Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ä¸­æ–‡å­—ä½“"><a href="#1ã€ä¸­æ–‡å­—ä½“" class="headerlink" title="1ã€ä¸­æ–‡å­—ä½“"></a>1ã€ä¸­æ–‡å­—ä½“</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹å•†ç”¨</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://wordshub.github.io/free-font/">å­—é›†</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œå¤§æ¦‚æ˜¯ 2020 å¹´æœ€å…¨çš„å…è´¹å¯å•†ç”¨å­—ä½“åº“ã€‚ğŸ‘</td></tr><tr><td align="left">ğŸŒ <a href="https://www.maoken.com/all-fonts-imgs">çŒ«å•ƒç½‘</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæœ‰ <a href="https://www.maoken.com/all-fonts-imgs">å›¾æ–‡ç‰ˆ</a>ã€<a href="https://www.maoken.com/preview">é¢„è§ˆç‰ˆ</a>ã€<a href="https://www.maoken.com/all-fonts">è¡¨æ ¼ç‰ˆ</a> ç­‰å¤šç§æ–¹æ³•ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ziyouziti.com/">è‡ªç”±å­—ä½“</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œé™„æœ‰å­—ä½“ä½¿ç”¨æ ·ç‰ˆï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left"><a href="https://www.potatofield.cn/fontlibrary">ğŸŒ æ´‹èŠ‹ç”°</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæ”¶å½•äº† 140+ å­—ä½“ï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.freechinesefont.com/">CN Fonts</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œæ”¶å½•äº† 180+ å­—ä½“ï¼Œç¡®ä¿æ˜¯å•†ç”¨å…è´¹å­—ä½“ï¼Œä¸ä¼šæœ‰ç‰ˆæƒçº çº·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.100font.com/">100font</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.shejidt.com/fonts">SHEJIDT</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://51font.17font.com/">51Font</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œä¸“é—¨æ”¶å½•å…è´¹å•†ç”¨å­—ä½“ï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://pan.baidu.com/share/init?surl=ALdMdP2fX_WEQjTDutZkAw">900å…è´¹å­—ä½“</a></td><td align="left">å…è´¹å•†ç”¨å­—ä½“åº“ï¼Œç½‘å‹æ•´ç†çš„å…è´¹å•†ç”¨å­—ä½“é›†åˆï¼Œé€šè¿‡ç½‘ç›˜ä¸‹è½½ï¼Œæå–ç ï¼š52pj</td></tr><tr><td align="left">â–¼ <strong>å­—ä½“èµ„è®¯</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.thetype.com/">The Type</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.zhaozi.cn/">æ‰¾å­—ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontke.com/">å­—å®¢ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://izihun.com/">å­—é­‚ç½‘</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.ziticq.com/">å­—ä½“ä¼ å¥‡</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fonts.net.cn/">å­—ä½“å¤©ä¸‹</a></td><td align="left">å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">â–¼ <strong>è‹±æ–‡å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontshare.com/">Fontshare</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œæä¾›å„ç§å„æ ·é£æ ¼çš„å­—ä½“ï¼Œå­—ä½“ä¸‹è½½æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="2ã€è‹±æ–‡å­—ä½“"><a href="#2ã€è‹±æ–‡å­—ä½“" class="headerlink" title="2ã€è‹±æ–‡å­—ä½“"></a>2ã€è‹±æ–‡å­—ä½“</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹å•†ç”¨</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://wordmark.it/">Wordmark</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontspace.com/">FontSpace</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.dafont.com/themes.php">Dafont</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"><a href="https://www.azfonts.net/">ğŸŒ AZfonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left"><a href="https://fontesk.com/">ğŸŒ Fontesk</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontshare.com/">FontShare</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001fonts.com/">1001 Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.1001freefonts.com/">1001FreeFonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.actionfonts.com/">Action Fonts</a></td><td align="left">åœ¨çº¿è‹±æ–‡å­—ä½“åº“ï¼Œä¸‹è½½æŒ‰é’®æ—è¾¹ä¼šæœ‰ç‰ˆæƒæ ‡æ³¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>å­—ä½“èµ„è®¯</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left"><a href="https://www.typewolf.com/">ğŸŒ TypeWolf</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fonts.com/">Fonts.com</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºä»˜è´¹å­—ä½“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fontdiner.com/">FontDiner</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºå¤å¤å­—ä½“ã€‚</td></tr><tr><td align="left"><a href="https://blambot.com/">ğŸŒ Blambot</a></td><td align="left">è‹±æ–‡å­—ä½“èµ„è®¯ç½‘ç«™ï¼Œå¤§å¤šæ•°ä¸ºæ¼«ç”»å­—ä½“ã€‚</td></tr></tbody></table><h2 id="3ã€å­—ä½“å·¥å…·"><a href="#3ã€å­—ä½“å·¥å…·" class="headerlink" title="3ã€å­—ä½“å·¥å…·"></a>3ã€å­—ä½“å·¥å…·</h2><table><thead><tr><th align="left">â–¼ <strong>å­—ä½“æŸ¥è¯¢</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://fonts.safe.360.cn/">360æŸ¥å­—ä½“</a></td><td align="left">å­—ä½“ç‰ˆæƒæŸ¥è¯¢ï¼Œç”± 360 å…¬å¸æ¨å‡ºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.likefont.com/">è¯†å­—ä½“ç½‘</a></td><td align="left">ä¸­æ–‡å­—ä½“è¯†åˆ«ï¼Œæ”¯æŒä¸­ã€è‹±ã€æ—¥éŸ©ã€ç­‰æ–‡å­—ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fonts.adobe.com/">Adobe Fonts</a></td><td align="left">ä¸­æ–‡å­—ä½“è¯†åˆ«ï¼ŒAdobe å…¬å¸å‡ºå“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.myfonts.com/pages/whatthefont">WhatTheFont!</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.whatfontis.com/">WhatFontIs</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fontsquirrel.com/matcherator">Identify Fonts</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œä¸Šä»˜å›¾ç‰‡è¯†åˆ«ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://www.identifont.com/index.html">IdentiFont</a></td><td align="left">è‹±æ–‡å­—ä½“è¯†åˆ«ï¼Œé€šè¿‡å­—ä½“æè¿°æ¥è¯†åˆ«å­—ä½“ã€‚</td></tr><tr><td align="left">â–¼ <strong>æ‰‹å†™å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://shouxie.laoxiezi.com/">è€é‹å­</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ‰‹å†™å­—ä½“åœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.beautifulcarrot.com/">èåœå·¥åŠ</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨¡æ‹Ÿæ‰‹å†™å­—ä½“è½¯ä»¶ï¼Œä¸€é”®ç”Ÿæˆæ‰‹å†™æ–‡ç¨¿ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.iamzlt.com/?p=602">æ‰‹å†™æ¨¡æ‹Ÿå™¨</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨¡æ‹Ÿæ‰‹å†™å­—ä½“è½¯ä»¶ï¼Œä¸€é”®ç”Ÿæˆæ‰‹å†™æ–‡ç¨¿ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.calligrapher.ai/">Calligrapher</a></td><td align="left">æ‰‹å†™å­—ä½“ç”Ÿæˆå™¨ï¼Œå¯ä»¥å°†è‹±æ–‡å˜æˆæ‰‹å†™ä½“ï¼Œå¹¶æœ‰åŠ¨ç”»æ•ˆæœï¼Œå¹¶æä¾› SVG ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.an2.net/">ç”°å­—æ ¼å­—å¸–</a></td><td align="left">ç”°å­—æ ¼å¸–ç”Ÿæˆå™¨ï¼Œå…è´¹çš„åœ¨çº¿ç”°å­—æ ¼å­—å¸–ç”Ÿæˆå™¨ï¼Œæ”¯æŒç¬”é¡ºï¼Œå°å­¦ç”Ÿç»ƒå­—ç¥å™¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>ä¹¦æ³•å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left"><a href="http://www.shufami.com/">ğŸŒ ä¹¦æ³•è¿·</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œåœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.diyiziti.com/">ç¬¬ä¸€å­—ä½“</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œåœ¨çº¿ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left"><a href="http://g.shufaziti.com/">ğŸŒ å…‰æ˜ä¹¦æ³•</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œæ¨ªå¹…é›†å­—å·¥å…·ã€‚</td></tr><tr><td align="left"><a href="http://shufa.4a40.com/">ğŸŒ ä¹¦æ³•é›†å­—</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œä¹¦æ³•å­—å…¸åœ¨çº¿æŸ¥è¯¢ã€‚</td></tr><tr><td align="left"><a href="http://www.395.net.cn/">ğŸŒ 395å·¥å…·</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œæœ‰å„å¼å„æ ·çš„åœ¨çº¿å·¥å…·ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.moage.cn/shufa">å¤é£å®¶ä¹¦</a></td><td align="left">ä¹¦æ³•å­—ä½“ç”Ÿæˆå™¨ï¼Œå¤é£å®¶ä¹¦ç”Ÿæˆå™¨ã€‚</td></tr><tr><td align="left">â–¼ <strong>å°ç« å­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.gaitubao.com/yinzhang">æ”¹å›¾å®</a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mofans.net/yinzhang/">å¢¨èŠ³å°ç« </a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://redmi.work/">395å°ç« </a></td><td align="left">ç”µå­å°ç« ç”Ÿæˆå™¨ï¼Œå…è´¹ä¸”ä¸“ä¸šã€‚</td></tr><tr><td align="left">â–¼ <strong>ç³»ç»Ÿå­—ä½“</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸ“¥ <a href="https://fontforge.org/en-US/">FontForge</a></td><td align="left">å­—ä½“ç¼–è¾‘å™¨ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„å­—ä½“ï¼Œæ”¯æŒä¸­æ–‡ï¼Œä¸”å…è´¹å¼€æºã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.mactype.net/">MacType</a></td><td align="left">å­—ä½“æ¸²æŸ“å·¥å…·ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿæ–‡å­—æ˜¾ç¤ºæ›´åŠ æ¸…æ™°ã€æ›´æœ‰ç«‹ä½“æ„Ÿã€‚</td></tr></tbody></table><h2 id="4ã€å­—ä½“ç‰¹æ•ˆ"><a href="#4ã€å­—ä½“ç‰¹æ•ˆ" class="headerlink" title="4ã€å­—ä½“ç‰¹æ•ˆ"></a>4ã€å­—ä½“ç‰¹æ•ˆ</h2><table><thead><tr><th align="left">â–¼ <strong>åœ¨çº¿å·¥å…·</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.logosc.cn/text/">æ ‡å°æ™º</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œä¸€é”®ç”Ÿæˆå„ç§ç‰¹æ•ˆçš„å­—ä½“ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://vaufonts.com/">VAU Fonts</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œä¸€é”®ç”Ÿæˆå„ç§ç‰¹æ•ˆçš„å­—ä½“ï¼Œåœ¨â€œ<strong>Preset</strong>â€é‡Œå¯ä»¥åˆ‡æ¢æ•ˆæœã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://andyh0913.github.io/FrenchFries-Font-Converter/">éº¦å½“åŠ³å­—ä½“</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œç”Ÿæˆéº¦å½“åŠ³è–¯æ¡å­—ä½“ï¼Œå¹¶æä¾›ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://textanim.com/">TEXTANIM</a></td><td align="left">ç”ŸæˆåŠ¨æ•ˆå­—ä½“ï¼Œç”Ÿæˆ GIF åŠ¨æ•ˆå­—ä½“ï¼Œæ•ˆæœç›¸å¯¹æ¯”è¾ƒå¤å¤ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://llamafont.com/">Llama Font</a></td><td align="left">ç”Ÿæˆç‰¹æ•ˆå­—ä½“ï¼Œç”Ÿæˆè‰æ³¥é©¬ï¼ˆç¾Šé©¼ï¼‰å­—ä½“ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æœ¬åœ°å·¥å…·</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸ“¥ <a href="https://aaa-logo.com/">AAA Logo</a></td><td align="left">å…è´¹ï¼Œ1000+ ç°æˆ Logo æ¨¡ç‰ˆä¸€é”®ç”Ÿæˆï¼Œåªæ”¯æŒ Windowsã€‚<a href="https://www.aaa-logo.com/download.php">ğŸªŸ</a></td></tr><tr><td align="left">ğŸ“¥ <a href="https://apps.apple.com/cn/app/art-text-4-text-effects-app/id1499327230?mt=12">Art Text 4</a></td><td align="left">ä¸“ä¸šå›¾å½¢è®¾è®¡å·¥å…·ï¼Œå¯ä»¥ä¸€é”®ç”ŸæˆæƒŠè‰³çš„æ–‡æœ¬å’Œå›¾å½¢ï¼Œåªæ”¯æŒ Macã€‚<a href="https://two.onefileserver.top/macxz/10293/art_text_4_4.3.0.dmg">ğŸ</a></td></tr></tbody></table><h2 id="5ã€å­—ä½“ç‰ˆæƒ"><a href="#5ã€å­—ä½“ç‰ˆæƒ" class="headerlink" title="5ã€å­—ä½“ç‰ˆæƒ"></a>5ã€å­—ä½“ç‰ˆæƒ</h2><p>æ— è®ºä½ æ˜¯åšä»€ä¹ˆå·¥ä½œçš„ï¼Œå­—ä½“ç‰ˆæƒï¼Œä½ ä¸€å®šè¦ææ¸…æ¥šã€‚å› ä¸ºï¼Œ<strong>ä»–ä»¬æ˜¯çœŸçš„å‘Šï¼</strong></p><p>é‚£æˆ‘ä»¬è¦å¦‚ä½•é¿å…å­—ä½“ä¾µæƒå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ç”¨æ’é™¤æ³•ã€‚</p><p><strong>1ã€ç³»ç»Ÿè‡ªå¸¦çš„â€œå¾®è½¯é›…é»‘â€å’Œâ€œè‹¹æ–¹é»‘ä½“â€ä¸å¯å•†ç”¨ã€‚</strong></p><p>ç†è®ºä¸Š Windows å’Œ Mac è‡ªå¸¦çš„å­—ä½“ï¼Œä¹Ÿä¸æ˜¯å¯å•†ç”¨çš„ï¼Œåªæ˜¯ä»–ä»¬æ˜¯å‡ºè‡ªâ€œå¤§å…¬å¸â€ï¼Œæ²¡æ—¶é—´å‘Šä½ ç½¢äº†ã€‚</p><p><strong>2ã€å¦‚æœä½ ä¸æ‰“ç®—èŠ±é’±ä¹°å­—ä½“ï¼Œå‡¡æ˜¯å›½å†…å¤§å…¬å¸çš„å­—ä½“å“ç‰Œï¼Œéƒ½ä¸è¦ç”¨ã€‚</strong></p><p>å› ä¸ºå›½å†…å…¬æ€€å¯„å¾‹å¸ˆå‡½çš„æ–¹æ³•å¯å¤ªç®€å•äº†ï¼Œç”šè‡³å¯ä»¥åœ¨å…¬ä¼—å·è¯„è®ºåŒºç•™è¨€ï¼Œå›½å¤–å…¬å¸è‡³å°‘è¿˜æ‰¾ä¸ªæ³•äººä»£è¡¨ã€‚</p><p><strong>3ã€å¦‚æœä½ ä¸æ‰“ç®—èŠ±é’±ä¹°å­—ä½“ï¼Œé‚£äº›ä¼ ç»Ÿå­—ä½“å“ç‰Œï¼Œä¸€å¾‹ä¸è¦ç”¨ã€‚</strong></p><p>å‡ ä¹ä½ èƒ½å«å¾—å‡ºåå­—çš„å­—ä½“å“ç‰Œï¼Œæ¯”å¦‚ æ–¹æ­£ã€ååº·ã€æ±‰ä»ªã€åæ–‡ã€åå…‰ã€è’™çº³ã€æ–‡æ‚¦ã€æ±‰é¼ã€æ–‡é¼ ç­‰ç­‰ã€‚</p><p>è¿™äº›å­—ä½“å°±åƒé«˜å‹ç”µçº¿ä¸€æ ·çš„ï¼Œåƒä¸‡åˆ«ç¢°ã€‚ï¼ˆä¹Ÿå°‘é‡å­—ä½“å¯å…è´¹å•†ç”¨ï¼Œä½†ä¸å¥½çœ‹ï¼‰</p><p>å¦‚æœä½ å®‰è£…è¿‡è¿™æ­¤å­—ä½“ï¼Œèµ¶ç´§ä»ä½ çš„ç”µè„‘ä¸Šåˆ é™¤ï¼Œä¸è¦ç»™è‡ªå·±åŸ‹é›·ã€‚</p><p>ä»–ä»¬æ˜¯çœŸçš„å‘Šï¼</p><p><strong>4ã€åªç”¨ä½ ç¡®å®šæ˜¯å¯å…è´¹å•†ç”¨çš„å­—ä½“ã€‚</strong></p><p>å¯å…è´¹å•†ç”¨çš„å­—ä½“å¾ˆå¤šï¼Œæˆ‘ä»¬æ²¡å¿…è¦ä¸‹è½½æ‰€æœ‰çš„å­—ä½“ã€‚</p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒæŠŠé‚£äº›ç»è¿‡ç¡®å®šæ˜¯å¯ä»¥â€œ<strong>å…è´¹å•†ç”¨çš„å­—ä½“</strong>â€ï¼Œæ‰æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</p><p>è®°å¾—è¿˜è¦ä¿å­˜ä¸€å¼ â€œ<strong>å­—ä½“æˆªå›¾</strong>â€ï¼Œæ–¹ä¾¿è¯†åˆ«ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€ä¸­æ–‡å­—ä½“&quot;&gt;&lt;a href=&quot;#1ã€ä¸­æ–‡å­—ä½“&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä¸­æ–‡å­—ä½“&quot;&gt;&lt;/a&gt;1ã€ä¸­æ–‡å­—ä½“&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;å…è´¹å•†ç”¨&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="å­—ä½“" scheme="https://dont-sleep-so-late.github.io/tags/%E5%AD%97%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³ä¹ç´ æ</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E9%9F%B3%E4%B9%90%E7%B4%A0%E6%9D%90/</id>
    <published>2023-12-15T14:27:36.000Z</published>
    <updated>2023-12-15T14:30:29.334Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€éŸ³æ•ˆç´ æ"><a href="#1ã€éŸ³æ•ˆç´ æ" class="headerlink" title="1ã€éŸ³æ•ˆç´ æ"></a>1ã€éŸ³æ•ˆç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>å›½å†…ç½‘ç«™</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.aigei.com/sound">çˆ±ç»™ç½‘</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€<strong>ä¸‹è½½éœ€ä»˜è´¹</strong>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.tosound.com/">æ·˜å£°ç½‘</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€èšåˆæœç´¢å¼•æ“ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.ear0.com/">è€³è†ç½‘</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ”¯æŒä¸­æ–‡ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sc.chinaz.com/yinxiao/">ç«™é•¿ç´ æ</a></td><td align="left">å…ç™»é™†ã€<strong>ç‰ˆæƒä¸æ˜ï¼Œå•†ç”¨éœ€è°¨æ…</strong>ã€‚</td></tr><tr><td align="left">â–¼ <strong>å›½å¤–ç½‘ç«™</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://pixabay.com/sound-effects/">Pixabay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-sound-effects/">Mixkit</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.findsounds.com/typesChinese.html">FindSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundeffectsplus.com/">SoundEffects+</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundgator.com/">SoundGator</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://taira-komori.jpn.org/freesoundcn.html">å°æ£®å¹³</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/royalty-free-sound-effects/">Videvo</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>è¦ç™»é™†</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://soundbible.com/">SoundBible</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://orangefreesounds.com/">OrangeSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.soundjay.com/">SoundJay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.pacdv.com/sounds/">PacDV</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.partnersinrhyme.com/pir/PIRsfx.shtml">PartnersInRhyme</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mediacollege.com/downloads/sound-effects/">Media College</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr></tbody></table><h2 id="2ã€éŸ³æ•ˆåˆé›†"><a href="#2ã€éŸ³æ•ˆåˆé›†" class="headerlink" title="2ã€éŸ³æ•ˆåˆé›†"></a>2ã€éŸ³æ•ˆåˆé›†</h2><table><thead><tr><th align="left">â–¼ <strong>éŸ³æ•ˆåˆé›†</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://99sounds.org/">99Sounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼Œæ¬§æ´²çš„éŸ³æ•ˆå·¥ä½œå®¤ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://gamesounds.xyz/">GameSounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼Œå¯ç›´æ¥ä¸‹è½½å¤šä¸ªå…ç‰ˆæƒéŸ³æ•ˆèµ„æºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.adobe.com/products/audition/offers/AdobeAuditionDLCSFX.html">Adobe Sound</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼ŒAdobe å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr><tr><td align="left">ğŸŒ <a href="https://www.blackmagicdesign.com/cn/support/">DaVinci Sound</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æä¾›åˆé›†ä¸‹è½½ï¼ŒDaVinci å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr><tr><td align="left">ğŸŒ <a href="https://sound-effects.bbcrewind.co.uk/">BBC Sound</a></td><td align="left">å…ç™»é™†ã€<strong>å•†ç”¨éœ€æˆæƒ</strong>ã€æä¾›åˆé›†ä¸‹è½½ï¼ŒBBC å…¬å¸å‡ºå“ã€‚[æ‰“åŒ…ä¸‹è½½]</td></tr></tbody></table><h2 id="3ã€éŸ³ä¹ç´ æ"><a href="#3ã€éŸ³ä¹ç´ æ" class="headerlink" title="3ã€éŸ³ä¹ç´ æ"></a>3ã€éŸ³ä¹ç´ æ</h2><table><thead><tr><th align="left">â–¼ <strong>å…è´¹éŸ³ä¹</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://pixabay.com/zh/music/">Pixabay</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://coverr.co/free-stock-music">Coverr</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://mixkit.co/free-stock-music/">Mixkit</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sampld.app/">Sampld</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.videvo.net/royalty-free-music/">Videvo</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freesound.org/">Freesound</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ncs.io/music">NCS</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freemusicarchive.org/home">FMA</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.bensound.com/free-music-for-videos">BenSound</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.purple-planet.com/">Purple Planet</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://incompetech.com/music/royalty-free/music.html">incompetech</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://dig.ccmixter.org/">dig.ccMixter</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fiftysounds.com/">FiftySounds</a></td><td align="left">å…ç™»å½•ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€å…è´¹ä½¿ç”¨éœ€ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cctrax.com/">CCTrax</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://freepd.com/">FreePD</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://whatfunk.com/">WhatFunk</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://audionautix.com/">AudionautiX</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.partnersinrhyme.com/midi/Classical/index.shtml">PartnersInRhyme</a></td><td align="left"><strong>è¦ç™»å½•</strong>ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.fesliyanstudios.com/">Fesliyan Studios</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€ä½†æ— æœç´¢æ¡†ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://dust-sounds.com/">Dust-Sounds</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ—¥æœ¬ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://amachamusic.chagasi.com/">ç”˜èŒ¶ã®éŸ³æ¥½å·¥æˆ¿</a></td><td align="left">å…ç™»é™†ã€CC0 ç‰ˆæƒã€æ— ä¸‹è½½é™åˆ¶ã€æ—¥æœ¬ç½‘ç«™ã€‚</td></tr></tbody></table><h2 id="4ã€ä¸“ç”¨éŸ³ä¹"><a href="#4ã€ä¸“ç”¨éŸ³ä¹" class="headerlink" title="4ã€ä¸“ç”¨éŸ³ä¹"></a>4ã€ä¸“ç”¨éŸ³ä¹</h2><table><thead><tr><th align="left">â–¼ <strong>U2B éŸ³ä¹</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/user/NoCopyrightSounds">NCS</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/c/FreeMusicAudioLibraryNow/videos">FMAL</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/@AlrotaMusic/videos">Alrota Music</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/@MusicCityOfficial2017/videos">Music City</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.youtube.com/c/audiolibrary-channel/videos">Audio Library</a></td><td align="left">U2B å¹³å°ä½¿ç”¨å…è´¹ã€éœ€è¦ç½²åã€‚</td></tr><tr><td align="left">â–¼ <strong>ä¸“ç”¨éŸ³ä¹</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://musopen.org/music/">Musopen</a></td><td align="left">å¤å…¸éŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://sonniss.com/gameaudiogdc">GameAudioGDC</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€å…ç™»é™†ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://opengameart.org/">OpenGameArt</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://downloads.khinsider.com/">VGM</a></td><td align="left">æ¸¸æˆéŸ³ä¹ã€è¦ç™»å½•ã€CC0 ç‰ˆæƒã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€éŸ³æ•ˆç´ æ&quot;&gt;&lt;a href=&quot;#1ã€éŸ³æ•ˆç´ æ&quot; class=&quot;headerlink&quot; title=&quot;1ã€éŸ³æ•ˆç´ æ&quot;&gt;&lt;/a&gt;1ã€éŸ³æ•ˆç´ æ&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;å›½å†…ç½‘ç«™&lt;/str</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="éŸ³ä¹" scheme="https://dont-sleep-so-late.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>æ¸¸æˆå¯¼èˆª</title>
    <link href="https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/"/>
    <id>https://dont-sleep-so-late.github.io/2023/12/15/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/%E6%B8%B8%E6%88%8F%E5%AF%BC%E8%88%AA/</id>
    <published>2023-12-15T14:25:36.000Z</published>
    <updated>2023-12-15T14:26:50.628Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å°æ¸¸æˆ"><a href="#1ã€å°æ¸¸æˆ" class="headerlink" title="1ã€å°æ¸¸æˆ"></a>1ã€å°æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>æ‰“å‘æ—¶é—´</strong></th><th align="left">â€”</th><th align="left">â€”</th><th align="left">â€”</th></tr></thead><tbody><tr><td align="left"><a href="http://magickeyboard.io/">é­”æœ¯é”®ç›˜</a></td><td align="left"><a href="https://eelslap.com/">æµ·å¸¦é±¼æ‹è„¸</a></td><td align="left"><a href="https://tikolu.net/spot-the-difference/menu">æŒ‡å‡ºä¸ä¸€æ ·</a></td><td align="left"><a href="https://vole.wtf/happy-birthday/">å„å¼å„æ ·ç”Ÿæ—¥æ­Œ</a></td></tr><tr><td align="left"><a href="https://humanclock.com/">äººç±»æ—¶é’Ÿ</a></td><td align="left"><a href="https://www.slapkirk.com/play#spockmode">åœ¨çº¿æ‰‡è€³å…‰</a></td><td align="left"><a href="https://qake.se/fw/index.html">åœ¨çº¿æ”¾çƒŸèŠ±</a></td><td align="left"><a href="https://theuselessweb.com/">æ— èŠç½‘ç«™ä¼ é€é—¨</a></td></tr><tr><td align="left"><a href="https://seoi.net/penint/">ç”»çº¿ä¸ºé›•</a></td><td align="left"><a href="https://webapp.magicposer.com/">é­”æ³•äººå‹å¸ˆ</a></td><td align="left"><a href="https://yesno.wtf/">Yes Or No?</a></td><td align="left"><a href="https://weirdorconfusing.com/">äºšé©¬é€Šé›·äººå•†å“</a></td></tr><tr><td align="left"><a href="https://thisissand.com/">å †æ²™å­æ¸¸æˆ</a></td><td align="left"><a href="http://www.koalastothemax.com/">æ— é™äºŒåˆ†æ³•</a></td><td align="left"><a href="https://pointerpointer.com/">é¼ æ ‡æŒ‡é’ˆåœ¨å“ªï¼Ÿ</a></td><td align="left"><a href="https://www.twinsornot.com/">çœŸä¸æ˜¯åŒèƒèƒï¼Ÿ</a></td></tr><tr><td align="left">â–¼ <strong>ä¼‘é—²è§£å‹</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://ac.yunyoujun.cn/#/">ä¾¿æºå°ç©ºè°ƒ</a></td><td align="left"><a href="https://tv.hzfe.org/">ç«¥å¹´å°ç”µè§†</a></td><td align="left"><a href="https://driveandlisten.herokuapp.com/">å…¨çƒè‡ªé©¾æ¸¸ä½“éªŒ</a></td><td align="left"><a href="https://www.pixelthoughts.co/">æ·±å‘¼å¸æ”¾æ¾ 60 ç§’</a></td></tr><tr><td align="left"><a href="https://fan.elpsy.cn/">æ¸…å‡‰å°é£æ‰‡</a></td><td align="left"><a href="http://www.megamonalisa.com/">è’™å¨œä¸½èå±•é¦†</a></td><td align="left"><a href="https://9-eyes.com/">æœ‰è¶£è°·æ­Œè¡—æ™¯å›¾</a></td><td align="left"><a href="https://works.yangerxiao.com/breathe-relaxer/">é™å¿ƒå‘¼å¸ æ„Ÿå—å¹³é™</a></td></tr><tr><td align="left"><a href="https://goldfishies.com/">åœ¨çº¿å…»é‡‘é±¼</a></td><td align="left"><a href="https://www.petside.com/infinite-cat/">çŒ«çš„æ— é™å¾ªç¯</a></td><td align="left"><a href="https://homeless-toys.netlify.app/#/">æ— å®¶å¯å½’çš„ç©å¶</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://alexanderperrin.com.au/paper/shorttrip/">çŸ­æš‚çš„æ—…è¡Œ</a></td><td align="left"><a href="https://www.window-swap.com/Window">å…¨çƒçª—æˆ·å…±äº«</a></td><td align="left"><a href="http://www.donothingfor2minutes.com/">2 åˆ†é’Ÿä»€ä¹ˆä¹Ÿä¸å¹²</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>å­¦ä¼šæ€è€ƒ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://dccxi.com/trust/">ä¿¡ä»»çš„è¿›åŒ–</a></td><td align="left"><a href="https://www.arealme.com/cn">å„ç§å„æ ·çš„è‡ªæˆ‘æµ‹è¯•</a></td><td align="left"><a href="https://thechoiceisyours.whatisthematrix.com/cn/">é€‰æ‹©ä½ ç›¸ä¿¡çš„ç°å®</a></td><td align="left"><a href="https://neal.fun/life-checklist/">äººç”Ÿæ¸…å•æ£€æŸ¥è¡¨</a></td></tr><tr><td align="left"><a href="https://ncase.me/crowds/zh-CN.html">ç¾¤ä½“çš„æ™ºæ…§ä¸æ„šè ¢</a></td><td align="left"><a href="http://www.20q.net/">20ä¸ªé—®é¢˜çŒœä½ æƒ³ä»€ä¹ˆ</a></td><td align="left"><a href="https://www.getbadnews.com/#intro">å‡æ–°é—»æ˜¯æ€æ ·ç‚¼æˆçš„</a></td><td align="left"><a href="https://www.futureme.org/">å†™ç»™æœªæ¥çš„è‡ªå·± 1</a></td></tr><tr><td align="left"><a href="https://cn.puzzle-nonograms.com/">ç»å…¸é€»è¾‘æ¨ç†æ¸¸æˆ</a></td><td align="left"><a href="https://stylishsite.github.io/">è´¾æ–¯çº³çš„çŒ«</a></td><td align="left"><a href="https://ncase.me/remember/zh.html">å¦‚ä½•è®°å¿†ä»»ä½•ä¸œè¥¿</a></td><td align="left"><a href="https://www.hi2future.com/">å†™ç»™æœªæ¥çš„è‡ªå·± 2</a></td></tr><tr><td align="left"><a href="http://www.iqsuperman.net/">IQ æµ‹è¯•é¢˜</a></td><td align="left"><a href="https://types.yuzeli.com/survey">å¿ƒç†å¥åº·æµ‹è¯•</a></td><td align="left"><a href="https://neal.fun/paper/">ä¸€å¼ çº¸æŠ˜Næ¬¡çš„åšåº¦</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.piixemto.com/zh/">å¿ƒç†å­¦æµ‹è¯•</a></td><td align="left"><a href="https://z-lyen.github.io/anxiety/">å’Œç„¦è™‘ä¸€èµ·å†’é™©ï¼</a></td><td align="left"><a href="https://www.did-you-knows.com/">DidYouKnow å†·çŸ¥è¯†</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>èº«ä½“æµ‹è¯•</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="http://www.ultrasonic-ringtones.com/">å¬è§‰æµ‹è¯•</a></td><td align="left"><a href="https://michaelbach.de/ot/index.html">çœ¼ç›çš„å¹»è§‰</a></td><td align="left"><a href="https://enchroma.com/pages/color-blindness-test">è‰²ç›²è‰²å¼±æµ‹è¯•</a></td><td align="left"><a href="http://illusionoftheyear.com/">å…¨çƒè§†è§‰é”™è§‰æ”¶é›†</a></td></tr><tr><td align="left"><a href="https://checkboxrace.com/">ç‚¹å‡»é€‰æ‹©æ¡†</a></td><td align="left"><a href="http://mp3ornot.com/">éŸ³è´¨åŒºåˆ«æµ‹è¯•</a></td><td align="left"><a href="https://www.qijishow.com/Brand/cool/index.html">å¸¦ä½ ä½“éªŒæ‰­æ›²å¹»è§‰</a></td><td align="left"><a href="https://humanbenchmark.com/">è®°å¿†åŠ›ååº”åŠ›æµ‹è¯•</a></td></tr><tr><td align="left">â–¼ <strong>ç”Ÿæ´»æŠ€èƒ½</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://yong.dgod.net/webim/index.html">åœ¨çº¿è¾“å…¥æ³•</a></td><td align="left"><a href="https://api.ihint.me/shuang/">åŒæ‹¼æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://qwerty.kaiyi.cool/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  1</a></td><td align="left"><a href="https://vultr.youmu.moe/quiz/">ä¸­å›½è¡Œæ”¿åŒºåˆ’æµ‹è¯•</a></td></tr><tr><td align="left"><a href="https://www.type.fun/">è½»æ¾å­¦æ‰“å­—</a></td><td align="left"><a href="http://www.chaiwubi.com/bmcx/">äº”ç¬”ç¼–ç æŸ¥è¯¢</a></td><td align="left"><a href="https://www.typelit.io/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  2</a></td><td align="left"><a href="https://www.foldnfly.com/#/1-1-1-1-1-1-1-1-2">æ•™ä½ å¦‚ä½•æ‹†çº¸é£æœº</a></td></tr><tr><td align="left"><a href="https://www.typingclub.com/da-zi">é”®ç›˜æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://werneror.github.io/FingerMemory/">äº”ç¬”æŒ‡æ³•ç»ƒä¹ </a></td><td align="left"><a href="https://www.keybr.com/">è‹±è¯­æŒ‡æ³•ç»ƒä¹  3</a></td><td align="left"><a href="https://www.animatedknots.com/">æ•™ä½ å¦‚ä½•ç»³å­æ‰“ç»“</a></td></tr></tbody></table><h2 id="2ã€åœ¨çº¿æ¸¸æˆ"><a href="#2ã€åœ¨çº¿æ¸¸æˆ" class="headerlink" title="2ã€åœ¨çº¿æ¸¸æˆ"></a>2ã€åœ¨çº¿æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>æ¸¸æˆç½‘ç«™</strong></th><th align="left">â€”</th><th align="left">â€”</th><th align="left">â€”</th></tr></thead><tbody><tr><td align="left"><a href="https://www.4399.com/">4399</a></td><td align="left"><a href="https://poki.cn/">Poki</a></td><td align="left"><a href="https://neal.fun/">Neal.Fun</a></td><td align="left"><a href="https://www.bestgames.com/">Best Games</a></td></tr><tr><td align="left"><a href="https://www.17173.com/">17173</a></td><td align="left"><a href="https://frvr.com/">FRVR</a></td><td align="left"><a href="https://zh.y8.com/">Y8 Games</a></td><td align="left"><a href="https://www.crazygames.com/">Crazy Games</a></td></tr><tr><td align="left">â–¼ <strong>åœ¨çº¿æ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://game.hullqin.cn/">çº¿ä¸‹èšä¼šæ¸¸æˆ</a></td><td align="left"><a href="https://flash.zczc.cz/">Flash ä¿å­˜è®¡åˆ’</a></td><td align="left"><a href="https://nes.heheda.top/">çº¢ç™½æœºæ¸¸æˆç›’</a></td><td align="left"><a href="https://likexia.gitee.io/game/index.html#/">Git æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://dos.lol/">åœ¨çº¿ DOS æ¸¸æˆ</a></td><td align="left"><a href="https://game.haiyong.site/">100ä¸ªæ‘¸é±¼å°æ¸¸æˆ</a></td><td align="left"><a href="https://zaixianwan.app/">è€æ¸¸æˆåœ¨çº¿ç©</a></td><td align="left"><a href="https://g8hh.com.cn/#/">é”…å·´æ±‰åŒ–</a></td></tr><tr><td align="left"><a href="https://www.yikm.net/">å°éœ¸ç‹ï¼Œå…¶ä¹æ— ç©·</a></td><td align="left"><a href="https://famicn.com/index.html">ä¸­æ–‡å®¶ç”¨æ¸¸æˆåšç‰©é¦†</a></td><td align="left"><a href="http://www.gbarom.cn/">æŒæœºè¿·</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>åŠ¨ä½œæ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://www.4399.com/flash/145201_2.htm">æ‹³çš‡97</a></td><td align="left"><a href="https://pvz.heheda.top/">æ¤ç‰©å¤§æˆ˜åƒµå°¸</a></td><td align="left"><a href="http://oos.moxiecode.com/js_webgl/ping_pong/">3D ä¹’ä¹“çƒ</a></td><td align="left"><a href="http://www.sinuousgame.com/">é¼ æ ‡èº²é¿çƒæ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://krunker.io/?game=SV:umt2g">åœ¨çº¿ CS</a></td><td align="left"><a href="https://classic.minecraft.net/?join=XeFyaTfaMDn-1-Px">æˆ‘çš„ä¸–ç•Œ</a></td><td align="left"><a href="https://www.linerider.com/">è½¨é“æ»‘è¡Œè€…</a></td><td align="left"><a href="https://www.foddy.net/Athletics.html">QWOP è·‘æ­¥æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://bruno-simon.com/">åœ¨çº¿å¼€è½¦</a></td><td align="left"><a href="https://fn.heheda.top/">æ°´æœå¿è€…</a></td><td align="left"><a href="http://canvasrider.com/">è½¨é“æ»‘è¡Œè€… 2</a></td><td align="left"><a href="https://img.youquhome.com/wp-ziyuan/nanren20.htm">æ˜¯ç”·äººåšæŒ20ç§’</a></td></tr><tr><td align="left"><a href="https://game.chronodivide.com/">çº¢è‰²è­¦æˆ’ 2</a></td><td align="left"><a href="https://squid-game.io/">é±¿é±¼æ¸¸æˆ</a></td><td align="left"><a href="https://tusenpo.github.io/FlappyFrog/">Excited çš„å°é¸Ÿ â–²</a></td><td align="left"><a href="https://edition.cnn.com/interactive/2021/03/cnnix-steership/">è‹ä¼Šå£«è¿æ²³æ¨¡æ‹Ÿå™¨</a></td></tr><tr><td align="left"><a href="https://playcsol.com/">åæç²¾è‹± 1.6</a></td><td align="left"><a href="http://www.heyzxz.me/pcol/">æ–¯è¯ºå…‹</a></td><td align="left"><a href="https://www.geo-fs.com/">åœ¨çº¿é£è¡Œæ¨¡æ‹Ÿå™¨</a></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ£‹ç‰Œæ¸¸æˆ</strong></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left"><a href="https://playtictactoe.org/">äº•å­—æ£‹</a></td><td align="left"><a href="https://huazhechen.gitee.io/cuber/">ä¸‰é˜¶é­”æ–¹ 1</a></td><td align="left"><a href="https://knots.netlify.app/">ç¯å½¢ç»“æ‹¼å›¾</a></td><td align="left"><a href="https://yorg.io/">å¡”é˜²ç”Ÿå­˜æ¸¸æˆ</a></td></tr><tr><td align="left"><a href="https://lichess.org/">å›½é™…è±¡æ£‹</a></td><td align="left"><a href="https://iamthecu.be/">ä¸‰é˜¶é­”æ–¹ 2</a></td><td align="left"><a href="https://kirilllive.github.io/Fifteen_puzzle_maker/">æ»‘åŠ¨æ‹¼å›¾</a></td><td align="left"><a href="https://printablecreative.com/">ç›Šæ™ºæ¸¸æˆå›¾ç”Ÿæˆå™¨</a></td></tr><tr><td align="left"><a href="https://lines.frvr.com/">è¿çº¿æ¸¸æˆ</a></td><td align="left"><a href="https://blocks.ovh/">ä¸ƒå·§æ¿</a></td><td align="left"><a href="https://slices.ovh/">ç›Šæ™ºåˆ‡å›¾</a></td><td align="left"></td></tr><tr><td align="left"><a href="http://farter.cn/tetr.js/">ä¿„ç½—æ–¯æ–¹å— 1</a></td><td align="left"><a href="https://ruyihe.com/sxx">ç–¯ç‹‚æ•°æ˜Ÿæ˜Ÿ</a></td><td align="left"><a href="https://maze.toys/mazes/mini/">è¿·å®«æ¸¸æˆ</a></td><td align="left"></td></tr><tr><td align="left"><a href="https://chvin.github.io/react-tetris/">ä¿„ç½—æ–¯æ–¹å— 2</a></td><td align="left"><a href="http://www.jigzone.com/">æ‹¼å›¾æ¸¸æˆ</a></td><td align="left"><a href="https://www.webhek.com/post/draw-a-stickman/">è¯·ç”»ä¸€ä¸ªå°äºº</a></td><td align="left"></td></tr></tbody></table><h2 id="3ã€PC-æ¸¸æˆ"><a href="#3ã€PC-æ¸¸æˆ" class="headerlink" title="3ã€PC æ¸¸æˆ"></a>3ã€PC æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>é—¨æˆ·ç½‘ç«™</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸŒ <a href="https://www.3dmgame.com/">3DMæ¸¸æˆç½‘</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæ›¾ç»æ˜¯å›½å†…æ¸¸æˆèµ„æºæœ€å¤šçš„ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gamersky.com/">æ¸¸æ°‘æ˜Ÿç©º</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå¤§å‹å•æœºæ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç‰¹è‰²èµ„è®¯å’Œä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://down.ali213.net/">æ¸¸ä¾ ç½‘</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå•æœºæ¸¸æˆä¸‹è½½åŸºåœ°ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.vgter.com/">ä¸Šæ¸¸ä¸–ç•Œ</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç²¾å“ PCã€Switchã€PS4 ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.mhhf.com/">çµåŠ¨æ¸¸æˆ</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œæä¾›ç²¾å“ PCã€Switchã€PS4 ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.taptap.cn/">TapTap</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œå¤šä¸ºæ‰‹æœºæ¸¸æˆã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>åšå®¢ç½‘ç«™</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.zzzzz688.com/">æ¸¸æˆå¤©å ‚</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…¨çƒæ¸¸æˆä¸‹è½½åŸºåœ°ï¼Œ</td></tr><tr><td align="left">ğŸŒ <a href="https://steamzg.com/">å°å½èµ„æº</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå¯å…è´¹ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.jiligamefun.com/">å½å“©å½å“©æ¸¸æˆ</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå¤šä¸º ACG æ¸¸æˆ.<a href="https://mp.weixin.qq.com/s/vKpSKCMICy0cBp7OACnMPw">éªŒè¯ç </a>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.xyg688.com/">å°å¦–æ€ªåˆ†äº«</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…´è¶£ä½¿ç„¶çš„èµ„æºæ¬è¿åšå®¢ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://kims3.xyz/">kimsèµ„æºç«™</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…è´¹ç”µè„‘æ¸¸æˆä¸‹è½½ç«™ï¼Œæä¾›é«˜é€Ÿä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.switch618.com/">Switch618</a></td><td align="left">æ¸¸æˆåšå®¢ç½‘ç«™ï¼Œå…è´¹ï¼Œä½†è¦ç™»é™†ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>Stream æ¸¸æˆ</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://store.steampowered.com/">Steam</a></td><td align="left">æ¸¸æˆé—¨æˆ·ç½‘ç«™ï¼Œç›®å‰æœ€å¤§ PC æ¸¸æˆå¹³å°ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://steamunlocked.net/">SteamUnlocked</a></td><td align="left">Steam èµ„æºæ¸¸æˆç½‘ç«™ï¼Œæœ‰å¾ˆå¤šå¤§ä½œç ´è§£ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.s-sgames.com/">SGAMES</a></td><td align="left">ä¸“æ³¨äºç²¾å“æ¸¸æˆï¼Œå„ç±»å¯è”æœºç²¾å“èµ„æºã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://gamestarfield.com/">GameStarfield</a></td><td align="left">Steam èµ„æºæ¸¸æˆç½‘ç«™ï¼Œæœ‰å¾ˆå¤šå¤§ä½œç ´è§£ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.curseforge.com/">CurseForge</a></td><td align="left">å…¨çƒæœ€å¤§çš„æ¸¸æˆ MOD æ¨¡ç»„èµ„æºä¸‹è½½ç«™ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ¸¸æˆç½‘ç›˜</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="http://gbtgame.ysepan.com/">GBTä¹èµæ¸¸æˆç©ºé—´</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚PC æ¸¸æˆä¸ºä¸»ï¼Œæ”¶è—å¤šä¸ºç²¾å“æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="http://flysheep.ysepan.com/">flysheep é¿éš¾æ‰€</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚Steamã€epicã€VRã€å•æœºã€Switch æ¸¸æˆç­‰ã€‚<a href="https://www.flysheep6.com/">ç‹¬ç«‹ç½‘ç«™</a></td></tr><tr><td align="left">ğŸŒ <a href="http://821730880.ysepan.com/">èŒæ–°å•æœºä¹‹å®¶</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://docs.qq.com/document/DT2xBeVJvaHNQUHht">50TBæ¸¸æˆåˆé›†</a></td><td align="left">æ¸¸æˆèµ„æºç½‘ç›˜ã€‚<a href="https://www.lanzouw.com/iYp4j067mbtg">Excel ä¸‹è½½</a>ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://github.com/michelpereira/awesome-open-source-games">å¼€æºæ¸¸æˆåˆé›†</a></td><td align="left">å¼€æºæ¸¸æˆåˆé›†ã€‚</td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">â–¼ <strong>æ¸¸æˆç£åŠ›</strong></td><td align="left"><strong>ç®€ä»‹</strong></td></tr><tr><td align="left">ğŸŒ <a href="https://www.1377x.to/">1377x</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://bt4gprx.com/">BT4G â–²</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://torrentgalaxy.to/">TorrentGalaxy</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.limetorrents.lol/">LimeTorrents</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://rutracker.org/forum/index.php">RuTracker.org</a></td><td align="left">æ¸¸æˆç§å­æœç´¢å¼•æ“ï¼Œç»¼åˆèµ„æºç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://pcgamestorrents.com/">PCGamesTorrent</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://www.gamestorrents.fm/home/">GamesTorrents</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://cpygames.com/">CPY GAMES</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://crotorrents.com/">CroTorrents</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://igg-games.com/">IGGGAMES</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://fitgirl-repacks.site/">FitGirl Repacks</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://repack-games.com/">Repack-Games</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://rutracker.org/forum/index.php">RuTracker</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ï¼Œä¿„è¯­ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://thebyrut.org/">Byrut</a></td><td align="left">æ¸¸æˆç§å­ç£åŠ›ç½‘ç«™ï¼Œä¿„è¯­ã€‚</td></tr></tbody></table><h2 id="4ã€Mac-æ¸¸æˆ"><a href="#4ã€Mac-æ¸¸æˆ" class="headerlink" title="4ã€Mac æ¸¸æˆ"></a>4ã€Mac æ¸¸æˆ</h2><table><thead><tr><th align="left">â–¼ <strong>Mac æ¸¸æˆ</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸ“¥ <a href="https://www.lanzouw.com/i726k0z4j4pi">Mac æ¸¸æˆé›†åˆ</a></td><td align="left">æŸæ¸¸æˆç½‘ç«™æµå‡º 300+ æ¬¾ Mac å¹³å°çƒ­é—¨æ¸¸æˆï¼Œæä¾›ç½‘ç›˜ä¸‹è½½ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://playcover.io/">PlayCover</a></td><td align="left">åœ¨ Macï¼ˆArmèŠ¯ç‰‡ï¼‰ ä¸Šè¿è¡Œ iOS åº”ç”¨ï¼Œæ¯”å¦‚â€œ<strong>åŸç¥</strong>â€ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://getwhisky.app/zh-Hans/">Whisky</a></td><td align="left">åœ¨ Macï¼ˆArmèŠ¯ç‰‡ï¼‰ ä¸Šè¿è¡Œ Windows åº”ç”¨ï¼Œæ¯”å¦‚â€œ<strong>åŸç¥</strong>â€ç­‰æ¸¸æˆã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://decrypt.day/">Decrypt Day</a></td><td align="left">IPA è„±å£³åº”ç”¨ä¸‹è½½ï¼Œæµ·å¤–ç½‘ç«™ï¼Œé€Ÿåº¦å¯èƒ½è¾ƒæ…¢ã€‚</td></tr><tr><td align="left">ğŸŒ <a href="https://ipa.store/">iPA Store</a></td><td align="left">IPA è„±å£³åº”ç”¨ä¸‹è½½ï¼Œéœ€è¦æ³¨å†Œè½½ï¼Œæ¯å¤© 2 ä¸ªå…è´¹ä¸‹è½½æ¬¡æ•°ã€‚</td></tr></tbody></table><h2 id="5ã€æ¸¸æˆå·¥å…·"><a href="#5ã€æ¸¸æˆå·¥å…·" class="headerlink" title="5ã€æ¸¸æˆå·¥å…·"></a>5ã€æ¸¸æˆå·¥å…·</h2><table><thead><tr><th align="left">â–¼ <strong>æ¸¸æˆå·¥å…·</strong></th><th align="left"><strong>ç®€ä»‹</strong></th></tr></thead><tbody><tr><td align="left">ğŸ“œ <a href="https://greasyfork.org/zh-CN/scripts/437233">é˜²æ²‰è¿·ç»ˆç»“è€…</a></td><td align="left">å»é™¤å›½å†… 17173ã€4399 ç­‰æ¸¸æˆç½‘ç«™çš„ç™»å½•éœ€æ±‚ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://browser.360.cn/eex/index.html">360 æé€Ÿæµè§ˆå™¨X</a></td><td align="left">ç›®å‰è¿˜æ”¯æŒ Flash çš„æµè§ˆå™¨ï¼Œæ¨è<a href="https://www.123pan.com/s/7bzA-pQpOd">å¥¶é…ªç‰ˆæœ¬</a>ï¼Œè€Œä¸”è¿˜æœ‰ <a href="https://browser.360.cn/ee/mac/index.html">Mac ç‰ˆæœ¬</a>ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://pcstory.net/">è˜‘è‡æ¸¸æˆä¸‹è½½å™¨</a></td><td align="left">ä¸‹è½½å™¨ï¼Œç½‘å§ 36T æ¸¸æˆå…¨éƒ¨åˆ°ä½ å£è¢‹é‡Œï¼Œç‚¹å‡»ä¸‹è½½å®Œæˆåç›´æ¥å¼€ç©ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://steampp.net/">Watt Toolkit</a></td><td align="left">åŠ é€Ÿå™¨ï¼Œæ”¯æŒ Winã€Macã€Linux å¤šå¹³å°ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://uu.163.com/">UUåŠ é€Ÿå™¨</a></td><td align="left">åŠ é€Ÿå™¨ï¼Œç½‘æ˜“å‡ºå“ï¼Œå…è´¹ï¼Œä¸æ­¢å¿«ï¼Œè¿˜å¾ˆç¨³ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://www.wemod.com/zh">WeMod</a></td><td align="left">ä¿®æ”¹å™¨ï¼ŒPC æ¸¸æˆä½œå¼Šã€ä¿®æ”¹å™¨å’Œ Mod å°½åœ¨ä¸€æ¬¾åº”ç”¨ä¸­ã€‚</td></tr><tr><td align="left">ğŸ“¥ <a href="https://blog.csdn.net/vbcom/article/details/7245186">DirectX Repair</a></td><td align="left">æ£€æµ‹å¹¶ä¿®å¤ç³»ç»Ÿçš„ DirectX çŠ¶æ€ï¼Œç©å¤§å‹æ¸¸æˆå¿…å¤‡ã€‚</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€å°æ¸¸æˆ&quot;&gt;&lt;a href=&quot;#1ã€å°æ¸¸æˆ&quot; class=&quot;headerlink&quot; title=&quot;1ã€å°æ¸¸æˆ&quot;&gt;&lt;/a&gt;1ã€å°æ¸¸æˆ&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;left&quot;&gt;â–¼ &lt;strong&gt;æ‰“å‘æ—¶é—´&lt;/strong&gt;</summary>
      
    
    
    
    <category term="ç½‘ç«™æ¨è" scheme="https://dont-sleep-so-late.github.io/categories/%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
    
    
    <category term="ç½‘ç«™" scheme="https://dont-sleep-so-late.github.io/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="æ¸¸æˆ" scheme="https://dont-sleep-so-late.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
  </entry>
  
  <entry>
    <title>Mybatisç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/mybatis/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/mybatis/</id>
    <published>2023-11-13T15:08:34.000Z</published>
    <updated>2023-11-13T15:17:57.074Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€MyBatis"><a href="#ä¸€ã€MyBatis" class="headerlink" title="ä¸€ã€MyBatis"></a>ä¸€ã€MyBatis</h2><h3 id="1-MyBatisï¼š"><a href="#1-MyBatisï¼š" class="headerlink" title="1.MyBatisï¼š"></a>1.MyBatisï¼š</h3><p>MyBatisï¼šæ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨æ˜ å°„çš„æ¡†æ¶ã€‚è¿™é‡Œæ‰€è°“çš„â€œåŠè‡ªåŠ¨â€æ˜¯ç›¸å¯¹äºHibernateå…¨è¡¨æ˜ å°„è€Œè¨€çš„ï¼ŒMyBatiséœ€è¦æ‰‹åŠ¨åŒ¹é…æä¾›POJOã€SQLå’Œæ˜ å°„å…³ç³»ï¼Œè€ŒHibernateåªéœ€æä¾›POJOå’Œæ˜ å°„å…³ç³»å³å¯ã€‚<br>ä¸Hibernateç›¸æ¯”ï¼Œè™½ç„¶ä½¿ç”¨MyBatisæ‰‹åŠ¨ç¼–å†™SQLè¦æ¯”ä½¿ç”¨Hibernateçš„å·¥ä½œé‡å¤§ï¼Œä½†MyBatiså¯ä»¥é…ç½®åŠ¨æ€SQLå¹¶ä¼˜åŒ–SQLï¼Œå¯ä»¥é€šè¿‡é…ç½®å†³å®šSQLçš„æ˜ å°„è§„åˆ™ï¼Œå®ƒè¿˜æ”¯æŒå­˜å‚¨è¿‡ç¨‹ç­‰ã€‚å¯¹äºä¸€äº›å¤æ‚çš„å’Œéœ€è¦ä¼˜åŒ–æ€§èƒ½çš„é¡¹ç›®æ¥è¯´ï¼Œæ˜¾ç„¶ä½¿ç”¨MyBatisæ›´åŠ åˆé€‚ã€‚</p><p>MyBatisæ¡†æ¶æ˜¯å½“å‰ä¸»æµçš„JavaæŒä¹…å±‚ï¼ˆæ•°æ®è®¿é—®å±‚DAOï¼‰æ¡†æ¶ä¹‹ä¸€ï¼Œå®ƒä¸Hibernateä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§ORMï¼ˆObject&#x2F;Relation Mappingï¼Œå³å¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ã€‚æ‰€è°“çš„ORMå°±æ˜¯ä¸€ç§ä¸ºäº†è§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“ä¸­æ•°æ®ç±»å‹ä¸åŒ¹é…çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡æè¿°Javaå¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè‡ªåŠ¨å°†Javaåº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æŒä¹…åŒ–åˆ°å…³ç³»å‹æ•°æ®åº“çš„è¡¨ä¸­ã€‚</p><h3 id="2-MyBatisæ ¸å¿ƒç»„ä»¶ï¼š"><a href="#2-MyBatisæ ¸å¿ƒç»„ä»¶ï¼š" class="headerlink" title="2.MyBatisæ ¸å¿ƒç»„ä»¶ï¼š"></a>2.MyBatisæ ¸å¿ƒç»„ä»¶ï¼š</h3><p>SqlSessionFactoryBuilderï¼ˆæ„é€ å™¨ï¼‰: æ ¹æ®XMLé…ç½®ï¼ˆæ¨èæ–¹å¼ï¼‰æˆ–è€…ä»£ç æ¥ç”ŸæˆSqlSessionFactoryï¼ˆå·¥å‚æ¥å£ï¼‰å¯¹è±¡, åˆ›å»ºå®Œæˆåè¯¥å¯¹è±¡å°±ä¸éœ€è¦äº†ï¼Œæ‰€ä»¥åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ï¼Œåé¢æ— éœ€ä¿å­˜ã€‚</p><p>SqlSessionFactoryï¼šä¾é å·¥å‚æ¥åˆ›å»ºSqlSessionï¼ˆä¼šè¯ï¼‰å¯¹è±¡ï¼›è¯¥å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¿å­˜ä¸€ä¸ªã€‚</p><p>SqlSessionï¼šç±»ä¼¼äºä¸€ä¸ªJDBCçš„Connectionå¯¹è±¡ã€‚æ˜¯ä¸€ä¸ªæ—¢å¯ä»¥å‘é€SQLå»æ‰§è¡Œå¹¶è¿”å›ç»“æœï¼Œä¹Ÿå¯ä»¥è·å–Mapperçš„æ¥å£ã€‚</p><p>SQL Mapperï¼šæ˜¯MyBatisæ–°è®¾è®¡çš„ç»„ä»¶ï¼Œæ˜¯ç”±ä¸€ä¸ªJavaæ¥å£å’ŒXMLæ–‡ä»¶ï¼ˆæˆ–æ³¨è§£ï¼‰æ„æˆçš„ï¼Œéœ€è¦ç»™å‡ºå¯¹åº”çš„SQLå’Œæ˜ å°„è§„åˆ™ã€‚è´Ÿè´£å‘é€SQLå»æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚é€šè¿‡namespace.idè°ƒç”¨Mapperä¸­å®šä¹‰çš„SQLã€‚</p><h3 id="3-MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š"><a href="#3-MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š" class="headerlink" title="3. MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š"></a>3. MyBatisæ¡†æ¶çš„å·¥ä½œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</h3><p>ï¼ˆ1ï¼‰è¯»å–MyBatisé…ç½®æ–‡ä»¶mybatis-config.xmlã€‚<br>ï¼ˆ2ï¼‰åŠ è½½æ˜ å°„æ–‡ä»¶Mapper.xmlã€‚<br>ï¼ˆ3ï¼‰æ„å»ºä¼šè¯å·¥å‚ã€‚<br>ï¼ˆ4ï¼‰åˆ›å»ºSqlSessionå¯¹è±¡ã€‚<br>ï¼ˆ5ï¼‰ä½¿ç”¨Executoræ¥å£æ¥æ“ä½œæ•°æ®åº“ã€‚<br>ï¼ˆ6ï¼‰ä½¿ç”¨MappedStatementç±»å‹çš„å‚æ•°å¯¹æ˜ å°„ä¿¡æ¯è¿›è¡Œå°è£…ã€‚<br>ï¼ˆ7ï¼‰è¾“å…¥å‚æ•°æ˜ å°„ã€‚<br>ï¼ˆ8ï¼‰è¾“å‡ºç»“æœæ˜ å°„ã€‚</p><h3 id="4-å…ƒç´ "><a href="#4-å…ƒç´ " class="headerlink" title="4. &lt;sql&gt;å…ƒç´ "></a>4. <code>&lt;sql&gt;</code>å…ƒç´ </h3><p><code>&lt;sql&gt;</code>å…ƒç´ çš„ä½œç”¨å°±æ˜¯å®šä¹‰å¯é‡ç”¨çš„SQLä»£ç ç‰‡æ®µã€‚ä½¿ç”¨æ—¶ï¼Œå…ˆé€šè¿‡<code>&lt;sql&gt;</code>å…ƒç´ å®šä¹‰é‡ç”¨çš„ä»£ç ç‰‡æ®µï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨<code>&lt;include&gt;</code>å…ƒç´ çš„refidå±æ€§å¼•ç”¨äº†è‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µã€‚</p><h3 id="5-MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š"><a href="#5-MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š" class="headerlink" title="5.MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š"></a>5.MyBatisæ ¸å¿ƒå¯¹è±¡SqlSessionFactoryçš„è·å–æ–¹å¼ï¼š</h3><p>SqlSessionFactoryå¯¹è±¡çš„å®ä¾‹å¯ä»¥é€šè¿‡SqlSessionFactoryBuilderå¯¹è±¡æ¥æ„å»ºï¼Œè€ŒSqlSessionFactoryBuilderåˆ™å¯ä»¥é€šè¿‡XMLé…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„Configurationå®ä¾‹æ„å»ºå‡ºSqlSessionFactoryçš„å®ä¾‹ï¼Œé€šè¿‡XMLé…ç½®æ–‡ä»¶æ„å»ºå‡ºçš„SqlSessionFactoryå®ä¾‹ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;é…ç½®æ–‡ä»¶ä½ç½®&quot;</span>);</span><br><span class="line"><span class="comment">// æ ¹æ®é…ç½®æ–‡ä»¶æ„å»ºSqlSessionFactory</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br></pre></td></tr></table></figure><p><strong>MyBatisä½¿ç”¨è¿‡ç¨‹ï¼š</strong><br>ä½¿ç”¨SqlSessionFactoryBuilderåˆ›å»ºSqlSessionFactoryå¯¹è±¡;</p><p>ç„¶åé€šè¿‡SqlSessionFactoryåˆ›å»ºSqlSessionå¯¹è±¡;</p><p>é€šè¿‡SqlSessionå¯¹è±¡å®ŒæˆåŸºæœ¬æ“ä½œï¼ˆæ‰§è¡ŒSQLï¼‰ã€‚</p><p>å…³é—­SqlSessionã€‚</p><h3 id="6-å…ƒç´ "><a href="#6-å…ƒç´ " class="headerlink" title="6. &lt;mapper&gt;å…ƒç´ "></a>6. <code>&lt;mapper&gt;</code>å…ƒç´ </h3><p>åœ¨æ˜ å°„æ–‡ä»¶ä¸­ï¼Œ<code>&lt;mapper&gt;</code>å…ƒç´ æ˜¯æ˜ å°„æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œå…¶ä»–å…ƒç´ éƒ½æ˜¯å®ƒçš„å­å…ƒç´ ã€‚è¿™äº›å­å…ƒç´ åŠå…¶ä½œç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š<br><code>&lt;select&gt;</code>ï¼šç”¨äºæ˜ å°„æŸ¥è¯¢è¯­å¥ï¼Œå¯è‡ªå®šä¹‰å‚æ•°ï¼Œè¿”å›ç»“æœé›†ç­‰ã€‚<br><code>&lt;insert&gt;</code>ï¼šç”¨äºæ˜ å°„æ’å…¥è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ’å…¥çš„æ¡æ•°ã€‚<br><code>&lt;update&gt;</code>ï¼šç”¨äºæ˜ å°„æ›´æ–°è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ›´æ–°çš„æ¡æ•°ã€‚<br><code>&lt;delete&gt;</code>ï¼šç”¨äºæ˜ å°„åˆ é™¤è¯­å¥ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨åˆ é™¤çš„æ¡æ•°ã€‚<br><code>&lt;sql&gt;</code>ï¼šç”¨äºå®šä¹‰ä¸€éƒ¨åˆ†SQLï¼Œç„¶åå¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨æ­¤SQLã€‚<br><code>&lt;cache&gt;</code>ï¼šç”¨äºç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚<br><code>&lt;cache-ref&gt;</code>ï¼šç”¨äºå…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚<br><code>&lt;resultMap&gt;</code>ï¼šç”¨äºæè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚</p><p>å½“æ•°æ®è¡¨ä¸­çš„åˆ—å’Œéœ€è¦è¿”å›çš„å¯¹è±¡çš„å±æ€§ä¸å®Œå…¨ä¸€è‡´ï¼Œ MyBatisæ˜¯ä¸ä¼šè‡ªåŠ¨èµ‹å€¼çš„ã€‚æ­¤æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>&lt;resultMap&gt;</code>å…ƒç´ è¿›è¡Œå¤„ç†ã€‚<code>&lt;resultMap&gt;</code>å…ƒç´ çš„å­å…ƒç´ <code>&lt;id&gt;</code>ç”¨äºè¡¨ç¤ºå“ªä¸ªåˆ—æ˜¯ä¸»é”®ï¼Œè€Œ<code>&lt;result&gt;</code>å…ƒç´ ç”¨äºè¡¨ç¤ºPOJOå’Œæ•°æ®è¡¨ä¸­æ™®é€šåˆ—çš„æ˜ å°„å…³ç³»ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;custResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;custId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cust_id&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨"><a href="#7-mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨" class="headerlink" title="7. mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨"></a>7. mybatisä¸­æ˜ å°„æ–‡ä»¶includeæ ‡ç­¾åº”ç”¨</h3><p>MyBaitsæ˜ å°„æ–‡ä»¶ä¸­ä½¿ç”¨<code>&lt;include&gt;</code>å…ƒç´ çš„ refid å±æ€§å¯ä»¥å¼•ç”¨è‡ªå®šä¹‰çš„ä»£ç ç‰‡æ®µï¼Œå…¶å±æ€§å€¼ä¸ºè‡ªå®šä¹‰ä»£ç ç‰‡æ®µçš„idã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;custColumns&quot;</span>&gt;</span> </span><br><span class="line">cust_id custId,name,age </span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;sqlCustList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">select</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;custColumns&quot;</span>/&gt;</span>   </span><br><span class="line">from customer c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="8-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ "><a href="#8-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ " class="headerlink" title="8. MyBatisæ˜ å°„æ–‡ä»¶ä¸­&lt;mapper&gt;å…ƒç´ "></a>8. MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>å…ƒç´ </h3><p>MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;mapper&gt;</code>å…ƒç´ æ˜¯é…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œå®ƒåŒ…å«ä¸€ä¸ªnamespaceå±æ€§ï¼Œè¯¥å±æ€§ä¸ºè¿™ä¸ª<code>&lt;mapper&gt;</code>æŒ‡å®šäº†å”¯ä¸€çš„å‘½åç©ºé—´ã€‚åœ¨Mybatisæ˜ å°„æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ“ä½œéƒ½æœ‰ä¸€ä¸ªidå±æ€§è¡¨ç¤ºæ“ä½œçš„å”¯ä¸€æ ‡è¯†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;customer&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;customerList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">         select * from customer</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ "><a href="#9-MyBatisæ˜ å°„æ–‡ä»¶ä¸­å…ƒç´ " class="headerlink" title="9. MyBatisæ˜ å°„æ–‡ä»¶ä¸­&lt;insert&gt;å…ƒç´ "></a>9. MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;insert&gt;</code>å…ƒç´ </h3><p>MyBatisæ˜ å°„æ–‡ä»¶ä¸­<code>&lt;insert&gt;</code>å…ƒç´ ç”¨äºæ˜ å°„æ’å…¥è¯­å¥ï¼Œåœ¨æ‰§è¡Œå®Œå…ƒç´ ä¸­å®šä¹‰çš„SQLè¯­å¥åï¼Œä¸<code>&lt;update&gt;</code>å’Œ<code>&lt;delete&gt;</code>å…ƒç´ åœ¨æ‰§è¡Œå®Œä¹‹åä¸€æ ·ï¼Œä¹Ÿä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºå½±å“è®°å½•æ¡æ•°çš„æ•´æ•°ã€‚<code>&lt;insert&gt;</code>å…ƒç´ çš„å±æ€§ä¸<code>&lt;select&gt;</code>å…ƒç´ çš„å±æ€§ä¸åŒï¼Œå¯ä»¥ä½¿ç”¨keyPropertyå±æ€§æŒ‡å®šå“ªä¸ªæ˜¯ä¸»é”®å­—æ®µï¼Œä½¿ç”¨useGeneratedKeyså±æ€§å®šä¹‰ä¸»é”®æ˜¯å¦ä½¿ç”¨æ•°æ®åº“å†…ç½®ç­–ç•¥ç”Ÿæˆï¼Œä»è€Œå®ç°å¯¹äºè¡¨ä¸­è‡ªå¢ç¼–å·ä¸»é”®åˆ—çš„ä¸»é”®å›å¡«å’Œè‡ªå®šä¹‰åŠŸèƒ½ã€‚</p><h3 id="10-æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š"><a href="#10-æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š" class="headerlink" title="10.æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š"></a>10.æ ¹æ®MyBatisçš„æ˜ å°„æ–‡ä»¶ç¼–å†™Mapperæ¥å£è¿‡ç¨‹ä¸­æ¶‰åŠçš„å…³é”®é—®é¢˜å¦‚ä¸‹ï¼š</h3><p>é€šå¸¸ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªMapperæ¥å£ï¼Œæ˜ å°„æ–‡ä»¶ä¸­çš„namespaceä¸æ¥å£çš„å…¨é™å®šåä¸€è‡´ã€‚</p><p>æ˜ å°„æ–‡ä»¶ä¸­æ¯ä¸ªæ“ä½œidå¯¹åº”Mapperæ¥å£çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åä¸æ˜ å°„æ–‡ä»¶ä¸­æ“ä½œçš„idç›¸åŒï¼Œå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ä¸æ“ä½œä¸­çš„parameterTypeå’ŒresultTypeç›¸åŒ</p><p>SQLè°ƒç”¨çš„æ—¶å€™é€šè¿‡æ¥å£è°ƒç”¨ï¼Œè€Œä¸ç”¨å†æŒ‡å‡ºæ“ä½œçš„id</p><h3 id="11-MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹"><a href="#11-MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹" class="headerlink" title="11.MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹"></a>11.MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹</h3><p>mybatis-config.xmlä½œä¸ºMyBatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®äº†MyBatisçš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ã€‚<br>MyBatisé…ç½®XMLæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span><span class="comment">&lt;!-- é…ç½®--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">properties</span>/&gt;</span><span class="comment">&lt;!-- å±æ€§--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">settings</span>/&gt;</span><span class="comment">&lt;!--è®¾ç½®--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>/&gt;</span><span class="comment">&lt;!-- ç±»å‹å‘½å--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">typeHandlers</span>/&gt;</span> <span class="comment">&lt;!--ç±»å‹å¤„ç†å™¨--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">objectFactory</span>/&gt;</span>  &lt;!â€“ å¯¹è±¡å·¥å‚ --&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">plugings</span>/&gt;</span>  <span class="comment">&lt;!--æ’ä»¶ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span>&gt;</span> <span class="comment">&lt;!--é…ç½®ç¯å¢ƒ--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span>&gt;</span> <span class="comment">&lt;!--ç¯å¢ƒå˜é‡--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span>/&gt;</span><span class="comment">&lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span>/&gt;</span> <span class="comment">&lt;!--æ•°æ®æº--&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">databaseIdProvider</span>/&gt;</span><span class="comment">&lt;!--æ•°æ®åº“å‚å•†æ ‡è¯†--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>/&gt;</span> <span class="comment">&lt;!--æ˜ å°„å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›å±‚æ¬¡æ˜¯ä¸èƒ½å¤Ÿé¢ å€’é¡ºåºçš„ï¼Œå¦‚æœé¢ å€’é¡ºåºï¼ŒMyBatisåœ¨è§£æXMLæ–‡ä»¶çš„æ—¶å€™å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">     <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Customer&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Customer&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Course&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Course&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.QuickManual&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;QuickManual&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!-- ?useUnicode=true&amp;amp;characterEncoding=utf8ä¸ºäº†æ”¯æŒä¸­æ–‡æ•°æ®çš„å†™å…¥ --&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CustomerMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CourseMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/QuickManualMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€MyBatis&quot;&gt;&lt;a href=&quot;#ä¸€ã€MyBatis&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€MyBatis&quot;&gt;&lt;/a&gt;ä¸€ã€MyBatis&lt;/h2&gt;&lt;h3 id=&quot;1-MyBatisï¼š&quot;&gt;&lt;a href=&quot;#1-MyBatisï¼š&quot; cla</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Mybatis" scheme="https://dont-sleep-so-late.github.io/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°</title>
    <link href="https://dont-sleep-so-late.github.io/2023/11/13/spring/SpringMVC/"/>
    <id>https://dont-sleep-so-late.github.io/2023/11/13/spring/SpringMVC/</id>
    <published>2023-11-13T15:00:34.000Z</published>
    <updated>2023-11-14T13:04:01.848Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Springæ¡†æ¶"><a href="#ä¸€ã€Springæ¡†æ¶" class="headerlink" title="ä¸€ã€Springæ¡†æ¶"></a>ä¸€ã€Springæ¡†æ¶</h2><h3 id="1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š"><a href="#1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š" class="headerlink" title="1.å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š"></a>1.å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š</h3><p>Struts1<br>Web work<br>Struts2<br>Spring MVC</p><p>Spring MVCæ˜¯Springæä¾›çš„ä¸€ä¸ªå®ç°äº†Web MVCè®¾è®¡æ¨¡å¼çš„è½»é‡çº§Webæ¡†æ¶ã€‚é‡‡ç”¨å·¥å‚æ¨¡å¼ã€‚å®ƒä¸Struts2æ¡†æ¶ä¸€æ ·ï¼Œéƒ½å±äºMVCæ¡†æ¶ï¼Œä½†å…¶ä½¿ç”¨å’Œæ€§èƒ½ç­‰æ–¹é¢æ¯”Struts2æ›´åŠ ä¼˜å¼‚ã€‚SpringMVCé¡¹ç›®ä¸­å¿…é¡»æ·»åŠ çš„JARåŒ…åŒ…æ‹¬ï¼š4ä¸ªæ ¸å¿ƒJARåŒ…ã€commons-loggingçš„JARä»¥åŠä¸¤ä¸ªwebç›¸å…³çš„JARï¼ˆspring-webå’Œspring-webmvcçš„JARåŒ…ï¼‰ã€‚</p><h3 id="2-Spring-MVCçš„ç‰¹ç‚¹ã€‚"><a href="#2-Spring-MVCçš„ç‰¹ç‚¹ã€‚" class="headerlink" title="2.Spring MVCçš„ç‰¹ç‚¹ã€‚"></a>2.Spring MVCçš„ç‰¹ç‚¹ã€‚</h3><p>ï¼ˆ1ï¼‰ æ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨Springæ‰€æä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚<br>ï¼ˆ2ï¼‰ çµæ´»æ€§å¼ºï¼Œæ˜“äºä¸å…¶ä»–æ¡†æ¶é›†æˆã€‚<br>ï¼ˆ3ï¼‰ æä¾›äº†ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼Œä½¿å¼€å‘äººå‘˜æ— éœ€é¢å¤–å¼€å‘æ§åˆ¶å™¨å¯¹è±¡ã€‚<br>ï¼ˆ4ï¼‰ å¯è‡ªåŠ¨ç»‘å®šç”¨æˆ·è¾“å…¥ï¼Œå¹¶èƒ½æ­£ç¡®çš„è½¬æ¢æ•°æ®ç±»å‹ã€‚<br>ï¼ˆ5ï¼‰ å†…ç½®äº†å¸¸è§çš„æ ¡éªŒå™¨ï¼Œå¯ä»¥æ ¡éªŒç”¨æˆ·è¾“å…¥ã€‚å¦‚æœæ ¡éªŒä¸èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆå°±ä¼šé‡å®šå‘åˆ°è¾“å…¥è¡¨å•ã€‚<br>ï¼ˆ6ï¼‰ æ”¯æŒå›½é™…åŒ–ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ·åŒºåŸŸæ˜¾ç¤ºå¤šå›½è¯­è¨€ã€‚</p><h3 id="3-Spring-MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š"><a href="#3-Spring-MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š" class="headerlink" title="3.Spring MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š"></a>3.Spring MVCä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</h3><p>ï¼ˆ1ï¼‰æ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ©ç”¨Springæ‰€æä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚<br>ï¼ˆ2ï¼‰çµæ´»æ€§å¼ºï¼Œæ˜“äºä¸å…¶ä»–æ¡†æ¶é›†æˆã€‚<br>ï¼ˆ3ï¼‰æä¾›äº†ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼Œä½¿å¼€å‘äººå‘˜æ— éœ€é¢å¤–å¼€å‘æ§åˆ¶å™¨å¯¹è±¡ã€‚<br>ï¼ˆ4ï¼‰å¯è‡ªåŠ¨ç»‘å®šç”¨æˆ·è¾“å…¥ï¼Œå¹¶èƒ½æ­£ç¡®çš„è½¬æ¢æ•°æ®ç±»å‹ã€‚<br>ï¼ˆ5ï¼‰å†…ç½®äº†å¸¸è§çš„æ ¡éªŒå™¨ï¼Œå¯ä»¥æ ¡éªŒç”¨æˆ·è¾“å…¥ã€‚å¦‚æœæ ¡éªŒä¸èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆå°±ä¼šé‡å®šå‘åˆ°è¾“å…¥è¡¨å•ã€‚<br>ï¼ˆ6ï¼‰æ”¯æŒå›½é™…åŒ–ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ·åŒºåŸŸæ˜¾ç¤ºå¤šå›½è¯­è¨€ã€‚<br>ï¼ˆ7ï¼‰æ”¯æŒå¤šç§è§†å›¾æŠ€æœ¯ã€‚å®ƒæ”¯æŒJSPã€Velocityå’ŒFreeMarkerç­‰è§†å›¾æŠ€æœ¯ã€‚<br>ï¼ˆ8ï¼‰ä½¿ç”¨åŸºäºXMLçš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘åï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åºã€‚</p><h3 id="4-Spring-MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š"><a href="#4-Spring-MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š" class="headerlink" title="4.Spring MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š"></a>4.Spring MVCæ¡†æ¶çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</h3><p>ï¼ˆ1ï¼‰ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚ä¼šè¢«Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletæ‰€æ‹¦æˆªã€‚<br>ï¼ˆ2ï¼‰DispatcherServletæ‹¦æˆªåˆ°è¯·æ±‚åï¼Œä¼šè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚<br>ï¼ˆ3ï¼‰å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚URLæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨ï¼ˆå¦‚æœæœ‰åˆ™ç”Ÿæˆï¼‰ä¸€å¹¶è¿”å›ç»™DispatcherServlet ã€‚<br>ï¼ˆ4ï¼‰DispatcherServletä¼šé€šè¿‡è¿”å›ä¿¡æ¯é€‰æ‹©åˆé€‚çš„HandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰ã€‚<br>ï¼ˆ5ï¼‰HandlerAdapterä¼šè°ƒç”¨å¹¶æ‰§è¡ŒHandlerï¼ˆå¤„ç†å™¨ï¼‰ï¼Œè¿™é‡Œçš„å¤„ç†å™¨æŒ‡çš„å°±æ˜¯ç¨‹åºä¸­ç¼–å†™çš„Controllerç±»ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºåç«¯æ§åˆ¶å™¨ã€‚<br>ï¼ˆ6ï¼‰Controlleræ‰§è¡Œå®Œæˆåï¼Œä¼šè¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­ä¼šåŒ…å«è§†å›¾åæˆ–åŒ…å«æ¨¡å‹å’Œè§†å›¾åã€‚<br>ï¼ˆ7ï¼‰HandlerAdapterå°†ModelAndViewå¯¹è±¡è¿”å›ç»™DispatcherServlet ã€‚<br>ï¼ˆ8ï¼‰DispatcherServletä¼šæ ¹æ®ModelAndViewå¯¹è±¡é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ViewResloverï¼ˆè§†å›¾è§£æå™¨ï¼‰ã€‚<br>ï¼ˆ9ï¼‰ViewResloverè§£æåï¼Œä¼šå‘DispatcherServletä¸­è¿”å›å…·ä½“çš„Viewï¼ˆè§†å›¾ï¼‰ã€‚<br>ï¼ˆ10ï¼‰DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚<br>ï¼ˆ11ï¼‰è§†å›¾æ¸²æŸ“ç»“æœä¼šè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨æ˜¾ç¤ºã€‚</p><h3 id="5-åœ¨web-xmlä¸­ï¼Œé…ç½®Spring-MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet"><a href="#5-åœ¨web-xmlä¸­ï¼Œé…ç½®Spring-MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet" class="headerlink" title="5.åœ¨web.xmlä¸­ï¼Œé…ç½®Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet"></a>5.åœ¨web.xmlä¸­ï¼Œé…ç½®Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</h3><p><img src="https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/images/20231113230308.png"></p><p>å¦‚æœæ²¡æœ‰é€šè¿‡<init-param>å…ƒç´ é…ç½®ï¼Œåº”ç”¨ç¨‹åºä¼šé»˜è®¤åˆ°WEB-INFç›®å½•ä¸‹å¯»æ‰¾å¦‚ä¸‹æ–¹å¼å‘½åçš„é…ç½®æ–‡ä»¶ï¼šservletName-servlet.xmlã€‚servletNameæŒ‡çš„æ˜¯éƒ¨ç½²åœ¨web.xmlæ–‡ä»¶ä¸­çš„DispatcherServletçš„åç§°ï¼Œè€Œ-servlet.xmlæ˜¯é…ç½®æ–‡ä»¶åçš„å›ºå®šå†™æ³•ï¼Œå¦‚åœ¨WEB-INFä¸‹æŸ¥æ‰¾springmvc-servlet.xmlæ–‡ä»¶ã€‚</p><h3 id="6-æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹"><a href="#6-æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹" class="headerlink" title="6.æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹"></a>6.æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹</h3><p>ModelAndViewç±»å‹ä¸­å¯ä»¥æ·»åŠ Modelæ•°æ®ï¼Œå¹¶æŒ‡å®šè§†å›¾ï¼›Stringç±»å‹çš„è¿”å›å€¼å¯ä»¥è·³è½¬è§†å›¾ï¼Œä½†ä¸èƒ½æºå¸¦æ•°æ®ï¼›è€Œvoidç±»å‹ä¸»è¦åœ¨å¼‚æ­¥è¯·æ±‚æ—¶ä½¿ç”¨ï¼Œå®ƒåªè¿”å›æ•°æ®ï¼Œè€Œä¸ä¼šè·³è½¬è§†å›¾ã€‚</p><h3 id="7-Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š"><a href="#7-Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š" class="headerlink" title="7.@Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š"></a>7.@Controlleræ³¨è§£åœ¨ä½¿ç”¨æ—¶å¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š</h3><p>ï¼ˆ1ï¼‰åœ¨ç›¸åº”çš„ç±»ä¸Šæ ‡æ³¨@Controlleræ³¨è§£ã€‚<br>ï¼ˆ2ï¼‰åœ¨Spring MVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„æ‰«æé…ç½®ä¿¡æ¯ã€‚é¦–å…ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥contextåç§°ç©ºé—´çš„é…ç½®ï¼Œç„¶åä½¿ç”¨<code>&lt;context:component-scan&gt;</code>å…ƒç´ æŒ‡å®šéœ€è¦æ‰«æçš„ç±»åŒ…ã€‚</p><h3 id="8-SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š"><a href="#8-SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š" class="headerlink" title="8.SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š"></a>8.SpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼š</h3><p>åŸºäºSpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸»è¦æœ‰ï¼šHttpServletRequestã€HttpServletResponseã€HttpSessionã€Modelã€HttpMethodç­‰ï¼›<br>åŸºäºSpringMVCæ¡†æ¶ä¸‹è¯·æ±‚å¤„ç†æ–¹æ³•çš„è¿”å›ç±»å‹ä¸»è¦æœ‰ï¼šModelAndViewã€Mapã€Stringã€voidã€HttpEntity&lt;?&gt;ã€Viewç­‰ã€‚</p><h3 id="9-SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š"><a href="#9-SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š" class="headerlink" title="9.SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š"></a>9.SpringMVCä¸­è·å–è¾“å…¥å€¼çš„æ–¹å¼ä¸»è¦æœ‰ï¼š</h3><p>åœ¨actionçš„æ–¹æ³•ä¸­å†™ä¸è¯·æ±‚å‚æ•°åŒåçš„å˜é‡</p><p>åœ¨actionçš„æ–¹æ³•çš„å‚æ•°ä¸­ä½¿ç”¨HttpServletRequestã€HttpServletResponseã€HttpSessionã€Modelã€HttpMethodç­‰å¯¹è±¡</p><p>åœ¨æ–¹æ³•çš„å‚æ•°ä¸­ä½¿ç”¨@RequestParamæ³¨è§£</p><p>ç•Œé¢ä¸Šçš„è¾“å…¥ä¿¡æ¯æ˜¯æŸä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„ä¿¡æ¯ï¼Œåœ¨æ¥æ”¶çš„æ—¶å€™ç›´æ¥å°è£…ä¸ºè¯¥è‡ªå®šä¹‰å¯¹è±¡</p><p>æŠŠè¯·æ±‚å‚æ•°æ”¾åˆ°è¯·æ±‚è·¯å¾„ä¸­ï¼Œå³é‡‡ç”¨RESTfulé£æ ¼ã€‚</p><h3 id="10-SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š"><a href="#10-SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š" class="headerlink" title="10.SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š"></a>10.SpringMVCä¸­å¯¹ç”¨æˆ·çš„å“åº”æ–¹å¼ä¸»è¦æœ‰ï¼š</h3><p>è¿”å›ModelAndViewå¯¹è±¡ï¼Œå¦‚new ModelAndView(â€œstudentListâ€,model)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè§†å›¾ï¼Œç¬¬äºŒå‚æ•°è¡¨ç¤ºè§†å›¾ä¸­éœ€è¦çš„æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentUpdateView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">updateView</span><span class="params">(String id)</span>&#123;</span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.findById(id);</span><br><span class="line">Map&lt;String,Object&gt; model = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">model.put(<span class="string">&quot;student&quot;</span>,student);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;studentUpdate&quot;</span>,model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å±‚çš„æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºStringï¼Œåœ¨æ–¹æ³•ä¸­è¿”å›è¡¨ç¤ºè¾“å‡ºç•Œé¢çš„å­—ç¬¦ä¸²ï¼Œä¸ModelAndViewä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;studentAddView.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addView</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentAdd&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ä½¿ç”¨Stringè¡¨ç¤ºè¦è¿”å›çš„è§†å›¾ï¼Œä½¿ç”¨Modelè¡¨ç¤ºè¦è¿”å›çš„æ•°æ®ã€‚åœ¨è¯·æ±‚æ–¹æ³•çš„å‚æ•°ä¸­å®šä¹‰Modelå¯¹è±¡ï¼Œåœ¨è¯·æ±‚æ–¹æ³•ä½“ä¸­æŠŠæ•°æ®å­˜å‚¨åˆ°Modelå¯¹è±¡ä¸­å“åº”ç»™å‰ç«¯é¡µé¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/studentList.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">studentList</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">List&lt;Student&gt; students = studentService.getStudents();</span><br><span class="line">model.addAttribute(<span class="string">&quot;students&quot;</span>,students);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;studentList&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹è¿”å›JSONæ•°æ®ã€‚</p><h3 id="11-RequestParamæ³¨è§£"><a href="#11-RequestParamæ³¨è§£" class="headerlink" title="11.@RequestParamæ³¨è§£"></a>11.@RequestParamæ³¨è§£</h3><p>@RequestParamæ³¨è§£ä¸»è¦ç”¨äºå¯¹è¯·æ±‚ä¸­çš„å‚æ•°è¿›è¡Œå®šä¹‰ï¼Œå¤šç”¨äºåœ¨è¯·æ±‚å‚æ•°åä¸æ–¹æ³•å½¢å‚åä¸ä¸€è‡´æ—¶çš„å‚æ•°é—´æ¥ç»‘å®šã€‚åœ¨ä½¿ç”¨æ—¶å¯ä»¥æŒ‡å®šä»–çš„4ä¸ªå±æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰valueï¼šnameå±æ€§çš„åˆ«åï¼Œè¿™é‡ŒæŒ‡å‚æ•°çš„åå­—ï¼Œå³å…¥å‚çš„è¯·æ±‚å‚æ•°åå­—ï¼Œå¦‚æœåªä½¿ç”¨vauleå±æ€§ï¼Œåˆ™å¯ä»¥çœç•¥valueå±æ€§åã€‚<br>ï¼ˆ2ï¼‰nameï¼šç”¨äºæŒ‡å®šè¯·æ±‚å¤´ç»‘å®šçš„åç§°ã€‚<br>ï¼ˆ3ï¼‰required ï¼šç”¨äºæŒ‡å®šå‚æ•°æ˜¯å¦å¿…é¡»ï¼Œé»˜è®¤æ˜¯trueï¼Œè¡¨ç¤ºè¯·æ±‚ä¸­ä¸€å®šè¦æœ‰ç›¸åº”çš„å‚æ•°ã€‚<br>ï¼ˆ4ï¼‰defaultValueï¼šé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰åŒåå‚æ•°æ—¶çš„é»˜è®¤å€¼ã€‚</p><h3 id="12-åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶"><a href="#12-åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶" class="headerlink" title="12.åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶"></a>12.åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶</h3><p>åœ¨ä½¿ç”¨åŒ…è£…POJOç±»å‹æ•°æ®ç»‘å®šæ—¶ï¼Œå‰ç«¯è¯·æ±‚çš„å‚æ•°åç¼–å†™å¿…é¡»ç¬¦åˆä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š<br>ï¼ˆ1ï¼‰å¦‚æœæŸ¥è¯¢æ¡ä»¶å‚æ•°æ˜¯åŒ…è£…ç±»çš„ç›´æ¥åŸºæœ¬å±æ€§ï¼Œåˆ™å‚æ•°åç›´æ¥ç”¨å¯¹åº”çš„å±æ€§åï¼›<br>ï¼ˆ2ï¼‰å¦‚æœæŸ¥è¯¢æ¡ä»¶å‚æ•°æ˜¯åŒ…è£…ç±»ä¸­POJOçš„å­å±æ€§ï¼Œåˆ™å‚æ•°åå¿…é¡»ä¸ºâ€œå¯¹è±¡.å±æ€§â€ï¼Œå…¶ä¸­â€œå¯¹è±¡â€è¦å’ŒåŒ…è£…POJOä¸­çš„å¯¹è±¡å±æ€§åç§°ä¸€è‡´ï¼Œâ€œå±æ€§â€è¦å’ŒåŒ…è£…POJOä¸­çš„å¯¹è±¡å­å±æ€§ä¸€è‡´ã€‚</p><h3 id="13-JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£-RequestBodyå’Œ-ResponseBody"><a href="#13-JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£-RequestBodyå’Œ-ResponseBody" class="headerlink" title="13.JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBody"></a>13.JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBody</h3><p>JSONæ•°æ®äº¤äº’æ—¶ï¼Œä¸»è¦ä½¿ç”¨äº†ä¸¤ä¸ªæ³¨è§£@RequestBodyå’Œ@ResponseBodyã€‚å…¶ä¸­@RequestBodyç”¨äºå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ç»‘å®šåˆ°æ–¹æ³•çš„å½¢å‚ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶æ ‡å‡†åœ¨åœ¨æ–¹æ³•çš„å½¢å‚ä¸Šã€‚@ResponseBodyç”¨äºç›´æ¥è¿”å›returnå¯¹è±¡ã€‚Jacksonç”¨åˆ°çš„å¼€æºåŒ…çš„æœ‰ jackson-annoations-2.8.8.jarã€ jackson-core-2.8.8.jarã€jackson-databind-2.8.8.jarã€‚</p><h3 id="14-JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„"><a href="#14-JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„" class="headerlink" title="14.JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„"></a>14.JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„</h3><p>JSONå¯¹è±¡çš„æ•°ç»„ç»“æ„ä»¥ â€œ[â€ å¼€å§‹ï¼Œä»¥ â€œ]â€ ç»“æŸï¼Œå¯¹è±¡ç»“æ„ä»¥ â€œ{â€ å¼€å§‹ï¼Œä»¥ â€œ}â€ç»“æŸï¼ŒJSONå¯¹è±¡æ•°æ®ç»“æ„çš„ä¸­é—´éƒ¨åˆ†ç”±é”®å€¼å¯¹ï¼ˆkeyï¼švalueï¼‰ä»¥è‹±æ–‡ â€œ,â€ åˆ†éš”çš„å€¼çš„åˆ—è¡¨ç»„æˆã€‚å…³é”®å­—ï¼ˆkeyï¼‰å¿…é¡»ä¸ºStringç±»å‹ï¼Œå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯Stringã€Numberã€Objectã€Arrayç­‰æ•°æ®ç±»å‹ã€‚</p><h3 id="15-RESTful"><a href="#15-RESTful" class="headerlink" title="15.RESTful"></a>15.RESTful</h3><p>RESTfulä¹Ÿç§°ä¹‹ä¸ºRESTï¼Œæ˜¯è‹±æ–‡â€œRepresentational State Transferâ€çš„ç®€ç§°ã€‚RESTfulé£æ ¼åœ¨HTTPè¯·æ±‚ä¸­ï¼Œä½¿ç”¨putã€deleteã€postå’Œgetæ–¹å¼åˆ†åˆ«å¯¹åº”æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢çš„æ“ä½œã€‚</p><h3 id="16-PathVariable-â€œidâ€-æ³¨è§£"><a href="#16-PathVariable-â€œidâ€-æ³¨è§£" class="headerlink" title="16.@PathVariable(â€œidâ€)æ³¨è§£"></a>16.@PathVariable(â€œidâ€)æ³¨è§£</h3><p>@PathVariable(â€œidâ€)æ³¨è§£ç”¨äºæ¥æ”¶å¹¶ç»‘å®šè¯·æ±‚å‚æ•°ï¼Œå®ƒå¯ä»¥å°†URLè¯·æ±‚ä¸­çš„å˜é‡æ˜ å°„åˆ°è¯·æ±‚æ–¹æ³•çš„å½¢å‚ä¸Šã€‚<br>å¦‚æœè¯·æ±‚è·¯å¾„ä¸­çš„å‚æ•°åæ–¹æ³•å½¢å‚åç§°ä¸€æ ·ï¼Œåˆ™@PathVariableåé¢çš„ â€œ (â€œidâ€) â€ å¯ä»¥çœç•¥ã€‚</p><h3 id="17-Spring-MVCçš„æ–‡ä»¶ä¸Šä¼ "><a href="#17-Spring-MVCçš„æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="17.Spring MVCçš„æ–‡ä»¶ä¸Šä¼ "></a>17.Spring MVCçš„æ–‡ä»¶ä¸Šä¼ </h3><p>Spring MVCçš„æ–‡ä»¶ä¸Šä¼ æ˜¯é€šè¿‡MultipartResolverå¯¹è±¡å®ç°çš„ã€‚</p><p>æ–‡ä»¶ä¸Šä¼ è¡¨å•éœ€è¦æ»¡è¶³çš„3ä¸ªæ¡ä»¶å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰ formè¡¨å•çš„methodå±æ€§è®¾ç½®ä¸ºpostï¼›<br>ï¼ˆ2ï¼‰ formè¡¨å•çš„enctypeå±æ€§è®¾ç½®ä¸ºmultipart&#x2F;form-dataï¼›<br>ï¼ˆ3ï¼‰ æä¾›çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥æ¡†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;a href=&quot;#ä¸€ã€Springæ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Springæ¡†æ¶&quot;&gt;&lt;/a&gt;ä¸€ã€Springæ¡†æ¶&lt;/h2&gt;&lt;h3 id=&quot;1-å…¸å‹çš„Webå±‚æ¡†æ¶åŒ…æ‹¬ï¼š&quot;&gt;&lt;a href=&quot;#1-å…¸å‹çš„We</summary>
      
    
    
    
    <category term="åç«¯å¼€å‘" scheme="https://dont-sleep-so-late.github.io/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="Spring" scheme="https://dont-sleep-so-late.github.io/tags/Spring/"/>
    
  </entry>
  
</feed>
